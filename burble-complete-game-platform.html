<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Burble - Brain Teasers & Riddles Platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 15px 20px;
            border-radius: 16px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            color: #667eea;
            text-decoration: none;
            cursor: pointer;
        }

        .nav-buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .nav-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 20px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .nav-btn:hover,
        .nav-btn.active {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        /* Game Container */
        .game-container {
            background: white;
            border-radius: 16px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            padding: 40px;
            min-height: 600px;
        }

        /* Home Page Styles */
        .hero-section {
            text-align: center;
            margin-bottom: 40px;
        }

        .hero-title {
            font-size: 3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 15px;
        }

        .hero-subtitle {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 30px;
        }

        .user-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 40px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .stat-card {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.8rem;
            opacity: 0.9;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .game-card {
            background: #f8f9ff;
            border: 2px solid #e2e8f0;
            border-radius: 16px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .game-card:hover {
            border-color: #667eea;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.2);
        }

        .game-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .game-title {
            font-size: 1.3rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .game-description {
            color: #666;
            line-height: 1.5;
        }

        /* Common Game Styles */
        .game-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .game-title-main {
            font-size: 2.5rem;
            font-weight: 700;
            color: #333;
            margin-bottom: 10px;
        }

        .difficulty-selector,
        .category-selector {
            margin-bottom: 20px;
            text-align: center;
        }

        .selector-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 10px;
            display: block;
        }

        .selector-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .selector-btn {
            padding: 10px 20px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .selector-btn:hover,
        .selector-btn.active {
            background: #667eea;
            color: white;
            transform: translateY(-2px);
        }

        .game-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .info-card {
            background: #f8f9ff;
            padding: 15px;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
            text-align: center;
        }

        .info-label {
            font-size: 0.8rem;
            color: #64748b;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .info-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #1e293b;
            margin-top: 5px;
        }

        /* Input and Button Styles */
        .input-section {
            margin-bottom: 20px;
        }

        .game-input {
            width: 100%;
            padding: 15px;
            font-size: 1.1rem;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            text-align: center;
            font-weight: 600;
            transition: border-color 0.3s ease;
        }

        .game-input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .action-buttons {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            flex: 1;
            min-width: 120px;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #5a67d8;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        .btn-secondary {
            background: #f1f5f9;
            color: #475569;
            border: 2px solid #e2e8f0;
        }

        .btn-secondary:hover:not(:disabled) {
            background: #e2e8f0;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Feedback and Display Styles */
        .game-display {
            font-size: 2rem;
            font-weight: 700;
            color: #333;
            letter-spacing: 0.3em;
            margin: 30px 0;
            padding: 20px;
            background: #f8f9ff;
            border-radius: 12px;
            border: 2px solid #e2e8f0;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
        }

        .emoji-display {
            font-size: 3rem;
            line-height: 1.2;
        }

        .feedback {
            margin-top: 20px;
            padding: 15px;
            border-radius: 12px;
            font-weight: 600;
        }

        .feedback.correct {
            background: #d1fae5;
            color: #065f46;
            border: 2px solid #10b981;
        }

        .feedback.incorrect {
            background: #fef2f2;
            color: #991b1b;
            border: 2px solid #ef4444;
        }

        .feedback.hint {
            background: #fef3c7;
            color: #92400e;
            border: 2px solid #f59e0b;
        }

        .feedback.info {
            background: #dbeafe;
            color: #1e40af;
            border: 2px solid #3b82f6;
        }

        .game-over {
            margin-top: 30px;
            padding: 30px;
            background: #f8f9ff;
            border-radius: 16px;
            border: 2px solid #e2e8f0;
            text-align: center;
        }

        .game-over.win {
            background: #d1fae5;
            border-color: #10b981;
        }

        .game-over.lose {
            background: #fef2f2;
            border-color: #ef4444;
        }

        /* Trivia Specific Styles */
        .trivia-question {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .trivia-options {
            display: grid;
            gap: 10px;
            margin-bottom: 20px;
        }

        .trivia-option {
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            background: white;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: left;
        }

        .trivia-option:hover {
            border-color: #667eea;
            background: #f8f9ff;
        }

        .trivia-option.selected {
            border-color: #667eea;
            background: #667eea;
            color: white;
        }

        .trivia-option.correct {
            border-color: #10b981;
            background: #d1fae5;
            color: #065f46;
        }

        .trivia-option.incorrect {
            border-color: #ef4444;
            background: #fef2f2;
            color: #991b1b;
        }

        /* Twenty Questions Styles */
        .question-history {
            background: #f8f9ff;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .question-item {
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 8px;
            background: white;
            border-left: 4px solid #667eea;
        }

        .question-text {
            font-weight: 600;
            color: #333;
        }

        .answer-text {
            color: #666;
            font-style: italic;
        }

        /* Timer */
        .timer {
            font-family: 'Courier New', monospace;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .game-container {
                padding: 20px;
            }

            .hero-title {
                font-size: 2rem;
            }

            .game-title-main {
                font-size: 2rem;
            }

            .game-display {
                font-size: 1.5rem;
            }

            .games-grid {
                grid-template-columns: 1fr;
            }

            .action-buttons {
                flex-direction: column;
            }

            .nav-buttons {
                justify-content: center;
                width: 100%;
                margin-top: 10px;
            }

            .header {
                flex-direction: column;
                text-align: center;
            }
        }

        /* Hidden class */
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="logo" onclick="showPage('home')">üß© Burble</div>
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showPage('home')">Home</button>
                <button class="nav-btn" onclick="showPage('burble')">Burble</button>
                <button class="nav-btn" onclick="showPage('emoji')">Emoji Guess</button>
                <button class="nav-btn" onclick="showPage('valentine')">Twenty Questions</button>
                <button class="nav-btn" onclick="showPage('trivia')">Trivia</button>
                <button class="nav-btn" onclick="showPage('animal-trivia')">Animal Trivia</button>
            </div>
        </div>

        <!-- Home Page -->
        <div id="home-page" class="game-container">
            <div class="hero-section">
                <h1 class="hero-title">Brain Teasers & Riddles</h1>
                <p class="hero-subtitle">Challenge your mind with puzzles, riddles, and brain games</p>
                
                <!-- User Stats -->
                <div class="user-stats">
                    <div class="stat-card">
                        <div class="stat-value" id="total-score">0</div>
                        <div class="stat-label">Total Score</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="games-played">0</div>
                        <div class="stat-label">Games Played</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="games-won">0</div>
                        <div class="stat-label">Games Won</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="win-rate">0%</div>
                        <div class="stat-label">Win Rate</div>
                    </div>
                </div>
            </div>

            <!-- Games Grid -->
            <div class="games-grid">
                <div class="game-card" onclick="showPage('burble')">
                    <div class="game-icon">üìö</div>
                    <div class="game-title">Burble Word Game</div>
                    <div class="game-description">Word guessing with feedback and hints</div>
                </div>
                
                <div class="game-card" onclick="showPage('emoji')">
                    <div class="game-icon">üß©</div>
                    <div class="game-title">Emoji Guess</div>
                    <div class="game-description">Decode emoji combinations</div>
                </div>
                
                <div class="game-card" onclick="showPage('valentine')">
                    <div class="game-icon">üéØ</div>
                    <div class="game-title">Twenty Questions</div>
                    <div class="game-description">Yes/No question guessing game</div>
                </div>
                
                <div class="game-card" onclick="showPage('trivia')">
                    <div class="game-icon">üß†</div>
                    <div class="game-title">General Trivia</div>
                    <div class="game-description">Test your knowledge across various topics</div>
                </div>
                
                <div class="game-card" onclick="showPage('animal-trivia')">
                    <div class="game-icon">ü¶Å</div>
                    <div class="game-title">Animal Trivia</div>
                    <div class="game-description">Animal-focused quiz questions</div>
                </div>
            </div>
        </div>

        <!-- Burble Word Game -->
        <div id="burble-page" class="game-container hidden">
            <div class="game-header">
                <h1 class="game-title-main">üß© Burble Word Game</h1>
                
                <div class="difficulty-selector">
                    <span class="selector-label">Difficulty</span>
                    <div class="selector-buttons">
                        <button class="selector-btn" data-difficulty="easy">Easy (15 attempts)</button>
                        <button class="selector-btn active" data-difficulty="medium">Medium (10 attempts)</button>
                        <button class="selector-btn" data-difficulty="hard">Hard (5 attempts)</button>
                    </div>
                </div>

                <div class="category-selector">
                    <span class="selector-label">Category</span>
                    <div class="selector-buttons">
                        <button class="selector-btn active" data-category="Food">Food</button>
                        <button class="selector-btn" data-category="Animals">Animals</button>
                        <button class="selector-btn" data-category="Colors">Colors</button>
                        <button class="selector-btn" data-category="Cities">Cities</button>
                        <button class="selector-btn" data-category="Items">Items</button>
                        <button class="selector-btn" data-category="Sports">Sports</button>
                    </div>
                </div>
            </div>

            <div class="game-info">
                <div class="info-card">
                    <div class="info-label">Attempts</div>
                    <div class="info-value" id="burble-attempts">0/10</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Category</div>
                    <div class="info-value" id="burble-category">Food</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Time</div>
                    <div class="info-value timer" id="burble-timer">00:00</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Score</div>
                    <div class="info-value" id="burble-score">0</div>
                </div>
            </div>

            <div class="game-display" id="burble-display">Click "New Game" to start!</div>

            <div class="input-section">
                <input type="text" class="game-input" id="burble-input" placeholder="Enter your guess..." maxlength="20" disabled>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" id="burble-submit" disabled>Submit Guess</button>
                <button class="btn btn-secondary" id="burble-hint" disabled>Get Hint</button>
                <button class="btn btn-secondary" id="burble-new-game">New Game</button>
            </div>

            <div id="burble-feedback"></div>
            <div id="burble-game-over"></div>
        </div>

        <!-- Emoji Guess Game -->
        <div id="emoji-page" class="game-container hidden">
            <div class="game-header">
                <h1 class="game-title-main">üß© Emoji Guess</h1>
                
                <div class="difficulty-selector">
                    <span class="selector-label">Difficulty</span>
                    <div class="selector-buttons">
                        <button class="selector-btn" data-difficulty="easy">Easy</button>
                        <button class="selector-btn active" data-difficulty="medium">Medium</button>
                        <button class="selector-btn" data-difficulty="hard">Hard</button>
                    </div>
                </div>

                <div class="category-selector">
                    <span class="selector-label">Category</span>
                    <div class="selector-buttons">
                        <button class="selector-btn active" data-category="all">All</button>
                        <button class="selector-btn" data-category="movies">Movies</button>
                        <button class="selector-btn" data-category="foods">Foods</button>
                        <button class="selector-btn" data-category="animals">Animals</button>
                        <button class="selector-btn" data-category="items">Items</button>
                    </div>
                </div>
            </div>

            <div class="game-info">
                <div class="info-card">
                    <div class="info-label">Score</div>
                    <div class="info-value" id="emoji-score">0</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Hints Used</div>
                    <div class="info-value" id="emoji-hints">0</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Category</div>
                    <div class="info-value" id="emoji-category">All</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Difficulty</div>
                    <div class="info-value" id="emoji-difficulty">Medium</div>
                </div>
            </div>

            <div class="game-display emoji-display" id="emoji-display">Click "New Puzzle" to start!</div>

            <div class="input-section">
                <input type="text" class="game-input" id="emoji-input" placeholder="What does this emoji combination represent?" disabled>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" id="emoji-submit" disabled>Submit Answer</button>
                <button class="btn btn-secondary" id="emoji-hint" disabled>Get Hint (-5 points)</button>
                <button class="btn btn-secondary" id="emoji-new-puzzle">New Puzzle</button>
            </div>

            <div id="emoji-feedback"></div>
            <div id="emoji-game-over"></div>
        </div>

        <!-- Twenty Questions Game -->
        <div id="valentine-page" class="game-container hidden">
            <div class="game-header">
                <h1 class="game-title-main">üéØ Twenty Questions</h1>
                
                <div class="difficulty-selector">
                    <span class="selector-label">Difficulty</span>
                    <div class="selector-buttons">
                        <button class="selector-btn" data-difficulty="easy">Easy (8 questions)</button>
                        <button class="selector-btn active" data-difficulty="medium">Medium (6 questions)</button>
                        <button class="selector-btn" data-difficulty="hard">Hard (4 questions)</button>
                    </div>
                </div>

                <div class="category-selector">
                    <span class="selector-label">Category</span>
                    <div class="selector-buttons">
                        <button class="selector-btn active" data-category="movies">Movies</button>
                        <button class="selector-btn" data-category="animals">Animals</button>
                        <button class="selector-btn" data-category="places">Places</button>
                        <button class="selector-btn" data-category="objects">Objects</button>
                    </div>
                </div>
            </div>

            <div class="game-info">
                <div class="info-card">
                    <div class="info-label">Questions Left</div>
                    <div class="info-value" id="valentine-questions">6</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Guesses Left</div>
                    <div class="info-value" id="valentine-guesses">3</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Category</div>
                    <div class="info-value" id="valentine-category">Movies</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Score</div>
                    <div class="info-value" id="valentine-score">0</div>
                </div>
            </div>

            <div class="question-history" id="valentine-history">
                <p style="text-align: center; color: #666;">Ask yes/no questions to figure out what I'm thinking of!</p>
            </div>

            <div class="input-section">
                <input type="text" class="game-input" id="valentine-question" placeholder="Ask a yes/no question..." disabled>
            </div>

            <div class="action-buttons">
                <button class="btn btn-primary" id="valentine-ask" disabled>Ask Question</button>
                <button class="btn btn-secondary" id="valentine-guess" disabled>Make Guess</button>
                <button class="btn btn-secondary" id="valentine-new-game">New Game</button>
            </div>

            <div id="valentine-feedback"></div>
            <div id="valentine-game-over"></div>
        </div>

        <!-- General Trivia Game -->
        <div id="trivia-page" class="game-container hidden">
            <div class="game-header">
                <h1 class="game-title-main">üß† General Trivia</h1>
                
                <div class="difficulty-selector">
                    <span class="selector-label">Difficulty</span>
                    <div class="selector-buttons">
                        <button class="selector-btn" data-difficulty="easy">Easy</button>
                        <button class="selector-btn active" data-difficulty="medium">Medium</button>
                        <button class="selector-btn" data-difficulty="hard">Hard</button>
                    </div>
                </div>
            </div>

            <div class="game-info">
                <div class="info-card">
                    <div class="info-label">Question</div>
                    <div class="info-value" id="trivia-question-num">0/10</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Correct</div>
                    <div class="info-value" id="trivia-correct">0</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Score</div>
                    <div class="info-value" id="trivia-score">0</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Time</div>
                    <div class="info-value timer" id="trivia-timer">00:00</div>
                </div>
            </div>

            <div class="trivia-question" id="trivia-question-text">Click "Start Quiz" to begin!</div>

            <div class="trivia-options" id="trivia-options"></div>

            <div class="action-buttons">
                <button class="btn btn-primary" id="trivia-submit" disabled>Submit Answer</button>
                <button class="btn btn-secondary" id="trivia-next" disabled>Next Question</button>
                <button class="btn btn-secondary" id="trivia-start">Start Quiz</button>
            </div>

            <div id="trivia-feedback"></div>
            <div id="trivia-game-over"></div>
        </div>

        <!-- Animal Trivia Game -->
        <div id="animal-trivia-page" class="game-container hidden">
            <div class="game-header">
                <h1 class="game-title-main">ü¶Å Animal Trivia</h1>
                
                <div class="difficulty-selector">
                    <span class="selector-label">Difficulty</span>
                    <div class="selector-buttons">
                        <button class="selector-btn" data-difficulty="easy">Easy</button>
                        <button class="selector-btn active" data-difficulty="medium">Medium</button>
                        <button class="selector-btn" data-difficulty="hard">Hard</button>
                    </div>
                </div>
            </div>

            <div class="game-info">
                <div class="info-card">
                    <div class="info-label">Question</div>
                    <div class="info-value" id="animal-question-num">0/15</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Correct</div>
                    <div class="info-value" id="animal-correct">0</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Score</div>
                    <div class="info-value" id="animal-score">0</div>
                </div>
                <div class="info-card">
                    <div class="info-label">Time</div>
                    <div class="info-value timer" id="animal-timer">00:00</div>
                </div>
            </div>

            <div class="trivia-question" id="animal-question-text">Click "Start Quiz" to begin!</div>

            <div class="trivia-options" id="animal-options"></div>

            <div class="action-buttons">
                <button class="btn btn-primary" id="animal-submit" disabled>Submit Answer</button>
                <button class="btn btn-secondary" id="animal-next" disabled>Next Question</button>
                <button class="btn btn-secondary" id="animal-start">Start Quiz</button>
            </div>

            <div id="animal-feedback"></div>
            <div id="animal-game-over"></div>
        </div>
    </div>

    <script>
        // Global game state
        const gameState = {
            currentPage: 'home',
            userStats: {
                totalScore: 0,
                gamesPlayed: 0,
                gamesWon: 0
            },
            burble: {
                difficulty: 'medium',
                category: 'Food',
                currentWord: '',
                attempts: 0,
                maxAttempts: 10,
                score: 0,
                gameActive: false,
                startTime: null,
                timerInterval: null,
                hintsUsed: 0
            },
            emoji: {
                difficulty: 'medium',
                category: 'all',
                currentPuzzle: null,
                score: 0,
                hintsUsed: 0,
                gameActive: false
            },
            valentine: {
                difficulty: 'medium',
                category: 'movies',
                currentAnswer: '',
                questionsLeft: 6,
                guessesLeft: 3,
                score: 0,
                gameActive: false,
                questions: [],
                answers: []
            },
            trivia: {
                difficulty: 'medium',
                currentQuestion: 0,
                totalQuestions: 10,
                correctAnswers: 0,
                score: 0,
                gameActive: false,
                startTime: null,
                timerInterval: null,
                selectedAnswer: null
            },
            animalTrivia: {
                difficulty: 'medium',
                currentQuestion: 0,
                totalQuestions: 15,
                correctAnswers: 0,
                score: 0,
                gameActive: false,
                startTime: null,
                timerInterval: null,
                selectedAnswer: null
            }
        };

        // Word categories for Burble game
        const wordCategories = {
            Food: {
                4: ['cake', 'taco', 'rice', 'soup', 'bean', 'fish', 'pear', 'plum'],
                5: ['pizza', 'apple', 'salad', 'pasta', 'fruit', 'onion', 'bread', 'steak'],
                6: ['burger', 'cheese', 'cookie', 'banana', 'orange', 'tomato', 'potato'],
                7: ['avocado', 'chicken', 'pancake', 'almond', 'noodles', 'sausage'],
                8: ['broccoli', 'mushroom', 'sandwich', 'blueberry', 'eggplant', 'pineapple']
            },
            Animals: {
                4: ['frog', 'wolf', 'bear', 'deer', 'bird', 'fish', 'lion', 'duck'],
                5: ['tiger', 'sheep', 'snake', 'mouse', 'panda', 'koala', 'horse'],
                6: ['turtle', 'giraffe', 'monkey', 'beaver', 'weasel', 'rabbit'],
                7: ['dolphin', 'penguin', 'octopus', 'raccoon', 'leopard', 'buffalo'],
                8: ['elephant', 'hedgehog', 'flamingo', 'kangaroo', 'scorpion', 'crocodile']
            },
            Colors: {
                4: ['blue', 'pink', 'gold', 'gray', 'teal', 'cyan'],
                5: ['green', 'brown', 'black', 'white', 'amber', 'azure'],
                6: ['purple', 'silver', 'indigo', 'maroon', 'ochre', 'orange'],
                7: ['crimson', 'magenta', 'cerulean', 'lavender', 'turquoise'],
                8: ['burgundy', 'periwinkle', 'sapphire', 'platinum', 'marigold']
            },
            Cities: {
                4: ['rome', 'oslo', 'bali', 'lima', 'york', 'lyon', 'riga', 'kiev'],
                5: ['tokyo', 'paris', 'miami', 'delhi', 'dubai', 'seoul', 'cairo'],
                6: ['london', 'berlin', 'moscow', 'madrid', 'munich', 'sydney'],
                7: ['beijing', 'chicago', 'toronto', 'atlanta', 'houston', 'phoenix'],
                8: ['shanghai', 'istanbul', 'budapest', 'montreal', 'florence', 'helsinki']
            },
            Items: {
                4: ['fork', 'lamp', 'book', 'ring', 'desk', 'mask', 'pen', 'phone', 'shoe'],
                5: ['table', 'chair', 'clock', 'brush', 'phone', 'purse', 'scarf', 'watch'],
                6: ['mirror', 'pillow', 'remote', 'candle', 'wallet', 'hammer', 'laptop'],
                7: ['charger', 'suitcase', 'backpack', 'earbuds', 'cushion', 'toaster'],
                8: ['scissors', 'notebook', 'umbrella', 'keyboard', 'television', 'bookshelf']
            },
            Sports: {
                4: ['golf', 'swim', 'bike', 'surf', 'bowl', 'judo', 'dive', 'ski'],
                5: ['chess', 'rugby', 'skate', 'climb', 'kayak', 'dance', 'jog', 'cycle'],
                6: ['soccer', 'hockey', 'tennis', 'boxing', 'rowing', 'hiking', 'racing'],
                7: ['archery', 'bowling', 'cricket', 'fencing', 'jogging', 'baseball'],
                8: ['football', 'basketball', 'wrestling', 'athletics', 'marathon', 'swimming']
            }
        };

        // Emoji puzzles
        const emojiPuzzles = {
            movies: [
                { emoji: 'ü¶Åüëë', answer: 'The Lion King', hint: 'Disney movie about a young lion prince' },
                { emoji: 'üêüüîç', answer: 'Finding Nemo', hint: 'Pixar movie about a lost clownfish' },
                { emoji: '‚ùÑÔ∏èüë∏', answer: 'Frozen', hint: 'Disney movie with "Let It Go"' },
                { emoji: 'üï∑Ô∏èüë®', answer: 'Spider-Man', hint: 'Marvel superhero with web-slinging abilities' },
                { emoji: 'ü¶áüë®', answer: 'Batman', hint: 'Dark Knight of Gotham City' },
                { emoji: 'üè∞üë∏üíé', answer: 'Cinderella', hint: 'Fairy tale about a glass slipper' },
                { emoji: 'üåäüö¢üíî', answer: 'Titanic', hint: 'Epic romance on an ill-fated ship' },
                { emoji: 'üçïüè†üêÄ', answer: 'Ratatouille', hint: 'Pixar movie about a cooking rat' }
            ],
            foods: [
                { emoji: 'üçûü•úüçá', answer: 'Peanut Butter and Jelly', hint: 'Classic sandwich combination' },
                { emoji: 'üçùüßÑüåø', answer: 'Spaghetti', hint: 'Long pasta often served with sauce' },
                { emoji: 'üåÆüå∂Ô∏èü•©', answer: 'Spicy Beef Taco', hint: 'Mexican dish with seasoned meat' },
                { emoji: 'üçïüßÄüçÑ', answer: 'Mushroom Pizza', hint: 'Italian dish with fungus topping' },
                { emoji: 'ü•óü•ïü•í', answer: 'Garden Salad', hint: 'Healthy mix of vegetables' },
                { emoji: 'üçîü•ìüßÄ', answer: 'Bacon Cheeseburger', hint: 'American fast food classic' },
                { emoji: 'üç∞üçìüéÇ', answer: 'Strawberry Cake', hint: 'Sweet dessert with berries' },
                { emoji: 'ü•™ü•¨üçÖ', answer: 'BLT Sandwich', hint: 'Bacon, lettuce, and tomato' }
            ],
            animals: [
                { emoji: 'üêòüëÇüêæ', answer: 'Elephant', hint: 'Largest land mammal with big ears' },
                { emoji: 'ü¶íüìèüå≥', answer: 'Giraffe', hint: 'Tallest animal in the world' },
                { emoji: 'üêß‚ùÑÔ∏èüêü', answer: 'Penguin', hint: 'Flightless bird that loves fish' },
                { emoji: 'üê®üåøüá¶üá∫', answer: 'Koala', hint: 'Australian marsupial that eats eucalyptus' },
                { emoji: 'ü¶Åüó£Ô∏èüëë', answer: 'Lion', hint: 'King of the jungle with a mighty roar' },
                { emoji: 'üêÖüü†‚ö´', answer: 'Tiger', hint: 'Large cat with distinctive stripes' },
                { emoji: 'üêº‚ö´‚ö™', answer: 'Panda', hint: 'Black and white bear from China' },
                { emoji: 'ü¶òü•äüá¶üá∫', answer: 'Kangaroo', hint: 'Hopping marsupial from Australia' }
            ],
            items: [
                { emoji: 'üì±üìûüí¨', answer: 'Smartphone', hint: 'Modern communication device' },
                { emoji: 'üíª‚å®Ô∏èüñ±Ô∏è', answer: 'Computer', hint: 'Electronic device for work and entertainment' },
                { emoji: 'üîëüö™üè†', answer: 'House Key', hint: 'Metal object that opens doors' },
                { emoji: '‚åö‚è∞üëã', answer: 'Watch', hint: 'Timepiece worn on the wrist' },
                { emoji: 'üëìüëÅÔ∏èüìñ', answer: 'Reading Glasses', hint: 'Eyewear for better vision' },
                { emoji: 'üéßüéµüëÇ', answer: 'Headphones', hint: 'Audio device worn over ears' },
                { emoji: 'üì∑üì∏üñºÔ∏è', answer: 'Camera', hint: 'Device for taking pictures' },
                { emoji: '‚òÇÔ∏è‚òîüåßÔ∏è', answer: 'Umbrella', hint: 'Protection from rain and sun' }
            ]
        };

        // Twenty Questions answers by category
        const valentineAnswers = {
            movies: [
                { answer: 'Avatar', category: 'Movies' },
                { answer: 'Titanic', category: 'Movies' },
                { answer: 'Star Wars', category: 'Movies' },
                { answer: 'The Lion King', category: 'Movies' },
                { answer: 'Jurassic Park', category: 'Movies' },
                { answer: 'Finding Nemo', category: 'Movies' },
                { answer: 'Frozen', category: 'Movies' },
                { answer: 'The Avengers', category: 'Movies' }
            ],
            animals: [
                { answer: 'Elephant', category: 'Animals' },
                { answer: 'Giraffe', category: 'Animals' },
                { answer: 'Penguin', category: 'Animals' },
                { answer: 'Lion', category: 'Animals' },
                { answer: 'Dolphin', category: 'Animals' },
                { answer: 'Koala', category: 'Animals' },
                { answer: 'Tiger', category: 'Animals' },
                { answer: 'Kangaroo', category: 'Animals' }
            ],
            places: [
                { answer: 'Paris', category: 'Places' },
                { answer: 'Tokyo', category: 'Places' },
                { answer: 'New York', category: 'Places' },
                { answer: 'London', category: 'Places' },
                { answer: 'Sydney', category: 'Places' },
                { answer: 'Rome', category: 'Places' },
                { answer: 'Cairo', category: 'Places' },
                { answer: 'Dubai', category: 'Places' }
            ],
            objects: [
                { answer: 'Smartphone', category: 'Objects' },
                { answer: 'Television', category: 'Objects' },
                { answer: 'Bicycle', category: 'Objects' },
                { answer: 'Piano', category: 'Objects' },
                { answer: 'Camera', category: 'Objects' },
                { answer: 'Umbrella', category: 'Objects' },
                { answer: 'Guitar', category: 'Objects' },
                { answer: 'Laptop', category: 'Objects' }
            ]
        };

        // Trivia questions
        const triviaQuestions = {
            easy: [
                { question: "What is the capital of France?", options: ["London", "Berlin", "Paris", "Madrid"], correct: 2 },
                { question: "What color do you get by mixing red and yellow?", options: ["Purple", "Orange", "Green", "Blue"], correct: 1 },
                { question: "Which planet is known as the Red Planet?", options: ["Venus", "Mars", "Jupiter", "Saturn"], correct: 1 },
                { question: "How many continents are there?", options: ["Five", "Six", "Seven", "Eight"], correct: 2 },
                { question: "What is the largest ocean in the world?", options: ["Atlantic", "Pacific", "Indian", "Arctic"], correct: 1 },
                { question: "What is H2O commonly known as?", options: ["Salt", "Water", "Sugar", "Oil"], correct: 1 },
                { question: "How many sides does a triangle have?", options: ["Two", "Three", "Four", "Five"], correct: 1 },
                { question: "What is the tallest mammal in the world?", options: ["Elephant", "Giraffe", "Horse", "Rhino"], correct: 1 },
                { question: "Which Disney movie features the song 'Let It Go'?", options: ["Moana", "Frozen", "Tangled", "Brave"], correct: 1 },
                { question: "What do bees produce?", options: ["Milk", "Honey", "Cheese", "Butter"], correct: 1 }
            ],
            medium: [
                { question: "What is the smallest country in the world?", options: ["Monaco", "Vatican City", "San Marino", "Liechtenstein"], correct: 1 },
                { question: "Which element has the chemical symbol 'Au'?", options: ["Silver", "Gold", "Aluminum", "Argon"], correct: 1 },
                { question: "Who painted the Mona Lisa?", options: ["Van Gogh", "Picasso", "Da Vinci", "Monet"], correct: 2 },
                { question: "What is the longest river in the world?", options: ["Amazon", "Nile", "Yangtze", "Mississippi"], correct: 1 },
                { question: "Which organ in the human body produces insulin?", options: ["Liver", "Pancreas", "Kidney", "Heart"], correct: 1 },
                { question: "What is the currency of Japan?", options: ["Won", "Yuan", "Yen", "Rupee"], correct: 2 },
                { question: "Which planet is closest to the sun?", options: ["Venus", "Mercury", "Earth", "Mars"], correct: 1 },
                { question: "What is the square root of 144?", options: ["10", "11", "12", "13"], correct: 2 },
                { question: "Which country is known as the Land of the Rising Sun?", options: ["China", "Japan", "Korea", "Thailand"], correct: 1 },
                { question: "What gas makes up about 78% of Earth's atmosphere?", options: ["Oxygen", "Nitrogen", "Carbon Dioxide", "Argon"], correct: 1 }
            ],
            hard: [
                { question: "What is the hardest natural substance on Earth?", options: ["Gold", "Iron", "Diamond", "Platinum"], correct: 2 },
                { question: "Which scientist developed the theory of relativity?", options: ["Newton", "Einstein", "Hawking", "Curie"], correct: 1 },
                { question: "What is the smallest unit of matter?", options: ["Molecule", "Atom", "Neutron", "Electron"], correct: 1 },
                { question: "Which empire was ruled by Julius Caesar?", options: ["Greek", "Roman", "Byzantine", "Ottoman"], correct: 1 },
                { question: "What is the most abundant gas in the universe?", options: ["Oxygen", "Nitrogen", "Hydrogen", "Helium"], correct: 2 },
                { question: "Which bone is the longest in the human body?", options: ["Tibia", "Humerus", "Radius", "Femur"], correct: 3 },
                { question: "What is the capital of Australia?", options: ["Sydney", "Melbourne", "Canberra", "Perth"], correct: 2 },
                { question: "Which blood type is known as the universal donor?", options: ["A", "B", "AB", "O"], correct: 3 },
                { question: "What is the study of earthquakes called?", options: ["Geology", "Seismology", "Meteorology", "Oceanography"], correct: 1 },
                { question: "Which vitamin is produced when skin is exposed to sunlight?", options: ["Vitamin A", "Vitamin C", "Vitamin D", "Vitamin K"], correct: 2 }
            ]
        };

        // Animal trivia questions
        const animalTriviaQuestions = {
            easy: [
                { question: "What mammal has the most powerful bite in the world?", options: ["Lion", "Hippopotamus", "Grizzly bear"], correct: 1 },
                { question: "What is a male swan called?", options: ["Cob", "Gander", "Drake"], correct: 0 },
                { question: "What is the fastest land mammal?", options: ["Cheetah", "Lion", "Greyhound"], correct: 0 },
                { question: "Which animal's fingerprints are nearly identical to humans?", options: ["Gorilla", "Koala", "Chimpanzee"], correct: 1 },
                { question: "What is the only mammal capable of true sustained flight?", options: ["Bat", "Flying squirrel", "Hawk"], correct: 0 },
                { question: "How many legs do spiders have?", options: ["6", "8", "10"], correct: 1 },
                { question: "Which animal breathes through its skin?", options: ["Frog", "Snake", "Lizard"], correct: 0 },
                { question: "What is the largest living bird?", options: ["Eagle", "Ostrich", "Albatross"], correct: 1 },
                { question: "Which animal is known to have the most teeth?", options: ["Shark", "Crocodile", "Snail"], correct: 2 },
                { question: "What color is the polar bear's skin beneath its fur?", options: ["Black", "White", "Pink"], correct: 0 }
            ],
            medium: [
                { question: "What bird has the largest wingspan?", options: ["Andean condor", "Wandering albatross", "Bald eagle"], correct: 1 },
                { question: "How many eyes does a honeybee have?", options: ["2", "5", "8"], correct: 1 },
                { question: "How many degrees can an owl rotate its head?", options: ["180¬∞", "270¬∞", "360¬∞"], correct: 1 },
                { question: "What is the gestation period of an elephant?", options: ["12 months", "18 months", "22 months"], correct: 2 },
                { question: "Which animal has the longest lifespan?", options: ["Tortoise", "Whale", "Jellyfish"], correct: 2 },
                { question: "What is the smallest mammal in the world?", options: ["Shrew", "Bat", "Mouse"], correct: 1 },
                { question: "How many chambers does a cow's stomach have?", options: ["2", "3", "4"], correct: 2 },
                { question: "Which animal can change its color?", options: ["Octopus", "Chameleon", "Both"], correct: 2 },
                { question: "What is the loudest animal on Earth?", options: ["Lion", "Blue whale", "Howler monkey"], correct: 1 },
                { question: "Which animal sleeps standing up?", options: ["Giraffe", "Horse", "Both"], correct: 2 }
            ],
            hard: [
                { question: "What percentage of a jellyfish is water?", options: ["85%", "90%", "95%"], correct: 2 },
                { question: "How many species of animals are there approximately?", options: ["1 million", "8.7 million", "50 million"], correct: 1 },
                { question: "Which animal has the most complex brain relative to body size?", options: ["Dolphin", "Octopus", "Human"], correct: 1 },
                { question: "How fast can a cheetah run?", options: ["60 mph", "70 mph", "80 mph"], correct: 1 },
                { question: "What is the only bird that can fly backwards?", options: ["Hummingbird", "Kingfisher", "Woodpecker"], correct: 0 },
                { question: "How many hearts does an octopus have?", options: ["1", "2", "3"], correct: 2 },
                { question: "Which animal has the strongest bite force?", options: ["Saltwater crocodile", "Great white shark", "Hippo"], correct: 0 },
                { question: "What is the lifespan of a mayfly?", options: ["1 hour", "1 day", "1 week"], correct: 1 },
                { question: "Which animal can survive in space?", options: ["Tardigrade", "Cockroach", "Bacteria"], correct: 0 },
                { question: "How many bones does a shark have?", options: ["100", "50", "0"], correct: 2 }
            ]
        };

        // Navigation functions
        function showPage(pageName) {
            // Hide all pages
            document.querySelectorAll('.game-container').forEach(page => {
                page.classList.add('hidden');
            });

            // Show selected page
            document.getElementById(pageName + '-page').classList.remove('hidden');

            // Update navigation
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            gameState.currentPage = pageName;

            // Update stats if returning to home
            if (pageName === 'home') {
                updateUserStats();
            }
        }

        // User stats functions
        function updateUserStats() {
            document.getElementById('total-score').textContent = gameState.userStats.totalScore;
            document.getElementById('games-played').textContent = gameState.userStats.gamesPlayed;
            document.getElementById('games-won').textContent = gameState.userStats.gamesWon;
            
            const winRate = gameState.userStats.gamesPlayed > 0 
                ? Math.round((gameState.userStats.gamesWon / gameState.userStats.gamesPlayed) * 100)
                : 0;
            document.getElementById('win-rate').textContent = winRate + '%';
        }

        function addGameResult(won, score = 0) {
            gameState.userStats.gamesPlayed++;
            if (won) gameState.userStats.gamesWon++;
            gameState.userStats.totalScore += score;
            
            // Save to localStorage
            localStorage.setItem('burbleGameStats', JSON.stringify(gameState.userStats));
        }

        // Load stats from localStorage
        function loadUserStats() {
            const saved = localStorage.getItem('burbleGameStats');
            if (saved) {
                gameState.userStats = JSON.parse(saved);
                updateUserStats();
            }
        }

        // Utility functions
        function showFeedback(gameType, message, type) {
            const feedback = document.getElementById(gameType + '-feedback');
            feedback.innerHTML = `<div class="feedback ${type}">${message}</div>`;
        }

        function formatTime(seconds) {
            const mins = Math.floor(seconds / 60);
            const secs = seconds % 60;
            return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
        }

        function startTimer(gameType) {
            const game = gameState[gameType];
            game.startTime = Date.now();
            game.timerInterval = setInterval(() => {
                const elapsed = Math.floor((Date.now() - game.startTime) / 1000);
                document.getElementById(gameType + '-timer').textContent = formatTime(elapsed);
            }, 1000);
        }

        function stopTimer(gameType) {
            const game = gameState[gameType];
            if (game.timerInterval) {
                clearInterval(game.timerInterval);
                game.timerInterval = null;
            }
        }

        // BURBLE WORD GAME
        function initBurbleGame() {
            // Difficulty selectors
            document.querySelectorAll('#burble-page .selector-btn[data-difficulty]').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('#burble-page .selector-btn[data-difficulty]').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameState.burble.difficulty = btn.dataset.difficulty;
                    setBurbleMaxAttempts();
                    updateBurbleDisplay();
                });
            });

            // Category selectors
            document.querySelectorAll('#burble-page .selector-btn[data-category]').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('#burble-page .selector-btn[data-category]').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameState.burble.category = btn.dataset.category;
                    updateBurbleDisplay();
                });
            });

            // Game buttons
            document.getElementById('burble-new-game').addEventListener('click', startBurbleGame);
            document.getElementById('burble-submit').addEventListener('click', submitBurbleGuess);
            document.getElementById('burble-hint').addEventListener('click', getBurbleHint);

            // Input handling
            document.getElementById('burble-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && gameState.burble.gameActive) {
                    submitBurbleGuess();
                }
            });

            setBurbleMaxAttempts();
        }

        function setBurbleMaxAttempts() {
            switch (gameState.burble.difficulty) {
                case 'easy':
                    gameState.burble.maxAttempts = 15;
                    break;
                case 'medium':
                    gameState.burble.maxAttempts = 10;
                    break;
                case 'hard':
                    gameState.burble.maxAttempts = 5;
                    break;
            }
        }

        function startBurbleGame() {
            const burble = gameState.burble;
            
            // Reset game state
            burble.attempts = 0;
            burble.score = 0;
            burble.hintsUsed = 0;
            burble.gameActive = true;
            
            // Select random word
            const category = wordCategories[burble.category];
            const lengths = Object.keys(category);
            const randomLength = lengths[Math.floor(Math.random() * lengths.length)];
            const words = category[randomLength];
            burble.currentWord = words[Math.floor(Math.random() * words.length)];
            
            // Start timer
            startTimer('burble');
            
            // Enable inputs
            document.getElementById('burble-input').disabled = false;
            document.getElementById('burble-submit').disabled = false;
            document.getElementById('burble-hint').disabled = false;
            document.getElementById('burble-input').focus();
            
            updateBurbleDisplay();
            showFeedback('burble', 'Game started! Guess the word.', 'info');
        }

        function submitBurbleGuess() {
            if (!gameState.burble.gameActive) return;
            
            const guess = document.getElementById('burble-input').value.trim().toLowerCase();
            if (!guess) return;
            
            const burble = gameState.burble;
            burble.attempts++;
            
            if (guess === burble.currentWord) {
                handleBurbleWin();
            } else {
                handleBurbleIncorrect(guess);
            }
            
            document.getElementById('burble-input').value = '';
            updateBurbleDisplay();
        }

        function handleBurbleWin() {
            const burble = gameState.burble;
            burble.gameActive = false;
            stopTimer('burble');
            
            const elapsedTime = Math.floor((Date.now() - burble.startTime) / 1000);
            const timeBonus = Math.max(0, 300 - elapsedTime);
            const attemptBonus = Math.max(0, (burble.maxAttempts - burble.attempts) * 10);
            const hintPenalty = burble.hintsUsed * 25;
            burble.score = Math.max(0, 100 + timeBonus + attemptBonus - hintPenalty);
            
            addGameResult(true, burble.score);
            
            showFeedback('burble', `üéâ Correct! The word was "${burble.currentWord}"`, 'correct');
            
            document.getElementById('burble-game-over').innerHTML = `
                <div class="game-over win">
                    <h3>üéâ Congratulations!</h3>
                    <p>You guessed "${burble.currentWord}" correctly!</p>
                    <p><strong>Score:</strong> ${burble.score} points</p>
                    <p><strong>Time:</strong> ${formatTime(Math.floor((Date.now() - burble.startTime) / 1000))}</p>
                    <p><strong>Attempts:</strong> ${burble.attempts}/${burble.maxAttempts}</p>
                </div>
            `;
            
            disableBurbleInputs();
        }

        function handleBurbleIncorrect(guess) {
            const burble = gameState.burble;
            const feedback = generateBurbleFeedback(guess, burble.currentWord);
            
            showFeedback('burble', `‚ùå "${guess}" is incorrect. ${feedback}`, 'incorrect');
            
            if (burble.attempts >= burble.maxAttempts) {
                burble.gameActive = false;
                stopTimer('burble');
                addGameResult(false, 0);
                
                document.getElementById('burble-game-over').innerHTML = `
                    <div class="game-over lose">
                        <h3>üòî Game Over</h3>
                        <p>The word was: <strong>"${burble.currentWord}"</strong></p>
                        <p>Category: ${burble.category}</p>
                        <p>Better luck next time!</p>
                    </div>
                `;
                
                disableBurbleInputs();
            }
        }

        function generateBurbleFeedback(guess, targetWord) {
            if (guess.length !== targetWord.length) {
                return `Try a ${targetWord.length}-letter word.`;
            }
            
            let commonLetters = 0;
            for (let i = 0; i < Math.min(guess.length, targetWord.length); i++) {
                if (targetWord.includes(guess[i])) {
                    commonLetters++;
                }
            }
            
            if (commonLetters === 0) {
                return "No matching letters.";
            } else if (commonLetters === 1) {
                return "1 letter is in the word.";
            } else {
                return `${commonLetters} letters are in the word.`;
            }
        }

        function getBurbleHint() {
            if (!gameState.burble.gameActive) return;
            
            const burble = gameState.burble;
            burble.hintsUsed++;
            
            const hints = [
                `The word is ${burble.currentWord.length} letters long.`,
                `The word is in the ${burble.category} category.`,
                `The word starts with "${burble.currentWord[0]}".`,
                `The word ends with "${burble.currentWord[burble.currentWord.length - 1]}".`,
                `The second letter is "${burble.currentWord[1]}".`
            ];
            
            const hintIndex = Math.min(burble.hintsUsed - 1, hints.length - 1);
            showFeedback('burble', `üí° Hint ${burble.hintsUsed}: ${hints[hintIndex]} (-25 points)`, 'hint');
            
            updateBurbleDisplay();
        }

        function updateBurbleDisplay() {
            const burble = gameState.burble;
            
            document.getElementById('burble-attempts').textContent = `${burble.attempts}/${burble.maxAttempts}`;
            document.getElementById('burble-category').textContent = burble.category;
            document.getElementById('burble-score').textContent = burble.score;
            
            if (burble.currentWord && burble.gameActive) {
                document.getElementById('burble-display').textContent = '_ '.repeat(burble.currentWord.length).trim();
            } else if (burble.currentWord && !burble.gameActive) {
                document.getElementById('burble-display').textContent = burble.currentWord.toUpperCase();
            } else {
                document.getElementById('burble-display').textContent = 'Click "New Game" to start!';
            }
        }

        function disableBurbleInputs() {
            document.getElementById('burble-input').disabled = true;
            document.getElementById('burble-submit').disabled = true;
            document.getElementById('burble-hint').disabled = true;
        }

        // EMOJI GUESS GAME
        function initEmojiGame() {
            // Difficulty selectors
            document.querySelectorAll('#emoji-page .selector-btn[data-difficulty]').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('#emoji-page .selector-btn[data-difficulty]').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameState.emoji.difficulty = btn.dataset.difficulty;
                    updateEmojiDisplay();
                });
            });

            // Category selectors
            document.querySelectorAll('#emoji-page .selector-btn[data-category]').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('#emoji-page .selector-btn[data-category]').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameState.emoji.category = btn.dataset.category;
                    updateEmojiDisplay();
                });
            });

            // Game buttons
            document.getElementById('emoji-new-puzzle').addEventListener('click', startEmojiGame);
            document.getElementById('emoji-submit').addEventListener('click', submitEmojiAnswer);
            document.getElementById('emoji-hint').addEventListener('click', getEmojiHint);

            // Input handling
            document.getElementById('emoji-input').addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && gameState.emoji.gameActive) {
                    submitEmojiAnswer();
                }
            });
        }

        function startEmojiGame() {
            const emoji = gameState.emoji;
            
            // Get available puzzles
            let availablePuzzles = [];
            if (emoji.category === 'all') {
                Object.values(emojiPuzzles).forEach(puzzles => {
                    availablePuzzles.push(...puzzles);
                });
            } else {
                availablePuzzles = emojiPuzzles[emoji.category] || [];
            }
            
            if (availablePuzzles.length === 0) {
                showFeedback('emoji', 'No puzzles available for this category!', 'incorrect');
                return;
            }
            
            // Select random puzzle
            emoji.currentPuzzle = availablePuzzles[Math.floor(Math.random() * availablePuzzles.length)];
            emoji.gameActive = true;
            emoji.hintsUsed = 0;
            
            // Enable inputs
            document.getElementById('emoji-input').disabled = false;
            document.getElementById('emoji-submit').disabled = false;
            document.getElementById('emoji-hint').disabled = false;
            document.getElementById('emoji-input').focus();
            
            updateEmojiDisplay();
            showFeedback('emoji', 'New puzzle! What does this emoji combination represent?', 'info');
        }

        function submitEmojiAnswer() {
            if (!gameState.emoji.gameActive) return;
            
            const answer = document.getElementById('emoji-input').value.trim();
            if (!answer) return;
            
            const emoji = gameState.emoji;
            const correctAnswer = emoji.currentPuzzle.answer.toLowerCase();
            const userAnswer = answer.toLowerCase();
            
            if (userAnswer === correctAnswer || correctAnswer.includes(userAnswer) || userAnswer.includes(correctAnswer)) {
                handleEmojiWin();
            } else {
                handleEmojiIncorrect();
            }
            
            document.getElementById('emoji-input').value = '';
        }

        function handleEmojiWin() {
            const emoji = gameState.emoji;
            emoji.gameActive = false;
            
            const baseScore = 100;
            const hintPenalty = emoji.hintsUsed * 5;
            const difficultyBonus = emoji.difficulty === 'hard' ? 50 : emoji.difficulty === 'medium' ? 25 : 0;
            emoji.score += Math.max(10, baseScore - hintPenalty + difficultyBonus);
            
            addGameResult(true, baseScore - hintPenalty + difficultyBonus);
            
            showFeedback('emoji', `üéâ Correct! The answer was "${emoji.currentPuzzle.answer}"`, 'correct');
            
            document.getElementById('emoji-game-over').innerHTML = `
                <div class="game-over win">
                    <h3>üéâ Excellent!</h3>
                    <p>You solved: ${emoji.currentPuzzle.emoji}</p>
                    <p><strong>Answer:</strong> ${emoji.currentPuzzle.answer}</p>
                    <p><strong>Score:</strong> ${baseScore - (emoji.hintsUsed * 5) + difficultyBonus} points</p>
                    <p><strong>Hints used:</strong> ${emoji.hintsUsed}</p>
                </div>
            `;
            
            disableEmojiInputs();
            updateEmojiDisplay();
        }

        function handleEmojiIncorrect() {
            showFeedback('emoji', '‚ùå Incorrect! Try again or get a hint.', 'incorrect');
        }

        function getEmojiHint() {
            if (!gameState.emoji.gameActive) return;
            
            const emoji = gameState.emoji;
            emoji.hintsUsed++;
            
            showFeedback('emoji', `üí° Hint: ${emoji.currentPuzzle.hint} (-5 points)`, 'hint');
            updateEmojiDisplay();
        }

        function updateEmojiDisplay() {
            const emoji = gameState.emoji;
            
            document.getElementById('emoji-score').textContent = emoji.score;
            document.getElementById('emoji-hints').textContent = emoji.hintsUsed;
            document.getElementById('emoji-category').textContent = emoji.category.charAt(0).toUpperCase() + emoji.category.slice(1);
            document.getElementById('emoji-difficulty').textContent = emoji.difficulty.charAt(0).toUpperCase() + emoji.difficulty.slice(1);
            
            if (emoji.currentPuzzle && emoji.gameActive) {
                document.getElementById('emoji-display').textContent = emoji.currentPuzzle.emoji;
            } else if (emoji.currentPuzzle && !emoji.gameActive) {
                document.getElementById('emoji-display').textContent = emoji.currentPuzzle.emoji;
            } else {
                document.getElementById('emoji-display').textContent = 'Click "New Puzzle" to start!';
            }
        }

        function disableEmojiInputs() {
            document.getElementById('emoji-input').disabled = true;
            document.getElementById('emoji-submit').disabled = true;
            document.getElementById('emoji-hint').disabled = true;
        }

        // TWENTY QUESTIONS GAME
        function initValentineGame() {
            // Difficulty selectors
            document.querySelectorAll('#valentine-page .selector-btn[data-difficulty]').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('#valentine-page .selector-btn[data-difficulty]').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameState.valentine.difficulty = btn.dataset.difficulty;
                    setValentineQuestions();
                    updateValentineDisplay();
                });
            });

            // Category selectors
            document.querySelectorAll('#valentine-page .selector-btn[data-category]').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('#valentine-page .selector-btn[data-category]').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameState.valentine.category = btn.dataset.category;
                    updateValentineDisplay();
                });
            });

            // Game buttons
            document.getElementById('valentine-new-game').addEventListener('click', startValentineGame);
            document.getElementById('valentine-ask').addEventListener('click', askValentineQuestion);
            document.getElementById('valentine-guess').addEventListener('click', makeValentineGuess);

            // Input handling
            document.getElementById('valentine-question').addEventListener('keypress', (e) => {
                if (e.key === 'Enter' && gameState.valentine.gameActive) {
                    askValentineQuestion();
                }
            });

            setValentineQuestions();
        }

        function setValentineQuestions() {
            switch (gameState.valentine.difficulty) {
                case 'easy':
                    gameState.valentine.questionsLeft = 8;
                    break;
                case 'medium':
                    gameState.valentine.questionsLeft = 6;
                    break;
                case 'hard':
                    gameState.valentine.questionsLeft = 4;
                    break;
            }
        }

        function startValentineGame() {
            const valentine = gameState.valentine;
            
            // Reset game state
            valentine.questions = [];
            valentine.answers = [];
            valentine.guessesLeft = 3;
            valentine.gameActive = true;
            valentine.score = 0;
            setValentineQuestions();
            
            // Select random answer
            const categoryAnswers = valentineAnswers[valentine.category];
            valentine.currentAnswer = categoryAnswers[Math.floor(Math.random() * categoryAnswers.length)].answer;
            
            // Enable inputs
            document.getElementById('valentine-question').disabled = false;
            document.getElementById('valentine-ask').disabled = false;
            document.getElementById('valentine-guess').disabled = false;
            document.getElementById('valentine-question').focus();
            
            // Clear history
            document.getElementById('valentine-history').innerHTML = '<p style="text-align: center; color: #666;">Ask yes/no questions to figure out what I\'m thinking of!</p>';
            
            updateValentineDisplay();
            showFeedback('valentine', `I'm thinking of something in the ${valentine.category} category. Ask yes/no questions!`, 'info');
        }

        function askValentineQuestion() {
            if (!gameState.valentine.gameActive) return;
            
            const question = document.getElementById('valentine-question').value.trim();
            if (!question) return;
            
            const valentine = gameState.valentine;
            valentine.questionsLeft--;
            valentine.questions.push(question);
            
            // Generate AI-like response
            const answer = generateValentineAnswer(question, valentine.currentAnswer);
            valentine.answers.push(answer);
            
            // Update history
            updateValentineHistory();
            
            document.getElementById('valentine-question').value = '';
            updateValentineDisplay();
            
            if (valentine.questionsLeft === 0) {
                showFeedback('valentine', 'No more questions! You must make a guess now.', 'hint');
                document.getElementById('valentine-ask').disabled = true;
                document.getElementById('valentine-question').disabled = true;
            }
        }

        function generateValentineAnswer(question, answer) {
            const q = question.toLowerCase();
            const a = answer.toLowerCase();
            
            // Simple keyword matching for basic responses
            if (q.includes('alive') || q.includes('living')) {
                return gameState.valentine.category === 'animals' ? 'Yes' : 'No';
            }
            if (q.includes('animal')) {
                return gameState.valentine.category === 'animals' ? 'Yes' : 'No';
            }
            if (q.includes('place') || q.includes('location')) {
                return gameState.valentine.category === 'places' ? 'Yes' : 'No';
            }
            if (q.includes('movie') || q.includes('film')) {
                return gameState.valentine.category === 'movies' ? 'Yes' : 'No';
            }
            if (q.includes('object') || q.includes('thing')) {
                return gameState.valentine.category === 'objects' ? 'Yes' : 'No';
            }
            if (q.includes('big') || q.includes('large')) {
                return ['elephant', 'giraffe', 'whale', 'titanic', 'avatar'].some(word => a.includes(word)) ? 'Yes' : 'No';
            }
            if (q.includes('small')) {
                return ['phone', 'key', 'watch'].some(word => a.includes(word)) ? 'Yes' : 'No';
            }
            if (q.includes('water')) {
                return ['dolphin', 'titanic', 'sydney', 'paris'].some(word => a.includes(word)) ? 'Yes' : 'No';
            }
            if (q.includes('fly') || q.includes('flight')) {
                return ['penguin', 'avatar'].some(word => a.includes(word)) ? 'Yes' : 'No';
            }
            
            // Random yes/no for other questions
            return Math.random() > 0.5 ? 'Yes' : 'No';
        }

        function makeValentineGuess() {
            if (!gameState.valentine.gameActive) return;
            
            const guess = prompt('What do you think I\'m thinking of?');
            if (!guess) return;
            
            const valentine = gameState.valentine;
            valentine.guessesLeft--;
            
            if (guess.toLowerCase() === valentine.currentAnswer.toLowerCase()) {
                handleValentineWin();
            } else {
                if (valentine.guessesLeft === 0) {
                    handleValentineLose();
                } else {
                    showFeedback('valentine', `‚ùå Not quite! You have ${valentine.guessesLeft} guess(es) left.`, 'incorrect');
                    updateValentineDisplay();
                }
            }
        }

        function handleValentineWin() {
            const valentine = gameState.valentine;
            valentine.gameActive = false;
            
            const baseScore = 100;
            const questionBonus = valentine.questionsLeft * 10;
            const guessBonus = valentine.guessesLeft * 20;
            valentine.score = baseScore + questionBonus + guessBonus;
            
            addGameResult(true, valentine.score);
            
            showFeedback('valentine', `üéâ Correct! I was thinking of "${valentine.currentAnswer}"`, 'correct');
            
            document.getElementById('valentine-game-over').innerHTML = `
                <div class="game-over win">
                    <h3>üéâ Amazing!</h3>
                    <p>You guessed "${valentine.currentAnswer}" correctly!</p>
                    <p><strong>Score:</strong> ${valentine.score} points</p>
                    <p><strong>Questions used:</strong> ${valentine.questions.length}</p>
                    <p><strong>Guesses remaining:</strong> ${valentine.guessesLeft}</p>
                </div>
            `;
            
            disableValentineInputs();
        }

        function handleValentineLose() {
            const valentine = gameState.valentine;
            valentine.gameActive = false;
            
            addGameResult(false, 0);
            
            showFeedback('valentine', `üòî The answer was "${valentine.currentAnswer}". Better luck next time!`, 'incorrect');
            
            document.getElementById('valentine-game-over').innerHTML = `
                <div class="game-over lose">
                    <h3>üòî Game Over</h3>
                    <p>I was thinking of: <strong>"${valentine.currentAnswer}"</strong></p>
                    <p>Category: ${valentine.category}</p>
                    <p>You asked ${valentine.questions.length} questions</p>
                </div>
            `;
            
            disableValentineInputs();
        }

        function updateValentineHistory() {
            const valentine = gameState.valentine;
            const history = document.getElementById('valentine-history');
            
            let historyHTML = '';
            for (let i = 0; i < valentine.questions.length; i++) {
                historyHTML += `
                    <div class="question-item">
                        <div class="question-text">Q: ${valentine.questions[i]}</div>
                        <div class="answer-text">A: ${valentine.answers[i]}</div>
                    </div>
                `;
            }
            
            history.innerHTML = historyHTML || '<p style="text-align: center; color: #666;">Ask yes/no questions to figure out what I\'m thinking of!</p>';
        }

        function updateValentineDisplay() {
            const valentine = gameState.valentine;
            
            document.getElementById('valentine-questions').textContent = valentine.questionsLeft;
            document.getElementById('valentine-guesses').textContent = valentine.guessesLeft;
            document.getElementById('valentine-category').textContent = valentine.category.charAt(0).toUpperCase() + valentine.category.slice(1);
            document.getElementById('valentine-score').textContent = valentine.score;
        }

        function disableValentineInputs() {
            document.getElementById('valentine-question').disabled = true;
            document.getElementById('valentine-ask').disabled = true;
            document.getElementById('valentine-guess').disabled = true;
        }

        // TRIVIA GAME
        function initTriviaGame() {
            // Difficulty selectors
            document.querySelectorAll('#trivia-page .selector-btn[data-difficulty]').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('#trivia-page .selector-btn[data-difficulty]').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameState.trivia.difficulty = btn.dataset.difficulty;
                });
            });

            // Game buttons
            document.getElementById('trivia-start').addEventListener('click', startTriviaGame);
            document.getElementById('trivia-submit').addEventListener('click', submitTriviaAnswer);
            document.getElementById('trivia-next').addEventListener('click', nextTriviaQuestion);
        }

        function startTriviaGame() {
            const trivia = gameState.trivia;
            
            // Reset game state
            trivia.currentQuestion = 0;
            trivia.correctAnswers = 0;
            trivia.score = 0;
            trivia.gameActive = true;
            trivia.selectedAnswer = null;
            
            // Start timer
            startTimer('trivia');
            
            // Show first question
            showTriviaQuestion();
            
            // Update buttons
            document.getElementById('trivia-start').disabled = true;
            document.getElementById('trivia-submit').disabled = false;
            
            updateTriviaDisplay();
        }

        function showTriviaQuestion() {
            const trivia = gameState.trivia;
            const questions = triviaQuestions[trivia.difficulty];
            
            if (trivia.currentQuestion >= trivia.totalQuestions || trivia.currentQuestion >= questions.length) {
                endTriviaGame();
                return;
            }
            
            const question = questions[trivia.currentQuestion];
            
            document.getElementById('trivia-question-text').textContent = question.question;
            
            const optionsContainer = document.getElementById('trivia-options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'trivia-option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => selectTriviaOption(index, optionDiv);
                optionsContainer.appendChild(optionDiv);
            });
            
            trivia.selectedAnswer = null;
            document.getElementById('trivia-submit').disabled = false;
            document.getElementById('trivia-next').disabled = true;
        }

        function selectTriviaOption(index, element) {
            // Remove previous selection
            document.querySelectorAll('#trivia-options .trivia-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Select new option
            element.classList.add('selected');
            gameState.trivia.selectedAnswer = index;
        }

        function submitTriviaAnswer() {
            if (gameState.trivia.selectedAnswer === null) return;
            
            const trivia = gameState.trivia;
            const questions = triviaQuestions[trivia.difficulty];
            const question = questions[trivia.currentQuestion];
            const isCorrect = trivia.selectedAnswer === question.correct;
            
            // Show correct/incorrect styling
            const options = document.querySelectorAll('#trivia-options .trivia-option');
            options.forEach((opt, index) => {
                if (index === question.correct) {
                    opt.classList.add('correct');
                } else if (index === trivia.selectedAnswer && !isCorrect) {
                    opt.classList.add('incorrect');
                }
                opt.onclick = null; // Disable clicking
            });
            
            if (isCorrect) {
                trivia.correctAnswers++;
                trivia.score += trivia.difficulty === 'hard' ? 15 : trivia.difficulty === 'medium' ? 10 : 5;
                showFeedback('trivia', '‚úÖ Correct!', 'correct');
            } else {
                showFeedback('trivia', `‚ùå Incorrect. The correct answer was: ${question.options[question.correct]}`, 'incorrect');
            }
            
            trivia.currentQuestion++;
            
            document.getElementById('trivia-submit').disabled = true;
            document.getElementById('trivia-next').disabled = false;
            
            updateTriviaDisplay();
        }

        function nextTriviaQuestion() {
            if (gameState.trivia.currentQuestion >= gameState.trivia.totalQuestions) {
                endTriviaGame();
            } else {
                showTriviaQuestion();
                document.getElementById('trivia-feedback').innerHTML = '';
            }
        }

        function endTriviaGame() {
            const trivia = gameState.trivia;
            trivia.gameActive = false;
            stopTimer('trivia');
            
            const percentage = Math.round((trivia.correctAnswers / trivia.totalQuestions) * 100);
            const won = percentage >= 70;
            
            addGameResult(won, trivia.score);
            
            document.getElementById('trivia-question-text').textContent = 'Quiz Complete!';
            document.getElementById('trivia-options').innerHTML = '';
            
            document.getElementById('trivia-game-over').innerHTML = `
                <div class="game-over ${won ? 'win' : 'lose'}">
                    <h3>${won ? 'üéâ Great Job!' : 'üìö Keep Studying!'}</h3>
                    <p><strong>Score:</strong> ${trivia.score} points</p>
                    <p><strong>Correct:</strong> ${trivia.correctAnswers}/${trivia.totalQuestions} (${percentage}%)</p>
                    <p><strong>Time:</strong> ${document.getElementById('trivia-timer').textContent}</p>
                    ${won ? '<p>Excellent knowledge!</p>' : '<p>Try again to improve your score!</p>'}
                </div>
            `;
            
            document.getElementById('trivia-start').disabled = false;
            document.getElementById('trivia-submit').disabled = true;
            document.getElementById('trivia-next').disabled = true;
        }

        function updateTriviaDisplay() {
            const trivia = gameState.trivia;
            
            document.getElementById('trivia-question-num').textContent = `${trivia.currentQuestion}/${trivia.totalQuestions}`;
            document.getElementById('trivia-correct').textContent = trivia.correctAnswers;
            document.getElementById('trivia-score').textContent = trivia.score;
        }

        // ANIMAL TRIVIA GAME
        function initAnimalTriviaGame() {
            // Difficulty selectors
            document.querySelectorAll('#animal-trivia-page .selector-btn[data-difficulty]').forEach(btn => {
                btn.addEventListener('click', () => {
                    document.querySelectorAll('#animal-trivia-page .selector-btn[data-difficulty]').forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    gameState.animalTrivia.difficulty = btn.dataset.difficulty;
                });
            });

            // Game buttons
            document.getElementById('animal-start').addEventListener('click', startAnimalTriviaGame);
            document.getElementById('animal-submit').addEventListener('click', submitAnimalTriviaAnswer);
            document.getElementById('animal-next').addEventListener('click', nextAnimalTriviaQuestion);
        }

        function startAnimalTriviaGame() {
            const animalTrivia = gameState.animalTrivia;
            
            // Reset game state
            animalTrivia.currentQuestion = 0;
            animalTrivia.correctAnswers = 0;
            animalTrivia.score = 0;
            animalTrivia.gameActive = true;
            animalTrivia.selectedAnswer = null;
            
            // Start timer
            startTimer('animalTrivia');
            
            // Show first question
            showAnimalTriviaQuestion();
            
            // Update buttons
            document.getElementById('animal-start').disabled = true;
            document.getElementById('animal-submit').disabled = false;
            
            updateAnimalTriviaDisplay();
        }

        function showAnimalTriviaQuestion() {
            const animalTrivia = gameState.animalTrivia;
            const questions = animalTriviaQuestions[animalTrivia.difficulty];
            
            if (animalTrivia.currentQuestion >= animalTrivia.totalQuestions || animalTrivia.currentQuestion >= questions.length) {
                endAnimalTriviaGame();
                return;
            }
            
            const question = questions[animalTrivia.currentQuestion];
            
            document.getElementById('animal-question-text').textContent = question.question;
            
            const optionsContainer = document.getElementById('animal-options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionDiv = document.createElement('div');
                optionDiv.className = 'trivia-option';
                optionDiv.textContent = option;
                optionDiv.onclick = () => selectAnimalTriviaOption(index, optionDiv);
                optionsContainer.appendChild(optionDiv);
            });
            
            animalTrivia.selectedAnswer = null;
            document.getElementById('animal-submit').disabled = false;
            document.getElementById('animal-next').disabled = true;
        }

        function selectAnimalTriviaOption(index, element) {
            // Remove previous selection
            document.querySelectorAll('#animal-options .trivia-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            
            // Select new option
            element.classList.add('selected');
            gameState.animalTrivia.selectedAnswer = index;
        }

        function submitAnimalTriviaAnswer() {
            if (gameState.animalTrivia.selectedAnswer === null) return;
            
            const animalTrivia = gameState.animalTrivia;
            const questions = animalTriviaQuestions[animalTrivia.difficulty];
            const question = questions[animalTrivia.currentQuestion];
            const isCorrect = animalTrivia.selectedAnswer === question.correct;
            
            // Show correct/incorrect styling
            const options = document.querySelectorAll('#animal-options .trivia-option');
            options.forEach((opt, index) => {
                if (index === question.correct) {
                    opt.classList.add('correct');
                } else if (index === animalTrivia.selectedAnswer && !isCorrect) {
                    opt.classList.add('incorrect');
                }
                opt.onclick = null; // Disable clicking
            });
            
            if (isCorrect) {
                animalTrivia.correctAnswers++;
                animalTrivia.score += animalTrivia.difficulty === 'hard' ? 15 : animalTrivia.difficulty === 'medium' ? 10 : 5;
                showFeedback('animal', '‚úÖ Correct!', 'correct');
            } else {
                showFeedback('animal', `‚ùå Incorrect. The correct answer was: ${question.options[question.correct]}`, 'incorrect');
            }
            
            animalTrivia.currentQuestion++;
            
            document.getElementById('animal-submit').disabled = true;
            document.getElementById('animal-next').disabled = false;
            
            updateAnimalTriviaDisplay();
        }

        function nextAnimalTriviaQuestion() {
            if (gameState.animalTrivia.currentQuestion >= gameState.animalTrivia.totalQuestions) {
                endAnimalTriviaGame();
            } else {
                showAnimalTriviaQuestion();
                document.getElementById('animal-feedback').innerHTML = '';
            }
        }

        function endAnimalTriviaGame() {
            const animalTrivia = gameState.animalTrivia;
            animalTrivia.gameActive = false;
            stopTimer('animalTrivia');
            
            const percentage = Math.round((animalTrivia.correctAnswers / animalTrivia.totalQuestions) * 100);
            const won = percentage >= 70;
            
            addGameResult(won, animalTrivia.score);
            
            document.getElementById('animal-question-text').textContent = 'Quiz Complete!';
            document.getElementById('animal-options').innerHTML = '';
            
            document.getElementById('animal-game-over').innerHTML = `
                <div class="game-over ${won ? 'win' : 'lose'}">
                    <h3>${won ? 'ü¶Å Animal Expert!' : 'üêæ Keep Learning!'}</h3>
                    <p><strong>Score:</strong> ${animalTrivia.score} points</p>
                    <p><strong>Correct:</strong> ${animalTrivia.correctAnswers}/${animalTrivia.totalQuestions} (${percentage}%)</p>
                    <p><strong>Time:</strong> ${document.getElementById('animal-timer').textContent}</p>
                    ${won ? '<p>You know your animals!</p>' : '<p>Study more about animals and try again!</p>'}
                </div>
            `;
            
            document.getElementById('animal-start').disabled = false;
            document.getElementById('animal-submit').disabled = true;
            document.getElementById('animal-next').disabled = true;
        }

        function updateAnimalTriviaDisplay() {
            const animalTrivia = gameState.animalTrivia;
            
            document.getElementById('animal-question-num').textContent = `${animalTrivia.currentQuestion}/${animalTrivia.totalQuestions}`;
            document.getElementById('animal-correct').textContent = animalTrivia.correctAnswers;
            document.getElementById('animal-score').textContent = animalTrivia.score;
        }

        // Initialize all games when page loads
        window.addEventListener('DOMContentLoaded', () => {
            loadUserStats();
            initBurbleGame();
            initEmojiGame();
            initValentineGame();
            initTriviaGame();
            initAnimalTriviaGame();
            updateUserStats();
        });
    </script>
</body>
</html>