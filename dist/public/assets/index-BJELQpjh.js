var zS=t=>{throw TypeError(t)};var X6=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var r0=(t,e,n)=>e.has(t)||zS("Cannot "+n);var H=(t,e,n)=>(r0(t,e,"read from private field"),n?n.call(t):e.get(t)),$e=(t,e,n)=>e.has(t)?zS("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ke=(t,e,n,r)=>(r0(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),it=(t,e,n)=>(r0(t,e,"access private method"),n);var Tm=(t,e,n,r)=>({set _(s){ke(t,e,s,n)},get _(){return H(t,e,r)}});var Oae=X6((ole,tm)=>{function J6(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const o=Object.getOwnPropertyDescriptor(r,s);o&&Object.defineProperty(t,s,o.get?o:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function vk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wk={exports:{}},jy={},bk={exports:{}},at={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tf=Symbol.for("react.element"),eV=Symbol.for("react.portal"),tV=Symbol.for("react.fragment"),nV=Symbol.for("react.strict_mode"),rV=Symbol.for("react.profiler"),sV=Symbol.for("react.provider"),iV=Symbol.for("react.context"),oV=Symbol.for("react.forward_ref"),aV=Symbol.for("react.suspense"),lV=Symbol.for("react.memo"),cV=Symbol.for("react.lazy"),WS=Symbol.iterator;function uV(t){return t===null||typeof t!="object"?null:(t=WS&&t[WS]||t["@@iterator"],typeof t=="function"?t:null)}var _k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},jk=Object.assign,Sk={};function Ou(t,e,n){this.props=t,this.context=e,this.refs=Sk,this.updater=n||_k}Ou.prototype.isReactComponent={};Ou.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ou.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Nk(){}Nk.prototype=Ou.prototype;function Qb(t,e,n){this.props=t,this.context=e,this.refs=Sk,this.updater=n||_k}var Yb=Qb.prototype=new Nk;Yb.constructor=Qb;jk(Yb,Ou.prototype);Yb.isPureReactComponent=!0;var HS=Array.isArray,Tk=Object.prototype.hasOwnProperty,Zb={current:null},Ck={key:!0,ref:!0,__self:!0,__source:!0};function Ek(t,e,n){var r,s={},o=null,a=null;if(e!=null)for(r in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(o=""+e.key),e)Tk.call(e,r)&&!Ck.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Tf,type:t,key:o,ref:a,props:s,_owner:Zb.current}}function dV(t,e){return{$$typeof:Tf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Xb(t){return typeof t=="object"&&t!==null&&t.$$typeof===Tf}function hV(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var qS=/\/+/g;function s0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hV(""+t.key):e.toString(36)}function gp(t,e,n,r,s){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Tf:case eV:a=!0}}if(a)return a=t,s=s(a),t=r===""?"."+s0(a,0):r,HS(s)?(n="",t!=null&&(n=t.replace(qS,"$&/")+"/"),gp(s,e,n,"",function(u){return u})):s!=null&&(Xb(s)&&(s=dV(s,n+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(qS,"$&/")+"/")+t)),e.push(s)),1;if(a=0,r=r===""?".":r+":",HS(t))for(var l=0;l<t.length;l++){o=t[l];var c=r+s0(o,l);a+=gp(o,e,n,c,s)}else if(c=uV(t),typeof c=="function")for(t=c.call(t),l=0;!(o=t.next()).done;)o=o.value,c=r+s0(o,l++),a+=gp(o,e,n,c,s);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Cm(t,e,n){if(t==null)return t;var r=[],s=0;return gp(t,r,"","",function(o){return e.call(n,o,s++)}),r}function fV(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var mr={current:null},yp={transition:null},mV={ReactCurrentDispatcher:mr,ReactCurrentBatchConfig:yp,ReactCurrentOwner:Zb};function kk(){throw Error("act(...) is not supported in production builds of React.")}at.Children={map:Cm,forEach:function(t,e,n){Cm(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Cm(t,function(){e++}),e},toArray:function(t){return Cm(t,function(e){return e})||[]},only:function(t){if(!Xb(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};at.Component=Ou;at.Fragment=tV;at.Profiler=rV;at.PureComponent=Qb;at.StrictMode=nV;at.Suspense=aV;at.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mV;at.act=kk;at.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=jk({},t.props),s=t.key,o=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,a=Zb.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Tk.call(e,c)&&!Ck.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Tf,type:t.type,key:s,ref:o,props:r,_owner:a}};at.createContext=function(t){return t={$$typeof:iV,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sV,_context:t},t.Consumer=t};at.createElement=Ek;at.createFactory=function(t){var e=Ek.bind(null,t);return e.type=t,e};at.createRef=function(){return{current:null}};at.forwardRef=function(t){return{$$typeof:oV,render:t}};at.isValidElement=Xb;at.lazy=function(t){return{$$typeof:cV,_payload:{_status:-1,_result:t},_init:fV}};at.memo=function(t,e){return{$$typeof:lV,type:t,compare:e===void 0?null:e}};at.startTransition=function(t){var e=yp.transition;yp.transition={};try{t()}finally{yp.transition=e}};at.unstable_act=kk;at.useCallback=function(t,e){return mr.current.useCallback(t,e)};at.useContext=function(t){return mr.current.useContext(t)};at.useDebugValue=function(){};at.useDeferredValue=function(t){return mr.current.useDeferredValue(t)};at.useEffect=function(t,e){return mr.current.useEffect(t,e)};at.useId=function(){return mr.current.useId()};at.useImperativeHandle=function(t,e,n){return mr.current.useImperativeHandle(t,e,n)};at.useInsertionEffect=function(t,e){return mr.current.useInsertionEffect(t,e)};at.useLayoutEffect=function(t,e){return mr.current.useLayoutEffect(t,e)};at.useMemo=function(t,e){return mr.current.useMemo(t,e)};at.useReducer=function(t,e,n){return mr.current.useReducer(t,e,n)};at.useRef=function(t){return mr.current.useRef(t)};at.useState=function(t){return mr.current.useState(t)};at.useSyncExternalStore=function(t,e,n){return mr.current.useSyncExternalStore(t,e,n)};at.useTransition=function(){return mr.current.useTransition()};at.version="18.3.1";bk.exports=at;var p=bk.exports;const tt=vk(p),Ak=J6({__proto__:null,default:tt},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pV=p,gV=Symbol.for("react.element"),yV=Symbol.for("react.fragment"),xV=Object.prototype.hasOwnProperty,vV=pV.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wV={key:!0,ref:!0,__self:!0,__source:!0};function Pk(t,e,n){var r,s={},o=null,a=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(a=e.ref);for(r in e)xV.call(e,r)&&!wV.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:gV,type:t,key:o,ref:a,props:s,_owner:vV.current}}jy.Fragment=yV;jy.jsx=Pk;jy.jsxs=Pk;wk.exports=jy;var i=wk.exports,Ik={exports:{}},Wr={},Rk={exports:{}},Mk={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,F){var D=O.length;O.push(F);e:for(;0<D;){var L=D-1>>>1,X=O[L];if(0<s(X,F))O[L]=F,O[D]=X,D=L;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var F=O[0],D=O.pop();if(D!==F){O[0]=D;e:for(var L=0,X=O.length,$=X>>>1;L<$;){var K=2*(L+1)-1,Y=O[K],ie=K+1,te=O[ie];if(0>s(Y,D))ie<X&&0>s(te,Y)?(O[L]=te,O[ie]=D,L=ie):(O[L]=Y,O[K]=D,L=K);else if(ie<X&&0>s(te,D))O[L]=te,O[ie]=D,L=ie;else break e}}return F}function s(O,F){var D=O.sortIndex-F.sortIndex;return D!==0?D:O.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,m=3,g=!1,_=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(O){for(var F=n(u);F!==null;){if(F.callback===null)r(u);else if(F.startTime<=O)r(u),F.sortIndex=F.expirationTime,e(c,F);else break;F=n(u)}}function E(O){if(v=!1,j(O),!_)if(n(c)!==null)_=!0,B(P);else{var F=n(u);F!==null&&q(E,F.startTime-O)}}function P(O,F){_=!1,v&&(v=!1,y(S),S=-1),g=!0;var D=m;try{for(j(F),h=n(c);h!==null&&(!(h.expirationTime>F)||O&&!I());){var L=h.callback;if(typeof L=="function"){h.callback=null,m=h.priorityLevel;var X=L(h.expirationTime<=F);F=t.unstable_now(),typeof X=="function"?h.callback=X:h===n(c)&&r(c),j(F)}else r(c);h=n(c)}if(h!==null)var $=!0;else{var K=n(u);K!==null&&q(E,K.startTime-F),$=!1}return $}finally{h=null,m=D,g=!1}}var U=!1,T=null,S=-1,C=5,k=-1;function I(){return!(t.unstable_now()-k<C)}function R(){if(T!==null){var O=t.unstable_now();k=O;var F=!0;try{F=T(!0,O)}finally{F?A():(U=!1,T=null)}}else U=!1}var A;if(typeof w=="function")A=function(){w(R)};else if(typeof MessageChannel<"u"){var G=new MessageChannel,ue=G.port2;G.port1.onmessage=R,A=function(){ue.postMessage(null)}}else A=function(){x(R,0)};function B(O){T=O,U||(U=!0,A())}function q(O,F){S=x(function(){O(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,B(P))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(O){switch(m){case 1:case 2:case 3:var F=3;break;default:F=m}var D=m;m=F;try{return O()}finally{m=D}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,F){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var D=m;m=O;try{return F()}finally{m=D}},t.unstable_scheduleCallback=function(O,F,D){var L=t.unstable_now();switch(typeof D=="object"&&D!==null?(D=D.delay,D=typeof D=="number"&&0<D?L+D:L):D=L,O){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=D+X,O={id:d++,callback:F,priorityLevel:O,startTime:D,expirationTime:X,sortIndex:-1},D>L?(O.sortIndex=D,e(u,O),n(c)===null&&O===n(u)&&(v?(y(S),S=-1):v=!0,q(E,D-L))):(O.sortIndex=X,e(c,O),_||g||(_=!0,B(P))),O},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(O){var F=m;return function(){var D=m;m=F;try{return O.apply(this,arguments)}finally{m=D}}}})(Mk);Rk.exports=Mk;var bV=Rk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _V=p,$r=bV;function ge(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Dk=new Set,vh={};function Ul(t,e){au(t,e),au(t+"Capture",e)}function au(t,e){for(vh[t]=e,t=0;t<e.length;t++)Dk.add(e[t])}var Gi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_v=Object.prototype.hasOwnProperty,jV=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,GS={},KS={};function SV(t){return _v.call(KS,t)?!0:_v.call(GS,t)?!1:jV.test(t)?KS[t]=!0:(GS[t]=!0,!1)}function NV(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function TV(t,e,n,r){if(e===null||typeof e>"u"||NV(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pr(t,e,n,r,s,o,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=a}var Bn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Bn[t]=new pr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Bn[e]=new pr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Bn[t]=new pr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Bn[t]=new pr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Bn[t]=new pr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Bn[t]=new pr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Bn[t]=new pr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Bn[t]=new pr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Bn[t]=new pr(t,5,!1,t.toLowerCase(),null,!1,!1)});var Jb=/[\-:]([a-z])/g;function e1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Jb,e1);Bn[e]=new pr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Jb,e1);Bn[e]=new pr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Jb,e1);Bn[e]=new pr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Bn[t]=new pr(t,1,!1,t.toLowerCase(),null,!1,!1)});Bn.xlinkHref=new pr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Bn[t]=new pr(t,1,!1,t.toLowerCase(),null,!0,!0)});function t1(t,e,n,r){var s=Bn.hasOwnProperty(e)?Bn[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(TV(e,n,s,r)&&(n=null),r||s===null?SV(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ao=_V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Em=Symbol.for("react.element"),fc=Symbol.for("react.portal"),mc=Symbol.for("react.fragment"),n1=Symbol.for("react.strict_mode"),jv=Symbol.for("react.profiler"),Lk=Symbol.for("react.provider"),Ok=Symbol.for("react.context"),r1=Symbol.for("react.forward_ref"),Sv=Symbol.for("react.suspense"),Nv=Symbol.for("react.suspense_list"),s1=Symbol.for("react.memo"),ko=Symbol.for("react.lazy"),Vk=Symbol.for("react.offscreen"),QS=Symbol.iterator;function yd(t){return t===null||typeof t!="object"?null:(t=QS&&t[QS]||t["@@iterator"],typeof t=="function"?t:null)}var Jt=Object.assign,i0;function Rd(t){if(i0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);i0=e&&e[1]||""}return`
`+i0+t}var o0=!1;function a0(t,e){if(!t||o0)return"";o0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),o=r.stack.split(`
`),a=s.length-1,l=o.length-1;1<=a&&0<=l&&s[a]!==o[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==o[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==o[l]){var c=`
`+s[a].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=a&&0<=l);break}}}finally{o0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rd(t):""}function CV(t){switch(t.tag){case 5:return Rd(t.type);case 16:return Rd("Lazy");case 13:return Rd("Suspense");case 19:return Rd("SuspenseList");case 0:case 2:case 15:return t=a0(t.type,!1),t;case 11:return t=a0(t.type.render,!1),t;case 1:return t=a0(t.type,!0),t;default:return""}}function Tv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case mc:return"Fragment";case fc:return"Portal";case jv:return"Profiler";case n1:return"StrictMode";case Sv:return"Suspense";case Nv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ok:return(t.displayName||"Context")+".Consumer";case Lk:return(t._context.displayName||"Context")+".Provider";case r1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case s1:return e=t.displayName||null,e!==null?e:Tv(t.type)||"Memo";case ko:e=t._payload,t=t._init;try{return Tv(t(e))}catch{}}return null}function EV(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tv(e);case 8:return e===n1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function da(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Fk(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function kV(t){var e=Fk(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){r=""+a,o.call(this,a)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(a){r=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function km(t){t._valueTracker||(t._valueTracker=kV(t))}function Uk(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Fk(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yp(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Cv(t,e){var n=e.checked;return Jt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function YS(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=da(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Bk(t,e){e=e.checked,e!=null&&t1(t,"checked",e,!1)}function Ev(t,e){Bk(t,e);var n=da(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?kv(t,e.type,n):e.hasOwnProperty("defaultValue")&&kv(t,e.type,da(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ZS(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function kv(t,e,n){(e!=="number"||Yp(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Md=Array.isArray;function Pc(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+da(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Av(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ge(91));return Jt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function XS(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ge(92));if(Md(n)){if(1<n.length)throw Error(ge(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:da(n)}}function $k(t,e){var n=da(e.value),r=da(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function JS(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function zk(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Pv(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?zk(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Am,Wk=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Am=Am||document.createElement("div"),Am.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Am.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function wh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Kd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AV=["Webkit","ms","Moz","O"];Object.keys(Kd).forEach(function(t){AV.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Kd[e]=Kd[t]})});function Hk(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Kd.hasOwnProperty(t)&&Kd[t]?(""+e).trim():e+"px"}function qk(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Hk(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var PV=Jt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Iv(t,e){if(e){if(PV[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ge(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ge(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ge(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ge(62))}}function Rv(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Mv=null;function i1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Dv=null,Ic=null,Rc=null;function eN(t){if(t=kf(t)){if(typeof Dv!="function")throw Error(ge(280));var e=t.stateNode;e&&(e=Ey(e),Dv(t.stateNode,t.type,e))}}function Gk(t){Ic?Rc?Rc.push(t):Rc=[t]:Ic=t}function Kk(){if(Ic){var t=Ic,e=Rc;if(Rc=Ic=null,eN(t),e)for(t=0;t<e.length;t++)eN(e[t])}}function Qk(t,e){return t(e)}function Yk(){}var l0=!1;function Zk(t,e,n){if(l0)return t(e,n);l0=!0;try{return Qk(t,e,n)}finally{l0=!1,(Ic!==null||Rc!==null)&&(Yk(),Kk())}}function bh(t,e){var n=t.stateNode;if(n===null)return null;var r=Ey(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ge(231,e,typeof n));return n}var Lv=!1;if(Gi)try{var xd={};Object.defineProperty(xd,"passive",{get:function(){Lv=!0}}),window.addEventListener("test",xd,xd),window.removeEventListener("test",xd,xd)}catch{Lv=!1}function IV(t,e,n,r,s,o,a,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(d){this.onError(d)}}var Qd=!1,Zp=null,Xp=!1,Ov=null,RV={onError:function(t){Qd=!0,Zp=t}};function MV(t,e,n,r,s,o,a,l,c){Qd=!1,Zp=null,IV.apply(RV,arguments)}function DV(t,e,n,r,s,o,a,l,c){if(MV.apply(this,arguments),Qd){if(Qd){var u=Zp;Qd=!1,Zp=null}else throw Error(ge(198));Xp||(Xp=!0,Ov=u)}}function Bl(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xk(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tN(t){if(Bl(t)!==t)throw Error(ge(188))}function LV(t){var e=t.alternate;if(!e){if(e=Bl(t),e===null)throw Error(ge(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var o=s.alternate;if(o===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return tN(s),t;if(o===r)return tN(s),e;o=o.sibling}throw Error(ge(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(ge(189))}}if(n.alternate!==r)throw Error(ge(190))}if(n.tag!==3)throw Error(ge(188));return n.stateNode.current===n?t:e}function Jk(t){return t=LV(t),t!==null?eA(t):null}function eA(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=eA(t);if(e!==null)return e;t=t.sibling}return null}var tA=$r.unstable_scheduleCallback,nN=$r.unstable_cancelCallback,OV=$r.unstable_shouldYield,VV=$r.unstable_requestPaint,hn=$r.unstable_now,FV=$r.unstable_getCurrentPriorityLevel,o1=$r.unstable_ImmediatePriority,nA=$r.unstable_UserBlockingPriority,Jp=$r.unstable_NormalPriority,UV=$r.unstable_LowPriority,rA=$r.unstable_IdlePriority,Sy=null,ni=null;function BV(t){if(ni&&typeof ni.onCommitFiberRoot=="function")try{ni.onCommitFiberRoot(Sy,t,void 0,(t.current.flags&128)===128)}catch{}}var Ps=Math.clz32?Math.clz32:WV,$V=Math.log,zV=Math.LN2;function WV(t){return t>>>=0,t===0?32:31-($V(t)/zV|0)|0}var Pm=64,Im=4194304;function Dd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function eg(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,o=t.pingedLanes,a=n&268435455;if(a!==0){var l=a&~s;l!==0?r=Dd(l):(o&=a,o!==0&&(r=Dd(o)))}else a=n&~s,a!==0?r=Dd(a):o!==0&&(r=Dd(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,o=e&-e,s>=o||s===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ps(e),s=1<<n,r|=t[n],e&=~s;return r}function HV(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qV(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,o=t.pendingLanes;0<o;){var a=31-Ps(o),l=1<<a,c=s[a];c===-1?(!(l&n)||l&r)&&(s[a]=HV(l,e)):c<=e&&(t.expiredLanes|=l),o&=~l}}function Vv(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function sA(){var t=Pm;return Pm<<=1,!(Pm&4194240)&&(Pm=64),t}function c0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Cf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ps(e),t[e]=n}function GV(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Ps(n),o=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~o}}function a1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ps(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Tt=0;function iA(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var oA,l1,aA,lA,cA,Fv=!1,Rm=[],Yo=null,Zo=null,Xo=null,_h=new Map,jh=new Map,Po=[],KV="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rN(t,e){switch(t){case"focusin":case"focusout":Yo=null;break;case"dragenter":case"dragleave":Zo=null;break;case"mouseover":case"mouseout":Xo=null;break;case"pointerover":case"pointerout":_h.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":jh.delete(e.pointerId)}}function vd(t,e,n,r,s,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[s]},e!==null&&(e=kf(e),e!==null&&l1(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function QV(t,e,n,r,s){switch(e){case"focusin":return Yo=vd(Yo,t,e,n,r,s),!0;case"dragenter":return Zo=vd(Zo,t,e,n,r,s),!0;case"mouseover":return Xo=vd(Xo,t,e,n,r,s),!0;case"pointerover":var o=s.pointerId;return _h.set(o,vd(_h.get(o)||null,t,e,n,r,s)),!0;case"gotpointercapture":return o=s.pointerId,jh.set(o,vd(jh.get(o)||null,t,e,n,r,s)),!0}return!1}function uA(t){var e=Xa(t.target);if(e!==null){var n=Bl(e);if(n!==null){if(e=n.tag,e===13){if(e=Xk(n),e!==null){t.blockedOn=e,cA(t.priority,function(){aA(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function xp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uv(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Mv=r,n.target.dispatchEvent(r),Mv=null}else return e=kf(n),e!==null&&l1(e),t.blockedOn=n,!1;e.shift()}return!0}function sN(t,e,n){xp(t)&&n.delete(e)}function YV(){Fv=!1,Yo!==null&&xp(Yo)&&(Yo=null),Zo!==null&&xp(Zo)&&(Zo=null),Xo!==null&&xp(Xo)&&(Xo=null),_h.forEach(sN),jh.forEach(sN)}function wd(t,e){t.blockedOn===e&&(t.blockedOn=null,Fv||(Fv=!0,$r.unstable_scheduleCallback($r.unstable_NormalPriority,YV)))}function Sh(t){function e(s){return wd(s,t)}if(0<Rm.length){wd(Rm[0],t);for(var n=1;n<Rm.length;n++){var r=Rm[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Yo!==null&&wd(Yo,t),Zo!==null&&wd(Zo,t),Xo!==null&&wd(Xo,t),_h.forEach(e),jh.forEach(e),n=0;n<Po.length;n++)r=Po[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Po.length&&(n=Po[0],n.blockedOn===null);)uA(n),n.blockedOn===null&&Po.shift()}var Mc=ao.ReactCurrentBatchConfig,tg=!0;function ZV(t,e,n,r){var s=Tt,o=Mc.transition;Mc.transition=null;try{Tt=1,c1(t,e,n,r)}finally{Tt=s,Mc.transition=o}}function XV(t,e,n,r){var s=Tt,o=Mc.transition;Mc.transition=null;try{Tt=4,c1(t,e,n,r)}finally{Tt=s,Mc.transition=o}}function c1(t,e,n,r){if(tg){var s=Uv(t,e,n,r);if(s===null)v0(t,e,r,ng,n),rN(t,r);else if(QV(s,t,e,n,r))r.stopPropagation();else if(rN(t,r),e&4&&-1<KV.indexOf(t)){for(;s!==null;){var o=kf(s);if(o!==null&&oA(o),o=Uv(t,e,n,r),o===null&&v0(t,e,r,ng,n),o===s)break;s=o}s!==null&&r.stopPropagation()}else v0(t,e,r,null,n)}}var ng=null;function Uv(t,e,n,r){if(ng=null,t=i1(r),t=Xa(t),t!==null)if(e=Bl(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xk(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ng=t,null}function dA(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FV()){case o1:return 1;case nA:return 4;case Jp:case UV:return 16;case rA:return 536870912;default:return 16}default:return 16}}var qo=null,u1=null,vp=null;function hA(){if(vp)return vp;var t,e=u1,n=e.length,r,s="value"in qo?qo.value:qo.textContent,o=s.length;for(t=0;t<n&&e[t]===s[t];t++);var a=n-t;for(r=1;r<=a&&e[n-r]===s[o-r];r++);return vp=s.slice(t,1<r?1-r:void 0)}function wp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Mm(){return!0}function iN(){return!1}function Hr(t){function e(n,r,s,o,a){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=o,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Mm:iN,this.isPropagationStopped=iN,this}return Jt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mm)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mm)},persist:function(){},isPersistent:Mm}),e}var Vu={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},d1=Hr(Vu),Ef=Jt({},Vu,{view:0,detail:0}),JV=Hr(Ef),u0,d0,bd,Ny=Jt({},Ef,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:h1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bd&&(bd&&t.type==="mousemove"?(u0=t.screenX-bd.screenX,d0=t.screenY-bd.screenY):d0=u0=0,bd=t),u0)},movementY:function(t){return"movementY"in t?t.movementY:d0}}),oN=Hr(Ny),eF=Jt({},Ny,{dataTransfer:0}),tF=Hr(eF),nF=Jt({},Ef,{relatedTarget:0}),h0=Hr(nF),rF=Jt({},Vu,{animationName:0,elapsedTime:0,pseudoElement:0}),sF=Hr(rF),iF=Jt({},Vu,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),oF=Hr(iF),aF=Jt({},Vu,{data:0}),aN=Hr(aF),lF={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cF={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uF={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dF(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=uF[t])?!!e[t]:!1}function h1(){return dF}var hF=Jt({},Ef,{key:function(t){if(t.key){var e=lF[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cF[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:h1,charCode:function(t){return t.type==="keypress"?wp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),fF=Hr(hF),mF=Jt({},Ny,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lN=Hr(mF),pF=Jt({},Ef,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:h1}),gF=Hr(pF),yF=Jt({},Vu,{propertyName:0,elapsedTime:0,pseudoElement:0}),xF=Hr(yF),vF=Jt({},Ny,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wF=Hr(vF),bF=[9,13,27,32],f1=Gi&&"CompositionEvent"in window,Yd=null;Gi&&"documentMode"in document&&(Yd=document.documentMode);var _F=Gi&&"TextEvent"in window&&!Yd,fA=Gi&&(!f1||Yd&&8<Yd&&11>=Yd),cN=" ",uN=!1;function mA(t,e){switch(t){case"keyup":return bF.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function pA(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var pc=!1;function jF(t,e){switch(t){case"compositionend":return pA(e);case"keypress":return e.which!==32?null:(uN=!0,cN);case"textInput":return t=e.data,t===cN&&uN?null:t;default:return null}}function SF(t,e){if(pc)return t==="compositionend"||!f1&&mA(t,e)?(t=hA(),vp=u1=qo=null,pc=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fA&&e.locale!=="ko"?null:e.data;default:return null}}var NF={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dN(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!NF[t.type]:e==="textarea"}function gA(t,e,n,r){Gk(r),e=rg(e,"onChange"),0<e.length&&(n=new d1("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Zd=null,Nh=null;function TF(t){CA(t,0)}function Ty(t){var e=xc(t);if(Uk(e))return t}function CF(t,e){if(t==="change")return e}var yA=!1;if(Gi){var f0;if(Gi){var m0="oninput"in document;if(!m0){var hN=document.createElement("div");hN.setAttribute("oninput","return;"),m0=typeof hN.oninput=="function"}f0=m0}else f0=!1;yA=f0&&(!document.documentMode||9<document.documentMode)}function fN(){Zd&&(Zd.detachEvent("onpropertychange",xA),Nh=Zd=null)}function xA(t){if(t.propertyName==="value"&&Ty(Nh)){var e=[];gA(e,Nh,t,i1(t)),Zk(TF,e)}}function EF(t,e,n){t==="focusin"?(fN(),Zd=e,Nh=n,Zd.attachEvent("onpropertychange",xA)):t==="focusout"&&fN()}function kF(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ty(Nh)}function AF(t,e){if(t==="click")return Ty(e)}function PF(t,e){if(t==="input"||t==="change")return Ty(e)}function IF(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ds=typeof Object.is=="function"?Object.is:IF;function Th(t,e){if(Ds(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!_v.call(e,s)||!Ds(t[s],e[s]))return!1}return!0}function mN(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pN(t,e){var n=mN(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=mN(n)}}function vA(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?vA(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function wA(){for(var t=window,e=Yp();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yp(t.document)}return e}function m1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function RF(t){var e=wA(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&vA(n.ownerDocument.documentElement,n)){if(r!==null&&m1(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,o=Math.min(r.start,s);r=r.end===void 0?o:Math.min(r.end,s),!t.extend&&o>r&&(s=r,r=o,o=s),s=pN(n,o);var a=pN(n,r);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var MF=Gi&&"documentMode"in document&&11>=document.documentMode,gc=null,Bv=null,Xd=null,$v=!1;function gN(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$v||gc==null||gc!==Yp(r)||(r=gc,"selectionStart"in r&&m1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Xd&&Th(Xd,r)||(Xd=r,r=rg(Bv,"onSelect"),0<r.length&&(e=new d1("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=gc)))}function Dm(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var yc={animationend:Dm("Animation","AnimationEnd"),animationiteration:Dm("Animation","AnimationIteration"),animationstart:Dm("Animation","AnimationStart"),transitionend:Dm("Transition","TransitionEnd")},p0={},bA={};Gi&&(bA=document.createElement("div").style,"AnimationEvent"in window||(delete yc.animationend.animation,delete yc.animationiteration.animation,delete yc.animationstart.animation),"TransitionEvent"in window||delete yc.transitionend.transition);function Cy(t){if(p0[t])return p0[t];if(!yc[t])return t;var e=yc[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in bA)return p0[t]=e[n];return t}var _A=Cy("animationend"),jA=Cy("animationiteration"),SA=Cy("animationstart"),NA=Cy("transitionend"),TA=new Map,yN="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ea(t,e){TA.set(t,e),Ul(e,[t])}for(var g0=0;g0<yN.length;g0++){var y0=yN[g0],DF=y0.toLowerCase(),LF=y0[0].toUpperCase()+y0.slice(1);Ea(DF,"on"+LF)}Ea(_A,"onAnimationEnd");Ea(jA,"onAnimationIteration");Ea(SA,"onAnimationStart");Ea("dblclick","onDoubleClick");Ea("focusin","onFocus");Ea("focusout","onBlur");Ea(NA,"onTransitionEnd");au("onMouseEnter",["mouseout","mouseover"]);au("onMouseLeave",["mouseout","mouseover"]);au("onPointerEnter",["pointerout","pointerover"]);au("onPointerLeave",["pointerout","pointerover"]);Ul("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ul("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ul("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ul("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ul("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ul("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ld="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OF=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ld));function xN(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,DV(r,e,void 0,t),t.currentTarget=null}function CA(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var a=r.length-1;0<=a;a--){var l=r[a],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==o&&s.isPropagationStopped())break e;xN(s,l,u),o=c}else for(a=0;a<r.length;a++){if(l=r[a],c=l.instance,u=l.currentTarget,l=l.listener,c!==o&&s.isPropagationStopped())break e;xN(s,l,u),o=c}}}if(Xp)throw t=Ov,Xp=!1,Ov=null,t}function Vt(t,e){var n=e[Gv];n===void 0&&(n=e[Gv]=new Set);var r=t+"__bubble";n.has(r)||(EA(e,t,2,!1),n.add(r))}function x0(t,e,n){var r=0;e&&(r|=4),EA(n,t,r,e)}var Lm="_reactListening"+Math.random().toString(36).slice(2);function Ch(t){if(!t[Lm]){t[Lm]=!0,Dk.forEach(function(n){n!=="selectionchange"&&(OF.has(n)||x0(n,!1,t),x0(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Lm]||(e[Lm]=!0,x0("selectionchange",!1,e))}}function EA(t,e,n,r){switch(dA(e)){case 1:var s=ZV;break;case 4:s=XV;break;default:s=c1}n=s.bind(null,e,n,t),s=void 0,!Lv||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function v0(t,e,n,r,s){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var a=r.tag;if(a===3||a===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=r.return;a!==null;){var c=a.tag;if((c===3||c===4)&&(c=a.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Xa(l),a===null)return;if(c=a.tag,c===5||c===6){r=o=a;continue e}l=l.parentNode}}r=r.return}Zk(function(){var u=o,d=i1(n),h=[];e:{var m=TA.get(t);if(m!==void 0){var g=d1,_=t;switch(t){case"keypress":if(wp(n)===0)break e;case"keydown":case"keyup":g=fF;break;case"focusin":_="focus",g=h0;break;case"focusout":_="blur",g=h0;break;case"beforeblur":case"afterblur":g=h0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=oN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=tF;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=gF;break;case _A:case jA:case SA:g=sF;break;case NA:g=xF;break;case"scroll":g=JV;break;case"wheel":g=wF;break;case"copy":case"cut":case"paste":g=oF;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=lN}var v=(e&4)!==0,x=!v&&t==="scroll",y=v?m!==null?m+"Capture":null:m;v=[];for(var w=u,j;w!==null;){j=w;var E=j.stateNode;if(j.tag===5&&E!==null&&(j=E,y!==null&&(E=bh(w,y),E!=null&&v.push(Eh(w,E,j)))),x)break;w=w.return}0<v.length&&(m=new g(m,_,null,n,d),h.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==Mv&&(_=n.relatedTarget||n.fromElement)&&(Xa(_)||_[Ki]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=u,_=_?Xa(_):null,_!==null&&(x=Bl(_),_!==x||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=u),g!==_)){if(v=oN,E="onMouseLeave",y="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=lN,E="onPointerLeave",y="onPointerEnter",w="pointer"),x=g==null?m:xc(g),j=_==null?m:xc(_),m=new v(E,w+"leave",g,n,d),m.target=x,m.relatedTarget=j,E=null,Xa(d)===u&&(v=new v(y,w+"enter",_,n,d),v.target=j,v.relatedTarget=x,E=v),x=E,g&&_)t:{for(v=g,y=_,w=0,j=v;j;j=rc(j))w++;for(j=0,E=y;E;E=rc(E))j++;for(;0<w-j;)v=rc(v),w--;for(;0<j-w;)y=rc(y),j--;for(;w--;){if(v===y||y!==null&&v===y.alternate)break t;v=rc(v),y=rc(y)}v=null}else v=null;g!==null&&vN(h,m,g,v,!1),_!==null&&x!==null&&vN(h,x,_,v,!0)}}e:{if(m=u?xc(u):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var P=CF;else if(dN(m))if(yA)P=PF;else{P=kF;var U=EF}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(P=AF);if(P&&(P=P(t,u))){gA(h,P,n,d);break e}U&&U(t,m,u),t==="focusout"&&(U=m._wrapperState)&&U.controlled&&m.type==="number"&&kv(m,"number",m.value)}switch(U=u?xc(u):window,t){case"focusin":(dN(U)||U.contentEditable==="true")&&(gc=U,Bv=u,Xd=null);break;case"focusout":Xd=Bv=gc=null;break;case"mousedown":$v=!0;break;case"contextmenu":case"mouseup":case"dragend":$v=!1,gN(h,n,d);break;case"selectionchange":if(MF)break;case"keydown":case"keyup":gN(h,n,d)}var T;if(f1)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else pc?mA(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(fA&&n.locale!=="ko"&&(pc||S!=="onCompositionStart"?S==="onCompositionEnd"&&pc&&(T=hA()):(qo=d,u1="value"in qo?qo.value:qo.textContent,pc=!0)),U=rg(u,S),0<U.length&&(S=new aN(S,t,null,n,d),h.push({event:S,listeners:U}),T?S.data=T:(T=pA(n),T!==null&&(S.data=T)))),(T=_F?jF(t,n):SF(t,n))&&(u=rg(u,"onBeforeInput"),0<u.length&&(d=new aN("onBeforeInput","beforeinput",null,n,d),h.push({event:d,listeners:u}),d.data=T))}CA(h,e)})}function Eh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function rg(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,o=s.stateNode;s.tag===5&&o!==null&&(s=o,o=bh(t,n),o!=null&&r.unshift(Eh(t,o,s)),o=bh(t,e),o!=null&&r.push(Eh(t,o,s))),t=t.return}return r}function rc(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vN(t,e,n,r,s){for(var o=e._reactName,a=[];n!==null&&n!==r;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&u!==null&&(l=u,s?(c=bh(n,o),c!=null&&a.unshift(Eh(n,c,l))):s||(c=bh(n,o),c!=null&&a.push(Eh(n,c,l)))),n=n.return}a.length!==0&&t.push({event:e,listeners:a})}var VF=/\r\n?/g,FF=/\u0000|\uFFFD/g;function wN(t){return(typeof t=="string"?t:""+t).replace(VF,`
`).replace(FF,"")}function Om(t,e,n){if(e=wN(e),wN(t)!==e&&n)throw Error(ge(425))}function sg(){}var zv=null,Wv=null;function Hv(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qv=typeof setTimeout=="function"?setTimeout:void 0,UF=typeof clearTimeout=="function"?clearTimeout:void 0,bN=typeof Promise=="function"?Promise:void 0,BF=typeof queueMicrotask=="function"?queueMicrotask:typeof bN<"u"?function(t){return bN.resolve(null).then(t).catch($F)}:qv;function $F(t){setTimeout(function(){throw t})}function w0(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Sh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Sh(e)}function Jo(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function _N(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Fu=Math.random().toString(36).slice(2),Js="__reactFiber$"+Fu,kh="__reactProps$"+Fu,Ki="__reactContainer$"+Fu,Gv="__reactEvents$"+Fu,zF="__reactListeners$"+Fu,WF="__reactHandles$"+Fu;function Xa(t){var e=t[Js];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ki]||n[Js]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=_N(t);t!==null;){if(n=t[Js])return n;t=_N(t)}return e}t=n,n=t.parentNode}return null}function kf(t){return t=t[Js]||t[Ki],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xc(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ge(33))}function Ey(t){return t[kh]||null}var Kv=[],vc=-1;function ka(t){return{current:t}}function Ut(t){0>vc||(t.current=Kv[vc],Kv[vc]=null,vc--)}function Dt(t,e){vc++,Kv[vc]=t.current,t.current=e}var ha={},nr=ka(ha),Cr=ka(!1),wl=ha;function lu(t,e){var n=t.type.contextTypes;if(!n)return ha;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},o;for(o in n)s[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Er(t){return t=t.childContextTypes,t!=null}function ig(){Ut(Cr),Ut(nr)}function jN(t,e,n){if(nr.current!==ha)throw Error(ge(168));Dt(nr,e),Dt(Cr,n)}function kA(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(ge(108,EV(t)||"Unknown",s));return Jt({},n,r)}function og(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ha,wl=nr.current,Dt(nr,t),Dt(Cr,Cr.current),!0}function SN(t,e,n){var r=t.stateNode;if(!r)throw Error(ge(169));n?(t=kA(t,e,wl),r.__reactInternalMemoizedMergedChildContext=t,Ut(Cr),Ut(nr),Dt(nr,t)):Ut(Cr),Dt(Cr,n)}var Ri=null,ky=!1,b0=!1;function AA(t){Ri===null?Ri=[t]:Ri.push(t)}function HF(t){ky=!0,AA(t)}function Aa(){if(!b0&&Ri!==null){b0=!0;var t=0,e=Tt;try{var n=Ri;for(Tt=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Ri=null,ky=!1}catch(s){throw Ri!==null&&(Ri=Ri.slice(t+1)),tA(o1,Aa),s}finally{Tt=e,b0=!1}}return null}var wc=[],bc=0,ag=null,lg=0,Xr=[],Jr=0,bl=null,Vi=1,Fi="";function Ga(t,e){wc[bc++]=lg,wc[bc++]=ag,ag=t,lg=e}function PA(t,e,n){Xr[Jr++]=Vi,Xr[Jr++]=Fi,Xr[Jr++]=bl,bl=t;var r=Vi;t=Fi;var s=32-Ps(r)-1;r&=~(1<<s),n+=1;var o=32-Ps(e)+s;if(30<o){var a=s-s%5;o=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Vi=1<<32-Ps(e)+s|n<<s|r,Fi=o+t}else Vi=1<<o|n<<s|r,Fi=t}function p1(t){t.return!==null&&(Ga(t,1),PA(t,1,0))}function g1(t){for(;t===ag;)ag=wc[--bc],wc[bc]=null,lg=wc[--bc],wc[bc]=null;for(;t===bl;)bl=Xr[--Jr],Xr[Jr]=null,Fi=Xr[--Jr],Xr[Jr]=null,Vi=Xr[--Jr],Xr[Jr]=null}var Fr=null,Or=null,$t=!1,ws=null;function IA(t,e){var n=ns(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function NN(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Fr=t,Or=Jo(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Fr=t,Or=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bl!==null?{id:Vi,overflow:Fi}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=ns(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Fr=t,Or=null,!0):!1;default:return!1}}function Qv(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yv(t){if($t){var e=Or;if(e){var n=e;if(!NN(t,e)){if(Qv(t))throw Error(ge(418));e=Jo(n.nextSibling);var r=Fr;e&&NN(t,e)?IA(r,n):(t.flags=t.flags&-4097|2,$t=!1,Fr=t)}}else{if(Qv(t))throw Error(ge(418));t.flags=t.flags&-4097|2,$t=!1,Fr=t}}}function TN(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Fr=t}function Vm(t){if(t!==Fr)return!1;if(!$t)return TN(t),$t=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Hv(t.type,t.memoizedProps)),e&&(e=Or)){if(Qv(t))throw RA(),Error(ge(418));for(;e;)IA(t,e),e=Jo(e.nextSibling)}if(TN(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ge(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Or=Jo(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Or=null}}else Or=Fr?Jo(t.stateNode.nextSibling):null;return!0}function RA(){for(var t=Or;t;)t=Jo(t.nextSibling)}function cu(){Or=Fr=null,$t=!1}function y1(t){ws===null?ws=[t]:ws.push(t)}var qF=ao.ReactCurrentBatchConfig;function _d(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ge(309));var r=n.stateNode}if(!r)throw Error(ge(147,t));var s=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(a){var l=s.refs;a===null?delete l[o]:l[o]=a},e._stringRef=o,e)}if(typeof t!="string")throw Error(ge(284));if(!n._owner)throw Error(ge(290,t))}return t}function Fm(t,e){throw t=Object.prototype.toString.call(e),Error(ge(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function CN(t){var e=t._init;return e(t._payload)}function MA(t){function e(y,w){if(t){var j=y.deletions;j===null?(y.deletions=[w],y.flags|=16):j.push(w)}}function n(y,w){if(!t)return null;for(;w!==null;)e(y,w),w=w.sibling;return null}function r(y,w){for(y=new Map;w!==null;)w.key!==null?y.set(w.key,w):y.set(w.index,w),w=w.sibling;return y}function s(y,w){return y=ra(y,w),y.index=0,y.sibling=null,y}function o(y,w,j){return y.index=j,t?(j=y.alternate,j!==null?(j=j.index,j<w?(y.flags|=2,w):j):(y.flags|=2,w)):(y.flags|=1048576,w)}function a(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,w,j,E){return w===null||w.tag!==6?(w=E0(j,y.mode,E),w.return=y,w):(w=s(w,j),w.return=y,w)}function c(y,w,j,E){var P=j.type;return P===mc?d(y,w,j.props.children,E,j.key):w!==null&&(w.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ko&&CN(P)===w.type)?(E=s(w,j.props),E.ref=_d(y,w,j),E.return=y,E):(E=Cp(j.type,j.key,j.props,null,y.mode,E),E.ref=_d(y,w,j),E.return=y,E)}function u(y,w,j,E){return w===null||w.tag!==4||w.stateNode.containerInfo!==j.containerInfo||w.stateNode.implementation!==j.implementation?(w=k0(j,y.mode,E),w.return=y,w):(w=s(w,j.children||[]),w.return=y,w)}function d(y,w,j,E,P){return w===null||w.tag!==7?(w=fl(j,y.mode,E,P),w.return=y,w):(w=s(w,j),w.return=y,w)}function h(y,w,j){if(typeof w=="string"&&w!==""||typeof w=="number")return w=E0(""+w,y.mode,j),w.return=y,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Em:return j=Cp(w.type,w.key,w.props,null,y.mode,j),j.ref=_d(y,null,w),j.return=y,j;case fc:return w=k0(w,y.mode,j),w.return=y,w;case ko:var E=w._init;return h(y,E(w._payload),j)}if(Md(w)||yd(w))return w=fl(w,y.mode,j,null),w.return=y,w;Fm(y,w)}return null}function m(y,w,j,E){var P=w!==null?w.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return P!==null?null:l(y,w,""+j,E);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Em:return j.key===P?c(y,w,j,E):null;case fc:return j.key===P?u(y,w,j,E):null;case ko:return P=j._init,m(y,w,P(j._payload),E)}if(Md(j)||yd(j))return P!==null?null:d(y,w,j,E,null);Fm(y,j)}return null}function g(y,w,j,E,P){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(j)||null,l(w,y,""+E,P);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Em:return y=y.get(E.key===null?j:E.key)||null,c(w,y,E,P);case fc:return y=y.get(E.key===null?j:E.key)||null,u(w,y,E,P);case ko:var U=E._init;return g(y,w,j,U(E._payload),P)}if(Md(E)||yd(E))return y=y.get(j)||null,d(w,y,E,P,null);Fm(w,E)}return null}function _(y,w,j,E){for(var P=null,U=null,T=w,S=w=0,C=null;T!==null&&S<j.length;S++){T.index>S?(C=T,T=null):C=T.sibling;var k=m(y,T,j[S],E);if(k===null){T===null&&(T=C);break}t&&T&&k.alternate===null&&e(y,T),w=o(k,w,S),U===null?P=k:U.sibling=k,U=k,T=C}if(S===j.length)return n(y,T),$t&&Ga(y,S),P;if(T===null){for(;S<j.length;S++)T=h(y,j[S],E),T!==null&&(w=o(T,w,S),U===null?P=T:U.sibling=T,U=T);return $t&&Ga(y,S),P}for(T=r(y,T);S<j.length;S++)C=g(T,y,S,j[S],E),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?S:C.key),w=o(C,w,S),U===null?P=C:U.sibling=C,U=C);return t&&T.forEach(function(I){return e(y,I)}),$t&&Ga(y,S),P}function v(y,w,j,E){var P=yd(j);if(typeof P!="function")throw Error(ge(150));if(j=P.call(j),j==null)throw Error(ge(151));for(var U=P=null,T=w,S=w=0,C=null,k=j.next();T!==null&&!k.done;S++,k=j.next()){T.index>S?(C=T,T=null):C=T.sibling;var I=m(y,T,k.value,E);if(I===null){T===null&&(T=C);break}t&&T&&I.alternate===null&&e(y,T),w=o(I,w,S),U===null?P=I:U.sibling=I,U=I,T=C}if(k.done)return n(y,T),$t&&Ga(y,S),P;if(T===null){for(;!k.done;S++,k=j.next())k=h(y,k.value,E),k!==null&&(w=o(k,w,S),U===null?P=k:U.sibling=k,U=k);return $t&&Ga(y,S),P}for(T=r(y,T);!k.done;S++,k=j.next())k=g(T,y,S,k.value,E),k!==null&&(t&&k.alternate!==null&&T.delete(k.key===null?S:k.key),w=o(k,w,S),U===null?P=k:U.sibling=k,U=k);return t&&T.forEach(function(R){return e(y,R)}),$t&&Ga(y,S),P}function x(y,w,j,E){if(typeof j=="object"&&j!==null&&j.type===mc&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case Em:e:{for(var P=j.key,U=w;U!==null;){if(U.key===P){if(P=j.type,P===mc){if(U.tag===7){n(y,U.sibling),w=s(U,j.props.children),w.return=y,y=w;break e}}else if(U.elementType===P||typeof P=="object"&&P!==null&&P.$$typeof===ko&&CN(P)===U.type){n(y,U.sibling),w=s(U,j.props),w.ref=_d(y,U,j),w.return=y,y=w;break e}n(y,U);break}else e(y,U);U=U.sibling}j.type===mc?(w=fl(j.props.children,y.mode,E,j.key),w.return=y,y=w):(E=Cp(j.type,j.key,j.props,null,y.mode,E),E.ref=_d(y,w,j),E.return=y,y=E)}return a(y);case fc:e:{for(U=j.key;w!==null;){if(w.key===U)if(w.tag===4&&w.stateNode.containerInfo===j.containerInfo&&w.stateNode.implementation===j.implementation){n(y,w.sibling),w=s(w,j.children||[]),w.return=y,y=w;break e}else{n(y,w);break}else e(y,w);w=w.sibling}w=k0(j,y.mode,E),w.return=y,y=w}return a(y);case ko:return U=j._init,x(y,w,U(j._payload),E)}if(Md(j))return _(y,w,j,E);if(yd(j))return v(y,w,j,E);Fm(y,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,w!==null&&w.tag===6?(n(y,w.sibling),w=s(w,j),w.return=y,y=w):(n(y,w),w=E0(j,y.mode,E),w.return=y,y=w),a(y)):n(y,w)}return x}var uu=MA(!0),DA=MA(!1),cg=ka(null),ug=null,_c=null,x1=null;function v1(){x1=_c=ug=null}function w1(t){var e=cg.current;Ut(cg),t._currentValue=e}function Zv(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Dc(t,e){ug=t,x1=_c=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Nr=!0),t.firstContext=null)}function as(t){var e=t._currentValue;if(x1!==t)if(t={context:t,memoizedValue:e,next:null},_c===null){if(ug===null)throw Error(ge(308));_c=t,ug.dependencies={lanes:0,firstContext:t}}else _c=_c.next=t;return e}var Ja=null;function b1(t){Ja===null?Ja=[t]:Ja.push(t)}function LA(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,b1(e)):(n.next=s.next,s.next=n),e.interleaved=n,Qi(t,r)}function Qi(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ao=!1;function _1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OA(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zi(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ea(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,wt&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Qi(t,n)}return s=r.interleaved,s===null?(e.next=e,b1(r)):(e.next=s.next,s.next=e),r.interleaved=e,Qi(t,n)}function bp(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,a1(t,n)}}function EN(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?s=o=a:o=o.next=a,n=n.next}while(n!==null);o===null?s=o=e:o=o.next=e}else s=o=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function dg(t,e,n,r){var s=t.updateQueue;Ao=!1;var o=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,u=c.next;c.next=null,a===null?o=u:a.next=u,a=c;var d=t.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==a&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(o!==null){var h=s.baseState;a=0,d=u=c=null,l=o;do{var m=l.lane,g=l.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var _=t,v=l;switch(m=e,g=n,v.tag){case 1:if(_=v.payload,typeof _=="function"){h=_.call(g,h,m);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=v.payload,m=typeof _=="function"?_.call(g,h,m):_,m==null)break e;h=Jt({},h,m);break e;case 2:Ao=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else g={eventTime:g,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=g,c=h):d=d.next=g,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(d===null&&(c=h),s.baseState=c,s.firstBaseUpdate=u,s.lastBaseUpdate=d,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else o===null&&(s.shared.lanes=0);jl|=a,t.lanes=a,t.memoizedState=h}}function kN(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(ge(191,s));s.call(r)}}}var Af={},ri=ka(Af),Ah=ka(Af),Ph=ka(Af);function el(t){if(t===Af)throw Error(ge(174));return t}function j1(t,e){switch(Dt(Ph,e),Dt(Ah,t),Dt(ri,Af),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Pv(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Pv(e,t)}Ut(ri),Dt(ri,e)}function du(){Ut(ri),Ut(Ah),Ut(Ph)}function VA(t){el(Ph.current);var e=el(ri.current),n=Pv(e,t.type);e!==n&&(Dt(Ah,t),Dt(ri,n))}function S1(t){Ah.current===t&&(Ut(ri),Ut(Ah))}var Ht=ka(0);function hg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var _0=[];function N1(){for(var t=0;t<_0.length;t++)_0[t]._workInProgressVersionPrimary=null;_0.length=0}var _p=ao.ReactCurrentDispatcher,j0=ao.ReactCurrentBatchConfig,_l=0,Xt=null,_n=null,Pn=null,fg=!1,Jd=!1,Ih=0,GF=0;function Wn(){throw Error(ge(321))}function T1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Ds(t[n],e[n]))return!1;return!0}function C1(t,e,n,r,s,o){if(_l=o,Xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_p.current=t===null||t.memoizedState===null?ZF:XF,t=n(r,s),Jd){o=0;do{if(Jd=!1,Ih=0,25<=o)throw Error(ge(301));o+=1,Pn=_n=null,e.updateQueue=null,_p.current=JF,t=n(r,s)}while(Jd)}if(_p.current=mg,e=_n!==null&&_n.next!==null,_l=0,Pn=_n=Xt=null,fg=!1,e)throw Error(ge(300));return t}function E1(){var t=Ih!==0;return Ih=0,t}function Gs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Xt.memoizedState=Pn=t:Pn=Pn.next=t,Pn}function ls(){if(_n===null){var t=Xt.alternate;t=t!==null?t.memoizedState:null}else t=_n.next;var e=Pn===null?Xt.memoizedState:Pn.next;if(e!==null)Pn=e,_n=t;else{if(t===null)throw Error(ge(310));_n=t,t={memoizedState:_n.memoizedState,baseState:_n.baseState,baseQueue:_n.baseQueue,queue:_n.queue,next:null},Pn===null?Xt.memoizedState=Pn=t:Pn=Pn.next=t}return Pn}function Rh(t,e){return typeof e=="function"?e(t):e}function S0(t){var e=ls(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=_n,s=r.baseQueue,o=n.pending;if(o!==null){if(s!==null){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(s!==null){o=s.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((_l&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=h,a=r):c=c.next=h,Xt.lanes|=d,jl|=d}u=u.next}while(u!==null&&u!==o);c===null?a=r:c.next=l,Ds(r,e.memoizedState)||(Nr=!0),e.memoizedState=r,e.baseState=a,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do o=s.lane,Xt.lanes|=o,jl|=o,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function N0(t){var e=ls(),n=e.queue;if(n===null)throw Error(ge(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,o=e.memoizedState;if(s!==null){n.pending=null;var a=s=s.next;do o=t(o,a.action),a=a.next;while(a!==s);Ds(o,e.memoizedState)||(Nr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function FA(){}function UA(t,e){var n=Xt,r=ls(),s=e(),o=!Ds(r.memoizedState,s);if(o&&(r.memoizedState=s,Nr=!0),r=r.queue,k1(zA.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||Pn!==null&&Pn.memoizedState.tag&1){if(n.flags|=2048,Mh(9,$A.bind(null,n,r,s,e),void 0,null),In===null)throw Error(ge(349));_l&30||BA(n,e,s)}return s}function BA(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function $A(t,e,n,r){e.value=n,e.getSnapshot=r,WA(e)&&HA(t)}function zA(t,e,n){return n(function(){WA(e)&&HA(t)})}function WA(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Ds(t,n)}catch{return!0}}function HA(t){var e=Qi(t,1);e!==null&&Is(e,t,1,-1)}function AN(t){var e=Gs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Rh,lastRenderedState:t},e.queue=t,t=t.dispatch=YF.bind(null,Xt,t),[e.memoizedState,t]}function Mh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Xt.updateQueue,e===null?(e={lastEffect:null,stores:null},Xt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function qA(){return ls().memoizedState}function jp(t,e,n,r){var s=Gs();Xt.flags|=t,s.memoizedState=Mh(1|e,n,void 0,r===void 0?null:r)}function Ay(t,e,n,r){var s=ls();r=r===void 0?null:r;var o=void 0;if(_n!==null){var a=_n.memoizedState;if(o=a.destroy,r!==null&&T1(r,a.deps)){s.memoizedState=Mh(e,n,o,r);return}}Xt.flags|=t,s.memoizedState=Mh(1|e,n,o,r)}function PN(t,e){return jp(8390656,8,t,e)}function k1(t,e){return Ay(2048,8,t,e)}function GA(t,e){return Ay(4,2,t,e)}function KA(t,e){return Ay(4,4,t,e)}function QA(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function YA(t,e,n){return n=n!=null?n.concat([t]):null,Ay(4,4,QA.bind(null,e,t),n)}function A1(){}function ZA(t,e){var n=ls();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&T1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function XA(t,e){var n=ls();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&T1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function JA(t,e,n){return _l&21?(Ds(n,e)||(n=sA(),Xt.lanes|=n,jl|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Nr=!0),t.memoizedState=n)}function KF(t,e){var n=Tt;Tt=n!==0&&4>n?n:4,t(!0);var r=j0.transition;j0.transition={};try{t(!1),e()}finally{Tt=n,j0.transition=r}}function eP(){return ls().memoizedState}function QF(t,e,n){var r=na(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tP(t))nP(e,n);else if(n=LA(t,e,n,r),n!==null){var s=dr();Is(n,t,r,s),rP(n,e,r)}}function YF(t,e,n){var r=na(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tP(t))nP(e,s);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var a=e.lastRenderedState,l=o(a,n);if(s.hasEagerState=!0,s.eagerState=l,Ds(l,a)){var c=e.interleaved;c===null?(s.next=s,b1(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=LA(t,e,s,r),n!==null&&(s=dr(),Is(n,t,r,s),rP(n,e,r))}}function tP(t){var e=t.alternate;return t===Xt||e!==null&&e===Xt}function nP(t,e){Jd=fg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function rP(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,a1(t,n)}}var mg={readContext:as,useCallback:Wn,useContext:Wn,useEffect:Wn,useImperativeHandle:Wn,useInsertionEffect:Wn,useLayoutEffect:Wn,useMemo:Wn,useReducer:Wn,useRef:Wn,useState:Wn,useDebugValue:Wn,useDeferredValue:Wn,useTransition:Wn,useMutableSource:Wn,useSyncExternalStore:Wn,useId:Wn,unstable_isNewReconciler:!1},ZF={readContext:as,useCallback:function(t,e){return Gs().memoizedState=[t,e===void 0?null:e],t},useContext:as,useEffect:PN,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,jp(4194308,4,QA.bind(null,e,t),n)},useLayoutEffect:function(t,e){return jp(4194308,4,t,e)},useInsertionEffect:function(t,e){return jp(4,2,t,e)},useMemo:function(t,e){var n=Gs();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gs();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=QF.bind(null,Xt,t),[r.memoizedState,t]},useRef:function(t){var e=Gs();return t={current:t},e.memoizedState=t},useState:AN,useDebugValue:A1,useDeferredValue:function(t){return Gs().memoizedState=t},useTransition:function(){var t=AN(!1),e=t[0];return t=KF.bind(null,t[1]),Gs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Xt,s=Gs();if($t){if(n===void 0)throw Error(ge(407));n=n()}else{if(n=e(),In===null)throw Error(ge(349));_l&30||BA(r,e,n)}s.memoizedState=n;var o={value:n,getSnapshot:e};return s.queue=o,PN(zA.bind(null,r,o,t),[t]),r.flags|=2048,Mh(9,$A.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Gs(),e=In.identifierPrefix;if($t){var n=Fi,r=Vi;n=(r&~(1<<32-Ps(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ih++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=GF++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},XF={readContext:as,useCallback:ZA,useContext:as,useEffect:k1,useImperativeHandle:YA,useInsertionEffect:GA,useLayoutEffect:KA,useMemo:XA,useReducer:S0,useRef:qA,useState:function(){return S0(Rh)},useDebugValue:A1,useDeferredValue:function(t){var e=ls();return JA(e,_n.memoizedState,t)},useTransition:function(){var t=S0(Rh)[0],e=ls().memoizedState;return[t,e]},useMutableSource:FA,useSyncExternalStore:UA,useId:eP,unstable_isNewReconciler:!1},JF={readContext:as,useCallback:ZA,useContext:as,useEffect:k1,useImperativeHandle:YA,useInsertionEffect:GA,useLayoutEffect:KA,useMemo:XA,useReducer:N0,useRef:qA,useState:function(){return N0(Rh)},useDebugValue:A1,useDeferredValue:function(t){var e=ls();return _n===null?e.memoizedState=t:JA(e,_n.memoizedState,t)},useTransition:function(){var t=N0(Rh)[0],e=ls().memoizedState;return[t,e]},useMutableSource:FA,useSyncExternalStore:UA,useId:eP,unstable_isNewReconciler:!1};function ys(t,e){if(t&&t.defaultProps){e=Jt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xv(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Jt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Py={isMounted:function(t){return(t=t._reactInternals)?Bl(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=dr(),s=na(t),o=zi(r,s);o.payload=e,n!=null&&(o.callback=n),e=ea(t,o,s),e!==null&&(Is(e,t,s,r),bp(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=dr(),s=na(t),o=zi(r,s);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=ea(t,o,s),e!==null&&(Is(e,t,s,r),bp(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=dr(),r=na(t),s=zi(n,r);s.tag=2,e!=null&&(s.callback=e),e=ea(t,s,r),e!==null&&(Is(e,t,r,n),bp(e,t,r))}};function IN(t,e,n,r,s,o,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,a):e.prototype&&e.prototype.isPureReactComponent?!Th(n,r)||!Th(s,o):!0}function sP(t,e,n){var r=!1,s=ha,o=e.contextType;return typeof o=="object"&&o!==null?o=as(o):(s=Er(e)?wl:nr.current,r=e.contextTypes,o=(r=r!=null)?lu(t,s):ha),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Py,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=o),e}function RN(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Py.enqueueReplaceState(e,e.state,null)}function Jv(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},_1(t);var o=e.contextType;typeof o=="object"&&o!==null?s.context=as(o):(o=Er(e)?wl:nr.current,s.context=lu(t,o)),s.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Xv(t,e,o,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Py.enqueueReplaceState(s,s.state,null),dg(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function hu(t,e){try{var n="",r=e;do n+=CV(r),r=r.return;while(r);var s=n}catch(o){s=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:s,digest:null}}function T0(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ew(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var e8=typeof WeakMap=="function"?WeakMap:Map;function iP(t,e,n){n=zi(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){gg||(gg=!0,uw=r),ew(t,e)},n}function oP(t,e,n){n=zi(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ew(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){ew(t,e),typeof r!="function"&&(ta===null?ta=new Set([this]):ta.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),n}function MN(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new e8;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=m8.bind(null,t,e,n),e.then(t,t))}function DN(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function LN(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=zi(-1,1),e.tag=2,ea(n,e,1))),n.lanes|=1),t)}var t8=ao.ReactCurrentOwner,Nr=!1;function cr(t,e,n,r){e.child=t===null?DA(e,null,n,r):uu(e,t.child,n,r)}function ON(t,e,n,r,s){n=n.render;var o=e.ref;return Dc(e,s),r=C1(t,e,n,r,o,s),n=E1(),t!==null&&!Nr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yi(t,e,s)):($t&&n&&p1(e),e.flags|=1,cr(t,e,r,s),e.child)}function VN(t,e,n,r,s){if(t===null){var o=n.type;return typeof o=="function"&&!V1(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,aP(t,e,o,r,s)):(t=Cp(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&s)){var a=o.memoizedProps;if(n=n.compare,n=n!==null?n:Th,n(a,r)&&t.ref===e.ref)return Yi(t,e,s)}return e.flags|=1,t=ra(o,r),t.ref=e.ref,t.return=e,e.child=t}function aP(t,e,n,r,s){if(t!==null){var o=t.memoizedProps;if(Th(o,r)&&t.ref===e.ref)if(Nr=!1,e.pendingProps=r=o,(t.lanes&s)!==0)t.flags&131072&&(Nr=!0);else return e.lanes=t.lanes,Yi(t,e,s)}return tw(t,e,n,r,s)}function lP(t,e,n){var r=e.pendingProps,s=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Dt(Sc,Mr),Mr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Dt(Sc,Mr),Mr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,Dt(Sc,Mr),Mr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,Dt(Sc,Mr),Mr|=r;return cr(t,e,s,n),e.child}function cP(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function tw(t,e,n,r,s){var o=Er(n)?wl:nr.current;return o=lu(e,o),Dc(e,s),n=C1(t,e,n,r,o,s),r=E1(),t!==null&&!Nr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Yi(t,e,s)):($t&&r&&p1(e),e.flags|=1,cr(t,e,n,s),e.child)}function FN(t,e,n,r,s){if(Er(n)){var o=!0;og(e)}else o=!1;if(Dc(e,s),e.stateNode===null)Sp(t,e),sP(e,n,r),Jv(e,n,r,s),r=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var c=a.context,u=n.contextType;typeof u=="object"&&u!==null?u=as(u):(u=Er(n)?wl:nr.current,u=lu(e,u));var d=n.getDerivedStateFromProps,h=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==r||c!==u)&&RN(e,a,r,u),Ao=!1;var m=e.memoizedState;a.state=m,dg(e,r,a,s),c=e.memoizedState,l!==r||m!==c||Cr.current||Ao?(typeof d=="function"&&(Xv(e,n,d,r),c=e.memoizedState),(l=Ao||IN(e,n,l,r,m,c,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),a.props=r,a.state=c,a.context=u,r=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{a=e.stateNode,OA(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:ys(e.type,l),a.props=u,h=e.pendingProps,m=a.context,c=n.contextType,typeof c=="object"&&c!==null?c=as(c):(c=Er(n)?wl:nr.current,c=lu(e,c));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==h||m!==c)&&RN(e,a,r,c),Ao=!1,m=e.memoizedState,a.state=m,dg(e,r,a,s);var _=e.memoizedState;l!==h||m!==_||Cr.current||Ao?(typeof g=="function"&&(Xv(e,n,g,r),_=e.memoizedState),(u=Ao||IN(e,n,u,r,m,_,c)||!1)?(d||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(r,_,c),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(r,_,c)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),a.props=r,a.state=_,a.context=c,r=u):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return nw(t,e,n,r,o,s)}function nw(t,e,n,r,s,o){cP(t,e);var a=(e.flags&128)!==0;if(!r&&!a)return s&&SN(e,n,!1),Yi(t,e,o);r=e.stateNode,t8.current=e;var l=a&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&a?(e.child=uu(e,t.child,null,o),e.child=uu(e,null,l,o)):cr(t,e,l,o),e.memoizedState=r.state,s&&SN(e,n,!0),e.child}function uP(t){var e=t.stateNode;e.pendingContext?jN(t,e.pendingContext,e.pendingContext!==e.context):e.context&&jN(t,e.context,!1),j1(t,e.containerInfo)}function UN(t,e,n,r,s){return cu(),y1(s),e.flags|=256,cr(t,e,n,r),e.child}var rw={dehydrated:null,treeContext:null,retryLane:0};function sw(t){return{baseLanes:t,cachePool:null,transitions:null}}function dP(t,e,n){var r=e.pendingProps,s=Ht.current,o=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Dt(Ht,s&1),t===null)return Yv(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=r.children,t=r.fallback,o?(r=e.mode,o=e.child,a={mode:"hidden",children:a},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=a):o=My(a,r,0,null),t=fl(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=sw(n),e.memoizedState=rw,t):P1(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return n8(t,e,a,r,l,s,n);if(o){o=r.fallback,a=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(a&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ra(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?o=ra(l,o):(o=fl(o,a,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,a=t.child.memoizedState,a=a===null?sw(n):{baseLanes:a.baseLanes|n,cachePool:null,transitions:a.transitions},o.memoizedState=a,o.childLanes=t.childLanes&~n,e.memoizedState=rw,r}return o=t.child,t=o.sibling,r=ra(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function P1(t,e){return e=My({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Um(t,e,n,r){return r!==null&&y1(r),uu(e,t.child,null,n),t=P1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function n8(t,e,n,r,s,o,a){if(n)return e.flags&256?(e.flags&=-257,r=T0(Error(ge(422))),Um(t,e,a,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,s=e.mode,r=My({mode:"visible",children:r.children},s,0,null),o=fl(o,s,a,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&uu(e,t.child,null,a),e.child.memoizedState=sw(a),e.memoizedState=rw,o);if(!(e.mode&1))return Um(t,e,a,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(ge(419)),r=T0(o,r,void 0),Um(t,e,a,r)}if(l=(a&t.childLanes)!==0,Nr||l){if(r=In,r!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|a)?0:s,s!==0&&s!==o.retryLane&&(o.retryLane=s,Qi(t,s),Is(r,t,s,-1))}return O1(),r=T0(Error(ge(421))),Um(t,e,a,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=p8.bind(null,t),s._reactRetry=e,null):(t=o.treeContext,Or=Jo(s.nextSibling),Fr=e,$t=!0,ws=null,t!==null&&(Xr[Jr++]=Vi,Xr[Jr++]=Fi,Xr[Jr++]=bl,Vi=t.id,Fi=t.overflow,bl=e),e=P1(e,r.children),e.flags|=4096,e)}function BN(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Zv(t.return,e,n)}function C0(t,e,n,r,s){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=s)}function hP(t,e,n){var r=e.pendingProps,s=r.revealOrder,o=r.tail;if(cr(t,e,r.children,n),r=Ht.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&BN(t,n,e);else if(t.tag===19)BN(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Dt(Ht,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&hg(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),C0(e,!1,s,n,o);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&hg(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}C0(e,!0,n,null,o);break;case"together":C0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Sp(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Yi(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jl|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ge(153));if(e.child!==null){for(t=e.child,n=ra(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ra(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function r8(t,e,n){switch(e.tag){case 3:uP(e),cu();break;case 5:VA(e);break;case 1:Er(e.type)&&og(e);break;case 4:j1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Dt(cg,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Dt(Ht,Ht.current&1),e.flags|=128,null):n&e.child.childLanes?dP(t,e,n):(Dt(Ht,Ht.current&1),t=Yi(t,e,n),t!==null?t.sibling:null);Dt(Ht,Ht.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return hP(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Dt(Ht,Ht.current),r)break;return null;case 22:case 23:return e.lanes=0,lP(t,e,n)}return Yi(t,e,n)}var fP,iw,mP,pP;fP=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};iw=function(){};mP=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,el(ri.current);var o=null;switch(n){case"input":s=Cv(t,s),r=Cv(t,r),o=[];break;case"select":s=Jt({},s,{value:void 0}),r=Jt({},r,{value:void 0}),o=[];break;case"textarea":s=Av(t,s),r=Av(t,r),o=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=sg)}Iv(n,r);var a;n=null;for(u in s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var l=s[u];for(a in l)l.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(vh.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=s!=null?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(a in l)!l.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&l[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(o=o||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(o=o||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(vh.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Vt("scroll",t),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(e.updateQueue=u)&&(e.flags|=4)}};pP=function(t,e,n,r){n!==r&&(e.flags|=4)};function jd(t,e){if(!$t)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Hn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function s8(t,e,n){var r=e.pendingProps;switch(g1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Hn(e),null;case 1:return Er(e.type)&&ig(),Hn(e),null;case 3:return r=e.stateNode,du(),Ut(Cr),Ut(nr),N1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Vm(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ws!==null&&(fw(ws),ws=null))),iw(t,e),Hn(e),null;case 5:S1(e);var s=el(Ph.current);if(n=e.type,t!==null&&e.stateNode!=null)mP(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ge(166));return Hn(e),null}if(t=el(ri.current),Vm(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Js]=e,r[kh]=o,t=(e.mode&1)!==0,n){case"dialog":Vt("cancel",r),Vt("close",r);break;case"iframe":case"object":case"embed":Vt("load",r);break;case"video":case"audio":for(s=0;s<Ld.length;s++)Vt(Ld[s],r);break;case"source":Vt("error",r);break;case"img":case"image":case"link":Vt("error",r),Vt("load",r);break;case"details":Vt("toggle",r);break;case"input":YS(r,o),Vt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vt("invalid",r);break;case"textarea":XS(r,o),Vt("invalid",r)}Iv(n,o),s=null;for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Om(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Om(r.textContent,l,t),s=["children",""+l]):vh.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Vt("scroll",r)}switch(n){case"input":km(r),ZS(r,o,!0);break;case"textarea":km(r),JS(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=sg)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=zk(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=a.createElement(n,{is:r.is}):(t=a.createElement(n),n==="select"&&(a=t,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):t=a.createElementNS(t,n),t[Js]=e,t[kh]=r,fP(t,e,!1,!1),e.stateNode=t;e:{switch(a=Rv(n,r),n){case"dialog":Vt("cancel",t),Vt("close",t),s=r;break;case"iframe":case"object":case"embed":Vt("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ld.length;s++)Vt(Ld[s],t);s=r;break;case"source":Vt("error",t),s=r;break;case"img":case"image":case"link":Vt("error",t),Vt("load",t),s=r;break;case"details":Vt("toggle",t),s=r;break;case"input":YS(t,r),s=Cv(t,r),Vt("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Jt({},r,{value:void 0}),Vt("invalid",t);break;case"textarea":XS(t,r),s=Av(t,r),Vt("invalid",t);break;default:s=r}Iv(n,s),l=s;for(o in l)if(l.hasOwnProperty(o)){var c=l[o];o==="style"?qk(t,c):o==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Wk(t,c)):o==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&wh(t,c):typeof c=="number"&&wh(t,""+c):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(vh.hasOwnProperty(o)?c!=null&&o==="onScroll"&&Vt("scroll",t):c!=null&&t1(t,o,c,a))}switch(n){case"input":km(t),ZS(t,r,!1);break;case"textarea":km(t),JS(t);break;case"option":r.value!=null&&t.setAttribute("value",""+da(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Pc(t,!!r.multiple,o,!1):r.defaultValue!=null&&Pc(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=sg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Hn(e),null;case 6:if(t&&e.stateNode!=null)pP(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ge(166));if(n=el(Ph.current),el(ri.current),Vm(e)){if(r=e.stateNode,n=e.memoizedProps,r[Js]=e,(o=r.nodeValue!==n)&&(t=Fr,t!==null))switch(t.tag){case 3:Om(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Om(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Js]=e,e.stateNode=r}return Hn(e),null;case 13:if(Ut(Ht),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if($t&&Or!==null&&e.mode&1&&!(e.flags&128))RA(),cu(),e.flags|=98560,o=!1;else if(o=Vm(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ge(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ge(317));o[Js]=e}else cu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Hn(e),o=!1}else ws!==null&&(fw(ws),ws=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ht.current&1?Nn===0&&(Nn=3):O1())),e.updateQueue!==null&&(e.flags|=4),Hn(e),null);case 4:return du(),iw(t,e),t===null&&Ch(e.stateNode.containerInfo),Hn(e),null;case 10:return w1(e.type._context),Hn(e),null;case 17:return Er(e.type)&&ig(),Hn(e),null;case 19:if(Ut(Ht),o=e.memoizedState,o===null)return Hn(e),null;if(r=(e.flags&128)!==0,a=o.rendering,a===null)if(r)jd(o,!1);else{if(Nn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=hg(t),a!==null){for(e.flags|=128,jd(o,!1),r=a.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,a=o.alternate,a===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,t=a.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Dt(Ht,Ht.current&1|2),e.child}t=t.sibling}o.tail!==null&&hn()>fu&&(e.flags|=128,r=!0,jd(o,!1),e.lanes=4194304)}else{if(!r)if(t=hg(a),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jd(o,!0),o.tail===null&&o.tailMode==="hidden"&&!a.alternate&&!$t)return Hn(e),null}else 2*hn()-o.renderingStartTime>fu&&n!==1073741824&&(e.flags|=128,r=!0,jd(o,!1),e.lanes=4194304);o.isBackwards?(a.sibling=e.child,e.child=a):(n=o.last,n!==null?n.sibling=a:e.child=a,o.last=a)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=hn(),e.sibling=null,n=Ht.current,Dt(Ht,r?n&1|2:n&1),e):(Hn(e),null);case 22:case 23:return L1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mr&1073741824&&(Hn(e),e.subtreeFlags&6&&(e.flags|=8192)):Hn(e),null;case 24:return null;case 25:return null}throw Error(ge(156,e.tag))}function i8(t,e){switch(g1(e),e.tag){case 1:return Er(e.type)&&ig(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return du(),Ut(Cr),Ut(nr),N1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return S1(e),null;case 13:if(Ut(Ht),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ge(340));cu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ut(Ht),null;case 4:return du(),null;case 10:return w1(e.type._context),null;case 22:case 23:return L1(),null;case 24:return null;default:return null}}var Bm=!1,Zn=!1,o8=typeof WeakSet=="function"?WeakSet:Set,Me=null;function jc(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){on(t,e,r)}else n.current=null}function ow(t,e,n){try{n()}catch(r){on(t,e,r)}}var $N=!1;function a8(t,e){if(zv=tg,t=wA(),m1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=t,m=null;t:for(;;){for(var g;h!==n||s!==0&&h.nodeType!==3||(l=a+s),h!==o||r!==0&&h.nodeType!==3||(c=a+r),h.nodeType===3&&(a+=h.nodeValue.length),(g=h.firstChild)!==null;)m=h,h=g;for(;;){if(h===t)break t;if(m===n&&++u===s&&(l=a),m===o&&++d===r&&(c=a),(g=h.nextSibling)!==null)break;h=m,m=h.parentNode}h=g}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Wv={focusedElem:t,selectionRange:n},tg=!1,Me=e;Me!==null;)if(e=Me,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Me=t;else for(;Me!==null;){e=Me;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var v=_.memoizedProps,x=_.memoizedState,y=e.stateNode,w=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:ys(e.type,v),x);y.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var j=e.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ge(163))}}catch(E){on(e,e.return,E)}if(t=e.sibling,t!==null){t.return=e.return,Me=t;break}Me=e.return}return _=$N,$N=!1,_}function eh(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var o=s.destroy;s.destroy=void 0,o!==void 0&&ow(e,n,o)}s=s.next}while(s!==r)}}function Iy(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function aw(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function gP(t){var e=t.alternate;e!==null&&(t.alternate=null,gP(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Js],delete e[kh],delete e[Gv],delete e[zF],delete e[WF])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function yP(t){return t.tag===5||t.tag===3||t.tag===4}function zN(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||yP(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=sg));else if(r!==4&&(t=t.child,t!==null))for(lw(t,e,n),t=t.sibling;t!==null;)lw(t,e,n),t=t.sibling}function cw(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(cw(t,e,n),t=t.sibling;t!==null;)cw(t,e,n),t=t.sibling}var Dn=null,vs=!1;function bo(t,e,n){for(n=n.child;n!==null;)xP(t,e,n),n=n.sibling}function xP(t,e,n){if(ni&&typeof ni.onCommitFiberUnmount=="function")try{ni.onCommitFiberUnmount(Sy,n)}catch{}switch(n.tag){case 5:Zn||jc(n,e);case 6:var r=Dn,s=vs;Dn=null,bo(t,e,n),Dn=r,vs=s,Dn!==null&&(vs?(t=Dn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Dn.removeChild(n.stateNode));break;case 18:Dn!==null&&(vs?(t=Dn,n=n.stateNode,t.nodeType===8?w0(t.parentNode,n):t.nodeType===1&&w0(t,n),Sh(t)):w0(Dn,n.stateNode));break;case 4:r=Dn,s=vs,Dn=n.stateNode.containerInfo,vs=!0,bo(t,e,n),Dn=r,vs=s;break;case 0:case 11:case 14:case 15:if(!Zn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var o=s,a=o.destroy;o=o.tag,a!==void 0&&(o&2||o&4)&&ow(n,e,a),s=s.next}while(s!==r)}bo(t,e,n);break;case 1:if(!Zn&&(jc(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){on(n,e,l)}bo(t,e,n);break;case 21:bo(t,e,n);break;case 22:n.mode&1?(Zn=(r=Zn)||n.memoizedState!==null,bo(t,e,n),Zn=r):bo(t,e,n);break;default:bo(t,e,n)}}function WN(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new o8),e.forEach(function(r){var s=g8.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function fs(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var o=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:Dn=l.stateNode,vs=!1;break e;case 3:Dn=l.stateNode.containerInfo,vs=!0;break e;case 4:Dn=l.stateNode.containerInfo,vs=!0;break e}l=l.return}if(Dn===null)throw Error(ge(160));xP(o,a,s),Dn=null,vs=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(u){on(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vP(e,t),e=e.sibling}function vP(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(fs(e,t),Ws(t),r&4){try{eh(3,t,t.return),Iy(3,t)}catch(v){on(t,t.return,v)}try{eh(5,t,t.return)}catch(v){on(t,t.return,v)}}break;case 1:fs(e,t),Ws(t),r&512&&n!==null&&jc(n,n.return);break;case 5:if(fs(e,t),Ws(t),r&512&&n!==null&&jc(n,n.return),t.flags&32){var s=t.stateNode;try{wh(s,"")}catch(v){on(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var o=t.memoizedProps,a=n!==null?n.memoizedProps:o,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&Bk(s,o),Rv(l,a);var u=Rv(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];d==="style"?qk(s,h):d==="dangerouslySetInnerHTML"?Wk(s,h):d==="children"?wh(s,h):t1(s,d,h,u)}switch(l){case"input":Ev(s,o);break;case"textarea":$k(s,o);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Pc(s,!!o.multiple,g,!1):m!==!!o.multiple&&(o.defaultValue!=null?Pc(s,!!o.multiple,o.defaultValue,!0):Pc(s,!!o.multiple,o.multiple?[]:"",!1))}s[kh]=o}catch(v){on(t,t.return,v)}}break;case 6:if(fs(e,t),Ws(t),r&4){if(t.stateNode===null)throw Error(ge(162));s=t.stateNode,o=t.memoizedProps;try{s.nodeValue=o}catch(v){on(t,t.return,v)}}break;case 3:if(fs(e,t),Ws(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Sh(e.containerInfo)}catch(v){on(t,t.return,v)}break;case 4:fs(e,t),Ws(t);break;case 13:fs(e,t),Ws(t),s=t.child,s.flags&8192&&(o=s.memoizedState!==null,s.stateNode.isHidden=o,!o||s.alternate!==null&&s.alternate.memoizedState!==null||(M1=hn())),r&4&&WN(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Zn=(u=Zn)||d,fs(e,t),Zn=u):fs(e,t),Ws(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!d&&t.mode&1)for(Me=t,d=t.child;d!==null;){for(h=Me=d;Me!==null;){switch(m=Me,g=m.child,m.tag){case 0:case 11:case 14:case 15:eh(4,m,m.return);break;case 1:jc(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(v){on(r,n,v)}}break;case 5:jc(m,m.return);break;case 22:if(m.memoizedState!==null){qN(h);continue}}g!==null?(g.return=m,Me=g):qN(h)}d=d.sibling}e:for(d=null,h=t;;){if(h.tag===5){if(d===null){d=h;try{s=h.stateNode,u?(o=s.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=h.stateNode,c=h.memoizedProps.style,a=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Hk("display",a))}catch(v){on(t,t.return,v)}}}else if(h.tag===6){if(d===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(v){on(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fs(e,t),Ws(t),r&4&&WN(t);break;case 21:break;default:fs(e,t),Ws(t)}}function Ws(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(yP(n)){var r=n;break e}n=n.return}throw Error(ge(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(wh(s,""),r.flags&=-33);var o=zN(t);cw(t,o,s);break;case 3:case 4:var a=r.stateNode.containerInfo,l=zN(t);lw(t,l,a);break;default:throw Error(ge(161))}}catch(c){on(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function l8(t,e,n){Me=t,wP(t)}function wP(t,e,n){for(var r=(t.mode&1)!==0;Me!==null;){var s=Me,o=s.child;if(s.tag===22&&r){var a=s.memoizedState!==null||Bm;if(!a){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Zn;l=Bm;var u=Zn;if(Bm=a,(Zn=c)&&!u)for(Me=s;Me!==null;)a=Me,c=a.child,a.tag===22&&a.memoizedState!==null?GN(s):c!==null?(c.return=a,Me=c):GN(s);for(;o!==null;)Me=o,wP(o),o=o.sibling;Me=s,Bm=l,Zn=u}HN(t)}else s.subtreeFlags&8772&&o!==null?(o.return=s,Me=o):HN(t)}}function HN(t){for(;Me!==null;){var e=Me;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Zn||Iy(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Zn)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:ys(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&kN(e,o,r);break;case 3:var a=e.updateQueue;if(a!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}kN(e,a,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var h=d.dehydrated;h!==null&&Sh(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ge(163))}Zn||e.flags&512&&aw(e)}catch(m){on(e,e.return,m)}}if(e===t){Me=null;break}if(n=e.sibling,n!==null){n.return=e.return,Me=n;break}Me=e.return}}function qN(t){for(;Me!==null;){var e=Me;if(e===t){Me=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Me=n;break}Me=e.return}}function GN(t){for(;Me!==null;){var e=Me;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Iy(4,e)}catch(c){on(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){on(e,s,c)}}var o=e.return;try{aw(e)}catch(c){on(e,o,c)}break;case 5:var a=e.return;try{aw(e)}catch(c){on(e,a,c)}}}catch(c){on(e,e.return,c)}if(e===t){Me=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Me=l;break}Me=e.return}}var c8=Math.ceil,pg=ao.ReactCurrentDispatcher,I1=ao.ReactCurrentOwner,is=ao.ReactCurrentBatchConfig,wt=0,In=null,pn=null,Un=0,Mr=0,Sc=ka(0),Nn=0,Dh=null,jl=0,Ry=0,R1=0,th=null,jr=null,M1=0,fu=1/0,Ii=null,gg=!1,uw=null,ta=null,$m=!1,Go=null,yg=0,nh=0,dw=null,Np=-1,Tp=0;function dr(){return wt&6?hn():Np!==-1?Np:Np=hn()}function na(t){return t.mode&1?wt&2&&Un!==0?Un&-Un:qF.transition!==null?(Tp===0&&(Tp=sA()),Tp):(t=Tt,t!==0||(t=window.event,t=t===void 0?16:dA(t.type)),t):1}function Is(t,e,n,r){if(50<nh)throw nh=0,dw=null,Error(ge(185));Cf(t,n,r),(!(wt&2)||t!==In)&&(t===In&&(!(wt&2)&&(Ry|=n),Nn===4&&Io(t,Un)),kr(t,r),n===1&&wt===0&&!(e.mode&1)&&(fu=hn()+500,ky&&Aa()))}function kr(t,e){var n=t.callbackNode;qV(t,e);var r=eg(t,t===In?Un:0);if(r===0)n!==null&&nN(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&nN(n),e===1)t.tag===0?HF(KN.bind(null,t)):AA(KN.bind(null,t)),BF(function(){!(wt&6)&&Aa()}),n=null;else{switch(iA(r)){case 1:n=o1;break;case 4:n=nA;break;case 16:n=Jp;break;case 536870912:n=rA;break;default:n=Jp}n=EP(n,bP.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function bP(t,e){if(Np=-1,Tp=0,wt&6)throw Error(ge(327));var n=t.callbackNode;if(Lc()&&t.callbackNode!==n)return null;var r=eg(t,t===In?Un:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=xg(t,r);else{e=r;var s=wt;wt|=2;var o=jP();(In!==t||Un!==e)&&(Ii=null,fu=hn()+500,hl(t,e));do try{h8();break}catch(l){_P(t,l)}while(!0);v1(),pg.current=o,wt=s,pn!==null?e=0:(In=null,Un=0,e=Nn)}if(e!==0){if(e===2&&(s=Vv(t),s!==0&&(r=s,e=hw(t,s))),e===1)throw n=Dh,hl(t,0),Io(t,r),kr(t,hn()),n;if(e===6)Io(t,r);else{if(s=t.current.alternate,!(r&30)&&!u8(s)&&(e=xg(t,r),e===2&&(o=Vv(t),o!==0&&(r=o,e=hw(t,o))),e===1))throw n=Dh,hl(t,0),Io(t,r),kr(t,hn()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(ge(345));case 2:Ka(t,jr,Ii);break;case 3:if(Io(t,r),(r&130023424)===r&&(e=M1+500-hn(),10<e)){if(eg(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){dr(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=qv(Ka.bind(null,t,jr,Ii),e);break}Ka(t,jr,Ii);break;case 4:if(Io(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var a=31-Ps(r);o=1<<a,a=e[a],a>s&&(s=a),r&=~o}if(r=s,r=hn()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*c8(r/1960))-r,10<r){t.timeoutHandle=qv(Ka.bind(null,t,jr,Ii),r);break}Ka(t,jr,Ii);break;case 5:Ka(t,jr,Ii);break;default:throw Error(ge(329))}}}return kr(t,hn()),t.callbackNode===n?bP.bind(null,t):null}function hw(t,e){var n=th;return t.current.memoizedState.isDehydrated&&(hl(t,e).flags|=256),t=xg(t,e),t!==2&&(e=jr,jr=n,e!==null&&fw(e)),t}function fw(t){jr===null?jr=t:jr.push.apply(jr,t)}function u8(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],o=s.getSnapshot;s=s.value;try{if(!Ds(o(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Io(t,e){for(e&=~R1,e&=~Ry,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ps(e),r=1<<n;t[n]=-1,e&=~r}}function KN(t){if(wt&6)throw Error(ge(327));Lc();var e=eg(t,0);if(!(e&1))return kr(t,hn()),null;var n=xg(t,e);if(t.tag!==0&&n===2){var r=Vv(t);r!==0&&(e=r,n=hw(t,r))}if(n===1)throw n=Dh,hl(t,0),Io(t,e),kr(t,hn()),n;if(n===6)throw Error(ge(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ka(t,jr,Ii),kr(t,hn()),null}function D1(t,e){var n=wt;wt|=1;try{return t(e)}finally{wt=n,wt===0&&(fu=hn()+500,ky&&Aa())}}function Sl(t){Go!==null&&Go.tag===0&&!(wt&6)&&Lc();var e=wt;wt|=1;var n=is.transition,r=Tt;try{if(is.transition=null,Tt=1,t)return t()}finally{Tt=r,is.transition=n,wt=e,!(wt&6)&&Aa()}}function L1(){Mr=Sc.current,Ut(Sc)}function hl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,UF(n)),pn!==null)for(n=pn.return;n!==null;){var r=n;switch(g1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ig();break;case 3:du(),Ut(Cr),Ut(nr),N1();break;case 5:S1(r);break;case 4:du();break;case 13:Ut(Ht);break;case 19:Ut(Ht);break;case 10:w1(r.type._context);break;case 22:case 23:L1()}n=n.return}if(In=t,pn=t=ra(t.current,null),Un=Mr=e,Nn=0,Dh=null,R1=Ry=jl=0,jr=th=null,Ja!==null){for(e=0;e<Ja.length;e++)if(n=Ja[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,o=n.pending;if(o!==null){var a=o.next;o.next=s,r.next=a}n.pending=r}Ja=null}return t}function _P(t,e){do{var n=pn;try{if(v1(),_p.current=mg,fg){for(var r=Xt.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}fg=!1}if(_l=0,Pn=_n=Xt=null,Jd=!1,Ih=0,I1.current=null,n===null||n.return===null){Nn=1,Dh=e,pn=null;break}e:{var o=t,a=n.return,l=n,c=e;if(e=Un,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,h=d.tag;if(!(d.mode&1)&&(h===0||h===11||h===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=DN(a);if(g!==null){g.flags&=-257,LN(g,a,l,o,e),g.mode&1&&MN(o,u,e),e=g,c=u;var _=e.updateQueue;if(_===null){var v=new Set;v.add(c),e.updateQueue=v}else _.add(c);break e}else{if(!(e&1)){MN(o,u,e),O1();break e}c=Error(ge(426))}}else if($t&&l.mode&1){var x=DN(a);if(x!==null){!(x.flags&65536)&&(x.flags|=256),LN(x,a,l,o,e),y1(hu(c,l));break e}}o=c=hu(c,l),Nn!==4&&(Nn=2),th===null?th=[o]:th.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var y=iP(o,c,e);EN(o,y);break e;case 1:l=c;var w=o.type,j=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(ta===null||!ta.has(j)))){o.flags|=65536,e&=-e,o.lanes|=e;var E=oP(o,l,e);EN(o,E);break e}}o=o.return}while(o!==null)}NP(n)}catch(P){e=P,pn===n&&n!==null&&(pn=n=n.return);continue}break}while(!0)}function jP(){var t=pg.current;return pg.current=mg,t===null?mg:t}function O1(){(Nn===0||Nn===3||Nn===2)&&(Nn=4),In===null||!(jl&268435455)&&!(Ry&268435455)||Io(In,Un)}function xg(t,e){var n=wt;wt|=2;var r=jP();(In!==t||Un!==e)&&(Ii=null,hl(t,e));do try{d8();break}catch(s){_P(t,s)}while(!0);if(v1(),wt=n,pg.current=r,pn!==null)throw Error(ge(261));return In=null,Un=0,Nn}function d8(){for(;pn!==null;)SP(pn)}function h8(){for(;pn!==null&&!OV();)SP(pn)}function SP(t){var e=CP(t.alternate,t,Mr);t.memoizedProps=t.pendingProps,e===null?NP(t):pn=e,I1.current=null}function NP(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=i8(n,e),n!==null){n.flags&=32767,pn=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Nn=6,pn=null;return}}else if(n=s8(n,e,Mr),n!==null){pn=n;return}if(e=e.sibling,e!==null){pn=e;return}pn=e=t}while(e!==null);Nn===0&&(Nn=5)}function Ka(t,e,n){var r=Tt,s=is.transition;try{is.transition=null,Tt=1,f8(t,e,n,r)}finally{is.transition=s,Tt=r}return null}function f8(t,e,n,r){do Lc();while(Go!==null);if(wt&6)throw Error(ge(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ge(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(GV(t,o),t===In&&(pn=In=null,Un=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$m||($m=!0,EP(Jp,function(){return Lc(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=is.transition,is.transition=null;var a=Tt;Tt=1;var l=wt;wt|=4,I1.current=null,a8(t,n),vP(n,t),RF(Wv),tg=!!zv,Wv=zv=null,t.current=n,l8(n),VV(),wt=l,Tt=a,is.transition=o}else t.current=n;if($m&&($m=!1,Go=t,yg=s),o=t.pendingLanes,o===0&&(ta=null),BV(n.stateNode),kr(t,hn()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(gg)throw gg=!1,t=uw,uw=null,t;return yg&1&&t.tag!==0&&Lc(),o=t.pendingLanes,o&1?t===dw?nh++:(nh=0,dw=t):nh=0,Aa(),null}function Lc(){if(Go!==null){var t=iA(yg),e=is.transition,n=Tt;try{if(is.transition=null,Tt=16>t?16:t,Go===null)var r=!1;else{if(t=Go,Go=null,yg=0,wt&6)throw Error(ge(331));var s=wt;for(wt|=4,Me=t.current;Me!==null;){var o=Me,a=o.child;if(Me.flags&16){var l=o.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(Me=u;Me!==null;){var d=Me;switch(d.tag){case 0:case 11:case 15:eh(8,d,o)}var h=d.child;if(h!==null)h.return=d,Me=h;else for(;Me!==null;){d=Me;var m=d.sibling,g=d.return;if(gP(d),d===u){Me=null;break}if(m!==null){m.return=g,Me=m;break}Me=g}}}var _=o.alternate;if(_!==null){var v=_.child;if(v!==null){_.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}Me=o}}if(o.subtreeFlags&2064&&a!==null)a.return=o,Me=a;else e:for(;Me!==null;){if(o=Me,o.flags&2048)switch(o.tag){case 0:case 11:case 15:eh(9,o,o.return)}var y=o.sibling;if(y!==null){y.return=o.return,Me=y;break e}Me=o.return}}var w=t.current;for(Me=w;Me!==null;){a=Me;var j=a.child;if(a.subtreeFlags&2064&&j!==null)j.return=a,Me=j;else e:for(a=w;Me!==null;){if(l=Me,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Iy(9,l)}}catch(P){on(l,l.return,P)}if(l===a){Me=null;break e}var E=l.sibling;if(E!==null){E.return=l.return,Me=E;break e}Me=l.return}}if(wt=s,Aa(),ni&&typeof ni.onPostCommitFiberRoot=="function")try{ni.onPostCommitFiberRoot(Sy,t)}catch{}r=!0}return r}finally{Tt=n,is.transition=e}}return!1}function QN(t,e,n){e=hu(n,e),e=iP(t,e,1),t=ea(t,e,1),e=dr(),t!==null&&(Cf(t,1,e),kr(t,e))}function on(t,e,n){if(t.tag===3)QN(t,t,n);else for(;e!==null;){if(e.tag===3){QN(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ta===null||!ta.has(r))){t=hu(n,t),t=oP(e,t,1),e=ea(e,t,1),t=dr(),e!==null&&(Cf(e,1,t),kr(e,t));break}}e=e.return}}function m8(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=dr(),t.pingedLanes|=t.suspendedLanes&n,In===t&&(Un&n)===n&&(Nn===4||Nn===3&&(Un&130023424)===Un&&500>hn()-M1?hl(t,0):R1|=n),kr(t,e)}function TP(t,e){e===0&&(t.mode&1?(e=Im,Im<<=1,!(Im&130023424)&&(Im=4194304)):e=1);var n=dr();t=Qi(t,e),t!==null&&(Cf(t,e,n),kr(t,n))}function p8(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),TP(t,n)}function g8(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ge(314))}r!==null&&r.delete(e),TP(t,n)}var CP;CP=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Cr.current)Nr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Nr=!1,r8(t,e,n);Nr=!!(t.flags&131072)}else Nr=!1,$t&&e.flags&1048576&&PA(e,lg,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Sp(t,e),t=e.pendingProps;var s=lu(e,nr.current);Dc(e,n),s=C1(null,e,r,t,s,n);var o=E1();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Er(r)?(o=!0,og(e)):o=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_1(e),s.updater=Py,e.stateNode=s,s._reactInternals=e,Jv(e,r,t,n),e=nw(null,e,r,!0,o,n)):(e.tag=0,$t&&o&&p1(e),cr(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Sp(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=x8(r),t=ys(r,t),s){case 0:e=tw(null,e,r,t,n);break e;case 1:e=FN(null,e,r,t,n);break e;case 11:e=ON(null,e,r,t,n);break e;case 14:e=VN(null,e,r,ys(r.type,t),n);break e}throw Error(ge(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ys(r,s),tw(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ys(r,s),FN(t,e,r,s,n);case 3:e:{if(uP(e),t===null)throw Error(ge(387));r=e.pendingProps,o=e.memoizedState,s=o.element,OA(t,e),dg(e,r,null,n);var a=e.memoizedState;if(r=a.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){s=hu(Error(ge(423)),e),e=UN(t,e,r,n,s);break e}else if(r!==s){s=hu(Error(ge(424)),e),e=UN(t,e,r,n,s);break e}else for(Or=Jo(e.stateNode.containerInfo.firstChild),Fr=e,$t=!0,ws=null,n=DA(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(cu(),r===s){e=Yi(t,e,n);break e}cr(t,e,r,n)}e=e.child}return e;case 5:return VA(e),t===null&&Yv(e),r=e.type,s=e.pendingProps,o=t!==null?t.memoizedProps:null,a=s.children,Hv(r,s)?a=null:o!==null&&Hv(r,o)&&(e.flags|=32),cP(t,e),cr(t,e,a,n),e.child;case 6:return t===null&&Yv(e),null;case 13:return dP(t,e,n);case 4:return j1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=uu(e,null,r,n):cr(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ys(r,s),ON(t,e,r,s,n);case 7:return cr(t,e,e.pendingProps,n),e.child;case 8:return cr(t,e,e.pendingProps.children,n),e.child;case 12:return cr(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,o=e.memoizedProps,a=s.value,Dt(cg,r._currentValue),r._currentValue=a,o!==null)if(Ds(o.value,a)){if(o.children===s.children&&!Cr.current){e=Yi(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){a=o.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(o.tag===1){c=zi(-1,n&-n),c.tag=2;var u=o.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),Zv(o.return,n,e),l.lanes|=n;break}c=c.next}}else if(o.tag===10)a=o.type===e.type?null:o.child;else if(o.tag===18){if(a=o.return,a===null)throw Error(ge(341));a.lanes|=n,l=a.alternate,l!==null&&(l.lanes|=n),Zv(a,n,e),a=o.sibling}else a=o.child;if(a!==null)a.return=o;else for(a=o;a!==null;){if(a===e){a=null;break}if(o=a.sibling,o!==null){o.return=a.return,a=o;break}a=a.return}o=a}cr(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,Dc(e,n),s=as(s),r=r(s),e.flags|=1,cr(t,e,r,n),e.child;case 14:return r=e.type,s=ys(r,e.pendingProps),s=ys(r.type,s),VN(t,e,r,s,n);case 15:return aP(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:ys(r,s),Sp(t,e),e.tag=1,Er(r)?(t=!0,og(e)):t=!1,Dc(e,n),sP(e,r,s),Jv(e,r,s,n),nw(null,e,r,!0,t,n);case 19:return hP(t,e,n);case 22:return lP(t,e,n)}throw Error(ge(156,e.tag))};function EP(t,e){return tA(t,e)}function y8(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ns(t,e,n,r){return new y8(t,e,n,r)}function V1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function x8(t){if(typeof t=="function")return V1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===r1)return 11;if(t===s1)return 14}return 2}function ra(t,e){var n=t.alternate;return n===null?(n=ns(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Cp(t,e,n,r,s,o){var a=2;if(r=t,typeof t=="function")V1(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case mc:return fl(n.children,s,o,e);case n1:a=8,s|=8;break;case jv:return t=ns(12,n,e,s|2),t.elementType=jv,t.lanes=o,t;case Sv:return t=ns(13,n,e,s),t.elementType=Sv,t.lanes=o,t;case Nv:return t=ns(19,n,e,s),t.elementType=Nv,t.lanes=o,t;case Vk:return My(n,s,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Lk:a=10;break e;case Ok:a=9;break e;case r1:a=11;break e;case s1:a=14;break e;case ko:a=16,r=null;break e}throw Error(ge(130,t==null?t:typeof t,""))}return e=ns(a,n,e,s),e.elementType=t,e.type=r,e.lanes=o,e}function fl(t,e,n,r){return t=ns(7,t,r,e),t.lanes=n,t}function My(t,e,n,r){return t=ns(22,t,r,e),t.elementType=Vk,t.lanes=n,t.stateNode={isHidden:!1},t}function E0(t,e,n){return t=ns(6,t,null,e),t.lanes=n,t}function k0(t,e,n){return e=ns(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function v8(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=c0(0),this.expirationTimes=c0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=c0(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function F1(t,e,n,r,s,o,a,l,c){return t=new v8(t,e,n,l,c),e===1?(e=1,o===!0&&(e|=8)):e=0,o=ns(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_1(o),t}function w8(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:fc,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function kP(t){if(!t)return ha;t=t._reactInternals;e:{if(Bl(t)!==t||t.tag!==1)throw Error(ge(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Er(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ge(171))}if(t.tag===1){var n=t.type;if(Er(n))return kA(t,n,e)}return e}function AP(t,e,n,r,s,o,a,l,c){return t=F1(n,r,!0,t,s,o,a,l,c),t.context=kP(null),n=t.current,r=dr(),s=na(n),o=zi(r,s),o.callback=e??null,ea(n,o,s),t.current.lanes=s,Cf(t,s,r),kr(t,r),t}function Dy(t,e,n,r){var s=e.current,o=dr(),a=na(s);return n=kP(n),e.context===null?e.context=n:e.pendingContext=n,e=zi(o,a),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ea(s,e,a),t!==null&&(Is(t,s,a,o),bp(t,s,a)),a}function vg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function YN(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function U1(t,e){YN(t,e),(t=t.alternate)&&YN(t,e)}function b8(){return null}var PP=typeof reportError=="function"?reportError:function(t){console.error(t)};function B1(t){this._internalRoot=t}Ly.prototype.render=B1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ge(409));Dy(t,e,null,null)};Ly.prototype.unmount=B1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Sl(function(){Dy(null,t,null,null)}),e[Ki]=null}};function Ly(t){this._internalRoot=t}Ly.prototype.unstable_scheduleHydration=function(t){if(t){var e=lA();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Po.length&&e!==0&&e<Po[n].priority;n++);Po.splice(n,0,t),n===0&&uA(t)}};function $1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Oy(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ZN(){}function _8(t,e,n,r,s){if(s){if(typeof r=="function"){var o=r;r=function(){var u=vg(a);o.call(u)}}var a=AP(e,r,t,0,null,!1,!1,"",ZN);return t._reactRootContainer=a,t[Ki]=a.current,Ch(t.nodeType===8?t.parentNode:t),Sl(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var u=vg(c);l.call(u)}}var c=F1(t,0,!1,null,null,!1,!1,"",ZN);return t._reactRootContainer=c,t[Ki]=c.current,Ch(t.nodeType===8?t.parentNode:t),Sl(function(){Dy(e,c,n,r)}),c}function Vy(t,e,n,r,s){var o=n._reactRootContainer;if(o){var a=o;if(typeof s=="function"){var l=s;s=function(){var c=vg(a);l.call(c)}}Dy(e,a,t,s)}else a=_8(n,e,t,s,r);return vg(a)}oA=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Dd(e.pendingLanes);n!==0&&(a1(e,n|1),kr(e,hn()),!(wt&6)&&(fu=hn()+500,Aa()))}break;case 13:Sl(function(){var r=Qi(t,1);if(r!==null){var s=dr();Is(r,t,1,s)}}),U1(t,1)}};l1=function(t){if(t.tag===13){var e=Qi(t,134217728);if(e!==null){var n=dr();Is(e,t,134217728,n)}U1(t,134217728)}};aA=function(t){if(t.tag===13){var e=na(t),n=Qi(t,e);if(n!==null){var r=dr();Is(n,t,e,r)}U1(t,e)}};lA=function(){return Tt};cA=function(t,e){var n=Tt;try{return Tt=t,e()}finally{Tt=n}};Dv=function(t,e,n){switch(e){case"input":if(Ev(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ey(r);if(!s)throw Error(ge(90));Uk(r),Ev(r,s)}}}break;case"textarea":$k(t,n);break;case"select":e=n.value,e!=null&&Pc(t,!!n.multiple,e,!1)}};Qk=D1;Yk=Sl;var j8={usingClientEntryPoint:!1,Events:[kf,xc,Ey,Gk,Kk,D1]},Sd={findFiberByHostInstance:Xa,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},S8={bundleType:Sd.bundleType,version:Sd.version,rendererPackageName:Sd.rendererPackageName,rendererConfig:Sd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ao.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jk(t),t===null?null:t.stateNode},findFiberByHostInstance:Sd.findFiberByHostInstance||b8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zm.isDisabled&&zm.supportsFiber)try{Sy=zm.inject(S8),ni=zm}catch{}}Wr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j8;Wr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!$1(e))throw Error(ge(200));return w8(t,e,null,n)};Wr.createRoot=function(t,e){if(!$1(t))throw Error(ge(299));var n=!1,r="",s=PP;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=F1(t,1,!1,null,null,n,!1,r,s),t[Ki]=e.current,Ch(t.nodeType===8?t.parentNode:t),new B1(e)};Wr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ge(188)):(t=Object.keys(t).join(","),Error(ge(268,t)));return t=Jk(e),t=t===null?null:t.stateNode,t};Wr.flushSync=function(t){return Sl(t)};Wr.hydrate=function(t,e,n){if(!Oy(e))throw Error(ge(200));return Vy(null,t,e,!0,n)};Wr.hydrateRoot=function(t,e,n){if(!$1(t))throw Error(ge(405));var r=n!=null&&n.hydratedSources||null,s=!1,o="",a=PP;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(a=n.onRecoverableError)),e=AP(e,null,t,1,n??null,s,!1,o,a),t[Ki]=e.current,Ch(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ly(e)};Wr.render=function(t,e,n){if(!Oy(e))throw Error(ge(200));return Vy(null,t,e,!1,n)};Wr.unmountComponentAtNode=function(t){if(!Oy(t))throw Error(ge(40));return t._reactRootContainer?(Sl(function(){Vy(null,null,t,!1,function(){t._reactRootContainer=null,t[Ki]=null})}),!0):!1};Wr.unstable_batchedUpdates=D1;Wr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Oy(n))throw Error(ge(200));if(t==null||t._reactInternals===void 0)throw Error(ge(38));return Vy(t,e,n,!1,r)};Wr.version="18.3.1-next-f1338f8080-20240426";function IP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(IP)}catch(t){console.error(t)}}IP(),Ik.exports=Wr;var $l=Ik.exports;const N8=vk($l);var RP,XN=$l;RP=XN.createRoot,XN.hydrateRoot;function T8(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,o,a=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(a.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),o=s.indexOf(".",1),a.push(s.substring(1,~r?r:~o?o:s.length)),l+=~r&&!~o?"(?:/([^/]+?))?":"/([^/]+?)",~o&&(l+=(~r?"?":"")+"\\"+s.substring(o))):l+="/"+s;return{keys:a,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var MP={exports:{}},DP={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mu=p;function C8(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var E8=typeof Object.is=="function"?Object.is:C8,k8=mu.useState,A8=mu.useEffect,P8=mu.useLayoutEffect,I8=mu.useDebugValue;function R8(t,e){var n=e(),r=k8({inst:{value:n,getSnapshot:e}}),s=r[0].inst,o=r[1];return P8(function(){s.value=n,s.getSnapshot=e,A0(s)&&o({inst:s})},[t,n,e]),A8(function(){return A0(s)&&o({inst:s}),t(function(){A0(s)&&o({inst:s})})},[t]),I8(n),n}function A0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!E8(t,n)}catch{return!0}}function M8(t,e){return e()}var D8=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?M8:R8;DP.useSyncExternalStore=mu.useSyncExternalStore!==void 0?mu.useSyncExternalStore:D8;MP.exports=DP;var L8=MP.exports;const O8=Ak.useInsertionEffect,V8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",LP=V8?p.useLayoutEffect:p.useEffect,F8=O8||LP,z1=t=>{const e=p.useRef([t,(...n)=>e[0](...n)]).current;return F8(()=>{e[0]=t}),e[1]},U8="popstate",W1="pushState",H1="replaceState",B8="hashchange",JN=[U8,W1,H1,B8],$8=t=>{for(const e of JN)addEventListener(e,t);return()=>{for(const e of JN)removeEventListener(e,t)}},OP=(t,e)=>L8.useSyncExternalStore($8,t,e),z8=()=>location.search,W8=({ssrSearch:t=""}={})=>OP(z8,()=>t),eT=()=>location.pathname,H8=({ssrPath:t}={})=>OP(eT,t?()=>t:eT),q8=(t,{replace:e=!1,state:n=null}={})=>history[e?H1:W1](n,"",t),G8=(t={})=>[H8(t),q8],tT=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[tT]>"u"){for(const t of[W1,H1]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,tT,{value:!0})}const K8=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",VP=(t="")=>t==="/"?"":t,Q8=(t,e)=>t[0]==="~"?t.slice(1):VP(e)+t,Y8=(t="",e)=>K8(nT(VP(t)),nT(e)),nT=t=>{try{return decodeURI(t)}catch{return t}},FP={hook:G8,searchHook:W8,parser:T8,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},UP=p.createContext(FP),Uu=()=>p.useContext(UP),BP={},$P=p.createContext(BP),Z8=()=>p.useContext($P),Fy=t=>{const[e,n]=t.hook(t);return[Y8(t.base,e),z1((r,s)=>n(Q8(r,t.base),s))]},Pf=()=>Fy(Uu()),q1=(t,e,n,r)=>{const{pattern:s,keys:o}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),a=s.exec(n)||[],[l,...c]=a;return l!==void 0?[!0,(()=>{const u=o!==!1?Object.fromEntries(o.map((h,m)=>[h,c[m]])):a.groups;let d={...c};return u&&Object.assign(d,u),d})(),...r?[l]:[]]:[!1,null]},X8=t=>q1(Uu().parser,t,Pf()[0]),J8=({children:t,...e})=>{var d,h;const n=Uu(),r=e.hook?FP:n;let s=r;const[o,a]=((d=e.ssrPath)==null?void 0:d.split("?"))??[];a&&(e.ssrSearch=a,e.ssrPath=o),e.hrefs=e.hrefs??((h=e.hook)==null?void 0:h.hrefs);let l=p.useRef({}),c=l.current,u=c;for(let m in r){const g=m==="base"?r[m]+(e[m]||""):e[m]||r[m];c===u&&g!==u[m]&&(l.current=u={...u}),u[m]=g,g!==r[m]&&(s=u)}return p.createElement(UP.Provider,{value:s,children:t})},rT=({children:t,component:e},n)=>e?p.createElement(e,{params:n}):typeof t=="function"?t(n):t,e9=t=>{let e=p.useRef(BP),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},mw=({path:t,nest:e,match:n,...r})=>{const s=Uu(),[o]=Fy(s),[a,l,c]=n??q1(s.parser,t,o,e),u=e9({...Z8(),...l});if(!a)return null;const d=c?p.createElement(J8,{base:c},rT(r,u)):rT(r,u);return p.createElement($P.Provider,{value:u,children:d})},vt=p.forwardRef((t,e)=>{const n=Uu(),[r,s]=Fy(n),{to:o="",href:a=o,onClick:l,asChild:c,children:u,className:d,replace:h,state:m,...g}=t,_=z1(x=>{x.ctrlKey||x.metaKey||x.altKey||x.shiftKey||x.button!==0||(l==null||l(x),x.defaultPrevented||(x.preventDefault(),s(a,t)))}),v=n.hrefs(a[0]==="~"?a.slice(1):n.base+a,n);return c&&p.isValidElement(u)?p.cloneElement(u,{onClick:_,href:v}):p.createElement("a",{...g,onClick:_,href:v,className:d!=null&&d.call?d(r===a):d,children:u,ref:e})}),zP=t=>Array.isArray(t)?t.flatMap(e=>zP(e&&e.type===p.Fragment?e.props.children:e)):[t],t9=({children:t,location:e})=>{const n=Uu(),[r]=Fy(n);for(const s of zP(t)){let o=0;if(p.isValidElement(s)&&(o=q1(n.parser,s.props.path,e||r,s.props.nest))[0])return p.cloneElement(s,{match:o})}return null},WP=t=>{const{to:e,href:n=e}=t,[,r]=Pf(),s=z1(()=>r(e||n,t));return LP(()=>{s()},[]),null};var Bu=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Nl=typeof window>"u"||"Deno"in globalThis;function Zr(){}function n9(t,e){return typeof t=="function"?t(e):t}function pw(t){return typeof t=="number"&&t>=0&&t!==1/0}function HP(t,e){return Math.max(t+(e||0)-Date.now(),0)}function Oc(t,e){return typeof t=="function"?t(e):t}function bs(t,e){return typeof t=="function"?t(e):t}function sT(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:o,queryKey:a,stale:l}=t;if(a){if(r){if(e.queryHash!==G1(a,e.options))return!1}else if(!Lh(e.queryKey,a))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||o&&!o(e))}function iT(t,e){const{exact:n,status:r,predicate:s,mutationKey:o}=t;if(o){if(!e.options.mutationKey)return!1;if(n){if(Tl(e.options.mutationKey)!==Tl(o))return!1}else if(!Lh(e.options.mutationKey,o))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function G1(t,e){return((e==null?void 0:e.queryKeyHashFn)||Tl)(t)}function Tl(t){return JSON.stringify(t,(e,n)=>gw(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Lh(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Lh(t[n],e[n])):!1}function qP(t,e){if(t===e)return t;const n=oT(t)&&oT(e);if(n||gw(t)&&gw(e)){const r=n?t:Object.keys(t),s=r.length,o=n?e:Object.keys(e),a=o.length,l=n?[]:{};let c=0;for(let u=0;u<a;u++){const d=n?u:o[u];(!n&&r.includes(d)||n)&&t[d]===void 0&&e[d]===void 0?(l[d]=void 0,c++):(l[d]=qP(t[d],e[d]),l[d]===t[d]&&t[d]!==void 0&&c++)}return s===a&&c===s?t:l}return e}function wg(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function oT(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function gw(t){if(!aT(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!aT(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function aT(t){return Object.prototype.toString.call(t)==="[object Object]"}function r9(t){return new Promise(e=>{setTimeout(e,t)})}function yw(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?qP(t,e):e}function s9(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function i9(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var K1=Symbol();function GP(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===K1?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var il,Oo,Kc,ck,o9=(ck=class extends Bu{constructor(){super();$e(this,il);$e(this,Oo);$e(this,Kc);ke(this,Kc,e=>{if(!Nl&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){H(this,Oo)||this.setEventListener(H(this,Kc))}onUnsubscribe(){var e;this.hasListeners()||((e=H(this,Oo))==null||e.call(this),ke(this,Oo,void 0))}setEventListener(e){var n;ke(this,Kc,e),(n=H(this,Oo))==null||n.call(this),ke(this,Oo,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){H(this,il)!==e&&(ke(this,il,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof H(this,il)=="boolean"?H(this,il):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},il=new WeakMap,Oo=new WeakMap,Kc=new WeakMap,ck),Q1=new o9,Qc,Vo,Yc,uk,a9=(uk=class extends Bu{constructor(){super();$e(this,Qc,!0);$e(this,Vo);$e(this,Yc);ke(this,Yc,e=>{if(!Nl&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){H(this,Vo)||this.setEventListener(H(this,Yc))}onUnsubscribe(){var e;this.hasListeners()||((e=H(this,Vo))==null||e.call(this),ke(this,Vo,void 0))}setEventListener(e){var n;ke(this,Yc,e),(n=H(this,Vo))==null||n.call(this),ke(this,Vo,e(this.setOnline.bind(this)))}setOnline(e){H(this,Qc)!==e&&(ke(this,Qc,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return H(this,Qc)}},Qc=new WeakMap,Vo=new WeakMap,Yc=new WeakMap,uk),bg=new a9;function xw(){let t,e;const n=new Promise((s,o)=>{t=s,e=o});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function l9(t){return Math.min(1e3*2**t,3e4)}function KP(t){return(t??"online")==="online"?bg.isOnline():!0}var QP=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function P0(t){return t instanceof QP}function YP(t){let e=!1,n=0,r=!1,s;const o=xw(),a=v=>{var x;r||(m(new QP(v)),(x=t.abort)==null||x.call(t))},l=()=>{e=!0},c=()=>{e=!1},u=()=>Q1.isFocused()&&(t.networkMode==="always"||bg.isOnline())&&t.canRun(),d=()=>KP(t.networkMode)&&t.canRun(),h=v=>{var x;r||(r=!0,(x=t.onSuccess)==null||x.call(t,v),s==null||s(),o.resolve(v))},m=v=>{var x;r||(r=!0,(x=t.onError)==null||x.call(t,v),s==null||s(),o.reject(v))},g=()=>new Promise(v=>{var x;s=y=>{(r||u())&&v(y)},(x=t.onPause)==null||x.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),_=()=>{if(r)return;let v;const x=n===0?t.initialPromise:void 0;try{v=x??t.fn()}catch(y){v=Promise.reject(y)}Promise.resolve(v).then(h).catch(y=>{var U;if(r)return;const w=t.retry??(Nl?0:3),j=t.retryDelay??l9,E=typeof j=="function"?j(n,y):j,P=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(e||!P){m(y);return}n++,(U=t.onFail)==null||U.call(t,n,y),r9(E).then(()=>u()?void 0:g()).then(()=>{e?m(y):_()})})};return{promise:o,cancel:a,continue:()=>(s==null||s(),o),cancelRetry:l,continueRetry:c,canStart:d,start:()=>(d()?_():g().then(_),o)}}function c9(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const o=l=>{e?t.push(l):s(()=>{n(l)})},a=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||a()}return c},batchCalls:l=>(...c)=>{o(()=>{l(...c)})},schedule:o,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var jn=c9(),ol,dk,ZP=(dk=class{constructor(){$e(this,ol)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),pw(this.gcTime)&&ke(this,ol,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(Nl?1/0:5*60*1e3))}clearGcTimeout(){H(this,ol)&&(clearTimeout(H(this,ol)),ke(this,ol,void 0))}},ol=new WeakMap,dk),Zc,Xc,Yr,Kn,_f,al,xs,Ai,hk,u9=(hk=class extends ZP{constructor(n){super();$e(this,xs);$e(this,Zc);$e(this,Xc);$e(this,Yr);$e(this,Kn);$e(this,_f);$e(this,al);ke(this,al,!1),ke(this,_f,n.defaultOptions),this.setOptions(n.options),this.observers=[],ke(this,Yr,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,ke(this,Zc,d9(this.options)),this.state=n.state??H(this,Zc),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=H(this,Kn))==null?void 0:n.promise}setOptions(n){this.options={...H(this,_f),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&H(this,Yr).remove(this)}setData(n,r){const s=yw(this.state.data,n,this.options);return it(this,xs,Ai).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){it(this,xs,Ai).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,o;const r=(s=H(this,Kn))==null?void 0:s.promise;return(o=H(this,Kn))==null||o.cancel(n),r?r.then(Zr).catch(Zr):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(H(this,Zc))}isActive(){return this.observers.some(n=>bs(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===K1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!HP(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=H(this,Kn))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=H(this,Kn))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),H(this,Yr).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(H(this,Kn)&&(H(this,al)?H(this,Kn).cancel({revert:!0}):H(this,Kn).cancelRetry()),this.scheduleGc()),H(this,Yr).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||it(this,xs,Ai).call(this,{type:"invalidate"})}fetch(n,r){var u,d,h;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(H(this,Kn))return H(this,Kn).continueRetry(),H(this,Kn).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(g=>g.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,o=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(ke(this,al,!0),s.signal)})},a=()=>{const m=GP(this.options,r),g={queryKey:this.queryKey,meta:this.meta};return o(g),ke(this,al,!1),this.options.persister?this.options.persister(m,g,this):m(g)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:a};o(l),(u=this.options.behavior)==null||u.onFetch(l,this),ke(this,Xc,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((d=l.fetchOptions)==null?void 0:d.meta))&&it(this,xs,Ai).call(this,{type:"fetch",meta:(h=l.fetchOptions)==null?void 0:h.meta});const c=m=>{var g,_,v,x;P0(m)&&m.silent||it(this,xs,Ai).call(this,{type:"error",error:m}),P0(m)||((_=(g=H(this,Yr).config).onError)==null||_.call(g,m,this),(x=(v=H(this,Yr).config).onSettled)==null||x.call(v,this.state.data,m,this)),this.scheduleGc()};return ke(this,Kn,YP({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var g,_,v,x;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(y){c(y);return}(_=(g=H(this,Yr).config).onSuccess)==null||_.call(g,m,this),(x=(v=H(this,Yr).config).onSettled)==null||x.call(v,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,g)=>{it(this,xs,Ai).call(this,{type:"failed",failureCount:m,error:g})},onPause:()=>{it(this,xs,Ai).call(this,{type:"pause"})},onContinue:()=>{it(this,xs,Ai).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),H(this,Kn).start()}},Zc=new WeakMap,Xc=new WeakMap,Yr=new WeakMap,Kn=new WeakMap,_f=new WeakMap,al=new WeakMap,xs=new WeakSet,Ai=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...XP(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const o=n.error;return P0(o)&&o.revert&&H(this,Xc)?{...H(this,Xc),fetchStatus:"idle"}:{...s,error:o,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:o,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),jn.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),H(this,Yr).notify({query:this,type:"updated",action:n})})},hk);function XP(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:KP(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function d9(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Qs,fk,h9=(fk=class extends Bu{constructor(e={}){super();$e(this,Qs);this.config=e,ke(this,Qs,new Map)}build(e,n,r){const s=n.queryKey,o=n.queryHash??G1(s,n);let a=this.get(o);return a||(a=new u9({cache:this,queryKey:s,queryHash:o,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(a)),a}add(e){H(this,Qs).has(e.queryHash)||(H(this,Qs).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=H(this,Qs).get(e.queryHash);n&&(e.destroy(),n===e&&H(this,Qs).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){jn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return H(this,Qs).get(e)}getAll(){return[...H(this,Qs).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>sT(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>sT(e,r)):n}notify(e){jn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){jn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){jn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Qs=new WeakMap,fk),Ys,or,ll,Zs,To,mk,f9=(mk=class extends ZP{constructor(n){super();$e(this,Zs);$e(this,Ys);$e(this,or);$e(this,ll);this.mutationId=n.mutationId,ke(this,or,n.mutationCache),ke(this,Ys,[]),this.state=n.state||JP(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){H(this,Ys).includes(n)||(H(this,Ys).push(n),this.clearGcTimeout(),H(this,or).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){ke(this,Ys,H(this,Ys).filter(r=>r!==n)),this.scheduleGc(),H(this,or).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){H(this,Ys).length||(this.state.status==="pending"?this.scheduleGc():H(this,or).remove(this))}continue(){var n;return((n=H(this,ll))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var o,a,l,c,u,d,h,m,g,_,v,x,y,w,j,E,P,U,T,S;ke(this,ll,YP({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(C,k)=>{it(this,Zs,To).call(this,{type:"failed",failureCount:C,error:k})},onPause:()=>{it(this,Zs,To).call(this,{type:"pause"})},onContinue:()=>{it(this,Zs,To).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>H(this,or).canRun(this)}));const r=this.state.status==="pending",s=!H(this,ll).canStart();try{if(!r){it(this,Zs,To).call(this,{type:"pending",variables:n,isPaused:s}),await((a=(o=H(this,or).config).onMutate)==null?void 0:a.call(o,n,this));const k=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));k!==this.state.context&&it(this,Zs,To).call(this,{type:"pending",context:k,variables:n,isPaused:s})}const C=await H(this,ll).start();return await((d=(u=H(this,or).config).onSuccess)==null?void 0:d.call(u,C,n,this.state.context,this)),await((m=(h=this.options).onSuccess)==null?void 0:m.call(h,C,n,this.state.context)),await((_=(g=H(this,or).config).onSettled)==null?void 0:_.call(g,C,null,this.state.variables,this.state.context,this)),await((x=(v=this.options).onSettled)==null?void 0:x.call(v,C,null,n,this.state.context)),it(this,Zs,To).call(this,{type:"success",data:C}),C}catch(C){try{throw await((w=(y=H(this,or).config).onError)==null?void 0:w.call(y,C,n,this.state.context,this)),await((E=(j=this.options).onError)==null?void 0:E.call(j,C,n,this.state.context)),await((U=(P=H(this,or).config).onSettled)==null?void 0:U.call(P,void 0,C,this.state.variables,this.state.context,this)),await((S=(T=this.options).onSettled)==null?void 0:S.call(T,void 0,C,n,this.state.context)),C}finally{it(this,Zs,To).call(this,{type:"error",error:C})}}finally{H(this,or).runNext(this)}}},Ys=new WeakMap,or=new WeakMap,ll=new WeakMap,Zs=new WeakSet,To=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),jn.batch(()=>{H(this,Ys).forEach(s=>{s.onMutationUpdate(n)}),H(this,or).notify({mutation:this,type:"updated",action:n})})},mk);function JP(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Rr,jf,pk,m9=(pk=class extends Bu{constructor(e={}){super();$e(this,Rr);$e(this,jf);this.config=e,ke(this,Rr,new Map),ke(this,jf,Date.now())}build(e,n,r){const s=new f9({mutationCache:this,mutationId:++Tm(this,jf)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Wm(e),r=H(this,Rr).get(n)??[];r.push(e),H(this,Rr).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Wm(e);if(H(this,Rr).has(n)){const s=(r=H(this,Rr).get(n))==null?void 0:r.filter(o=>o!==e);s&&(s.length===0?H(this,Rr).delete(n):H(this,Rr).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=H(this,Rr).get(Wm(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=H(this,Rr).get(Wm(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){jn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...H(this,Rr).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>iT(n,r))}findAll(e={}){return this.getAll().filter(n=>iT(e,n))}notify(e){jn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return jn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Zr))))}},Rr=new WeakMap,jf=new WeakMap,pk);function Wm(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function lT(t){return{onFetch:(e,n)=>{var d,h,m,g,_;const r=e.options,s=(m=(h=(d=e.fetchOptions)==null?void 0:d.meta)==null?void 0:h.fetchMore)==null?void 0:m.direction,o=((g=e.state.data)==null?void 0:g.pages)||[],a=((_=e.state.data)==null?void 0:_.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const u=async()=>{let v=!1;const x=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},y=GP(e.options,e.fetchOptions),w=async(j,E,P)=>{if(v)return Promise.reject();if(E==null&&j.pages.length)return Promise.resolve(j);const U={queryKey:e.queryKey,pageParam:E,direction:P?"backward":"forward",meta:e.options.meta};x(U);const T=await y(U),{maxPages:S}=e.options,C=P?i9:s9;return{pages:C(j.pages,T,S),pageParams:C(j.pageParams,E,S)}};if(s&&o.length){const j=s==="backward",E=j?p9:cT,P={pages:o,pageParams:a},U=E(r,P);l=await w(P,U,j)}else{const j=t??o.length;do{const E=c===0?a[0]??r.initialPageParam:cT(r,l);if(c>0&&E==null)break;l=await w(l,E),c++}while(c<j)}return l};e.options.persister?e.fetchFn=()=>{var v,x;return(x=(v=e.options).persister)==null?void 0:x.call(v,u,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=u}}}function cT(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function p9(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var rn,Fo,Uo,Jc,eu,Bo,tu,nu,gk,g9=(gk=class{constructor(t={}){$e(this,rn);$e(this,Fo);$e(this,Uo);$e(this,Jc);$e(this,eu);$e(this,Bo);$e(this,tu);$e(this,nu);ke(this,rn,t.queryCache||new h9),ke(this,Fo,t.mutationCache||new m9),ke(this,Uo,t.defaultOptions||{}),ke(this,Jc,new Map),ke(this,eu,new Map),ke(this,Bo,0)}mount(){Tm(this,Bo)._++,H(this,Bo)===1&&(ke(this,tu,Q1.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,rn).onFocus())})),ke(this,nu,bg.subscribe(async t=>{t&&(await this.resumePausedMutations(),H(this,rn).onOnline())})))}unmount(){var t,e;Tm(this,Bo)._--,H(this,Bo)===0&&((t=H(this,tu))==null||t.call(this),ke(this,tu,void 0),(e=H(this,nu))==null||e.call(this),ke(this,nu,void 0))}isFetching(t){return H(this,rn).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return H(this,Fo).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=H(this,rn).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=H(this,rn).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(Oc(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return H(this,rn).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=H(this,rn).get(r.queryHash),o=s==null?void 0:s.state.data,a=n9(e,o);if(a!==void 0)return H(this,rn).build(this,r).setData(a,{...n,manual:!0})}setQueriesData(t,e,n){return jn.batch(()=>H(this,rn).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=H(this,rn).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=H(this,rn);jn.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=H(this,rn),r={type:"active",...t};return jn.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=jn.batch(()=>H(this,rn).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(Zr).catch(Zr)}invalidateQueries(t={},e={}){return jn.batch(()=>{if(H(this,rn).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=jn.batch(()=>H(this,rn).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let o=s.fetch(void 0,n);return n.throwOnError||(o=o.catch(Zr)),s.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(r).then(Zr)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=H(this,rn).build(this,e);return n.isStaleByTime(Oc(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Zr).catch(Zr)}fetchInfiniteQuery(t){return t.behavior=lT(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Zr).catch(Zr)}ensureInfiniteQueryData(t){return t.behavior=lT(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return bg.isOnline()?H(this,Fo).resumePausedMutations():Promise.resolve()}getQueryCache(){return H(this,rn)}getMutationCache(){return H(this,Fo)}getDefaultOptions(){return H(this,Uo)}setDefaultOptions(t){ke(this,Uo,t)}setQueryDefaults(t,e){H(this,Jc).set(Tl(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...H(this,Jc).values()];let n={};return e.forEach(r=>{Lh(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){H(this,eu).set(Tl(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...H(this,eu).values()];let n={};return e.forEach(r=>{Lh(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...H(this,Uo).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=G1(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===K1&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...H(this,Uo).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){H(this,rn).clear(),H(this,Fo).clear()}},rn=new WeakMap,Fo=new WeakMap,Uo=new WeakMap,Jc=new WeakMap,eu=new WeakMap,Bo=new WeakMap,tu=new WeakMap,nu=new WeakMap,gk),wr,ft,Sf,ar,cl,ru,$o,Xs,Nf,su,iu,ul,dl,zo,ou,jt,Od,vw,ww,bw,_w,jw,Sw,Nw,eI,yk,y9=(yk=class extends Bu{constructor(e,n){super();$e(this,jt);$e(this,wr);$e(this,ft);$e(this,Sf);$e(this,ar);$e(this,cl);$e(this,ru);$e(this,$o);$e(this,Xs);$e(this,Nf);$e(this,su);$e(this,iu);$e(this,ul);$e(this,dl);$e(this,zo);$e(this,ou,new Set);this.options=n,ke(this,wr,e),ke(this,Xs,null),ke(this,$o,xw()),this.options.experimental_prefetchInRender||H(this,$o).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(H(this,ft).addObserver(this),uT(H(this,ft),this.options)?it(this,jt,Od).call(this):this.updateResult(),it(this,jt,_w).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Tw(H(this,ft),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Tw(H(this,ft),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,it(this,jt,jw).call(this),it(this,jt,Sw).call(this),H(this,ft).removeObserver(this)}setOptions(e,n){const r=this.options,s=H(this,ft);if(this.options=H(this,wr).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof bs(this.options.enabled,H(this,ft))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");it(this,jt,Nw).call(this),H(this,ft).setOptions(this.options),r._defaulted&&!wg(this.options,r)&&H(this,wr).getQueryCache().notify({type:"observerOptionsUpdated",query:H(this,ft),observer:this});const o=this.hasListeners();o&&dT(H(this,ft),s,this.options,r)&&it(this,jt,Od).call(this),this.updateResult(n),o&&(H(this,ft)!==s||bs(this.options.enabled,H(this,ft))!==bs(r.enabled,H(this,ft))||Oc(this.options.staleTime,H(this,ft))!==Oc(r.staleTime,H(this,ft)))&&it(this,jt,vw).call(this);const a=it(this,jt,ww).call(this);o&&(H(this,ft)!==s||bs(this.options.enabled,H(this,ft))!==bs(r.enabled,H(this,ft))||a!==H(this,zo))&&it(this,jt,bw).call(this,a)}getOptimisticResult(e){const n=H(this,wr).getQueryCache().build(H(this,wr),e),r=this.createResult(n,e);return v9(this,r)&&(ke(this,ar,r),ke(this,ru,this.options),ke(this,cl,H(this,ft).state)),r}getCurrentResult(){return H(this,ar)}trackResult(e,n){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),r}trackProp(e){H(this,ou).add(e)}getCurrentQuery(){return H(this,ft)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=H(this,wr).defaultQueryOptions(e),r=H(this,wr).getQueryCache().build(H(this,wr),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return it(this,jt,Od).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),H(this,ar)))}createResult(e,n){var S;const r=H(this,ft),s=this.options,o=H(this,ar),a=H(this,cl),l=H(this,ru),u=e!==r?e.state:H(this,Sf),{state:d}=e;let h={...d},m=!1,g;if(n._optimisticResults){const C=this.hasListeners(),k=!C&&uT(e,n),I=C&&dT(e,r,n,s);(k||I)&&(h={...h,...XP(d.data,e.options)}),n._optimisticResults==="isRestoring"&&(h.fetchStatus="idle")}let{error:_,errorUpdatedAt:v,status:x}=h;if(n.select&&h.data!==void 0)if(o&&h.data===(a==null?void 0:a.data)&&n.select===H(this,Nf))g=H(this,su);else try{ke(this,Nf,n.select),g=n.select(h.data),g=yw(o==null?void 0:o.data,g,n),ke(this,su,g),ke(this,Xs,null)}catch(C){ke(this,Xs,C)}else g=h.data;if(n.placeholderData!==void 0&&g===void 0&&x==="pending"){let C;if(o!=null&&o.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))C=o.data;else if(C=typeof n.placeholderData=="function"?n.placeholderData((S=H(this,iu))==null?void 0:S.state.data,H(this,iu)):n.placeholderData,n.select&&C!==void 0)try{C=n.select(C),ke(this,Xs,null)}catch(k){ke(this,Xs,k)}C!==void 0&&(x="success",g=yw(o==null?void 0:o.data,C,n),m=!0)}H(this,Xs)&&(_=H(this,Xs),g=H(this,su),v=Date.now(),x="error");const y=h.fetchStatus==="fetching",w=x==="pending",j=x==="error",E=w&&y,P=g!==void 0,T={status:x,fetchStatus:h.fetchStatus,isPending:w,isSuccess:x==="success",isError:j,isInitialLoading:E,isLoading:E,data:g,dataUpdatedAt:h.dataUpdatedAt,error:_,errorUpdatedAt:v,failureCount:h.fetchFailureCount,failureReason:h.fetchFailureReason,errorUpdateCount:h.errorUpdateCount,isFetched:h.dataUpdateCount>0||h.errorUpdateCount>0,isFetchedAfterMount:h.dataUpdateCount>u.dataUpdateCount||h.errorUpdateCount>u.errorUpdateCount,isFetching:y,isRefetching:y&&!w,isLoadingError:j&&!P,isPaused:h.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:j&&P,isStale:Y1(e,n),refetch:this.refetch,promise:H(this,$o)};if(this.options.experimental_prefetchInRender){const C=R=>{T.status==="error"?R.reject(T.error):T.data!==void 0&&R.resolve(T.data)},k=()=>{const R=ke(this,$o,T.promise=xw());C(R)},I=H(this,$o);switch(I.status){case"pending":e.queryHash===r.queryHash&&C(I);break;case"fulfilled":(T.status==="error"||T.data!==I.value)&&k();break;case"rejected":(T.status!=="error"||T.error!==I.reason)&&k();break}}return T}updateResult(e){const n=H(this,ar),r=this.createResult(H(this,ft),this.options);if(ke(this,cl,H(this,ft).state),ke(this,ru,this.options),H(this,cl).data!==void 0&&ke(this,iu,H(this,ft)),wg(r,n))return;ke(this,ar,r);const s={},o=()=>{if(!n)return!0;const{notifyOnChangeProps:a}=this.options,l=typeof a=="function"?a():a;if(l==="all"||!l&&!H(this,ou).size)return!0;const c=new Set(l??H(this,ou));return this.options.throwOnError&&c.add("error"),Object.keys(H(this,ar)).some(u=>{const d=u;return H(this,ar)[d]!==n[d]&&c.has(d)})};(e==null?void 0:e.listeners)!==!1&&o()&&(s.listeners=!0),it(this,jt,eI).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&it(this,jt,_w).call(this)}},wr=new WeakMap,ft=new WeakMap,Sf=new WeakMap,ar=new WeakMap,cl=new WeakMap,ru=new WeakMap,$o=new WeakMap,Xs=new WeakMap,Nf=new WeakMap,su=new WeakMap,iu=new WeakMap,ul=new WeakMap,dl=new WeakMap,zo=new WeakMap,ou=new WeakMap,jt=new WeakSet,Od=function(e){it(this,jt,Nw).call(this);let n=H(this,ft).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(Zr)),n},vw=function(){it(this,jt,jw).call(this);const e=Oc(this.options.staleTime,H(this,ft));if(Nl||H(this,ar).isStale||!pw(e))return;const r=HP(H(this,ar).dataUpdatedAt,e)+1;ke(this,ul,setTimeout(()=>{H(this,ar).isStale||this.updateResult()},r))},ww=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(H(this,ft)):this.options.refetchInterval)??!1},bw=function(e){it(this,jt,Sw).call(this),ke(this,zo,e),!(Nl||bs(this.options.enabled,H(this,ft))===!1||!pw(H(this,zo))||H(this,zo)===0)&&ke(this,dl,setInterval(()=>{(this.options.refetchIntervalInBackground||Q1.isFocused())&&it(this,jt,Od).call(this)},H(this,zo)))},_w=function(){it(this,jt,vw).call(this),it(this,jt,bw).call(this,it(this,jt,ww).call(this))},jw=function(){H(this,ul)&&(clearTimeout(H(this,ul)),ke(this,ul,void 0))},Sw=function(){H(this,dl)&&(clearInterval(H(this,dl)),ke(this,dl,void 0))},Nw=function(){const e=H(this,wr).getQueryCache().build(H(this,wr),this.options);if(e===H(this,ft))return;const n=H(this,ft);ke(this,ft,e),ke(this,Sf,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},eI=function(e){jn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(H(this,ar))}),H(this,wr).getQueryCache().notify({query:H(this,ft),type:"observerResultsUpdated"})})},yk);function x9(t,e){return bs(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function uT(t,e){return x9(t,e)||t.state.data!==void 0&&Tw(t,e,e.refetchOnMount)}function Tw(t,e,n){if(bs(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&Y1(t,e)}return!1}function dT(t,e,n,r){return(t!==e||bs(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&Y1(t,n)}function Y1(t,e){return bs(e.enabled,t)!==!1&&t.isStaleByTime(Oc(e.staleTime,t))}function v9(t,e){return!wg(t.getCurrentResult(),e)}var Wo,Ho,br,Di,qi,Ep,Cw,xk,w9=(xk=class extends Bu{constructor(n,r){super();$e(this,qi);$e(this,Wo);$e(this,Ho);$e(this,br);$e(this,Di);ke(this,Wo,n),this.setOptions(r),this.bindMethods(),it(this,qi,Ep).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=H(this,Wo).defaultMutationOptions(n),wg(this.options,r)||H(this,Wo).getMutationCache().notify({type:"observerOptionsUpdated",mutation:H(this,br),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&Tl(r.mutationKey)!==Tl(this.options.mutationKey)?this.reset():((s=H(this,br))==null?void 0:s.state.status)==="pending"&&H(this,br).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=H(this,br))==null||n.removeObserver(this)}onMutationUpdate(n){it(this,qi,Ep).call(this),it(this,qi,Cw).call(this,n)}getCurrentResult(){return H(this,Ho)}reset(){var n;(n=H(this,br))==null||n.removeObserver(this),ke(this,br,void 0),it(this,qi,Ep).call(this),it(this,qi,Cw).call(this)}mutate(n,r){var s;return ke(this,Di,r),(s=H(this,br))==null||s.removeObserver(this),ke(this,br,H(this,Wo).getMutationCache().build(H(this,Wo),this.options)),H(this,br).addObserver(this),H(this,br).execute(n)}},Wo=new WeakMap,Ho=new WeakMap,br=new WeakMap,Di=new WeakMap,qi=new WeakSet,Ep=function(){var r;const n=((r=H(this,br))==null?void 0:r.state)??JP();ke(this,Ho,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},Cw=function(n){jn.batch(()=>{var r,s,o,a,l,c,u,d;if(H(this,Di)&&this.hasListeners()){const h=H(this,Ho).variables,m=H(this,Ho).context;(n==null?void 0:n.type)==="success"?((s=(r=H(this,Di)).onSuccess)==null||s.call(r,n.data,h,m),(a=(o=H(this,Di)).onSettled)==null||a.call(o,n.data,null,h,m)):(n==null?void 0:n.type)==="error"&&((c=(l=H(this,Di)).onError)==null||c.call(l,n.error,h,m),(d=(u=H(this,Di)).onSettled)==null||d.call(u,void 0,n.error,h,m))}this.listeners.forEach(h=>{h(H(this,Ho))})})},xk),tI=p.createContext(void 0),$u=t=>{const e=p.useContext(tI);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},b9=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),i.jsx(tI.Provider,{value:t,children:e})),nI=p.createContext(!1),_9=()=>p.useContext(nI);nI.Provider;function j9(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var S9=p.createContext(j9()),N9=()=>p.useContext(S9);function rI(t,e){return typeof t=="function"?t(...e):!!t}function Ew(){}var T9=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},C9=t=>{p.useEffect(()=>{t.clearReset()},[t])},E9=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&rI(n,[t.error,r]),k9=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},A9=(t,e)=>t.isLoading&&t.isFetching&&!e,P9=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,hT=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function I9(t,e,n){var d,h,m,g,_;const r=$u(),s=_9(),o=N9(),a=r.defaultQueryOptions(t);(h=(d=r.getDefaultOptions().queries)==null?void 0:d._experimental_beforeQuery)==null||h.call(d,a),a._optimisticResults=s?"isRestoring":"optimistic",k9(a),T9(a,o),C9(o);const l=!r.getQueryCache().get(a.queryHash),[c]=p.useState(()=>new e(r,a)),u=c.getOptimisticResult(a);if(p.useSyncExternalStore(p.useCallback(v=>{const x=s?Ew:c.subscribe(jn.batchCalls(v));return c.updateResult(),x},[c,s]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(a,{listeners:!1})},[a,c]),P9(a,u))throw hT(a,c,o);if(E9({result:u,errorResetBoundary:o,throwOnError:a.throwOnError,query:r.getQueryCache().get(a.queryHash)}))throw u.error;if((g=(m=r.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||g.call(m,a,u),a.experimental_prefetchInRender&&!Nl&&A9(u,s)){const v=l?hT(a,c,o):(_=r.getQueryCache().get(a.queryHash))==null?void 0:_.promise;v==null||v.catch(Ew).finally(()=>{c.updateResult()})}return a.notifyOnChangeProps?u:c.trackResult(u)}function Et(t,e){return I9(t,y9)}function Tn(t,e){const n=$u(),[r]=p.useState(()=>new w9(n,t));p.useEffect(()=>{r.setOptions(t)},[r,t]);const s=p.useSyncExternalStore(p.useCallback(a=>r.subscribe(jn.batchCalls(a)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),o=p.useCallback((a,l)=>{r.mutate(a,l).catch(Ew)},[r]);if(s.error&&rI(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:o,mutateAsync:s.mutate}}async function sI(t){if(!t.ok){const e=await t.text()||t.statusText;throw new Error(`${t.status}: ${e}`)}}async function Zt(t,e,n){const r=await fetch(e,{method:t,headers:{Accept:"application/json",...n?{"Content-Type":"application/json"}:{}},body:n?JSON.stringify(n):void 0,credentials:"include"});return await sI(r),r}const iI=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e[0],{credentials:"include",headers:{Accept:"application/json"}});return t==="returnNull"&&n.status===401?null:(await sI(n),await n.json())},_s=new g9({defaultOptions:{queries:{queryFn:iI({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),R9=1,M9=1e6;let I0=0;function D9(){return I0=(I0+1)%Number.MAX_SAFE_INTEGER,I0.toString()}const R0=new Map,fT=t=>{if(R0.has(t))return;const e=setTimeout(()=>{R0.delete(t),rh({type:"REMOVE_TOAST",toastId:t})},M9);R0.set(t,e)},L9=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,R9)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?fT(n):t.toasts.forEach(r=>{fT(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},kp=[];let Ap={toasts:[]};function rh(t){Ap=L9(Ap,t),kp.forEach(e=>{e(Ap)})}function O9({...t}){const e=D9(),n=s=>rh({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>rh({type:"DISMISS_TOAST",toastId:e});return rh({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function tn(){const[t,e]=p.useState(Ap);return p.useEffect(()=>(kp.push(e),()=>{const n=kp.indexOf(e);n>-1&&kp.splice(n,1)}),[t]),{...t,toast:O9,dismiss:n=>rh({type:"DISMISS_TOAST",toastId:n})}}function we(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function mT(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function Uy(...t){return e=>{let n=!1;const r=t.map(s=>{const o=mT(s,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let s=0;s<r.length;s++){const o=r[s];typeof o=="function"?o():mT(t[s],null)}}}}function Je(...t){return p.useCallback(Uy(...t),t)}function V9(t,e){const n=p.createContext(e),r=o=>{const{children:a,...l}=o,c=p.useMemo(()=>l,Object.values(l));return i.jsx(n.Provider,{value:c,children:a})};r.displayName=t+"Provider";function s(o){const a=p.useContext(n);if(a)return a;if(e!==void 0)return e;throw new Error(`\`${o}\` must be used within \`${t}\``)}return[r,s]}function gr(t,e=[]){let n=[];function r(o,a){const l=p.createContext(a),c=n.length;n=[...n,a];const u=h=>{var y;const{scope:m,children:g,..._}=h,v=((y=m==null?void 0:m[t])==null?void 0:y[c])||l,x=p.useMemo(()=>_,Object.values(_));return i.jsx(v.Provider,{value:x,children:g})};u.displayName=o+"Provider";function d(h,m){var v;const g=((v=m==null?void 0:m[t])==null?void 0:v[c])||l,_=p.useContext(g);if(_)return _;if(a!==void 0)return a;throw new Error(`\`${h}\` must be used within \`${o}\``)}return[u,d]}const s=()=>{const o=n.map(a=>p.createContext(a));return function(l){const c=(l==null?void 0:l[t])||o;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,F9(s,...e)]}function F9(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(o){const a=r.reduce((l,{useScope:c,scopeName:u})=>{const h=c(o)[`__scope${u}`];return{...l,...h}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:a}),[a])}};return n.scopeName=e.scopeName,n}function Cl(t){const e=U9(t),n=p.forwardRef((r,s)=>{const{children:o,...a}=r,l=p.Children.toArray(o),c=l.find($9);if(c){const u=c.props.children,d=l.map(h=>h===c?p.Children.count(u)>1?p.Children.only(null):p.isValidElement(u)?u.props.children:null:h);return i.jsx(e,{...a,ref:s,children:p.isValidElement(u)?p.cloneElement(u,void 0,d):null})}return i.jsx(e,{...a,ref:s,children:o})});return n.displayName=`${t}.Slot`,n}var oI=Cl("Slot");function U9(t){const e=p.forwardRef((n,r)=>{const{children:s,...o}=n;if(p.isValidElement(s)){const a=W9(s),l=z9(o,s.props);return s.type!==p.Fragment&&(l.ref=r?Uy(r,a):a),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var aI=Symbol("radix.slottable");function B9(t){const e=({children:n})=>i.jsx(i.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=aI,e}function $9(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===aI}function z9(t,e){const n={...e};for(const r in e){const s=t[r],o=e[r];/^on[A-Z]/.test(r)?s&&o?n[r]=(...l)=>{o(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...o}:r==="className"&&(n[r]=[s,o].filter(Boolean).join(" "))}return{...t,...n}}function W9(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function If(t){const e=t+"CollectionProvider",[n,r]=gr(e),[s,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),a=v=>{const{scope:x,children:y}=v,w=tt.useRef(null),j=tt.useRef(new Map).current;return i.jsx(s,{scope:x,itemMap:j,collectionRef:w,children:y})};a.displayName=e;const l=t+"CollectionSlot",c=Cl(l),u=tt.forwardRef((v,x)=>{const{scope:y,children:w}=v,j=o(l,y),E=Je(x,j.collectionRef);return i.jsx(c,{ref:E,children:w})});u.displayName=l;const d=t+"CollectionItemSlot",h="data-radix-collection-item",m=Cl(d),g=tt.forwardRef((v,x)=>{const{scope:y,children:w,...j}=v,E=tt.useRef(null),P=Je(x,E),U=o(d,y);return tt.useEffect(()=>(U.itemMap.set(E,{ref:E,...j}),()=>void U.itemMap.delete(E))),i.jsx(m,{[h]:"",ref:P,children:w})});g.displayName=d;function _(v){const x=o(t+"CollectionConsumer",v);return tt.useCallback(()=>{const w=x.collectionRef.current;if(!w)return[];const j=Array.from(w.querySelectorAll(`[${h}]`));return Array.from(x.itemMap.values()).sort((U,T)=>j.indexOf(U.ref.current)-j.indexOf(T.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:a,Slot:u,ItemSlot:g},_,r]}var H9=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],De=H9.reduce((t,e)=>{const n=Cl(`Primitive.${e}`),r=p.forwardRef((s,o)=>{const{asChild:a,...l}=s,c=a?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(c,{...l,ref:o})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function Z1(t,e){t&&$l.flushSync(()=>t.dispatchEvent(e))}function zt(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function q9(t,e=globalThis==null?void 0:globalThis.document){const n=zt(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var G9="DismissableLayer",kw="dismissableLayer.update",K9="dismissableLayer.pointerDownOutside",Q9="dismissableLayer.focusOutside",pT,lI=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),zu=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:o,onInteractOutside:a,onDismiss:l,...c}=t,u=p.useContext(lI),[d,h]=p.useState(null),m=(d==null?void 0:d.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,g]=p.useState({}),_=Je(e,T=>h(T)),v=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),y=v.indexOf(x),w=d?v.indexOf(d):-1,j=u.layersWithOutsidePointerEventsDisabled.size>0,E=w>=y,P=Z9(T=>{const S=T.target,C=[...u.branches].some(k=>k.contains(S));!E||C||(s==null||s(T),a==null||a(T),T.defaultPrevented||l==null||l())},m),U=X9(T=>{const S=T.target;[...u.branches].some(k=>k.contains(S))||(o==null||o(T),a==null||a(T),T.defaultPrevented||l==null||l())},m);return q9(T=>{w===u.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},m),p.useEffect(()=>{if(d)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(pT=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(d)),u.layers.add(d),gT(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=pT)}},[d,m,n,u]),p.useEffect(()=>()=>{d&&(u.layers.delete(d),u.layersWithOutsidePointerEventsDisabled.delete(d),gT())},[d,u]),p.useEffect(()=>{const T=()=>g({});return document.addEventListener(kw,T),()=>document.removeEventListener(kw,T)},[]),i.jsx(De.div,{...c,ref:_,style:{pointerEvents:j?E?"auto":"none":void 0,...t.style},onFocusCapture:we(t.onFocusCapture,U.onFocusCapture),onBlurCapture:we(t.onBlurCapture,U.onBlurCapture),onPointerDownCapture:we(t.onPointerDownCapture,P.onPointerDownCapture)})});zu.displayName=G9;var Y9="DismissableLayerBranch",cI=p.forwardRef((t,e)=>{const n=p.useContext(lI),r=p.useRef(null),s=Je(e,r);return p.useEffect(()=>{const o=r.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),i.jsx(De.div,{...t,ref:s})});cI.displayName=Y9;function Z9(t,e=globalThis==null?void 0:globalThis.document){const n=zt(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const o=l=>{if(l.target&&!r.current){let c=function(){uI(K9,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},a=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(a),e.removeEventListener("pointerdown",o),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function X9(t,e=globalThis==null?void 0:globalThis.document){const n=zt(t),r=p.useRef(!1);return p.useEffect(()=>{const s=o=>{o.target&&!r.current&&uI(Q9,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function gT(){const t=new CustomEvent(kw);document.dispatchEvent(t)}function uI(t,e,n,{discrete:r}){const s=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Z1(s,o):s.dispatchEvent(o)}var J9=zu,eU=cI,xn=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},tU="Portal",Rf=p.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,o]=p.useState(!1);xn(()=>o(!0),[]);const a=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return a?N8.createPortal(i.jsx(De.div,{...r,ref:e}),a):null});Rf.displayName=tU;function nU(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var yr=t=>{const{present:e,children:n}=t,r=rU(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),o=Je(r.ref,sU(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:o}):null};yr.displayName="Presence";function rU(t){const[e,n]=p.useState(),r=p.useRef({}),s=p.useRef(t),o=p.useRef("none"),a=t?"mounted":"unmounted",[l,c]=nU(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const u=Hm(r.current);o.current=l==="mounted"?u:"none"},[l]),xn(()=>{const u=r.current,d=s.current;if(d!==t){const m=o.current,g=Hm(u);t?c("MOUNT"):g==="none"||(u==null?void 0:u.display)==="none"?c("UNMOUNT"):c(d&&m!==g?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),xn(()=>{if(e){let u;const d=e.ownerDocument.defaultView??window,h=g=>{const v=Hm(r.current).includes(g.animationName);if(g.target===e&&v&&(c("ANIMATION_END"),!s.current)){const x=e.style.animationFillMode;e.style.animationFillMode="forwards",u=d.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=x)})}},m=g=>{g.target===e&&(o.current=Hm(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",h),e.addEventListener("animationend",h),()=>{d.clearTimeout(u),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",h),e.removeEventListener("animationend",h)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(u=>{u&&(r.current=getComputedStyle(u)),n(u)},[])}}function Hm(t){return(t==null?void 0:t.animationName)||"none"}function sU(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Zi({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=iU({defaultProp:e,onChange:n}),o=t!==void 0,a=o?t:r,l=zt(n),c=p.useCallback(u=>{if(o){const h=typeof u=="function"?u(t):u;h!==t&&l(h)}else s(u)},[o,t,s,l]);return[a,c]}function iU({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,s=p.useRef(r),o=zt(e);return p.useEffect(()=>{s.current!==r&&(o(r),s.current=r)},[r,s,o]),n}var oU="VisuallyHidden",Mf=p.forwardRef((t,e)=>i.jsx(De.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));Mf.displayName=oU;var aU=Mf,X1="ToastProvider",[J1,lU,cU]=If("Toast"),[dI,$ae]=gr("Toast",[cU]),[uU,By]=dI(X1),hI=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:a}=t,[l,c]=p.useState(null),[u,d]=p.useState(0),h=p.useRef(!1),m=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${X1}\`. Expected non-empty \`string\`.`),i.jsx(J1.Provider,{scope:e,children:i.jsx(uU,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>d(g=>g+1),[]),onToastRemove:p.useCallback(()=>d(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:m,children:a})})};hI.displayName=X1;var fI="ToastViewport",dU=["F8"],Aw="toast.viewportPause",Pw="toast.viewportResume",mI=p.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=dU,label:s="Notifications ({hotkey})",...o}=t,a=By(fI,n),l=lU(n),c=p.useRef(null),u=p.useRef(null),d=p.useRef(null),h=p.useRef(null),m=Je(e,h,a.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),_=a.toastCount>0;p.useEffect(()=>{const x=y=>{var j;r.length!==0&&r.every(E=>y[E]||y.code===E)&&((j=h.current)==null||j.focus())};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[r]),p.useEffect(()=>{const x=c.current,y=h.current;if(_&&x&&y){const w=()=>{if(!a.isClosePausedRef.current){const U=new CustomEvent(Aw);y.dispatchEvent(U),a.isClosePausedRef.current=!0}},j=()=>{if(a.isClosePausedRef.current){const U=new CustomEvent(Pw);y.dispatchEvent(U),a.isClosePausedRef.current=!1}},E=U=>{!x.contains(U.relatedTarget)&&j()},P=()=>{x.contains(document.activeElement)||j()};return x.addEventListener("focusin",w),x.addEventListener("focusout",E),x.addEventListener("pointermove",w),x.addEventListener("pointerleave",P),window.addEventListener("blur",w),window.addEventListener("focus",j),()=>{x.removeEventListener("focusin",w),x.removeEventListener("focusout",E),x.removeEventListener("pointermove",w),x.removeEventListener("pointerleave",P),window.removeEventListener("blur",w),window.removeEventListener("focus",j)}}},[_,a.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:x})=>{const w=l().map(j=>{const E=j.ref.current,P=[E,...SU(E)];return x==="forwards"?P:P.reverse()});return(x==="forwards"?w.reverse():w).flat()},[l]);return p.useEffect(()=>{const x=h.current;if(x){const y=w=>{var P,U,T;const j=w.altKey||w.ctrlKey||w.metaKey;if(w.key==="Tab"&&!j){const S=document.activeElement,C=w.shiftKey;if(w.target===x&&C){(P=u.current)==null||P.focus();return}const R=v({tabbingDirection:C?"backwards":"forwards"}),A=R.findIndex(G=>G===S);M0(R.slice(A+1))?w.preventDefault():C?(U=u.current)==null||U.focus():(T=d.current)==null||T.focus()}};return x.addEventListener("keydown",y),()=>x.removeEventListener("keydown",y)}},[l,v]),i.jsxs(eU,{ref:c,role:"region","aria-label":s.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:_?void 0:"none"},children:[_&&i.jsx(Iw,{ref:u,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"forwards"});M0(x)}}),i.jsx(J1.Slot,{scope:n,children:i.jsx(De.ol,{tabIndex:-1,...o,ref:m})}),_&&i.jsx(Iw,{ref:d,onFocusFromOutsideViewport:()=>{const x=v({tabbingDirection:"backwards"});M0(x)}})]})});mI.displayName=fI;var pI="ToastFocusProxy",Iw=p.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,o=By(pI,n);return i.jsx(Mf,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:a=>{var u;const l=a.relatedTarget;!((u=o.viewport)!=null&&u.contains(l))&&r()}})});Iw.displayName=pI;var $y="Toast",hU="toast.swipeStart",fU="toast.swipeMove",mU="toast.swipeCancel",pU="toast.swipeEnd",gI=p.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...a}=t,[l=!0,c]=Zi({prop:r,defaultProp:s,onChange:o});return i.jsx(yr,{present:n||l,children:i.jsx(xU,{open:l,...a,ref:e,onClose:()=>c(!1),onPause:zt(t.onPause),onResume:zt(t.onResume),onSwipeStart:we(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:we(t.onSwipeMove,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:we(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:we(t.onSwipeEnd,u=>{const{x:d,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${d}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});gI.displayName=$y;var[gU,yU]=dI($y,{onClose(){}}),xU=p.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:a,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:d,onSwipeMove:h,onSwipeCancel:m,onSwipeEnd:g,..._}=t,v=By($y,n),[x,y]=p.useState(null),w=Je(e,G=>y(G)),j=p.useRef(null),E=p.useRef(null),P=s||v.duration,U=p.useRef(0),T=p.useRef(P),S=p.useRef(0),{onToastAdd:C,onToastRemove:k}=v,I=zt(()=>{var ue;(x==null?void 0:x.contains(document.activeElement))&&((ue=v.viewport)==null||ue.focus()),a()}),R=p.useCallback(G=>{!G||G===1/0||(window.clearTimeout(S.current),U.current=new Date().getTime(),S.current=window.setTimeout(I,G))},[I]);p.useEffect(()=>{const G=v.viewport;if(G){const ue=()=>{R(T.current),u==null||u()},B=()=>{const q=new Date().getTime()-U.current;T.current=T.current-q,window.clearTimeout(S.current),c==null||c()};return G.addEventListener(Aw,B),G.addEventListener(Pw,ue),()=>{G.removeEventListener(Aw,B),G.removeEventListener(Pw,ue)}}},[v.viewport,P,c,u,R]),p.useEffect(()=>{o&&!v.isClosePausedRef.current&&R(P)},[o,P,v.isClosePausedRef,R]),p.useEffect(()=>(C(),()=>k()),[C,k]);const A=p.useMemo(()=>x?jI(x):null,[x]);return v.viewport?i.jsxs(i.Fragment,{children:[A&&i.jsx(vU,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:A}),i.jsx(gU,{scope:n,onClose:I,children:$l.createPortal(i.jsx(J1.ItemSlot,{scope:n,children:i.jsx(J9,{asChild:!0,onEscapeKeyDown:we(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||I(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:i.jsx(De.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":v.swipeDirection,..._,ref:w,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:we(t.onKeyDown,G=>{G.key==="Escape"&&(l==null||l(G.nativeEvent),G.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,I()))}),onPointerDown:we(t.onPointerDown,G=>{G.button===0&&(j.current={x:G.clientX,y:G.clientY})}),onPointerMove:we(t.onPointerMove,G=>{if(!j.current)return;const ue=G.clientX-j.current.x,B=G.clientY-j.current.y,q=!!E.current,O=["left","right"].includes(v.swipeDirection),F=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,D=O?F(0,ue):0,L=O?0:F(0,B),X=G.pointerType==="touch"?10:2,$={x:D,y:L},K={originalEvent:G,delta:$};q?(E.current=$,qm(fU,h,K,{discrete:!1})):yT($,v.swipeDirection,X)?(E.current=$,qm(hU,d,K,{discrete:!1}),G.target.setPointerCapture(G.pointerId)):(Math.abs(ue)>X||Math.abs(B)>X)&&(j.current=null)}),onPointerUp:we(t.onPointerUp,G=>{const ue=E.current,B=G.target;if(B.hasPointerCapture(G.pointerId)&&B.releasePointerCapture(G.pointerId),E.current=null,j.current=null,ue){const q=G.currentTarget,O={originalEvent:G,delta:ue};yT(ue,v.swipeDirection,v.swipeThreshold)?qm(pU,g,O,{discrete:!0}):qm(mU,m,O,{discrete:!0}),q.addEventListener("click",F=>F.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),vU=t=>{const{__scopeToast:e,children:n,...r}=t,s=By($y,e),[o,a]=p.useState(!1),[l,c]=p.useState(!1);return _U(()=>a(!0)),p.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:i.jsx(Rf,{asChild:!0,children:i.jsx(Mf,{...r,children:o&&i.jsxs(i.Fragment,{children:[s.label," ",n]})})})},wU="ToastTitle",yI=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(De.div,{...r,ref:e})});yI.displayName=wU;var bU="ToastDescription",xI=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return i.jsx(De.div,{...r,ref:e})});xI.displayName=bU;var vI="ToastAction",wI=p.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?i.jsx(_I,{altText:n,asChild:!0,children:i.jsx(e_,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${vI}\`. Expected non-empty \`string\`.`),null)});wI.displayName=vI;var bI="ToastClose",e_=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=yU(bI,n);return i.jsx(_I,{asChild:!0,children:i.jsx(De.button,{type:"button",...r,ref:e,onClick:we(t.onClick,s.onClose)})})});e_.displayName=bI;var _I=p.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return i.jsx(De.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function jI(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),jU(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const a=r.dataset.radixToastAnnounceAlt;a&&e.push(a)}else e.push(...jI(r))}}),e}function qm(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Z1(s,o):s.dispatchEvent(o)}var yT=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),o=r>s;return e==="left"||e==="right"?o&&r>n:!o&&s>n};function _U(t=()=>{}){const e=zt(t);xn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function jU(t){return t.nodeType===t.ELEMENT_NODE}function SU(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function M0(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var NU=hI,SI=mI,NI=gI,TI=yI,CI=xI,EI=wI,kI=e_;function AI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=AI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function PI(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=AI(t))&&(r&&(r+=" "),r+=e);return r}const xT=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,vT=PI,Df=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return vT(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:o}=e,a=Object.keys(s).map(u=>{const d=n==null?void 0:n[u],h=o==null?void 0:o[u];if(d===null)return null;const m=xT(d)||xT(h);return s[u][m]}),l=n&&Object.entries(n).reduce((u,d)=>{let[h,m]=d;return m===void 0||(u[h]=m),u},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((u,d)=>{let{class:h,className:m,...g}=d;return Object.entries(g).every(_=>{let[v,x]=_;return Array.isArray(x)?x.includes({...o,...l}[v]):{...o,...l}[v]===x})?[...u,h,m]:u},[]);return vT(t,a,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TU=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),II=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var CU={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EU=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:o,iconNode:a,...l},c)=>p.createElement("svg",{ref:c,...CU,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:II("lucide",s),...l},[...a.map(([u,d])=>p.createElement(u,d)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=(t,e)=>{const n=p.forwardRef(({className:r,...s},o)=>p.createElement(EU,{ref:o,iconNode:e,className:II(`lucide-${TU(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ml=Re("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kU=Re("Atom",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=Re("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=Re("Battery",[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _g=Re("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=Re("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RI=Re("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MI=Re("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DI=Re("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LI=Re("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AU=Re("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PU=Re("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oh=Re("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IU=Re("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vh=Re("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RU=Re("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=Re("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MU=Re("Cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OI=Re("Droplets",[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VI=Re("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FI=Re("Gamepad2",[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DU=Re("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vc=Re("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UI=Re("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LU=Re("GripHorizontal",[["circle",{cx:"12",cy:"9",r:"1",key:"124mty"}],["circle",{cx:"19",cy:"9",r:"1",key:"1ruzo2"}],["circle",{cx:"5",cy:"9",r:"1",key:"1a8b28"}],["circle",{cx:"12",cy:"15",r:"1",key:"1e56xg"}],["circle",{cx:"19",cy:"15",r:"1",key:"1a92ep"}],["circle",{cx:"5",cy:"15",r:"1",key:"5r1jwy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pu=Re("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BI=Re("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gu=Re("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=Re("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bT=Re("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OU=Re("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yu=Re("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=Re("Map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VU=Re("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FU=Re("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UU=Re("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $I=Re("Music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=Re("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=Re("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fh=Re("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zI=Re("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=Re("Puzzle",[["path",{d:"M19.439 7.85c-.049.322.059.648.289.878l1.568 1.568c.47.47.706 1.087.706 1.704s-.235 1.233-.706 1.704l-1.611 1.611a.98.98 0 0 1-.837.276c-.47-.07-.802-.48-.968-.925a2.501 2.501 0 1 0-3.214 3.214c.446.166.855.497.925.968a.979.979 0 0 1-.276.837l-1.61 1.61a2.404 2.404 0 0 1-1.705.707 2.402 2.402 0 0 1-1.704-.706l-1.568-1.568a1.026 1.026 0 0 0-.877-.29c-.493.074-.84.504-1.02.968a2.5 2.5 0 1 1-3.237-3.237c.464-.18.894-.527.967-1.02a1.026 1.026 0 0 0-.289-.877l-1.568-1.568A2.402 2.402 0 0 1 1.998 12c0-.617.236-1.234.706-1.704L4.23 8.77c.24-.24.581-.353.917-.303.515.077.877.528 1.073 1.01a2.5 2.5 0 1 0 3.259-3.259c-.482-.196-.933-.558-1.01-1.073-.05-.336.062-.676.303-.917l1.525-1.525A2.402 2.402 0 0 1 12 1.998c.617 0 1.234.236 1.704.706l1.568 1.568c.23.23.556.338.877.29.493-.074.84-.504 1.02-.968a2.5 2.5 0 1 1 3.237 3.237c-.464.18-.894.527-.967 1.02Z",key:"i0oyt7"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BU=Re("Repeat1",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}],["path",{d:"M11 10h1v4",key:"70cz1p"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=Re("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=Re("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $U=Re("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=Re("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HI=Re("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fc=Re("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=Re("Shuffle",[["path",{d:"M2 18h1.4c1.3 0 2.5-.6 3.3-1.7l6.1-8.6c.7-1.1 2-1.7 3.3-1.7H22",key:"1wmou1"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 6h1.9c1.5 0 2.9.9 3.6 2.2",key:"10bdb2"}],["path",{d:"M22 18h-5.9c-1.3 0-2.6-.7-3.3-1.8l-.5-.8",key:"vgxac0"}],["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zU=Re("SkipBack",[["polygon",{points:"19 20 9 12 19 4 19 20",key:"o2sva"}],["line",{x1:"5",x2:"5",y1:"19",y2:"5",key:"1ocqjk"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WU=Re("SkipForward",[["polygon",{points:"5 4 15 12 5 20 5 4",key:"16p6eg"}],["line",{x1:"19",x2:"19",y1:"5",y2:"19",key:"futhcm"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=Re("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=Re("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pl=Re("Sword",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=Re("Swords",[["polyline",{points:"14.5 17.5 3 6 3 3 6 3 17.5 14.5",key:"1hfsw2"}],["line",{x1:"13",x2:"19",y1:"19",y2:"13",key:"1vrmhu"}],["line",{x1:"16",x2:"20",y1:"16",y2:"20",key:"1bron3"}],["line",{x1:"19",x2:"21",y1:"21",y2:"19",key:"13pww6"}],["polyline",{points:"14.5 6.5 18 3 21 3 21 6 17.5 9.5",key:"hbey2j"}],["line",{x1:"5",x2:"9",y1:"14",y2:"18",key:"1hf58s"}],["line",{x1:"7",x2:"4",y1:"17",y2:"20",key:"pidxm4"}],["line",{x1:"3",x2:"5",y1:"19",y2:"21",key:"1pehsh"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rw=Re("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HU=Re("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=Re("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kT=Re("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const si=Re("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=Re("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qU=Re("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=Re("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uh=Re("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GU=Re("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zy=Re("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=Re("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),n_="-",KU=t=>{const e=YU(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:a=>{const l=a.split(n_);return l[0]===""&&l.length!==1&&l.shift(),YI(l,e)||QU(a)},getConflictingClassGroupIds:(a,l)=>{const c=n[a]||[];return l&&r[a]?[...c,...r[a]]:c}}},YI=(t,e)=>{var a;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?YI(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const o=t.join(n_);return(a=e.validators.find(({validator:l})=>l(o)))==null?void 0:a.classGroupId},AT=/^\[(.+)\]$/,QU=t=>{if(AT.test(t)){const e=AT.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},YU=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return XU(Object.entries(t.classGroups),n).forEach(([o,a])=>{Mw(a,r,o,e)}),r},Mw=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const o=s===""?e:PT(e,s);o.classGroupId=n;return}if(typeof s=="function"){if(ZU(s)){Mw(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([o,a])=>{Mw(a,PT(e,o),n,r)})})},PT=(t,e)=>{let n=t;return e.split(n_).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},ZU=t=>t.isThemeGetter,XU=(t,e)=>e?t.map(([n,r])=>{const s=r.map(o=>typeof o=="string"?e+o:typeof o=="object"?Object.fromEntries(Object.entries(o).map(([a,l])=>[e+a,l])):o);return[n,s]}):t,JU=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(o,a)=>{n.set(o,a),e++,e>t&&(e=0,r=n,n=new Map)};return{get(o){let a=n.get(o);if(a!==void 0)return a;if((a=r.get(o))!==void 0)return s(o,a),a},set(o,a){n.has(o)?n.set(o,a):s(o,a)}}},ZI="!",eB=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],o=e.length,a=l=>{const c=[];let u=0,d=0,h;for(let x=0;x<l.length;x++){let y=l[x];if(u===0){if(y===s&&(r||l.slice(x,x+o)===e)){c.push(l.slice(d,x)),d=x+o;continue}if(y==="/"){h=x;continue}}y==="["?u++:y==="]"&&u--}const m=c.length===0?l:l.substring(d),g=m.startsWith(ZI),_=g?m.substring(1):m,v=h&&h>d?h-d:void 0;return{modifiers:c,hasImportantModifier:g,baseClassName:_,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:a}):a},tB=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},nB=t=>({cache:JU(t.cacheSize),parseClassName:eB(t),...KU(t)}),rB=/\s+/,sB=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,o=[],a=t.trim().split(rB);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{modifiers:d,hasImportantModifier:h,baseClassName:m,maybePostfixModifierPosition:g}=n(u);let _=!!g,v=r(_?m.substring(0,g):m);if(!v){if(!_){l=u+(l.length>0?" "+l:l);continue}if(v=r(m),!v){l=u+(l.length>0?" "+l:l);continue}_=!1}const x=tB(d).join(":"),y=h?x+ZI:x,w=y+v;if(o.includes(w))continue;o.push(w);const j=s(v,_);for(let E=0;E<j.length;++E){const P=j[E];o.push(y+P)}l=u+(l.length>0?" "+l:l)}return l};function iB(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=XI(e))&&(r&&(r+=" "),r+=n);return r}const XI=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=XI(t[r]))&&(n&&(n+=" "),n+=e);return n};function oB(t,...e){let n,r,s,o=a;function a(c){const u=e.reduce((d,h)=>h(d),t());return n=nB(u),r=n.cache.get,s=n.cache.set,o=l,l(c)}function l(c){const u=r(c);if(u)return u;const d=sB(c,n);return s(c,d),d}return function(){return o(iB.apply(null,arguments))}}const Ot=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},JI=/^\[(?:([a-z-]+):)?(.+)\]$/i,aB=/^\d+\/\d+$/,lB=new Set(["px","full","screen"]),cB=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,uB=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,dB=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,hB=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,fB=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ei=t=>Uc(t)||lB.has(t)||aB.test(t),_o=t=>Wu(t,"length",bB),Uc=t=>!!t&&!Number.isNaN(Number(t)),D0=t=>Wu(t,"number",Uc),Nd=t=>!!t&&Number.isInteger(Number(t)),mB=t=>t.endsWith("%")&&Uc(t.slice(0,-1)),rt=t=>JI.test(t),jo=t=>cB.test(t),pB=new Set(["length","size","percentage"]),gB=t=>Wu(t,pB,eR),yB=t=>Wu(t,"position",eR),xB=new Set(["image","url"]),vB=t=>Wu(t,xB,jB),wB=t=>Wu(t,"",_B),Td=()=>!0,Wu=(t,e,n)=>{const r=JI.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},bB=t=>uB.test(t)&&!dB.test(t),eR=()=>!1,_B=t=>hB.test(t),jB=t=>fB.test(t),SB=()=>{const t=Ot("colors"),e=Ot("spacing"),n=Ot("blur"),r=Ot("brightness"),s=Ot("borderColor"),o=Ot("borderRadius"),a=Ot("borderSpacing"),l=Ot("borderWidth"),c=Ot("contrast"),u=Ot("grayscale"),d=Ot("hueRotate"),h=Ot("invert"),m=Ot("gap"),g=Ot("gradientColorStops"),_=Ot("gradientColorStopPositions"),v=Ot("inset"),x=Ot("margin"),y=Ot("opacity"),w=Ot("padding"),j=Ot("saturate"),E=Ot("scale"),P=Ot("sepia"),U=Ot("skew"),T=Ot("space"),S=Ot("translate"),C=()=>["auto","contain","none"],k=()=>["auto","hidden","clip","visible","scroll"],I=()=>["auto",rt,e],R=()=>[rt,e],A=()=>["",Ei,_o],G=()=>["auto",Uc,rt],ue=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],B=()=>["solid","dashed","dotted","double","none"],q=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],O=()=>["start","end","center","between","around","evenly","stretch"],F=()=>["","0",rt],D=()=>["auto","avoid","all","avoid-page","page","left","right","column"],L=()=>[Uc,rt];return{cacheSize:500,separator:":",theme:{colors:[Td],spacing:[Ei,_o],blur:["none","",jo,rt],brightness:L(),borderColor:[t],borderRadius:["none","","full",jo,rt],borderSpacing:R(),borderWidth:A(),contrast:L(),grayscale:F(),hueRotate:L(),invert:F(),gap:R(),gradientColorStops:[t],gradientColorStopPositions:[mB,_o],inset:I(),margin:I(),opacity:L(),padding:R(),saturate:L(),scale:L(),sepia:F(),skew:L(),space:R(),translate:R()},classGroups:{aspect:[{aspect:["auto","square","video",rt]}],container:["container"],columns:[{columns:[jo]}],"break-after":[{"break-after":D()}],"break-before":[{"break-before":D()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ue(),rt]}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Nd,rt]}],basis:[{basis:I()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",rt]}],grow:[{grow:F()}],shrink:[{shrink:F()}],order:[{order:["first","last","none",Nd,rt]}],"grid-cols":[{"grid-cols":[Td]}],"col-start-end":[{col:["auto",{span:["full",Nd,rt]},rt]}],"col-start":[{"col-start":G()}],"col-end":[{"col-end":G()}],"grid-rows":[{"grid-rows":[Td]}],"row-start-end":[{row:["auto",{span:[Nd,rt]},rt]}],"row-start":[{"row-start":G()}],"row-end":[{"row-end":G()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",rt]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",rt]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...O()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...O(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...O(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[w]}],px:[{px:[w]}],py:[{py:[w]}],ps:[{ps:[w]}],pe:[{pe:[w]}],pt:[{pt:[w]}],pr:[{pr:[w]}],pb:[{pb:[w]}],pl:[{pl:[w]}],m:[{m:[x]}],mx:[{mx:[x]}],my:[{my:[x]}],ms:[{ms:[x]}],me:[{me:[x]}],mt:[{mt:[x]}],mr:[{mr:[x]}],mb:[{mb:[x]}],ml:[{ml:[x]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",rt,e]}],"min-w":[{"min-w":[rt,e,"min","max","fit"]}],"max-w":[{"max-w":[rt,e,"none","full","min","max","fit","prose",{screen:[jo]},jo]}],h:[{h:[rt,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[rt,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[rt,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[rt,e,"auto","min","max","fit"]}],"font-size":[{text:["base",jo,_o]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",D0]}],"font-family":[{font:[Td]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",rt]}],"line-clamp":[{"line-clamp":["none",Uc,D0]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ei,rt]}],"list-image":[{"list-image":["none",rt]}],"list-style-type":[{list:["none","disc","decimal",rt]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[y]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[y]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...B(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ei,_o]}],"underline-offset":[{"underline-offset":["auto",Ei,rt]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:R()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",rt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",rt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[y]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ue(),yB]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",gB]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},vB]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[_]}],"gradient-via-pos":[{via:[_]}],"gradient-to-pos":[{to:[_]}],"gradient-from":[{from:[g]}],"gradient-via":[{via:[g]}],"gradient-to":[{to:[g]}],rounded:[{rounded:[o]}],"rounded-s":[{"rounded-s":[o]}],"rounded-e":[{"rounded-e":[o]}],"rounded-t":[{"rounded-t":[o]}],"rounded-r":[{"rounded-r":[o]}],"rounded-b":[{"rounded-b":[o]}],"rounded-l":[{"rounded-l":[o]}],"rounded-ss":[{"rounded-ss":[o]}],"rounded-se":[{"rounded-se":[o]}],"rounded-ee":[{"rounded-ee":[o]}],"rounded-es":[{"rounded-es":[o]}],"rounded-tl":[{"rounded-tl":[o]}],"rounded-tr":[{"rounded-tr":[o]}],"rounded-br":[{"rounded-br":[o]}],"rounded-bl":[{"rounded-bl":[o]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[y]}],"border-style":[{border:[...B(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[y]}],"divide-style":[{divide:B()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...B()]}],"outline-offset":[{"outline-offset":[Ei,rt]}],"outline-w":[{outline:[Ei,_o]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:A()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[y]}],"ring-offset-w":[{"ring-offset":[Ei,_o]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",jo,wB]}],"shadow-color":[{shadow:[Td]}],opacity:[{opacity:[y]}],"mix-blend":[{"mix-blend":[...q(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":q()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",jo,rt]}],grayscale:[{grayscale:[u]}],"hue-rotate":[{"hue-rotate":[d]}],invert:[{invert:[h]}],saturate:[{saturate:[j]}],sepia:[{sepia:[P]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[u]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[d]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[y]}],"backdrop-saturate":[{"backdrop-saturate":[j]}],"backdrop-sepia":[{"backdrop-sepia":[P]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[a]}],"border-spacing-x":[{"border-spacing-x":[a]}],"border-spacing-y":[{"border-spacing-y":[a]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",rt]}],duration:[{duration:L()}],ease:[{ease:["linear","in","out","in-out",rt]}],delay:[{delay:L()}],animate:[{animate:["none","spin","ping","pulse","bounce",rt]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Nd,rt]}],"translate-x":[{"translate-x":[S]}],"translate-y":[{"translate-y":[S]}],"skew-x":[{"skew-x":[U]}],"skew-y":[{"skew-y":[U]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",rt]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",rt]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":R()}],"scroll-mx":[{"scroll-mx":R()}],"scroll-my":[{"scroll-my":R()}],"scroll-ms":[{"scroll-ms":R()}],"scroll-me":[{"scroll-me":R()}],"scroll-mt":[{"scroll-mt":R()}],"scroll-mr":[{"scroll-mr":R()}],"scroll-mb":[{"scroll-mb":R()}],"scroll-ml":[{"scroll-ml":R()}],"scroll-p":[{"scroll-p":R()}],"scroll-px":[{"scroll-px":R()}],"scroll-py":[{"scroll-py":R()}],"scroll-ps":[{"scroll-ps":R()}],"scroll-pe":[{"scroll-pe":R()}],"scroll-pt":[{"scroll-pt":R()}],"scroll-pr":[{"scroll-pr":R()}],"scroll-pb":[{"scroll-pb":R()}],"scroll-pl":[{"scroll-pl":R()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",rt]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Ei,_o,D0]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},NB=oB(SB);function Ce(...t){return NB(PI(t))}const TB=NU,tR=p.forwardRef(({className:t,...e},n)=>i.jsx(SI,{ref:n,className:Ce("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));tR.displayName=SI.displayName;const CB=Df("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),nR=p.forwardRef(({className:t,variant:e,...n},r)=>i.jsx(NI,{ref:r,className:Ce(CB({variant:e}),t),...n}));nR.displayName=NI.displayName;const EB=p.forwardRef(({className:t,...e},n)=>i.jsx(EI,{ref:n,className:Ce("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));EB.displayName=EI.displayName;const rR=p.forwardRef(({className:t,...e},n)=>i.jsx(kI,{ref:n,className:Ce("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:i.jsx(zy,{className:"h-4 w-4"})}));rR.displayName=kI.displayName;const sR=p.forwardRef(({className:t,...e},n)=>i.jsx(TI,{ref:n,className:Ce("text-sm font-semibold",t),...e}));sR.displayName=TI.displayName;const iR=p.forwardRef(({className:t,...e},n)=>i.jsx(CI,{ref:n,className:Ce("text-sm opacity-90",t),...e}));iR.displayName=CI.displayName;function kB(){const{toasts:t}=tn();return i.jsxs(TB,{children:[t.map(function({id:e,title:n,description:r,action:s,...o}){return i.jsxs(nR,{...o,children:[i.jsxs("div",{className:"grid gap-1",children:[n&&i.jsx(sR,{children:n}),r&&i.jsx(iR,{children:r})]}),s,i.jsx(rR,{})]},e)}),i.jsx(tR,{})]})}var AB=Ak[" useId ".trim().toString()]||(()=>{}),PB=0;function ii(t){const[e,n]=p.useState(AB());return xn(()=>{n(r=>r??String(PB++))},[t]),e?`radix-${e}`:""}const IB=["top","right","bottom","left"],fa=Math.min,Lr=Math.max,jg=Math.round,Qm=Math.floor,oi=t=>({x:t,y:t}),RB={left:"right",right:"left",bottom:"top",top:"bottom"},MB={start:"end",end:"start"};function Dw(t,e,n){return Lr(t,fa(e,n))}function Ji(t,e){return typeof t=="function"?t(e):t}function eo(t){return t.split("-")[0]}function Hu(t){return t.split("-")[1]}function r_(t){return t==="x"?"y":"x"}function s_(t){return t==="y"?"height":"width"}function ma(t){return["top","bottom"].includes(eo(t))?"y":"x"}function i_(t){return r_(ma(t))}function DB(t,e,n){n===void 0&&(n=!1);const r=Hu(t),s=i_(t),o=s_(s);let a=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(a=Sg(a)),[a,Sg(a)]}function LB(t){const e=Sg(t);return[Lw(t),e,Lw(e)]}function Lw(t){return t.replace(/start|end/g,e=>MB[e])}function OB(t,e,n){const r=["left","right"],s=["right","left"],o=["top","bottom"],a=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?o:a;default:return[]}}function VB(t,e,n,r){const s=Hu(t);let o=OB(eo(t),n==="start",r);return s&&(o=o.map(a=>a+"-"+s),e&&(o=o.concat(o.map(Lw)))),o}function Sg(t){return t.replace(/left|right|bottom|top/g,e=>RB[e])}function FB(t){return{top:0,right:0,bottom:0,left:0,...t}}function oR(t){return typeof t!="number"?FB(t):{top:t,right:t,bottom:t,left:t}}function Ng(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function IT(t,e,n){let{reference:r,floating:s}=t;const o=ma(e),a=i_(e),l=s_(a),c=eo(e),u=o==="y",d=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let g;switch(c){case"top":g={x:d,y:r.y-s.height};break;case"bottom":g={x:d,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-s.width,y:h};break;default:g={x:r.x,y:r.y}}switch(Hu(e)){case"start":g[a]-=m*(n&&u?-1:1);break;case"end":g[a]+=m*(n&&u?-1:1);break}return g}const UB=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:a}=n,l=o.filter(Boolean),c=await(a.isRTL==null?void 0:a.isRTL(e));let u=await a.getElementRects({reference:t,floating:e,strategy:s}),{x:d,y:h}=IT(u,r,c),m=r,g={},_=0;for(let v=0;v<l.length;v++){const{name:x,fn:y}=l[v],{x:w,y:j,data:E,reset:P}=await y({x:d,y:h,initialPlacement:r,placement:m,strategy:s,middlewareData:g,rects:u,platform:a,elements:{reference:t,floating:e}});d=w??d,h=j??h,g={...g,[x]:{...g[x],...E}},P&&_<=50&&(_++,typeof P=="object"&&(P.placement&&(m=P.placement),P.rects&&(u=P.rects===!0?await a.getElementRects({reference:t,floating:e,strategy:s}):P.rects),{x:d,y:h}=IT(u,m,c)),v=-1)}return{x:d,y:h,placement:m,strategy:s,middlewareData:g}};async function Bh(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:a,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:h="floating",altBoundary:m=!1,padding:g=0}=Ji(e,t),_=oR(g),x=l[m?h==="floating"?"reference":"floating":h],y=Ng(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(x)))==null||n?x:x.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),w=h==="floating"?{x:r,y:s,width:a.floating.width,height:a.floating.height}:a.reference,j=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),E=await(o.isElement==null?void 0:o.isElement(j))?await(o.getScale==null?void 0:o.getScale(j))||{x:1,y:1}:{x:1,y:1},P=Ng(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:w,offsetParent:j,strategy:c}):w);return{top:(y.top-P.top+_.top)/E.y,bottom:(P.bottom-y.bottom+_.bottom)/E.y,left:(y.left-P.left+_.left)/E.x,right:(P.right-y.right+_.right)/E.x}}const BB=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:o,platform:a,elements:l,middlewareData:c}=e,{element:u,padding:d=0}=Ji(t,e)||{};if(u==null)return{};const h=oR(d),m={x:n,y:r},g=i_(s),_=s_(g),v=await a.getDimensions(u),x=g==="y",y=x?"top":"left",w=x?"bottom":"right",j=x?"clientHeight":"clientWidth",E=o.reference[_]+o.reference[g]-m[g]-o.floating[_],P=m[g]-o.reference[g],U=await(a.getOffsetParent==null?void 0:a.getOffsetParent(u));let T=U?U[j]:0;(!T||!await(a.isElement==null?void 0:a.isElement(U)))&&(T=l.floating[j]||o.floating[_]);const S=E/2-P/2,C=T/2-v[_]/2-1,k=fa(h[y],C),I=fa(h[w],C),R=k,A=T-v[_]-I,G=T/2-v[_]/2+S,ue=Dw(R,G,A),B=!c.arrow&&Hu(s)!=null&&G!==ue&&o.reference[_]/2-(G<R?k:I)-v[_]/2<0,q=B?G<R?G-R:G-A:0;return{[g]:m[g]+q,data:{[g]:ue,centerOffset:G-ue-q,...B&&{alignmentOffset:q}},reset:B}}}),$B=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:o,rects:a,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:d=!0,crossAxis:h=!0,fallbackPlacements:m,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:_="none",flipAlignment:v=!0,...x}=Ji(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const y=eo(s),w=ma(l),j=eo(l)===l,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),P=m||(j||!v?[Sg(l)]:LB(l)),U=_!=="none";!m&&U&&P.push(...VB(l,v,_,E));const T=[l,...P],S=await Bh(e,x),C=[];let k=((r=o.flip)==null?void 0:r.overflows)||[];if(d&&C.push(S[y]),h){const G=DB(s,a,E);C.push(S[G[0]],S[G[1]])}if(k=[...k,{placement:s,overflows:C}],!C.every(G=>G<=0)){var I,R;const G=(((I=o.flip)==null?void 0:I.index)||0)+1,ue=T[G];if(ue)return{data:{index:G,overflows:k},reset:{placement:ue}};let B=(R=k.filter(q=>q.overflows[0]<=0).sort((q,O)=>q.overflows[1]-O.overflows[1])[0])==null?void 0:R.placement;if(!B)switch(g){case"bestFit":{var A;const q=(A=k.filter(O=>{if(U){const F=ma(O.placement);return F===w||F==="y"}return!0}).map(O=>[O.placement,O.overflows.filter(F=>F>0).reduce((F,D)=>F+D,0)]).sort((O,F)=>O[1]-F[1])[0])==null?void 0:A[0];q&&(B=q);break}case"initialPlacement":B=l;break}if(s!==B)return{reset:{placement:B}}}return{}}}};function RT(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function MT(t){return IB.some(e=>t[e]>=0)}const zB=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=Ji(t,e);switch(r){case"referenceHidden":{const o=await Bh(e,{...s,elementContext:"reference"}),a=RT(o,n.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:MT(a)}}}case"escaped":{const o=await Bh(e,{...s,altBoundary:!0}),a=RT(o,n.floating);return{data:{escapedOffsets:a,escaped:MT(a)}}}default:return{}}}}};async function WB(t,e){const{placement:n,platform:r,elements:s}=t,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),a=eo(n),l=Hu(n),c=ma(n)==="y",u=["left","top"].includes(a)?-1:1,d=o&&c?-1:1,h=Ji(e,t);let{mainAxis:m,crossAxis:g,alignmentAxis:_}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof _=="number"&&(g=l==="end"?_*-1:_),c?{x:g*d,y:m*u}:{x:m*u,y:g*d}}const HB=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:o,placement:a,middlewareData:l}=e,c=await WB(e,t);return a===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:a}}}}},qB=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:a=!1,limiter:l={fn:x=>{let{x:y,y:w}=x;return{x:y,y:w}}},...c}=Ji(t,e),u={x:n,y:r},d=await Bh(e,c),h=ma(eo(s)),m=r_(h);let g=u[m],_=u[h];if(o){const x=m==="y"?"top":"left",y=m==="y"?"bottom":"right",w=g+d[x],j=g-d[y];g=Dw(w,g,j)}if(a){const x=h==="y"?"top":"left",y=h==="y"?"bottom":"right",w=_+d[x],j=_-d[y];_=Dw(w,_,j)}const v=l.fn({...e,[m]:g,[h]:_});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:o,[h]:a}}}}}},GB=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:o,middlewareData:a}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Ji(t,e),d={x:n,y:r},h=ma(s),m=r_(h);let g=d[m],_=d[h];const v=Ji(l,e),x=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const j=m==="y"?"height":"width",E=o.reference[m]-o.floating[j]+x.mainAxis,P=o.reference[m]+o.reference[j]-x.mainAxis;g<E?g=E:g>P&&(g=P)}if(u){var y,w;const j=m==="y"?"width":"height",E=["top","left"].includes(eo(s)),P=o.reference[h]-o.floating[j]+(E&&((y=a.offset)==null?void 0:y[h])||0)+(E?0:x.crossAxis),U=o.reference[h]+o.reference[j]+(E?0:((w=a.offset)==null?void 0:w[h])||0)-(E?x.crossAxis:0);_<P?_=P:_>U&&(_=U)}return{[m]:g,[h]:_}}}},KB=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:o,platform:a,elements:l}=e,{apply:c=()=>{},...u}=Ji(t,e),d=await Bh(e,u),h=eo(s),m=Hu(s),g=ma(s)==="y",{width:_,height:v}=o.floating;let x,y;h==="top"||h==="bottom"?(x=h,y=m===(await(a.isRTL==null?void 0:a.isRTL(l.floating))?"start":"end")?"left":"right"):(y=h,x=m==="end"?"top":"bottom");const w=v-d.top-d.bottom,j=_-d.left-d.right,E=fa(v-d[x],w),P=fa(_-d[y],j),U=!e.middlewareData.shift;let T=E,S=P;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(S=j),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=w),U&&!m){const k=Lr(d.left,0),I=Lr(d.right,0),R=Lr(d.top,0),A=Lr(d.bottom,0);g?S=_-2*(k!==0||I!==0?k+I:Lr(d.left,d.right)):T=v-2*(R!==0||A!==0?R+A:Lr(d.top,d.bottom))}await c({...e,availableWidth:S,availableHeight:T});const C=await a.getDimensions(l.floating);return _!==C.width||v!==C.height?{reset:{rects:!0}}:{}}}};function Wy(){return typeof window<"u"}function qu(t){return aR(t)?(t.nodeName||"").toLowerCase():"#document"}function Ur(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function _i(t){var e;return(e=(aR(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function aR(t){return Wy()?t instanceof Node||t instanceof Ur(t).Node:!1}function Ls(t){return Wy()?t instanceof Element||t instanceof Ur(t).Element:!1}function gi(t){return Wy()?t instanceof HTMLElement||t instanceof Ur(t).HTMLElement:!1}function DT(t){return!Wy()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Ur(t).ShadowRoot}function Lf(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=Os(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function QB(t){return["table","td","th"].includes(qu(t))}function Hy(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function o_(t){const e=a_(),n=Ls(t)?Os(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function YB(t){let e=pa(t);for(;gi(e)&&!xu(e);){if(o_(e))return e;if(Hy(e))return null;e=pa(e)}return null}function a_(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function xu(t){return["html","body","#document"].includes(qu(t))}function Os(t){return Ur(t).getComputedStyle(t)}function qy(t){return Ls(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function pa(t){if(qu(t)==="html")return t;const e=t.assignedSlot||t.parentNode||DT(t)&&t.host||_i(t);return DT(e)?e.host:e}function lR(t){const e=pa(t);return xu(e)?t.ownerDocument?t.ownerDocument.body:t.body:gi(e)&&Lf(e)?e:lR(e)}function $h(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=lR(t),o=s===((r=t.ownerDocument)==null?void 0:r.body),a=Ur(s);if(o){const l=Ow(a);return e.concat(a,a.visualViewport||[],Lf(s)?s:[],l&&n?$h(l):[])}return e.concat(s,$h(s,[],n))}function Ow(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function cR(t){const e=Os(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=gi(t),o=s?t.offsetWidth:n,a=s?t.offsetHeight:r,l=jg(n)!==o||jg(r)!==a;return l&&(n=o,r=a),{width:n,height:r,$:l}}function l_(t){return Ls(t)?t:t.contextElement}function Bc(t){const e=l_(t);if(!gi(e))return oi(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:o}=cR(e);let a=(o?jg(n.width):n.width)/r,l=(o?jg(n.height):n.height)/s;return(!a||!Number.isFinite(a))&&(a=1),(!l||!Number.isFinite(l))&&(l=1),{x:a,y:l}}const ZB=oi(0);function uR(t){const e=Ur(t);return!a_()||!e.visualViewport?ZB:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function XB(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Ur(t)?!1:e}function El(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=l_(t);let a=oi(1);e&&(r?Ls(r)&&(a=Bc(r)):a=Bc(t));const l=XB(o,n,r)?uR(o):oi(0);let c=(s.left+l.x)/a.x,u=(s.top+l.y)/a.y,d=s.width/a.x,h=s.height/a.y;if(o){const m=Ur(o),g=r&&Ls(r)?Ur(r):r;let _=m,v=Ow(_);for(;v&&r&&g!==_;){const x=Bc(v),y=v.getBoundingClientRect(),w=Os(v),j=y.left+(v.clientLeft+parseFloat(w.paddingLeft))*x.x,E=y.top+(v.clientTop+parseFloat(w.paddingTop))*x.y;c*=x.x,u*=x.y,d*=x.x,h*=x.y,c+=j,u+=E,_=Ur(v),v=Ow(_)}}return Ng({width:d,height:h,x:c,y:u})}function c_(t,e){const n=qy(t).scrollLeft;return e?e.left+n:El(_i(t)).left+n}function dR(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:c_(t,r)),o=r.top+e.scrollTop;return{x:s,y:o}}function JB(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const o=s==="fixed",a=_i(r),l=e?Hy(e.floating):!1;if(r===a||l&&o)return n;let c={scrollLeft:0,scrollTop:0},u=oi(1);const d=oi(0),h=gi(r);if((h||!h&&!o)&&((qu(r)!=="body"||Lf(a))&&(c=qy(r)),gi(r))){const g=El(r);u=Bc(r),d.x=g.x+r.clientLeft,d.y=g.y+r.clientTop}const m=a&&!h&&!o?dR(a,c,!0):oi(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+d.x+m.x,y:n.y*u.y-c.scrollTop*u.y+d.y+m.y}}function e$(t){return Array.from(t.getClientRects())}function t$(t){const e=_i(t),n=qy(t),r=t.ownerDocument.body,s=Lr(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=Lr(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let a=-n.scrollLeft+c_(t);const l=-n.scrollTop;return Os(r).direction==="rtl"&&(a+=Lr(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:a,y:l}}function n$(t,e){const n=Ur(t),r=_i(t),s=n.visualViewport;let o=r.clientWidth,a=r.clientHeight,l=0,c=0;if(s){o=s.width,a=s.height;const u=a_();(!u||u&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:o,height:a,x:l,y:c}}function r$(t,e){const n=El(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,o=gi(t)?Bc(t):oi(1),a=t.clientWidth*o.x,l=t.clientHeight*o.y,c=s*o.x,u=r*o.y;return{width:a,height:l,x:c,y:u}}function LT(t,e,n){let r;if(e==="viewport")r=n$(t,n);else if(e==="document")r=t$(_i(t));else if(Ls(e))r=r$(e,n);else{const s=uR(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Ng(r)}function hR(t,e){const n=pa(t);return n===e||!Ls(n)||xu(n)?!1:Os(n).position==="fixed"||hR(n,e)}function s$(t,e){const n=e.get(t);if(n)return n;let r=$h(t,[],!1).filter(l=>Ls(l)&&qu(l)!=="body"),s=null;const o=Os(t).position==="fixed";let a=o?pa(t):t;for(;Ls(a)&&!xu(a);){const l=Os(a),c=o_(a);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||Lf(a)&&!c&&hR(t,a))?r=r.filter(d=>d!==a):s=l,a=pa(a)}return e.set(t,r),r}function i$(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const a=[...n==="clippingAncestors"?Hy(e)?[]:s$(e,this._c):[].concat(n),r],l=a[0],c=a.reduce((u,d)=>{const h=LT(e,d,s);return u.top=Lr(h.top,u.top),u.right=fa(h.right,u.right),u.bottom=fa(h.bottom,u.bottom),u.left=Lr(h.left,u.left),u},LT(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function o$(t){const{width:e,height:n}=cR(t);return{width:e,height:n}}function a$(t,e,n){const r=gi(e),s=_i(e),o=n==="fixed",a=El(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const c=oi(0);if(r||!r&&!o)if((qu(e)!=="body"||Lf(s))&&(l=qy(e)),r){const m=El(e,!0,o,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&(c.x=c_(s));const u=s&&!r&&!o?dR(s,l):oi(0),d=a.left+l.scrollLeft-c.x-u.x,h=a.top+l.scrollTop-c.y-u.y;return{x:d,y:h,width:a.width,height:a.height}}function L0(t){return Os(t).position==="static"}function OT(t,e){if(!gi(t)||Os(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return _i(t)===n&&(n=n.ownerDocument.body),n}function fR(t,e){const n=Ur(t);if(Hy(t))return n;if(!gi(t)){let s=pa(t);for(;s&&!xu(s);){if(Ls(s)&&!L0(s))return s;s=pa(s)}return n}let r=OT(t,e);for(;r&&QB(r)&&L0(r);)r=OT(r,e);return r&&xu(r)&&L0(r)&&!o_(r)?n:r||YB(t)||n}const l$=async function(t){const e=this.getOffsetParent||fR,n=this.getDimensions,r=await n(t.floating);return{reference:a$(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function c$(t){return Os(t).direction==="rtl"}const u$={convertOffsetParentRelativeRectToViewportRelativeRect:JB,getDocumentElement:_i,getClippingRect:i$,getOffsetParent:fR,getElementRects:l$,getClientRects:e$,getDimensions:o$,getScale:Bc,isElement:Ls,isRTL:c$};function mR(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function d$(t,e){let n=null,r;const s=_i(t);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function a(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=t.getBoundingClientRect(),{left:d,top:h,width:m,height:g}=u;if(l||e(),!m||!g)return;const _=Qm(h),v=Qm(s.clientWidth-(d+m)),x=Qm(s.clientHeight-(h+g)),y=Qm(d),j={rootMargin:-_+"px "+-v+"px "+-x+"px "+-y+"px",threshold:Lr(0,fa(1,c))||1};let E=!0;function P(U){const T=U[0].intersectionRatio;if(T!==c){if(!E)return a();T?a(!1,T):r=setTimeout(()=>{a(!1,1e-7)},1e3)}T===1&&!mR(u,t.getBoundingClientRect())&&a(),E=!1}try{n=new IntersectionObserver(P,{...j,root:s.ownerDocument})}catch{n=new IntersectionObserver(P,j)}n.observe(t)}return a(!0),o}function h$(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=l_(t),d=s||o?[...u?$h(u):[],...$h(e)]:[];d.forEach(y=>{s&&y.addEventListener("scroll",n,{passive:!0}),o&&y.addEventListener("resize",n)});const h=u&&l?d$(u,n):null;let m=-1,g=null;a&&(g=new ResizeObserver(y=>{let[w]=y;w&&w.target===u&&g&&(g.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var j;(j=g)==null||j.observe(e)})),n()}),u&&!c&&g.observe(u),g.observe(e));let _,v=c?El(t):null;c&&x();function x(){const y=El(t);v&&!mR(v,y)&&n(),v=y,_=requestAnimationFrame(x)}return n(),()=>{var y;d.forEach(w=>{s&&w.removeEventListener("scroll",n),o&&w.removeEventListener("resize",n)}),h==null||h(),(y=g)==null||y.disconnect(),g=null,c&&cancelAnimationFrame(_)}}const f$=HB,m$=qB,p$=$B,g$=KB,y$=zB,VT=BB,x$=GB,v$=(t,e,n)=>{const r=new Map,s={platform:u$,...n},o={...s.platform,_c:r};return UB(t,e,{...s,platform:o})};var Pp=typeof document<"u"?p.useLayoutEffect:p.useEffect;function Tg(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Tg(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&t.$$typeof)&&!Tg(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function pR(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function FT(t,e){const n=pR(t);return Math.round(e*n)/n}function O0(t){const e=p.useRef(t);return Pp(()=>{e.current=t}),e}function w$(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:a}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[d,h]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,g]=p.useState(r);Tg(m,r)||g(r);const[_,v]=p.useState(null),[x,y]=p.useState(null),w=p.useCallback(O=>{O!==U.current&&(U.current=O,v(O))},[]),j=p.useCallback(O=>{O!==T.current&&(T.current=O,y(O))},[]),E=o||_,P=a||x,U=p.useRef(null),T=p.useRef(null),S=p.useRef(d),C=c!=null,k=O0(c),I=O0(s),R=O0(u),A=p.useCallback(()=>{if(!U.current||!T.current)return;const O={placement:e,strategy:n,middleware:m};I.current&&(O.platform=I.current),v$(U.current,T.current,O).then(F=>{const D={...F,isPositioned:R.current!==!1};G.current&&!Tg(S.current,D)&&(S.current=D,$l.flushSync(()=>{h(D)}))})},[m,e,n,I,R]);Pp(()=>{u===!1&&S.current.isPositioned&&(S.current.isPositioned=!1,h(O=>({...O,isPositioned:!1})))},[u]);const G=p.useRef(!1);Pp(()=>(G.current=!0,()=>{G.current=!1}),[]),Pp(()=>{if(E&&(U.current=E),P&&(T.current=P),E&&P){if(k.current)return k.current(E,P,A);A()}},[E,P,A,k,C]);const ue=p.useMemo(()=>({reference:U,floating:T,setReference:w,setFloating:j}),[w,j]),B=p.useMemo(()=>({reference:E,floating:P}),[E,P]),q=p.useMemo(()=>{const O={position:n,left:0,top:0};if(!B.floating)return O;const F=FT(B.floating,d.x),D=FT(B.floating,d.y);return l?{...O,transform:"translate("+F+"px, "+D+"px)",...pR(B.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:D}},[n,l,B.floating,d.x,d.y]);return p.useMemo(()=>({...d,update:A,refs:ue,elements:B,floatingStyles:q}),[d,A,ue,B,q])}const b$=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?VT({element:r.current,padding:s}).fn(n):{}:r?VT({element:r,padding:s}).fn(n):{}}}},_$=(t,e)=>({...f$(t),options:[t,e]}),j$=(t,e)=>({...m$(t),options:[t,e]}),S$=(t,e)=>({...x$(t),options:[t,e]}),N$=(t,e)=>({...p$(t),options:[t,e]}),T$=(t,e)=>({...g$(t),options:[t,e]}),C$=(t,e)=>({...y$(t),options:[t,e]}),E$=(t,e)=>({...b$(t),options:[t,e]});var k$="Arrow",gR=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...o}=t;return i.jsx(De.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:i.jsx("polygon",{points:"0,0 30,0 15,10"})})});gR.displayName=k$;var A$=gR;function u_(t){const[e,n]=p.useState(void 0);return xn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let a,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;a=u.inlineSize,l=u.blockSize}else a=t.offsetWidth,l=t.offsetHeight;n({width:a,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var d_="Popper",[yR,Gu]=gr(d_),[P$,xR]=yR(d_),vR=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return i.jsx(P$,{scope:e,anchor:r,onAnchorChange:s,children:n})};vR.displayName=d_;var wR="PopperAnchor",bR=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,o=xR(wR,n),a=p.useRef(null),l=Je(e,a);return p.useEffect(()=>{o.onAnchorChange((r==null?void 0:r.current)||a.current)}),r?null:i.jsx(De.div,{...s,ref:l})});bR.displayName=wR;var h_="PopperContent",[I$,R$]=yR(h_),_R=p.forwardRef((t,e)=>{var te,le,xe,_e,Pe,de;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:a=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:d=0,sticky:h="partial",hideWhenDetached:m=!1,updatePositionStrategy:g="optimized",onPlaced:_,...v}=t,x=xR(h_,n),[y,w]=p.useState(null),j=Je(e,Ke=>w(Ke)),[E,P]=p.useState(null),U=u_(E),T=(U==null?void 0:U.width)??0,S=(U==null?void 0:U.height)??0,C=r+(o!=="center"?"-"+o:""),k=typeof d=="number"?d:{top:0,right:0,bottom:0,left:0,...d},I=Array.isArray(u)?u:[u],R=I.length>0,A={padding:k,boundary:I.filter(D$),altBoundary:R},{refs:G,floatingStyles:ue,placement:B,isPositioned:q,middlewareData:O}=w$({strategy:"fixed",placement:C,whileElementsMounted:(...Ke)=>h$(...Ke,{animationFrame:g==="always"}),elements:{reference:x.anchor},middleware:[_$({mainAxis:s+S,alignmentAxis:a}),c&&j$({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?S$():void 0,...A}),c&&N$({...A}),T$({...A,apply:({elements:Ke,rects:Ve,availableWidth:bt,availableHeight:Ze})=>{const{width:xt,height:Bt}=Ve.reference,lt=Ke.floating.style;lt.setProperty("--radix-popper-available-width",`${bt}px`),lt.setProperty("--radix-popper-available-height",`${Ze}px`),lt.setProperty("--radix-popper-anchor-width",`${xt}px`),lt.setProperty("--radix-popper-anchor-height",`${Bt}px`)}}),E&&E$({element:E,padding:l}),L$({arrowWidth:T,arrowHeight:S}),m&&C$({strategy:"referenceHidden",...A})]}),[F,D]=NR(B),L=zt(_);xn(()=>{q&&(L==null||L())},[q,L]);const X=(te=O.arrow)==null?void 0:te.x,$=(le=O.arrow)==null?void 0:le.y,K=((xe=O.arrow)==null?void 0:xe.centerOffset)!==0,[Y,ie]=p.useState();return xn(()=>{y&&ie(window.getComputedStyle(y).zIndex)},[y]),i.jsx("div",{ref:G.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:q?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Y,"--radix-popper-transform-origin":[(_e=O.transformOrigin)==null?void 0:_e.x,(Pe=O.transformOrigin)==null?void 0:Pe.y].join(" "),...((de=O.hide)==null?void 0:de.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:i.jsx(I$,{scope:n,placedSide:F,onArrowChange:P,arrowX:X,arrowY:$,shouldHideArrow:K,children:i.jsx(De.div,{"data-side":F,"data-align":D,...v,ref:j,style:{...v.style,animation:q?void 0:"none"}})})})});_R.displayName=h_;var jR="PopperArrow",M$={top:"bottom",right:"left",bottom:"top",left:"right"},SR=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,o=R$(jR,r),a=M$[o.placedSide];return i.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:i.jsx(A$,{...s,ref:n,style:{...s.style,display:"block"}})})});SR.displayName=jR;function D$(t){return t!==null}var L$=t=>({name:"transformOrigin",options:t,fn(e){var x,y,w;const{placement:n,rects:r,middlewareData:s}=e,a=((x=s.arrow)==null?void 0:x.centerOffset)!==0,l=a?0:t.arrowWidth,c=a?0:t.arrowHeight,[u,d]=NR(n),h={start:"0%",center:"50%",end:"100%"}[d],m=(((y=s.arrow)==null?void 0:y.x)??0)+l/2,g=(((w=s.arrow)==null?void 0:w.y)??0)+c/2;let _="",v="";return u==="bottom"?(_=a?h:`${m}px`,v=`${-c}px`):u==="top"?(_=a?h:`${m}px`,v=`${r.floating.height+c}px`):u==="right"?(_=`${-c}px`,v=a?h:`${g}px`):u==="left"&&(_=`${r.floating.width+c}px`,v=a?h:`${g}px`),{data:{x:_,y:v}}}});function NR(t){const[e,n="center"]=t.split("-");return[e,n]}var TR=vR,f_=bR,m_=_R,p_=SR,[Gy,zae]=gr("Tooltip",[Gu]),g_=Gu(),CR="TooltipProvider",O$=700,UT="tooltip.open",[V$,ER]=Gy(CR),kR=t=>{const{__scopeTooltip:e,delayDuration:n=O$,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=t,a=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),i.jsx(V$,{scope:e,isOpenDelayedRef:a,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),a.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>a.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:o})};kR.displayName=CR;var AR="Tooltip",[Wae,Ky]=Gy(AR),Vw="TooltipTrigger",F$=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Ky(Vw,n),o=ER(Vw,n),a=g_(n),l=p.useRef(null),c=Je(e,l,s.onTriggerChange),u=p.useRef(!1),d=p.useRef(!1),h=p.useCallback(()=>u.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),i.jsx(f_,{asChild:!0,...a,children:i.jsx(De.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:we(t.onPointerMove,m=>{m.pointerType!=="touch"&&!d.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),d.current=!0)}),onPointerLeave:we(t.onPointerLeave,()=>{s.onTriggerLeave(),d.current=!1}),onPointerDown:we(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:we(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:we(t.onBlur,s.onClose),onClick:we(t.onClick,s.onClose)})})});F$.displayName=Vw;var U$="TooltipPortal",[Hae,B$]=Gy(U$,{forceMount:void 0}),vu="TooltipContent",PR=p.forwardRef((t,e)=>{const n=B$(vu,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=t,a=Ky(vu,t.__scopeTooltip);return i.jsx(yr,{present:r||a.open,children:a.disableHoverableContent?i.jsx(IR,{side:s,...o,ref:e}):i.jsx($$,{side:s,...o,ref:e})})}),$$=p.forwardRef((t,e)=>{const n=Ky(vu,t.__scopeTooltip),r=ER(vu,t.__scopeTooltip),s=p.useRef(null),o=Je(e,s),[a,l]=p.useState(null),{trigger:c,onClose:u}=n,d=s.current,{onPointerInTransitChange:h}=r,m=p.useCallback(()=>{l(null),h(!1)},[h]),g=p.useCallback((_,v)=>{const x=_.currentTarget,y={x:_.clientX,y:_.clientY},w=G$(y,x.getBoundingClientRect()),j=K$(y,w),E=Q$(v.getBoundingClientRect()),P=Z$([...j,...E]);l(P),h(!0)},[h]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&d){const _=x=>g(x,d),v=x=>g(x,c);return c.addEventListener("pointerleave",_),d.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",_),d.removeEventListener("pointerleave",v)}}},[c,d,g,m]),p.useEffect(()=>{if(a){const _=v=>{const x=v.target,y={x:v.clientX,y:v.clientY},w=(c==null?void 0:c.contains(x))||(d==null?void 0:d.contains(x)),j=!Y$(y,a);w?m():j&&(m(),u())};return document.addEventListener("pointermove",_),()=>document.removeEventListener("pointermove",_)}},[c,d,a,u,m]),i.jsx(IR,{...t,ref:o})}),[z$,W$]=Gy(AR,{isInside:!1}),H$=B9("TooltipContent"),IR=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:a,...l}=t,c=Ky(vu,n),u=g_(n),{onClose:d}=c;return p.useEffect(()=>(document.addEventListener(UT,d),()=>document.removeEventListener(UT,d)),[d]),p.useEffect(()=>{if(c.trigger){const h=m=>{const g=m.target;g!=null&&g.contains(c.trigger)&&d()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,d]),i.jsx(zu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:h=>h.preventDefault(),onDismiss:d,children:i.jsxs(m_,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[i.jsx(H$,{children:r}),i.jsx(z$,{scope:n,isInside:!0,children:i.jsx(aU,{id:c.contentId,role:"tooltip",children:s||r})})]})})});PR.displayName=vu;var RR="TooltipArrow",q$=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=g_(n);return W$(RR,n).isInside?null:i.jsx(p_,{...s,...r,ref:e})});q$.displayName=RR;function G$(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function K$(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Q$(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function Y$(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const l=e[o].x,c=e[o].y,u=e[a].x,d=e[a].y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(s=!s)}return s}function Z$(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),X$(e)}function X$(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const o=e[e.length-1],a=e[e.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const o=n[n.length-1],a=n[n.length-2];if((o.x-a.x)*(s.y-a.y)>=(o.y-a.y)*(s.x-a.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var J$=kR,MR=PR;const ez=J$,tz=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(MR,{ref:r,sideOffset:e,className:Ce("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));tz.displayName=MR.displayName;const re=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Ce("rounded-lg border bg-card text-card-foreground shadow-sm",t),...e}));re.displayName="Card";const ye=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Ce("flex flex-col space-y-1.5 p-6",t),...e}));ye.displayName="CardHeader";const he=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Ce("text-2xl font-semibold leading-none tracking-tight",t),...e}));he.displayName="CardTitle";const Ue=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Ce("text-sm text-muted-foreground",t),...e}));Ue.displayName="CardDescription";const ae=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Ce("p-6 pt-0",t),...e}));ae.displayName="CardContent";const Of=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{ref:n,className:Ce("flex items-center p-6 pt-0",t),...e}));Of.displayName="CardFooter";function nz(){return i.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:i.jsx(re,{className:"w-full max-w-md mx-4",children:i.jsxs(ae,{className:"pt-6",children:[i.jsxs("div",{className:"flex mb-4 gap-2",children:[i.jsx(PU,{className:"h-8 w-8 text-red-500"}),i.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),i.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}function Hs({className:t,...e}){return i.jsx("div",{className:Ce("animate-pulse rounded-md bg-muted",t),...e})}function rz({stats:t,onStartNewGame:e,isLoading:n}){return n?i.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 md:p-6 mb-6",children:i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(Hs,{className:"w-12 h-12 rounded-full"}),i.jsxs("div",{className:"ml-3",children:[i.jsx(Hs,{className:"h-4 w-20 mb-2"}),i.jsx(Hs,{className:"h-6 w-24"})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Hs,{className:"w-12 h-12 rounded-full"}),i.jsxs("div",{className:"ml-3",children:[i.jsx(Hs,{className:"h-4 w-20 mb-2"}),i.jsx(Hs,{className:"h-6 w-24"})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx(Hs,{className:"w-12 h-12 rounded-full"}),i.jsxs("div",{className:"ml-3",children:[i.jsx(Hs,{className:"h-4 w-20 mb-2"}),i.jsx(Hs,{className:"h-6 w-24"})]})]}),i.jsx("div",{className:"flex items-center",children:i.jsx(Hs,{className:"h-10 w-40"})})]})}):i.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4 md:p-6 mb-6",children:i.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-12 h-12 bg-primary bg-opacity-10 rounded-full flex items-center justify-center text-primary",children:i.jsx("i",{className:"ri-trophy-line text-xl"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-gray-600 text-sm",children:"Your Score"}),i.jsxs("p",{className:"font-bold text-xl text-purple-700",children:[Math.max(t.score,0)," pts"]})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-12 h-12 bg-secondary bg-opacity-10 rounded-full flex items-center justify-center text-secondary",children:i.jsx("i",{className:"ri-check-line text-xl"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-gray-600 text-sm",children:"Solved"}),i.jsxs("p",{className:"font-bold text-xl text-green-700",children:[t.solvedCount," riddles"]})]})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"w-12 h-12 bg-accent bg-opacity-10 rounded-full flex items-center justify-center text-accent",children:i.jsx("i",{className:"ri-time-line text-xl"})}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"text-gray-600 text-sm",children:"Average Time"}),i.jsxs("p",{className:"font-bold text-xl text-pink-700",children:[t.avgTimeSeconds," seconds"]})]})]})]})})}const DR=p.createContext(null);function sz({children:t}){const{toast:e}=tn(),[n,r]=p.useState(!1),{data:s,error:o,isLoading:a}=Et({queryKey:["/api/user"],queryFn:iI({on401:"returnNull"}),enabled:!n}),l=Tn({mutationFn:async h=>await(await Zt("POST","/api/login",h)).json(),onSuccess:h=>{r(!1),_s.setQueryData(["/api/user"],h),e({title:"Login successful",description:`Welcome back, ${h.username}!`,variant:"default"})},onError:h=>{e({title:"Login failed",description:h.message,variant:"destructive"})}}),c=Tn({mutationFn:async h=>await(await Zt("POST","/api/register",h)).json(),onSuccess:h=>{r(!1),_s.setQueryData(["/api/user"],h),e({title:"Registration successful",description:"Your account has been created and your progress will now be saved!",variant:"default"})},onError:h=>{e({title:"Registration failed",description:h.message,variant:"destructive"})}}),u=Tn({mutationFn:async()=>{await Zt("POST","/api/logout")},onSuccess:()=>{_s.setQueryData(["/api/user"],null),r(!1),e({title:"Logged out",description:"You have been logged out successfully.",variant:"default"})},onError:h=>{e({title:"Logout failed",description:h.message,variant:"destructive"})}}),d=async()=>{try{await Zt("POST","/api/logout")}catch{}r(!0),_s.clear(),_s.setQueryData(["/api/user"],null),console.log("🎮 Guest mode activated - clearing all auth state"),e({title:"Playing as guest",description:"You can now play riddles! Create an account to save your progress.",variant:"default"})};return i.jsx(DR.Provider,{value:{user:s??null,isGuest:n,isLoading:a&&!n,error:o,loginMutation:l,logoutMutation:u,registerMutation:c,playAsGuest:d},children:t})}function Rn(){const t=p.useContext(DR);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}function LR(){const{user:t}=Rn(),{data:e=[],isLoading:n,error:r}=Et({queryKey:["/api/categories"]}),s=p.useMemo(()=>e.filter(x=>x.name.toLowerCase()!=="fan made"),[e]),{data:o=[],isLoading:a,error:l}=Et({queryKey:["/api/riddles/with-categories"]}),c=p.useMemo(()=>o,[o]),{data:u=[],isLoading:d}=Et({queryKey:["/api/user",t==null?void 0:t.id,"progress"],enabled:!!t}),h=p.useMemo(()=>{const x=Array.isArray(u)?u:[];return new Set(x.filter(y=>y.solved).map(y=>y.riddleId))},[u]),m=p.useMemo(()=>c.filter(x=>!h.has(x.id)),[c,h]),g=x=>x===null?c:c.filter(y=>y.categoryId===x),_=x=>x===null?m:m.filter(y=>y.categoryId===x);return{categories:s,riddles:c,riddlesWithCategories:c,unsolvedRiddles:m,solvedRiddleIds:h,getRandomUnsolvedRiddle:(x=null)=>{const y=_(x);if(y.length>0){const j=Math.floor(Math.random()*y.length);return y[j]}if(m.length===0){const j=g(x);if(j.length===0)return null;const E=j[0];return{...E,question:"Congratulations! You've solved all the available riddles in this category. Try another category or check back later for new riddles!",answer:"",hint:null,explanation:null,imageUrl:null,categoryId:E.categoryId,category:E.category,difficulty:"easy"}}return m[Math.floor(Math.random()*m.length)]},getRiddlesByCategory:g,getUnsolvedRiddlesByCategory:_,isLoadingCategories:n,isLoadingRiddles:a,isLoadingProgress:d,categoriesError:r,riddlesError:l}}const iz=(t,e,n)=>{const r=[];n?r.push(n):r.push("Think about what the question is really asking.");const s=e.toLowerCase();let o="";if(s.includes("water")||s.includes("ocean")||s.includes("river"))o="Think about something related to water or liquid.";else if(s.includes("time")||s.includes("clock")||s.includes("hour")||s.includes("minute"))o="Consider something related to time or the passage of time.";else if(s.includes("book")||s.includes("word")||s.includes("letter"))o="Think about reading, writing, or language.";else if(s.includes("light")||s.includes("dark")||s.includes("shadow"))o="Consider the relationship between light and darkness.";else if(s.includes("fire")||s.includes("flame")||s.includes("burn"))o="Think about heat, fire, or burning.";else if(s.includes("cold")||s.includes("ice")||s.includes("snow"))o="Consider something cold or frozen.";else if(s.includes("air")||s.includes("wind")||s.includes("breath"))o="Think about air, breathing, or the wind.";else if(s.includes("door")||s.includes("key")||s.includes("lock"))o="Consider something that opens, closes, or provides access.";else if(s.includes("mirror")||s.includes("reflect"))o="Think about reflection or seeing yourself.";else if(s.includes("heart")||s.includes("love")||s.includes("emotion"))o="Consider feelings, emotions, or matters of the heart.";else if(s.includes("sound")||s.includes("music")||s.includes("sing"))o="Think about sounds, music, or hearing.";else if(s.includes("hand")||s.includes("finger")||s.includes("touch"))o="Consider something you can touch or hold.";else if(s.includes("eye")||s.includes("see")||s.includes("vision"))o="Think about seeing, looking, or vision.";else if(s.includes("walk")||s.includes("step")||s.includes("path"))o="Consider movement, walking, or a journey.";else if(s.includes("home")||s.includes("house")||s.includes("room"))o="Think about places where people live or spend time.";else if(s.includes("animal")||s.includes("dog")||s.includes("cat")||s.includes("bird"))o="Consider a living creature or animal.";else if(s.includes("food")||s.includes("eat")||s.includes("hungry"))o="Think about food, eating, or nourishment.";else if(s.includes("tree")||s.includes("plant")||s.includes("flower"))o="Consider something that grows in nature.";else if(s.includes("money")||s.includes("coin")||s.includes("gold"))o="Think about value, money, or precious things.";else if(s.includes("dream")||s.includes("sleep")||s.includes("night"))o="Consider sleep, dreams, or nighttime.";else if(s.includes("car")||s.includes("wheel")||s.includes("drive"))o="Think about transportation or moving from place to place.";else{const a=["Think about what type of thing this could be - is it an object, action, concept, or living thing?","Consider the key words in the riddle - what do they have in common?","Look for wordplay or double meanings in the question.","Think about everyday things you encounter - the answer might be simpler than you think.","Consider if this riddle is asking about a process, a thing, or an idea.","Break down the riddle sentence by sentence - what clues stand out?","Think about the context - what setting or situation does this riddle describe?","Consider if there's a metaphor or comparison being made in the riddle.","Look for any rhymes, patterns, or word connections in the question.","Think about cause and effect - what leads to what in this riddle?"],l=(e.length+e.charCodeAt(0))%a.length;o=a[l]}return r.push(o),r.push(`The answer has ${e.length} letters.`),r.push(`The answer starts with '${e.charAt(0).toUpperCase()}'.`),r.push(`The answer ends with '${e.charAt(e.length-1).toLowerCase()}'.`),r};function OR(){const{toast:t}=tn(),{user:e}=Rn(),[n,r]=p.useState(null),[s,o]=p.useState(""),[a,l]=p.useState(0),[c,u]=p.useState([]),[d,h]=p.useState(!1),[m,g]=p.useState(null),[_,v]=p.useState(!1),[x,y]=p.useState(0),w=3,j=5,[E,P]=p.useState(!1),[U,T]=p.useState(!1),[S,C]=p.useState(!1),[k,I]=p.useState(0),[R,A]=p.useState(null),[G,ue]=p.useState(0),[B,q]=p.useState(!1),O=p.useRef(null),{data:F={score:0,solvedCount:0,avgTimeSeconds:0},refetch:D}=Et({queryKey:["/api/user",e==null?void 0:e.id,"stats"],enabled:!!e}),L=Tn({mutationFn:async()=>!n||!e?null:(await Zt("POST","/api/mark-viewed",{riddleId:n.id,userId:e.id})).json(),onSuccess:()=>{q(!0)},onError:le=>{console.error("Error marking riddle as viewed:",le)}}),X=()=>{if(h(!0),g(Date.now()),C(!1),l(0),v(!1),n){const le=iz(n.question,n.answer,n.hint);u(le)}},$=()=>{o(""),l(0),u([]),h(!1),g(null),C(!1),I(0),A(null),ue(0),v(!1),y(0),O.current&&(clearInterval(O.current),O.current=null)};p.useEffect(()=>()=>{O.current&&clearInterval(O.current)},[]),p.useEffect(()=>{n&&$()},[n]);const K=Tn({mutationFn:async()=>{if(!n)return null;const le=m?Math.round((Date.now()-m)/1e3):0;return e?(await Zt("POST","/api/check-answer",{riddleId:n.id,answer:s,userId:e.id,timeToSolveSeconds:le,hintsUsed:a,hasViewedAnswer:B})).json():null},onSuccess:le=>{if(le.isCorrect){v(!0),O.current&&clearInterval(O.current),C(!0),I(le.pointsEarned);const xe=m?Math.round((Date.now()-m)/1e3):0;ue(xe),P(!0),D()}else{const xe=x+1;if(y(xe),xe>=w)v(!0),O.current&&clearInterval(O.current),T(!0),t({title:"Maximum attempts reached",description:`The correct answer was "${n==null?void 0:n.answer}". Let's try another riddle!`,variant:"destructive"});else{const _e=w-xe;t({title:"Incorrect answer",description:`Try again! You have ${_e} ${_e===1?"attempt":"attempts"} left.`,variant:"destructive"})}}},onError:le=>{t({title:"Error checking answer",description:"Please try again",variant:"destructive"})}}),Y=()=>{if(n){if(!d){X();return}if(a>=j){t({title:"Maximum hints used",description:"You've used all available hints for this riddle!",variant:"destructive"});return}if(c.length>0&&a<c.length){const le=c[a];A(le),l(xe=>xe+1),t({title:`Hint ${a+1}/${c.length}`,description:le,duration:5e3}),e&&Zt("GET",`/api/hints/${n.id}?userId=${e.id}`,void 0).then(()=>{D()})}else t({title:"No more hints",description:"No more hints available for this riddle!",variant:"destructive"})}},ie=()=>{n&&(v(!0),O.current&&clearInterval(O.current),e&&L.mutate(),q(!0),t({title:"Answer Revealed",description:"You won't earn points for solving this riddle now.",variant:"destructive"}))};return{currentRiddle:n,setCurrentRiddle:r,userAnswer:s,setUserAnswer:o,hintsUsed:a,progressiveHints:c,isGameActive:d,isPaused:_,isCorrectModalOpen:E,setIsCorrectModalOpen:P,isWrongModalOpen:U,setIsWrongModalOpen:T,isSolved:S,pointsEarned:k,currentHint:R,timeToSolve:G,checkAnswer:()=>{if(!(!n||!s.trim())){if(!d){X();return}K.mutate()}},getHint:Y,resetGame:$,startGame:X,userStats:F,isCheckingAnswer:K.isPending,isGettingHint:!1,MAX_HINTS:j,showAnswer:ie,hasViewedAnswer:B,setHasViewedAnswer:q,isMarkingViewed:L.isPending,timeLeft:0,attemptCount:x,MAX_ATTEMPTS:w}}const oz=Df("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ee=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},o)=>{const a=r?oI:"button";return i.jsx(a,{className:Ce(oz({variant:e,size:n,className:t})),ref:o,...s})});ee.displayName="Button";function az(){const{categories:t,getRiddlesByCategory:e,isLoadingCategories:n}=LR(),{userStats:r}=OR(),s=o=>{const a=o.toLowerCase();return a.includes("math")||a.includes("number")?RI:a.includes("logic")?t_:a.includes("word")||a.includes("riddle")?_g:a.includes("puzzle")?NT:gu};return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-cyan-50",children:[i.jsxs("div",{className:"bg-gradient-to-br from-violet-500 via-purple-500 to-fuchsia-500 text-white relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-pink-600/20"}),i.jsx("div",{className:"container mx-auto px-4 py-12 md:py-16 relative",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"mb-6",children:i.jsx("span",{className:"text-6xl md:text-8xl",children:"🧠"})}),i.jsx("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-extrabold mb-4 bg-gradient-to-r from-yellow-200 to-pink-200 bg-clip-text text-transparent",children:"Brain Teasers & Riddles"}),i.jsx("p",{className:"text-lg md:text-2xl lg:text-3xl font-semibold text-white/90 max-w-4xl mx-auto",children:"🎮 Challenge your mind with puzzles, trivia games, and brain games! 🚀"})]})}),i.jsx("div",{className:"absolute top-10 left-10 text-4xl opacity-20 animate-bounce",children:"⭐"}),i.jsx("div",{className:"absolute top-20 right-10 text-3xl opacity-20 animate-bounce delay-500",children:"💫"}),i.jsx("div",{className:"absolute bottom-10 left-1/4 text-2xl opacity-20 animate-bounce delay-1000",children:"✨"})]}),i.jsx("div",{className:"bg-white/80 backdrop-blur-sm shadow-xl border-t-4 border-gradient-to-r from-pink-400 to-purple-400",children:i.jsxs("div",{className:"container mx-auto px-4 py-8 md:py-16",children:[i.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-violet-500 p-3 rounded-full",children:i.jsx(FI,{className:"h-8 w-8 md:h-10 md:w-10 text-white"})}),i.jsx("h2",{className:"text-3xl md:text-5xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Game Modes"})]}),i.jsx("p",{className:"text-lg md:text-xl text-gray-700 max-w-3xl mx-auto font-medium",children:"🎯 Choose from our amazing collection of brain teasers, trivia games, and puzzle challenges!"})]}),i.jsxs("div",{className:"mb-12 md:mb-16",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8",children:[i.jsx("span",{className:"text-2xl md:text-3xl",children:"🧠"}),i.jsx("h3",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Trivia Games"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-8 max-w-6xl mx-auto",children:[i.jsx(vt,{href:"/trivia",children:i.jsx(re,{className:"cursor-pointer transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 hover:rotate-1 bg-gradient-to-br from-blue-50 to-indigo-100 border-2 border-blue-200 hover:border-blue-400 rounded-3xl overflow-hidden group",children:i.jsxs(ae,{className:"p-6 md:p-8 text-center",children:[i.jsx("div",{className:"bg-gradient-to-r from-blue-500 via-purple-500 to-indigo-600 text-white p-4 md:p-5 rounded-2xl w-fit mx-auto mb-4 md:mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:i.jsx(si,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx(he,{className:"text-xl md:text-2xl font-bold mb-3 text-gray-800",children:"General Trivia"}),i.jsx(Ue,{className:"text-gray-600 text-base md:text-lg",children:"🎯 Multiple choice questions across all topics"})]})})}),i.jsx(vt,{href:"/animal-trivia",children:i.jsx(re,{className:"cursor-pointer transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 hover:rotate-1 bg-gradient-to-br from-green-50 to-emerald-100 border-2 border-green-200 hover:border-green-400 rounded-3xl overflow-hidden group",children:i.jsxs(ae,{className:"p-6 md:p-8 text-center",children:[i.jsx("div",{className:"bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 text-white p-4 md:p-5 rounded-2xl w-fit mx-auto mb-4 md:mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:i.jsx("span",{className:"text-2xl md:text-3xl",children:"🐾"})}),i.jsx(he,{className:"text-xl md:text-2xl font-bold mb-3 text-gray-800",children:"Animal Trivia"}),i.jsx(Ue,{className:"text-gray-600 text-base md:text-lg",children:"🦁 Test your knowledge about the animal kingdom"})]})})}),i.jsx(vt,{href:"/school-trivia",children:i.jsx(re,{className:"cursor-pointer transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 hover:rotate-1 bg-gradient-to-br from-purple-50 to-pink-100 border-2 border-purple-200 hover:border-purple-400 rounded-3xl overflow-hidden group",children:i.jsxs(ae,{className:"p-6 md:p-8 text-center",children:[i.jsx("div",{className:"bg-gradient-to-r from-purple-500 via-pink-500 to-rose-500 text-white p-4 md:p-5 rounded-2xl w-fit mx-auto mb-4 md:mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:i.jsx(UI,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx(he,{className:"text-xl md:text-2xl font-bold mb-3 text-gray-800",children:"School Trivia"}),i.jsx(Ue,{className:"text-gray-600 text-base md:text-lg",children:"📚 Math, Science, English & History by grade level"})]})})})]})]}),i.jsxs("div",{className:"mb-12 md:mb-16",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8",children:[i.jsx("span",{className:"text-2xl md:text-3xl",children:"🎯"}),i.jsx("h3",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-orange-500 to-red-500 bg-clip-text text-transparent",children:"Word & Puzzle Games"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4 md:gap-6 max-w-7xl mx-auto",children:[i.jsx(vt,{href:"/burble",children:i.jsx(re,{className:"cursor-pointer transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 hover:rotate-1 bg-gradient-to-br from-cyan-50 to-blue-100 border-2 border-cyan-200 hover:border-cyan-400 rounded-3xl overflow-hidden group",children:i.jsxs(ae,{className:"p-6 text-center",children:[i.jsx("div",{className:"bg-gradient-to-r from-cyan-500 via-blue-500 to-indigo-500 text-white p-4 rounded-2xl w-fit mx-auto mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:i.jsx(_g,{className:"h-6 w-6"})}),i.jsx(he,{className:"text-lg font-bold mb-2 text-gray-800",children:"Burble Word Game"}),i.jsx(Ue,{className:"text-gray-600 text-sm",children:"💡 Word guessing with color-coded feedback"})]})})}),i.jsx(vt,{href:"/",children:i.jsx(re,{className:"cursor-pointer transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 hover:rotate-1 bg-gradient-to-br from-violet-50 to-purple-100 border-2 border-violet-200 hover:border-violet-400 rounded-3xl overflow-hidden group",children:i.jsxs(ae,{className:"p-6 text-center",children:[i.jsx("div",{className:"bg-gradient-to-r from-violet-500 via-purple-500 to-indigo-500 text-white p-4 rounded-2xl w-fit mx-auto mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:i.jsx(gu,{className:"h-6 w-6"})}),i.jsx(he,{className:"text-lg font-bold mb-2 text-gray-800",children:"Brain Riddles"}),i.jsx(Ue,{className:"text-gray-600 text-sm",children:"🧩 Classic riddles and brain teasers"})]})})}),i.jsx(vt,{href:"/ev-special",children:i.jsx(re,{className:"cursor-pointer transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 hover:rotate-1 bg-gradient-to-br from-lime-50 to-green-100 border-2 border-lime-200 hover:border-lime-400 rounded-3xl overflow-hidden group",children:i.jsxs(ae,{className:"p-6 text-center",children:[i.jsx("div",{className:"bg-gradient-to-r from-lime-500 via-green-500 to-emerald-500 text-white p-4 rounded-2xl w-fit mx-auto mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:i.jsx(Rw,{className:"h-6 w-6"})}),i.jsx(he,{className:"text-lg font-bold mb-2 text-gray-800",children:"Twenty Questions"}),i.jsx(Ue,{className:"text-gray-600 text-sm",children:"🤔 Yes/No question guessing game"})]})})}),i.jsx(vt,{href:"/emoji-guess",children:i.jsx(re,{className:"cursor-pointer transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 hover:rotate-1 bg-gradient-to-br from-yellow-50 to-orange-100 border-2 border-yellow-200 hover:border-yellow-400 rounded-3xl overflow-hidden group",children:i.jsxs(ae,{className:"p-6 text-center",children:[i.jsx("div",{className:"bg-gradient-to-r from-yellow-500 via-orange-500 to-red-500 text-white p-4 rounded-2xl w-fit mx-auto mb-4 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:i.jsx(NT,{className:"h-6 w-6"})}),i.jsx(he,{className:"text-lg font-bold mb-2 text-gray-800",children:"Emoji Guess"}),i.jsx(Ue,{className:"text-gray-600 text-sm",children:"😄 Decode emoji combinations for themes"})]})})})]})]}),i.jsxs("div",{className:"mb-12 md:mb-16",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8",children:[i.jsx("span",{className:"text-2xl md:text-3xl",children:"⚔️"}),i.jsx("h3",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-red-500 to-pink-500 bg-clip-text text-transparent",children:"Adventure & Battle Games"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-8 max-w-6xl mx-auto",children:[i.jsx(vt,{href:"/multiplayer",children:i.jsx(re,{className:"cursor-pointer transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 hover:rotate-1 bg-gradient-to-br from-red-50 to-pink-100 border-2 border-red-200 hover:border-red-400 rounded-3xl overflow-hidden group",children:i.jsxs(ae,{className:"p-6 md:p-8 text-center",children:[i.jsx("div",{className:"bg-gradient-to-r from-red-500 via-pink-500 to-rose-500 text-white p-4 md:p-5 rounded-2xl w-fit mx-auto mb-4 md:mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:i.jsx(ET,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx(he,{className:"text-xl md:text-2xl font-bold mb-3 text-gray-800",children:"Battle Arena"}),i.jsx(Ue,{className:"text-gray-600 text-base md:text-lg",children:"⚔️ Multiplayer battles with sprite characters"})]})})}),i.jsx(vt,{href:"/geo-guesser",children:i.jsx(re,{className:"cursor-pointer transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 hover:rotate-1 bg-gradient-to-br from-teal-50 to-cyan-100 border-2 border-teal-200 hover:border-teal-400 rounded-3xl overflow-hidden group",children:i.jsxs(ae,{className:"p-6 md:p-8 text-center",children:[i.jsx("div",{className:"bg-gradient-to-r from-teal-500 via-cyan-500 to-blue-500 text-white p-4 md:p-5 rounded-2xl w-fit mx-auto mb-4 md:mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:i.jsx(Vc,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx(he,{className:"text-xl md:text-2xl font-bold mb-3 text-gray-800",children:"Geo Guesser"}),i.jsx(Ue,{className:"text-gray-600 text-base md:text-lg",children:"🌍 Guess locations around the world"})]})})}),i.jsx(vt,{href:"/audio-manager",children:i.jsx(re,{className:"cursor-pointer transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 hover:rotate-1 bg-gradient-to-br from-indigo-50 to-purple-100 border-2 border-indigo-200 hover:border-indigo-400 rounded-3xl overflow-hidden group",children:i.jsxs(ae,{className:"p-6 md:p-8 text-center",children:[i.jsx("div",{className:"bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 text-white p-4 md:p-5 rounded-2xl w-fit mx-auto mb-4 md:mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:i.jsx(Uh,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx(he,{className:"text-xl md:text-2xl font-bold mb-3 text-gray-800",children:"Music & Audio"}),i.jsx(Ue,{className:"text-gray-600 text-base md:text-lg",children:"🎵 Stream music from Spotify, YouTube & more"})]})})})]})]}),i.jsxs("div",{className:"mb-12 md:mb-16",children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8",children:[i.jsx("span",{className:"text-2xl md:text-3xl",children:"🌍"}),i.jsx("h3",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-teal-500 to-cyan-500 bg-clip-text text-transparent",children:"Geography & Special Games"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-8 max-w-5xl mx-auto",children:[i.jsx(vt,{href:"/geo-guesser",children:i.jsx(re,{className:"cursor-pointer transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 hover:rotate-1 bg-gradient-to-br from-teal-50 to-cyan-100 border-2 border-teal-200 hover:border-teal-400 rounded-3xl overflow-hidden group",children:i.jsxs(ae,{className:"p-6 md:p-8 text-center",children:[i.jsx("div",{className:"bg-gradient-to-r from-teal-500 via-cyan-500 to-blue-500 text-white p-4 md:p-5 rounded-2xl w-fit mx-auto mb-4 md:mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:i.jsx(Vc,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx(he,{className:"text-xl md:text-2xl font-bold mb-3 text-gray-800",children:"Geo Guesser"}),i.jsx(Ue,{className:"text-gray-600 text-base md:text-lg",children:"🗺️ Guess world locations, US states & continents"})]})})}),i.jsx(vt,{href:"/audio-manager",children:i.jsx(re,{className:"cursor-pointer transition-all duration-300 hover:shadow-2xl transform hover:-translate-y-2 hover:rotate-1 bg-gradient-to-br from-pink-50 to-rose-100 border-2 border-pink-200 hover:border-pink-400 rounded-3xl overflow-hidden group",children:i.jsxs(ae,{className:"p-6 md:p-8 text-center",children:[i.jsx("div",{className:"bg-gradient-to-r from-pink-500 via-rose-500 to-red-500 text-white p-4 md:p-5 rounded-2xl w-fit mx-auto mb-4 md:mb-6 group-hover:scale-110 transition-transform duration-300 shadow-lg",children:i.jsx(Uh,{className:"h-8 w-8 md:h-10 md:w-10"})}),i.jsx(he,{className:"text-xl md:text-2xl font-bold mb-3 text-gray-800",children:"Audio Manager"}),i.jsx(Ue,{className:"text-gray-600 text-base md:text-lg",children:"🎵 Upload and manage your audio files"})]})})})]})]}),!n&&t.length>0&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-center gap-2 mb-8",children:[i.jsx("span",{className:"text-2xl md:text-3xl",children:"🧩"}),i.jsx("h3",{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-indigo-500 to-purple-500 bg-clip-text text-transparent",children:"Brain Teaser Categories"})]}),i.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:t.map(o=>{const a=s(o.name),l=e(o.id);return i.jsx(vt,{href:`/category/${o.id}`,children:i.jsxs(re,{className:"cursor-pointer transition-all duration-300 hover:shadow-xl transform hover:-translate-y-1 hover:scale-105 bg-gradient-to-br from-white to-gray-50 border-2 border-gray-200 hover:border-purple-300 rounded-2xl overflow-hidden group",children:[i.jsx(ye,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"bg-gradient-to-r from-purple-400 via-pink-400 to-indigo-400 text-white p-3 rounded-xl group-hover:scale-110 transition-transform duration-300 shadow-md",children:i.jsx(a,{className:"h-6 w-6 md:h-7 md:w-7"})}),i.jsxs("span",{className:"text-xs bg-gradient-to-r from-purple-100 to-pink-100 text-purple-700 px-3 py-1 rounded-full font-medium",children:[l.length," riddles"]})]})}),i.jsxs(ae,{children:[i.jsx(he,{className:"text-lg md:text-xl font-bold mb-2 text-gray-800",children:o.name}),i.jsx(Ue,{className:"text-sm md:text-base text-gray-600 mb-3",children:o.description}),i.jsxs("div",{className:"flex items-center text-purple-600 text-sm font-medium group-hover:text-purple-700 transition-colors",children:["Start Playing ",i.jsx(LI,{className:"h-4 w-4 ml-1 group-hover:translate-x-1 transition-transform"})]})]})]})},o.id)})})]})]})}),i.jsx("div",{className:"bg-gradient-to-br from-purple-100 via-pink-50 to-indigo-100 py-12 md:py-20",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsxs("div",{className:"max-w-4xl mx-auto mb-16 md:mb-20",children:[i.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[i.jsxs("div",{className:"flex items-center justify-center gap-3 mb-4",children:[i.jsx("span",{className:"text-3xl md:text-4xl",children:"📊"}),i.jsx("h2",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Your Progress"})]}),i.jsx("p",{className:"text-lg md:text-xl text-gray-700 font-medium",children:"🏆 Track your achievements and level up your brain power!"})]}),i.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-3xl shadow-2xl border-2 border-purple-200 p-6 md:p-8",children:i.jsx(rz,{stats:{score:0,solvedCount:0,avgTimeSeconds:0,...typeof r=="object"&&r!==null?r:{}},onStartNewGame:()=>{var o;return window.location.href=`/category/${((o=t[0])==null?void 0:o.id)||25}`},isLoading:!1})})]}),i.jsx("div",{className:"mb-12",children:i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsxs(re,{className:"bg-gradient-to-br from-orange-400 via-red-500 to-pink-500 text-white border-0 shadow-2xl rounded-3xl overflow-hidden relative",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-red-600/20 via-orange-500/20 to-yellow-500/20"}),i.jsxs(ae,{className:"p-8 md:p-12 relative",children:[i.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-8",children:[i.jsxs("div",{className:"flex-1 text-center md:text-left",children:[i.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-3 mb-4",children:[i.jsx("div",{className:"bg-white/20 p-3 rounded-full",children:i.jsx(ET,{className:"h-8 w-8"})}),i.jsx("span",{className:"text-sm md:text-base font-bold bg-white/20 px-4 py-2 rounded-full animate-pulse",children:"✨ NEW FEATURE! ✨"})]}),i.jsx("h3",{className:"text-4xl md:text-5xl font-extrabold mb-4",children:"Battle Arena"}),i.jsx("p",{className:"text-white/95 text-lg md:text-xl mb-8 leading-relaxed",children:"🔥 Challenge players worldwide in real-time brain battles and climb the leaderboards! Show everyone who's the ultimate brain teaser champion! 🎯"}),i.jsx(vt,{href:"/multiplayer",children:i.jsxs(ee,{variant:"secondary",size:"lg",className:"bg-white text-red-600 hover:bg-yellow-100 hover:text-red-700 px-8 py-4 text-lg font-bold rounded-full shadow-lg transform hover:scale-105 transition-all duration-200",children:[i.jsx(Xi,{className:"h-6 w-6 mr-3"}),"Start Epic Battle! 🚀"]})})]}),i.jsx("div",{className:"hidden md:block",children:i.jsx("div",{className:"text-9xl opacity-30 animate-bounce",children:"⚔️"})})]}),i.jsx("div",{className:"absolute top-4 right-4 text-2xl opacity-20 animate-bounce",children:"💥"}),i.jsx("div",{className:"absolute bottom-4 left-4 text-xl opacity-20 animate-bounce delay-500",children:"⚡"})]})]})})})]})})]})}const Mt=p.forwardRef(({className:t,type:e,...n},r)=>i.jsx("input",{type:e,className:Ce("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));Mt.displayName="Input";var V0="focusScope.autoFocusOnMount",F0="focusScope.autoFocusOnUnmount",BT={bubbles:!1,cancelable:!0},lz="FocusScope",Qy=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:o,...a}=t,[l,c]=p.useState(null),u=zt(s),d=zt(o),h=p.useRef(null),m=Je(e,v=>c(v)),g=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(j){if(g.paused||!l)return;const E=j.target;l.contains(E)?h.current=E:Co(h.current,{select:!0})},x=function(j){if(g.paused||!l)return;const E=j.relatedTarget;E!==null&&(l.contains(E)||Co(h.current,{select:!0}))},y=function(j){if(document.activeElement===document.body)for(const P of j)P.removedNodes.length>0&&Co(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",x);const w=new MutationObserver(y);return l&&w.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",x),w.disconnect()}}},[r,l,g.paused]),p.useEffect(()=>{if(l){zT.add(g);const v=document.activeElement;if(!l.contains(v)){const y=new CustomEvent(V0,BT);l.addEventListener(V0,u),l.dispatchEvent(y),y.defaultPrevented||(cz(mz(VR(l)),{select:!0}),document.activeElement===v&&Co(l))}return()=>{l.removeEventListener(V0,u),setTimeout(()=>{const y=new CustomEvent(F0,BT);l.addEventListener(F0,d),l.dispatchEvent(y),y.defaultPrevented||Co(v??document.body,{select:!0}),l.removeEventListener(F0,d),zT.remove(g)},0)}}},[l,u,d,g]);const _=p.useCallback(v=>{if(!n&&!r||g.paused)return;const x=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,y=document.activeElement;if(x&&y){const w=v.currentTarget,[j,E]=uz(w);j&&E?!v.shiftKey&&y===E?(v.preventDefault(),n&&Co(j,{select:!0})):v.shiftKey&&y===j&&(v.preventDefault(),n&&Co(E,{select:!0})):y===w&&v.preventDefault()}},[n,r,g.paused]);return i.jsx(De.div,{tabIndex:-1,...a,ref:m,onKeyDown:_})});Qy.displayName=lz;function cz(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(Co(r,{select:e}),document.activeElement!==n)return}function uz(t){const e=VR(t),n=$T(e,t),r=$T(e.reverse(),t);return[n,r]}function VR(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function $T(t,e){for(const n of t)if(!dz(n,{upTo:e}))return n}function dz(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function hz(t){return t instanceof HTMLInputElement&&"select"in t}function Co(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&hz(t)&&e&&t.select()}}var zT=fz();function fz(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=WT(t,e),t.unshift(e)},remove(e){var n;t=WT(t,e),(n=t[0])==null||n.resume()}}}function WT(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function mz(t){return t.filter(e=>e.tagName!=="A")}var U0=0;function y_(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??HT()),document.body.insertAdjacentElement("beforeend",t[1]??HT()),U0++,()=>{U0===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),U0--}},[])}function HT(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var ei=function(){return ei=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},ei.apply(this,arguments)};function FR(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function pz(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,o;r<s;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}var Ip="right-scroll-bar-position",Rp="width-before-scroll-bar",gz="with-scroll-bars-hidden",yz="--removed-body-scroll-bar-size";function B0(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function xz(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var vz=typeof window<"u"?p.useLayoutEffect:p.useEffect,qT=new WeakMap;function wz(t,e){var n=xz(null,function(r){return t.forEach(function(s){return B0(s,r)})});return vz(function(){var r=qT.get(n);if(r){var s=new Set(r),o=new Set(t),a=n.current;s.forEach(function(l){o.has(l)||B0(l,null)}),o.forEach(function(l){s.has(l)||B0(l,a)})}qT.set(n,t)},[t]),n}function bz(t){return t}function _z(t,e){e===void 0&&(e=bz);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var a=e(o,r);return n.push(a),function(){n=n.filter(function(l){return l!==a})}},assignSyncMedium:function(o){for(r=!0;n.length;){var a=n;n=[],a.forEach(o)}n={push:function(l){return o(l)},filter:function(){return n}}},assignMedium:function(o){r=!0;var a=[];if(n.length){var l=n;n=[],l.forEach(o),a=n}var c=function(){var d=a;a=[],d.forEach(o)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(d){a.push(d),u()},filter:function(d){return a=a.filter(d),n}}}};return s}function jz(t){t===void 0&&(t={});var e=_z(null);return e.options=ei({async:!0,ssr:!1},t),e}var UR=function(t){var e=t.sideCar,n=FR(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,ei({},n))};UR.isSideCarExport=!0;function Sz(t,e){return t.useMedium(e),UR}var BR=jz(),$0=function(){},Yy=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:$0,onWheelCapture:$0,onTouchMoveCapture:$0}),s=r[0],o=r[1],a=t.forwardProps,l=t.children,c=t.className,u=t.removeScrollBar,d=t.enabled,h=t.shards,m=t.sideCar,g=t.noIsolation,_=t.inert,v=t.allowPinchZoom,x=t.as,y=x===void 0?"div":x,w=t.gapMode,j=FR(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=m,P=wz([n,e]),U=ei(ei({},j),s);return p.createElement(p.Fragment,null,d&&p.createElement(E,{sideCar:BR,removeScrollBar:u,shards:h,noIsolation:g,inert:_,setCallbacks:o,allowPinchZoom:!!v,lockRef:n,gapMode:w}),a?p.cloneElement(p.Children.only(l),ei(ei({},U),{ref:P})):p.createElement(y,ei({},U,{className:c,ref:P}),l))});Yy.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Yy.classNames={fullWidth:Rp,zeroRight:Ip};var Nz=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Tz(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=Nz();return e&&t.setAttribute("nonce",e),t}function Cz(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function Ez(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var kz=function(){var t=0,e=null;return{add:function(n){t==0&&(e=Tz())&&(Cz(e,n),Ez(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},Az=function(){var t=kz();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},$R=function(){var t=Az(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},Pz={left:0,top:0,right:0,gap:0},z0=function(t){return parseInt(t||"",10)||0},Iz=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[z0(n),z0(r),z0(s)]},Rz=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Pz;var e=Iz(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},Mz=$R(),$c="data-scroll-locked",Dz=function(t,e,n,r){var s=t.left,o=t.top,a=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(gz,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat($c,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ip,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Rp,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Ip," .").concat(Ip,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Rp," .").concat(Rp,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat($c,`] {
    `).concat(yz,": ").concat(l,`px;
  }
`)},GT=function(){var t=parseInt(document.body.getAttribute($c)||"0",10);return isFinite(t)?t:0},Lz=function(){p.useEffect(function(){return document.body.setAttribute($c,(GT()+1).toString()),function(){var t=GT()-1;t<=0?document.body.removeAttribute($c):document.body.setAttribute($c,t.toString())}},[])},Oz=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;Lz();var o=p.useMemo(function(){return Rz(s)},[s]);return p.createElement(Mz,{styles:Dz(o,!e,s,n?"":"!important")})},Fw=!1;if(typeof window<"u")try{var Ym=Object.defineProperty({},"passive",{get:function(){return Fw=!0,!0}});window.addEventListener("test",Ym,Ym),window.removeEventListener("test",Ym,Ym)}catch{Fw=!1}var sc=Fw?{passive:!1}:!1,Vz=function(t){return t.tagName==="TEXTAREA"},zR=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!Vz(t)&&n[e]==="visible")},Fz=function(t){return zR(t,"overflowY")},Uz=function(t){return zR(t,"overflowX")},KT=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=WR(t,r);if(s){var o=HR(t,r),a=o[1],l=o[2];if(a>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Bz=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},$z=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},WR=function(t,e){return t==="v"?Fz(e):Uz(e)},HR=function(t,e){return t==="v"?Bz(e):$z(e)},zz=function(t,e){return t==="h"&&e==="rtl"?-1:1},Wz=function(t,e,n,r,s){var o=zz(t,window.getComputedStyle(e).direction),a=o*r,l=n.target,c=e.contains(l),u=!1,d=a>0,h=0,m=0;do{var g=HR(t,l),_=g[0],v=g[1],x=g[2],y=v-x-o*_;(_||y)&&WR(t,l)&&(h+=y,m+=_),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(d&&(Math.abs(h)<1||!s)||!d&&(Math.abs(m)<1||!s))&&(u=!0),u},Zm=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},QT=function(t){return[t.deltaX,t.deltaY]},YT=function(t){return t&&"current"in t?t.current:t},Hz=function(t,e){return t[0]===e[0]&&t[1]===e[1]},qz=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},Gz=0,ic=[];function Kz(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(Gz++)[0],o=p.useState($R)[0],a=p.useRef(t);p.useEffect(function(){a.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=pz([t.lockRef.current],(t.shards||[]).map(YT),!0).filter(Boolean);return v.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(v,x){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!a.current.allowPinchZoom;var y=Zm(v),w=n.current,j="deltaX"in v?v.deltaX:w[0]-y[0],E="deltaY"in v?v.deltaY:w[1]-y[1],P,U=v.target,T=Math.abs(j)>Math.abs(E)?"h":"v";if("touches"in v&&T==="h"&&U.type==="range")return!1;var S=KT(T,U);if(!S)return!0;if(S?P=T:(P=T==="v"?"h":"v",S=KT(T,U)),!S)return!1;if(!r.current&&"changedTouches"in v&&(j||E)&&(r.current=P),!P)return!0;var C=r.current||P;return Wz(C,x,v,C==="h"?j:E,!0)},[]),c=p.useCallback(function(v){var x=v;if(!(!ic.length||ic[ic.length-1]!==o)){var y="deltaY"in x?QT(x):Zm(x),w=e.current.filter(function(P){return P.name===x.type&&(P.target===x.target||x.target===P.shadowParent)&&Hz(P.delta,y)})[0];if(w&&w.should){x.cancelable&&x.preventDefault();return}if(!w){var j=(a.current.shards||[]).map(YT).filter(Boolean).filter(function(P){return P.contains(x.target)}),E=j.length>0?l(x,j[0]):!a.current.noIsolation;E&&x.cancelable&&x.preventDefault()}}},[]),u=p.useCallback(function(v,x,y,w){var j={name:v,delta:x,target:y,should:w,shadowParent:Qz(y)};e.current.push(j),setTimeout(function(){e.current=e.current.filter(function(E){return E!==j})},1)},[]),d=p.useCallback(function(v){n.current=Zm(v),r.current=void 0},[]),h=p.useCallback(function(v){u(v.type,QT(v),v.target,l(v,t.lockRef.current))},[]),m=p.useCallback(function(v){u(v.type,Zm(v),v.target,l(v,t.lockRef.current))},[]);p.useEffect(function(){return ic.push(o),t.setCallbacks({onScrollCapture:h,onWheelCapture:h,onTouchMoveCapture:m}),document.addEventListener("wheel",c,sc),document.addEventListener("touchmove",c,sc),document.addEventListener("touchstart",d,sc),function(){ic=ic.filter(function(v){return v!==o}),document.removeEventListener("wheel",c,sc),document.removeEventListener("touchmove",c,sc),document.removeEventListener("touchstart",d,sc)}},[]);var g=t.removeScrollBar,_=t.inert;return p.createElement(p.Fragment,null,_?p.createElement(o,{styles:qz(s)}):null,g?p.createElement(Oz,{gapMode:t.gapMode}):null)}function Qz(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const Yz=Sz(BR,Kz);var Zy=p.forwardRef(function(t,e){return p.createElement(Yy,ei({},t,{ref:e,sideCar:Yz}))});Zy.classNames=Yy.classNames;var Zz=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},oc=new WeakMap,Xm=new WeakMap,Jm={},W0=0,qR=function(t){return t&&(t.host||qR(t.parentNode))},Xz=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=qR(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},Jz=function(t,e,n,r){var s=Xz(e,Array.isArray(t)?t:[t]);Jm[n]||(Jm[n]=new WeakMap);var o=Jm[n],a=[],l=new Set,c=new Set(s),u=function(h){!h||l.has(h)||(l.add(h),u(h.parentNode))};s.forEach(u);var d=function(h){!h||c.has(h)||Array.prototype.forEach.call(h.children,function(m){if(l.has(m))d(m);else try{var g=m.getAttribute(r),_=g!==null&&g!=="false",v=(oc.get(m)||0)+1,x=(o.get(m)||0)+1;oc.set(m,v),o.set(m,x),a.push(m),v===1&&_&&Xm.set(m,!0),x===1&&m.setAttribute(n,"true"),_||m.setAttribute(r,"true")}catch(y){console.error("aria-hidden: cannot operate on ",m,y)}})};return d(e),l.clear(),W0++,function(){a.forEach(function(h){var m=oc.get(h)-1,g=o.get(h)-1;oc.set(h,m),o.set(h,g),m||(Xm.has(h)||h.removeAttribute(r),Xm.delete(h)),g||h.removeAttribute(n)}),W0--,W0||(oc=new WeakMap,oc=new WeakMap,Xm=new WeakMap,Jm={})}},x_=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=Zz(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),Jz(r,s,n,"aria-hidden")):function(){return null}},v_="Dialog",[GR,qae]=gr(v_),[e7,Fs]=GR(v_),KR=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:o,modal:a=!0}=t,l=p.useRef(null),c=p.useRef(null),[u=!1,d]=Zi({prop:r,defaultProp:s,onChange:o});return i.jsx(e7,{scope:e,triggerRef:l,contentRef:c,contentId:ii(),titleId:ii(),descriptionId:ii(),open:u,onOpenChange:d,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),modal:a,children:n})};KR.displayName=v_;var QR="DialogTrigger",t7=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fs(QR,n),o=Je(e,s.triggerRef);return i.jsx(De.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":__(s.open),...r,ref:o,onClick:we(t.onClick,s.onOpenToggle)})});t7.displayName=QR;var w_="DialogPortal",[n7,YR]=GR(w_,{forceMount:void 0}),ZR=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,o=Fs(w_,e);return i.jsx(n7,{scope:e,forceMount:n,children:p.Children.map(r,a=>i.jsx(yr,{present:n||o.open,children:i.jsx(Rf,{asChild:!0,container:s,children:a})}))})};ZR.displayName=w_;var Cg="DialogOverlay",XR=p.forwardRef((t,e)=>{const n=YR(Cg,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=Fs(Cg,t.__scopeDialog);return o.modal?i.jsx(yr,{present:r||o.open,children:i.jsx(s7,{...s,ref:e})}):null});XR.displayName=Cg;var r7=Cl("DialogOverlay.RemoveScroll"),s7=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fs(Cg,n);return i.jsx(Zy,{as:r7,allowPinchZoom:!0,shards:[s.contentRef],children:i.jsx(De.div,{"data-state":__(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),kl="DialogContent",JR=p.forwardRef((t,e)=>{const n=YR(kl,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,o=Fs(kl,t.__scopeDialog);return i.jsx(yr,{present:r||o.open,children:o.modal?i.jsx(i7,{...s,ref:e}):i.jsx(o7,{...s,ref:e})})});JR.displayName=kl;var i7=p.forwardRef((t,e)=>{const n=Fs(kl,t.__scopeDialog),r=p.useRef(null),s=Je(e,n.contentRef,r);return p.useEffect(()=>{const o=r.current;if(o)return x_(o)},[]),i.jsx(eM,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:we(t.onCloseAutoFocus,o=>{var a;o.preventDefault(),(a=n.triggerRef.current)==null||a.focus()}),onPointerDownOutside:we(t.onPointerDownOutside,o=>{const a=o.detail.originalEvent,l=a.button===0&&a.ctrlKey===!0;(a.button===2||l)&&o.preventDefault()}),onFocusOutside:we(t.onFocusOutside,o=>o.preventDefault())})}),o7=p.forwardRef((t,e)=>{const n=Fs(kl,t.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return i.jsx(eM,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var a,l;(a=t.onCloseAutoFocus)==null||a.call(t,o),o.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),o.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:o=>{var c,u;(c=t.onInteractOutside)==null||c.call(t,o),o.defaultPrevented||(r.current=!0,o.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const a=o.target;((u=n.triggerRef.current)==null?void 0:u.contains(a))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&s.current&&o.preventDefault()}})}),eM=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:o,...a}=t,l=Fs(kl,n),c=p.useRef(null),u=Je(e,c);return y_(),i.jsxs(i.Fragment,{children:[i.jsx(Qy,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:o,children:i.jsx(zu,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":__(l.open),...a,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),i.jsxs(i.Fragment,{children:[i.jsx(a7,{titleId:l.titleId}),i.jsx(c7,{contentRef:c,descriptionId:l.descriptionId})]})]})}),b_="DialogTitle",tM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fs(b_,n);return i.jsx(De.h2,{id:s.titleId,...r,ref:e})});tM.displayName=b_;var nM="DialogDescription",rM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fs(nM,n);return i.jsx(De.p,{id:s.descriptionId,...r,ref:e})});rM.displayName=nM;var sM="DialogClose",iM=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=Fs(sM,n);return i.jsx(De.button,{type:"button",...r,ref:e,onClick:we(t.onClick,()=>s.onOpenChange(!1))})});iM.displayName=sM;function __(t){return t?"open":"closed"}var oM="DialogTitleWarning",[Gae,aM]=V9(oM,{contentName:kl,titleName:b_,docsSlug:"dialog"}),a7=({titleId:t})=>{const e=aM(oM),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},l7="DialogDescriptionWarning",c7=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${aM(l7).contentName}}.`;return p.useEffect(()=>{var o;const s=(o=t.current)==null?void 0:o.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},lM=KR,cM=ZR,Xy=XR,Jy=JR,ex=tM,tx=rM,uM=iM;const u7=lM,d7=cM,dM=p.forwardRef(({className:t,...e},n)=>i.jsx(Xy,{className:Ce("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e,ref:n}));dM.displayName=Xy.displayName;const h7=Df("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),hM=p.forwardRef(({side:t="right",className:e,children:n,...r},s)=>i.jsxs(d7,{children:[i.jsx(dM,{}),i.jsxs(Jy,{ref:s,className:Ce(h7({side:t}),e),...r,children:[n,i.jsxs(uM,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[i.jsx(zy,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));hM.displayName=Jy.displayName;const fM=({className:t,...e})=>i.jsx("div",{className:Ce("flex flex-col space-y-2 text-center sm:text-left",t),...e});fM.displayName="SheetHeader";const mM=p.forwardRef(({className:t,...e},n)=>i.jsx(ex,{ref:n,className:Ce("text-lg font-semibold text-foreground",t),...e}));mM.displayName=ex.displayName;const f7=p.forwardRef(({className:t,...e},n)=>i.jsx(tx,{ref:n,className:Ce("text-sm text-muted-foreground",t),...e}));f7.displayName=tx.displayName;var j_="Avatar",[m7,Kae]=gr(j_),[p7,pM]=m7(j_),gM=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,o]=p.useState("idle");return i.jsx(p7,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:o,children:i.jsx(De.span,{...r,ref:e})})});gM.displayName=j_;var yM="AvatarImage",xM=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...o}=t,a=pM(yM,n),l=g7(r,o),c=zt(u=>{s(u),a.onImageLoadingStatusChange(u)});return xn(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?i.jsx(De.img,{...o,ref:e,src:r}):null});xM.displayName=yM;var vM="AvatarFallback",wM=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,o=pM(vM,n),[a,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),a&&o.imageLoadingStatus!=="loaded"?i.jsx(De.span,{...s,ref:e}):null});wM.displayName=vM;function ZT(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function g7(t,{referrerPolicy:e,crossOrigin:n}){const r=x7(),s=p.useRef(null),o=r?(s.current||(s.current=new window.Image),s.current):null,[a,l]=p.useState(()=>ZT(o,t));return xn(()=>{l(ZT(o,t))},[o,t]),xn(()=>{const c=h=>()=>{l(h)};if(!o)return;const u=c("loaded"),d=c("error");return o.addEventListener("load",u),o.addEventListener("error",d),e&&(o.referrerPolicy=e),typeof n=="string"&&(o.crossOrigin=n),()=>{o.removeEventListener("load",u),o.removeEventListener("error",d)}},[o,n,e]),a}function y7(){return()=>{}}function x7(){return p.useSyncExternalStore(y7,()=>!0,()=>!1)}var bM=gM,_M=xM,jM=wM;const Eg=p.forwardRef(({className:t,...e},n)=>i.jsx(bM,{ref:n,className:Ce("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Eg.displayName=bM.displayName;const S_=p.forwardRef(({className:t,...e},n)=>i.jsx(_M,{ref:n,className:Ce("aspect-square h-full w-full",t),...e}));S_.displayName=_M.displayName;const kg=p.forwardRef(({className:t,...e},n)=>i.jsx(jM,{ref:n,className:Ce("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));kg.displayName=jM.displayName;const XT={faceShape:"round",skinTone:"#FDBCB4",hairStyle:"medium",hairColor:"#8B4513",eyeStyle:"normal",eyeColor:"#4A5568",glasses:"none",hat:"none",backgroundColor:"#E2E8F0",expression:"happy"},v7=({config:t,size:e=40})=>{const{faceShape:n,skinTone:r,hairStyle:s,hairColor:o,eyeStyle:a,eyeColor:l,glasses:c,hat:u,backgroundColor:d,expression:h}=t;return i.jsx("div",{className:"rounded-full border-2 border-white shadow-sm",style:{width:e,height:e,backgroundColor:d,position:"relative",overflow:"hidden"},children:i.jsxs("svg",{width:e,height:e,viewBox:"0 0 120 120",children:[i.jsx("circle",{cx:"60",cy:"60",r:"60",fill:d}),n==="round"&&i.jsx("circle",{cx:"60",cy:"65",r:"25",fill:r}),n==="oval"&&i.jsx("ellipse",{cx:"60",cy:"65",rx:"20",ry:"28",fill:r}),n==="square"&&i.jsx("rect",{x:"35",y:"40",width:"50",height:"50",rx:"8",fill:r}),n==="heart"&&i.jsx("path",{d:"M35 55 Q35 40 50 40 Q60 40 60 50 Q60 40 70 40 Q85 40 85 55 Q85 70 60 85 Q35 70 35 55",fill:r}),s==="short"&&i.jsx("circle",{cx:"60",cy:"45",r:"22",fill:o}),s==="medium"&&i.jsx("ellipse",{cx:"60",cy:"40",rx:"26",ry:"24",fill:o}),s==="long"&&i.jsx("ellipse",{cx:"60",cy:"35",rx:"28",ry:"35",fill:o}),s==="curly"&&i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"45",cy:"35",r:"8",fill:o}),i.jsx("circle",{cx:"60",cy:"30",r:"10",fill:o}),i.jsx("circle",{cx:"75",cy:"35",r:"8",fill:o}),i.jsx("circle",{cx:"52",cy:"25",r:"6",fill:o}),i.jsx("circle",{cx:"68",cy:"25",r:"6",fill:o})]}),s==="ponytail"&&i.jsxs(i.Fragment,{children:[i.jsx("ellipse",{cx:"60",cy:"40",rx:"24",ry:"20",fill:o}),i.jsx("ellipse",{cx:"85",cy:"45",rx:"8",ry:"15",fill:o})]}),s==="buzz"&&i.jsx("circle",{cx:"60",cy:"45",r:"18",fill:o}),a==="normal"&&i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"52",cy:"58",r:"3",fill:"white"}),i.jsx("circle",{cx:"68",cy:"58",r:"3",fill:"white"}),i.jsx("circle",{cx:"52",cy:"58",r:"2",fill:l}),i.jsx("circle",{cx:"68",cy:"58",r:"2",fill:l})]}),a==="large"&&i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"52",cy:"58",r:"4",fill:"white"}),i.jsx("circle",{cx:"68",cy:"58",r:"4",fill:"white"}),i.jsx("circle",{cx:"52",cy:"58",r:"3",fill:l}),i.jsx("circle",{cx:"68",cy:"58",r:"3",fill:l})]}),a==="small"&&i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"52",cy:"58",r:"2",fill:"white"}),i.jsx("circle",{cx:"68",cy:"58",r:"2",fill:"white"}),i.jsx("circle",{cx:"52",cy:"58",r:"1.5",fill:l}),i.jsx("circle",{cx:"68",cy:"58",r:"1.5",fill:l})]}),a==="sleepy"&&i.jsxs(i.Fragment,{children:[i.jsx("ellipse",{cx:"52",cy:"58",rx:"3",ry:"1.5",fill:l}),i.jsx("ellipse",{cx:"68",cy:"58",rx:"3",ry:"1.5",fill:l})]}),a==="wink"&&i.jsxs(i.Fragment,{children:[i.jsx("line",{x1:"49",y1:"58",x2:"55",y2:"58",stroke:l,strokeWidth:"2"}),i.jsx("circle",{cx:"68",cy:"58",r:"3",fill:"white"}),i.jsx("circle",{cx:"68",cy:"58",r:"2",fill:l})]}),h==="happy"&&i.jsx("path",{d:"M50 75 Q60 82 70 75",stroke:r==="#FDBCB4"?"#D69E2E":"#4A5568",strokeWidth:"2",fill:"none"}),h==="neutral"&&i.jsx("line",{x1:"55",y1:"75",x2:"65",y2:"75",stroke:r==="#FDBCB4"?"#D69E2E":"#4A5568",strokeWidth:"2"}),h==="excited"&&i.jsx("ellipse",{cx:"60",cy:"75",rx:"8",ry:"4",fill:"#FF6B6B"}),h==="cool"&&i.jsx("path",{d:"M50 75 Q55 72 60 75 Q65 78 70 75",stroke:r==="#FDBCB4"?"#D69E2E":"#4A5568",strokeWidth:"2",fill:"none"}),h==="surprised"&&i.jsx("ellipse",{cx:"60",cy:"75",rx:"3",ry:"5",fill:"#FF6B6B"}),c==="regular"&&i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"52",cy:"58",r:"8",fill:"none",stroke:"#2D3748",strokeWidth:"2"}),i.jsx("circle",{cx:"68",cy:"58",r:"8",fill:"none",stroke:"#2D3748",strokeWidth:"2"}),i.jsx("line",{x1:"60",y1:"58",x2:"60",y2:"58",stroke:"#2D3748",strokeWidth:"2"})]}),c==="sunglasses"&&i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"52",cy:"58",r:"8",fill:"#2D3748"}),i.jsx("circle",{cx:"68",cy:"58",r:"8",fill:"#2D3748"}),i.jsx("line",{x1:"60",y1:"58",x2:"60",y2:"58",stroke:"#2D3748",strokeWidth:"2"})]}),c==="round"&&i.jsxs(i.Fragment,{children:[i.jsx("circle",{cx:"52",cy:"58",r:"6",fill:"none",stroke:"#2D3748",strokeWidth:"2"}),i.jsx("circle",{cx:"68",cy:"58",r:"6",fill:"none",stroke:"#2D3748",strokeWidth:"2"}),i.jsx("line",{x1:"58",y1:"58",x2:"62",y2:"58",stroke:"#2D3748",strokeWidth:"2"})]}),c==="cat-eye"&&i.jsxs(i.Fragment,{children:[i.jsx("path",{d:"M44 58 Q52 52 60 58 Q52 64 44 58",fill:"none",stroke:"#2D3748",strokeWidth:"2"}),i.jsx("path",{d:"M60 58 Q68 52 76 58 Q68 64 60 58",fill:"none",stroke:"#2D3748",strokeWidth:"2"})]}),u==="cap"&&i.jsxs(i.Fragment,{children:[i.jsx("ellipse",{cx:"60",cy:"35",rx:"25",ry:"15",fill:"#4299E1"}),i.jsx("ellipse",{cx:"45",cy:"40",rx:"15",ry:"8",fill:"#3182CE"})]}),u==="beanie"&&i.jsx("ellipse",{cx:"60",cy:"32",rx:"24",ry:"18",fill:"#805AD5"}),u==="fedora"&&i.jsxs(i.Fragment,{children:[i.jsx("ellipse",{cx:"60",cy:"35",rx:"28",ry:"12",fill:"#8B4513"}),i.jsx("ellipse",{cx:"60",cy:"30",rx:"20",ry:"15",fill:"#A0522D"})]}),u==="crown"&&i.jsxs(i.Fragment,{children:[i.jsx("rect",{x:"40",y:"25",width:"40",height:"15",fill:"#FFD700"}),i.jsx("polygon",{points:"40,25 45,15 50,25 55,15 60,25 65,15 70,25 75,15 80,25",fill:"#FFD700"})]})]})})};function zh({config:t,username:e,profileImageUrl:n,size:r=40,className:s=""}){let o;try{typeof t=="string"?o=JSON.parse(t):t?o=t:o=XT}catch(l){console.error("Failed to parse avatar config:",l),o=XT}const a=l=>l.substring(0,2).toUpperCase();return i.jsx("div",{className:s,children:n?i.jsxs(Eg,{style:{width:r,height:r},children:[i.jsx(S_,{src:n,alt:e}),i.jsx(kg,{className:"bg-gradient-to-br from-purple-500 to-pink-500 text-white",children:a(e)})]}):t?i.jsx(v7,{config:o,size:r}):i.jsx(Eg,{style:{width:r,height:r},children:i.jsx(kg,{className:"bg-gradient-to-br from-purple-500 to-pink-500 text-white",children:a(e)})})})}function w7({isOpen:t,onClose:e,userStats:n}){const[r,s]=p.useState(!1),{user:o}=Rn();p.useEffect(()=>{s(!0)},[]);const a=()=>i.jsx(u7,{open:t,onOpenChange:e,children:i.jsxs(hM,{side:"left",className:"w-[300px] sm:w-[400px]",children:[i.jsx(fM,{children:i.jsx(mM,{children:i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg w-10 h-10 flex items-center justify-center text-white",children:i.jsx("i",{className:"ri-game-fill text-xl"})}),i.jsx("h1",{className:"ml-2 text-2xl font-bold font-poppins text-dark",children:"Burble"})]})})}),i.jsx(l,{userStats:n,user:o})]})}),l=({userStats:c,user:u})=>i.jsxs(i.Fragment,{children:[i.jsx("nav",{className:"flex-1 mt-4",children:i.jsxs("ul",{className:"space-y-2",children:[i.jsx("li",{children:i.jsxs("a",{href:"/",className:"flex items-center p-3 rounded-lg bg-primary/90 text-white font-medium shadow-md hover:bg-primary transition duration-200",children:[i.jsx("i",{className:"ri-home-4-line mr-3 text-lg"}),i.jsx("span",{children:"Home"})]})}),i.jsx("li",{children:i.jsxs("a",{href:"/ev-special",className:"flex items-center p-3 rounded-lg hover:bg-light-gray dark:hover:bg-gray-700 text-success dark:text-green-400 font-medium transition duration-200",children:[i.jsx("i",{className:"ri-question-line mr-3 text-lg"}),i.jsx("span",{children:"Are You My Valentine?"})]})}),i.jsx("li",{children:i.jsxs("a",{href:"/submit-riddle",className:"flex items-center p-3 rounded-lg hover:bg-light-gray dark:hover:bg-gray-700 text-accent dark:text-pink-400 font-medium transition duration-200",children:[i.jsx("i",{className:"ri-add-circle-line mr-3 text-lg"}),i.jsx("span",{children:"Submit Riddle"})]})}),i.jsx("li",{className:"mt-4 border-t border-light-gray dark:border-gray-700 pt-4",children:i.jsxs("a",{href:"/profile",className:"flex items-center p-2",children:[i.jsx(zh,{config:u!=null&&u.avatarConfig?JSON.parse(u.avatarConfig):null,username:(u==null?void 0:u.username)||"Guest User",profileImageUrl:u==null?void 0:u.profileImageUrl,size:40}),i.jsxs("div",{className:"ml-3",children:[i.jsx("p",{className:"font-medium text-dark",children:u?u.username:"Guest User"}),i.jsxs("p",{className:"text-sm text-dark-light opacity-75",children:["Score: ",c.score," pts"]})]})]})})]})}),i.jsx("div",{className:"mt-auto"})]});return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"hidden lg:flex lg:w-64 flex-col bg-white border-r border-light-gray p-4 h-screen sticky top-0",children:[i.jsxs("div",{className:"flex items-center mb-8 mt-2",children:[i.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg w-10 h-10 flex items-center justify-center text-white",children:i.jsx("i",{className:"ri-game-fill text-xl"})}),i.jsx("h1",{className:"ml-2 text-2xl font-bold font-poppins text-dark",children:"Burble"})]}),i.jsx(l,{userStats:n,user:o})]}),r&&i.jsx(a,{})]})}function b7(){return i.jsx("nav",{className:"lg:hidden bg-white border-t border-light-gray py-2 sticky bottom-0 z-10",children:i.jsxs("div",{className:"flex justify-around",children:[i.jsx(vt,{href:"/",children:i.jsxs("div",{className:"flex flex-col items-center p-2 text-primary cursor-pointer",children:[i.jsx("i",{className:"ri-home-4-line text-xl"}),i.jsx("span",{className:"text-xs mt-1",children:"Home"})]})}),i.jsx(vt,{href:"/ev-special",children:i.jsxs("div",{className:"flex flex-col items-center p-2 text-success cursor-pointer",children:[i.jsx("i",{className:"ri-question-line text-xl"}),i.jsx("span",{className:"text-xs mt-1",children:"Valentine"})]})}),i.jsx(vt,{href:"/burble",children:i.jsxs("div",{className:"flex flex-col items-center p-2 text-purple-500 cursor-pointer",children:[i.jsx("i",{className:"ri-game-fill text-xl"}),i.jsx("span",{className:"text-xs mt-1",children:"Burble"})]})}),i.jsx(vt,{href:"/trivia",children:i.jsxs("div",{className:"flex flex-col items-center p-2 text-blue-500 cursor-pointer",children:[i.jsx("i",{className:"ri-brain-line text-xl"}),i.jsx("span",{className:"text-xs mt-1",children:"Trivia"})]})}),i.jsx(vt,{href:"/animal-trivia",children:i.jsxs("div",{className:"flex flex-col items-center p-2 text-green-500 cursor-pointer",children:[i.jsx("span",{className:"text-xl",children:"🐾"}),i.jsx("span",{className:"text-xs mt-1",children:"Animals"})]})}),i.jsx(vt,{href:"/submit-riddle",children:i.jsxs("div",{className:"flex flex-col items-center p-2 text-accent cursor-pointer",children:[i.jsx("i",{className:"ri-add-circle-line text-xl"}),i.jsx("span",{className:"text-xs mt-1",children:"Submit"})]})})]})})}const _7=Df("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Fe({className:t,variant:e,...n}){return i.jsx("div",{className:Ce(_7({variant:e}),t),...n})}function j7(){const{toast:t}=tn(),[e,n]=p.useState(!1),[r,s]=p.useState(""),[o,a]=p.useState([]),[l,c]=p.useState([]),[u,d]=p.useState(!1),[h,m]=p.useState(0),[g,_]=p.useState(""),[v,x]=p.useState("setup"),[y,w]=p.useState(null),[j,E]=p.useState(""),[P,U]=p.useState("medium"),[T,S]=p.useState("movies"),[C,k]=p.useState(0),[I,R]=p.useState([]),[A,G]=p.useState(!1),{data:ue={score:0,solvedCount:0,avgTimeSeconds:0}}=Et({queryKey:["/api/user/1/stats"]}),{data:B=[]}=Et({queryKey:["/api/riddles/with-categories"]}),q=B.filter(K=>{const Y=K.category.name.toLowerCase();return Y==="ev special"||Y==="are you my valentine?"||Y===T.toLowerCase()});p.useEffect(()=>{P==="easy"?k(5):P==="medium"?k(4):P==="hard"?k(3):P==="extreme"&&k(2)},[P]),p.useEffect(()=>{m(4)},[]);const O=()=>{if(q.length>0){const K=Math.floor(Math.random()*q.length),Y=q[K];let ie=Y.answer;const te={movies:[{answer:"Avatar",hints:["Blue-skinned natives defend their exotic environment from resource-hungry invaders","A paraplegic war veteran controls a synthetic body to interact with the indigenous population","A fusion of cutting-edge motion capture and photorealistic CGI pioneered new filming techniques","Features floating mountains and bioluminescent landscapes on an alien moon","The protagonist transfers his consciousness and eventually chooses to remain in his new form"]},{answer:"Titanic",hints:["A forbidden romance blooms aboard a vessel on its maiden voyage across the Atlantic","An elderly survivor recounts her experience of a catastrophic nautical disaster","Features an iconic scene on the bow with arms outstretched like flying","A priceless blue gemstone plays a central role in connecting past and present","Based on a real-life tragedy that occurred in April and shocked the world"]},{answer:"Star Wars",hints:["Features an ancient mystical energy that binds the universe together","A farm boy discovers his extraordinary lineage and confronts a masked antagonist","Includes a cantina filled with diverse alien species from across the cosmos","Combines elements of medieval chivalry with futuristic technology","Spans multiple generations of conflict between opposing ideological forces"]},{answer:"The Lion King",hints:["A young royal must reclaim his birthright after being manipulated by a treacherous relative","Features wise counsel from a baboon shaman and a meerkat-warthog duo","The protagonist experiences a transformative vision of his deceased father in the stars","Set in the savanna with themes of responsibility and the circle of life","Incorporates musical sequences about growing up carefree and preparing to lead"]},{answer:"Jurassic Park",hints:["Ancient creatures are reconstructed from preserved genetic material","A chaotic demonstration of a groundbreaking attraction goes terribly wrong","Features protagonists evading predators in a kitchen and control center","Life persistently finds a way to reproduce despite scientific controls","Warning against the hubris of manipulating nature for commercial gain"]}],"tv-shows":[{answer:"Friends",hints:["Six young adults navigate careers and relationships in Manhattan","A central hangout spot serves as a gathering place with purple walls","Features an on-again-off-again romance between paleontologist and fashion buyer","Includes a womanizing character known for asking 'How you doin'?'","Contains recurring jokes about an unusual pet duck and chicken"]},{answer:"Game of Thrones",hints:["Noble families vie for control of an iron seat of power","Features an ominous warning that a harsh season is approaching","Includes three flying reptilian creatures belonging to a silver-haired ruler","A massive protective barrier in the north conceals ancient threats","Based on A Song of Ice and Fire with numerous shocking character deaths"]},{answer:"Breaking Bad",hints:["A terminally ill educator turns to illicit activities to secure his family's future","Features distinctive blue-colored contraband with exceptional purity","Set in the desert southwest with frequent scenes in an RV laboratory","Chronicles a protagonist's transformation from meek to menacing","Includes a lawyer with colorful suits who later gets his own series"]},{answer:"Stranger Things",hints:["Children encounter mysterious phenomena in a small Indiana town","Features a girl with telekinetic abilities and a fondness for frozen waffles","Incorporates a shadowy government laboratory conducting secret experiments","Includes an alternate dimension described as the reverse of our reality","Blends supernatural elements with nostalgic references to 80s pop culture"]},{answer:"The Office",hints:["Documents the daily absurdities of paper sales professionals","Features direct-to-camera interviews revealing characters' true thoughts","Centers on an oblivious regional manager with misguided leadership techniques","Includes a long-running romance that begins with desk items in gelatin","Set in the unremarkable corporate environment of northeastern Pennsylvania"]}],"famous-people":[{answer:"Albert Einstein",hints:["Developed relative perspectives on time and space that revolutionized physics","Known for distinctive wild hair and protruding tongue in famous photographs","Left Europe for America in the 1930s due to political persecution","Expressed that divinity doesn't play dice games with the cosmos","His theories enabled later development of nuclear technology"]},{answer:"Michael Jordan",hints:["Known for extraordinary aerial abilities on the hardwood","Won championships in two separate three-year sequences","Temporarily pursued a career in baseball between athletic peaks","Identifiable by his protruding tongue during moments of concentration","His footwear collection became a cultural phenomenon beyond sports"]},{answer:"Leonardo da Vinci",hints:["Created a famous enigmatic smile that continues to captivate viewers","Designed flying machines and anatomical studies centuries ahead of his time","Wrote his notes in mirror-image handwriting that reads right to left","Studied cadavers to improve understanding of human musculature and structure","Master of sfumato technique creating softness between light and shadow"]},{answer:"Walt Disney",hints:["Built an empire starting with a cartoon mouse wearing red shorts","Pioneered synchronized sound in animated short films","Created an experimental prototype community of tomorrow in Florida","Revolutionized amusement attractions with narrative-driven experiences","His remains are rumored to be preserved through cryogenics (though untrue)"]},{answer:"Taylor Swift",hints:["Known for narrative lyrics chronicling personal relationships and experiences","Strategically re-recorded early work to reclaim artistic ownership","Shifts between musical styles while maintaining storytelling emphasis","Incorporates hidden messages and Easter eggs throughout artistic output","Stadium performances feature elaborate staging and multiple costume changes"]}],animals:[{answer:"Elephant",hints:["Possesses extraordinary nasal dexterity for manipulating objects","Communicates through low-frequency rumbles that travel miles through ground","Matriarchal societies led by oldest female with decades of environmental knowledge","Can consume up to 300 pounds of vegetation daily","Known for remarkable memory, particularly remembering water sources during drought"]},{answer:"Lion",hints:["Males develop distinctive neck ornamentation upon maturity","Females perform majority of hunting while males defend territory","Cubs face significant hazards from new dominant males","Sleeps up to 20 hours daily, conserving energy between hunts","Territorial roars can be heard up to five miles away"]},{answer:"Penguin",hints:["Adapted for aquatic agility but awkward terrestrial movement","Males incubate eggs on feet while females hunt during brutal winter","Specialized feathers create insulating air layer against frigid waters","Forms massive colonies for breeding and protection","Unique glands filter salt from seawater for hydration"]},{answer:"Dolphin",hints:["Navigates using biosonar clicks that create acoustic imaging","Maintains alertness by resting one brain hemisphere at a time","Forms complex social bonds and uses unique whistle signatures as names","Possesses larger brain-to-body ratio than great apes","Capable of recognizing self in mirrors, indicating self-awareness"]},{answer:"Giraffe",hints:["Possesses specialized cardiovascular adaptations for vertical blood circulation","Requires only 30 minutes of sleep daily, often while standing","Each coat pattern is unique, like human fingerprints","Has approximately 21-inch prehensile tongue, typically bluish-black in color","Males establish dominance through ritualized neck swinging contests"]}],"household-items":[{answer:"Television",hints:["Evolved from cathode ray tubes to flat panels using light-emitting diodes","Receives encoded electromagnetic signals and converts them to audio-visual output","Early versions displayed moving images in monochrome before advancing to color","Average American homes contain multiple units, often as the living room focal point","Remote interface has expanded from basic channel/volume to complex menu navigation"]},{answer:"Refrigerator",hints:["Utilizes compressed gas to transfer heat from interior to exterior environment","Early versions required ice delivery before mechanical cooling became standard","Door shelves typically store condiments while lower drawers maintain humidity","Consumes substantial household electricity running continuously","Modern versions include water filtration and customizable temperature zones"]},{answer:"Microwave",hints:["Utilizes electromagnetic radiation to excite water molecules in food","Discovered accidentally when a chocolate bar melted near radar equipment","Features a protective mesh screen in the viewing door to block waves","Requires special containers as metal can cause dangerous arcing","Dramatically reduced cooking times compared to conventional methods"]},{answer:"Chair",hints:["Ranges from utilitarian designs to ornate status symbols throughout history","Ergonomic variations consider lumbar support and pressure distribution","Dining varieties typically stand 18 inches from floor to seat","Rocking versions originated in North America in the early 18th century","Executive models often feature height adjustment and swivel mechanisms"]},{answer:"Smartphone",hints:["Combines telecommunications with computing power exceeding early space missions","Contains multiple electromagnetic sensors for location and orientation","Features micro-cameras capable of capturing professional-quality imagery","Utilizes touch-sensitive glass that detects electrical properties of skin","Requires regular charging due to power demands of processor and display"]}],places:[{answer:"Paris",hints:["Divided by a winding river with its historic heart on an island","Underground tunnels lined with millions of human remains beneath the streets","Central landmark constructed for a world exhibition celebrates engineering","Houses the world's most visited portrait of a mysterious smiling woman","19th century urban planning created wide boulevards radiating from monuments"]},{answer:"New York",hints:["Built on multiple islands connected by numerous bridges and tunnels","Contains a massive urban greenspace designed in the 1850s","Copper-clad neoclassical figure greets maritime arrivals with upraised torch","Grid-pattern streets numbered rather than named above Houston Street","Financial district where traders gather at the southern tip of Manhattan"]},{answer:"Grand Canyon",hints:["Carved by flowing water over approximately six million years","Exposes nearly two billion years of geological history in stratified layers","Spans 277 miles with up to 18 miles between opposing rims","Indigenous peoples established dwellings in the sheltered caves","Colorado River continues to shape its depths while visitors observe from above"]},{answer:"Tokyo",hints:["Phoenix-like metropolis rebuilt multiple times after seismic destruction","Maintains ancient imperial grounds surrounded by modern skyscrapers","Complex rail network moves millions with legendary punctuality","World's largest metropolitan economy despite limited natural resources","Embraces contradictions: serene temples alongside neon entertainment districts"]},{answer:"Great Wall of China",hints:["Network of fortifications rather than single continuous structure","Built and rebuilt across multiple dynasties over two millennia","Designed to control immigration and trade as much as military invasion","Constructed using materials available locally, from stone to compacted earth","Watchtowers positioned for smoke signal communication across vast distances"]}],foods:[{answer:"Pizza",hints:["Neapolitan creation featuring flatbread with savory toppings","Traditional varieties require wood-fired ovens exceeding 800°F","Regional variations include deep dish, thin crust, and folded styles","Hawaiian controversial variant introduced pineapple in the 1960s","Global variations incorporate local ingredients from tandoori chicken to eel"]},{answer:"Sushi",hints:["Originated as preservation method for fish fermented in seasoned rice","Modern form emphasizes vinegared rice with fresh, uncooked ingredients","Master practitioners train for years, beginning with rice preparation alone","Wasabi root traditionally grated against sharkskin for proper texture","Omakase dining experience leaves selection entirely to the chef's discretion"]},{answer:"Hamburger",hints:["Disputed origin between multiple American locations in late 19th century","Popularized through early 20th century diners and drive-ins","Global chains standardized production with assembly-line techniques","Patty preparation ranges from smashed thin to thick and loosely packed","Variations include regional specialties like green chile or butter-filled Juicy Lucy"]},{answer:"Chocolate",hints:["Seeds of tropical tree fermented, dried, roasted, and ground for consumption","Mesoamerican civilizations consumed it as spiced, bitter beverage","Europeans added sugar and milk solids after 16th century introduction","Contains over 600 flavor compounds - more than almost any other food","Percentage indicates proportion of cacao mass to other ingredients"]},{answer:"Ice Cream",hints:["Requires constant agitation during freezing to incorporate air and prevent crystallization","Ancient precursors included snow mixed with honey and fruit in royal courts","Commercial production revolutionized by continuous freezer invented in 1843","American parlors became social centers during Prohibition","Stabilizers like guar gum improve texture and extend shelf life"]}],sports:[{answer:"Basketball",hints:["Originally played with peach baskets requiring manual retrieval after scoring","Developed by Canadian physical education instructor for winter indoor activity","Professional leagues initially banned dunking the object into the target","Strategic violations of rules provide advantage in certain situations","Evolved from set plays to increasingly position-less style emphasizing spacing"]},{answer:"Soccer",hints:["Originated from various ball games played with feet across ancient civilizations","Standardized rules established at English university in 1863","Positions include sweepers, strikers, and defensive midfielders","Global tournament held quadrennially since 1930 with one interruption","Only one position may legally use hands within the field of play"]},{answer:"Tennis",hints:["Evolved from royal indoor game played with hands instead of implements","Scoring system derives from medieval clock face divisions","Surface varieties dramatically affect speed and ball behavior","Technique transition from wooden equipment to modern materials","Baseline power game largely replaced serve-and-volley strategy in modern era"]},{answer:"Swimming",hints:["Competitive forms include butterfly technique developed in the 1930s","Event distances range from explosive sprints to marathon open water","Hydrodynamic principles apply to body position and minimal resistance","Training often exceeds 10,000 meters daily at elite levels","Specialized indoor facilities maintain precise chemical balance and temperature"]},{answer:"Golf",hints:["Scottish origin with earliest documented mention in 15th century","Strategic layout includes hazards of sand and water to challenge players","Equipment evolution from hickory shafts to precisely engineered materials","Par scoring system indicates expected strokes needed per hole","Etiquette traditions include dress codes and maintaining course conditions"]}]};let le;const _e=(Ze=>{switch(Ze.toLowerCase()){case"movies":return te.movies;case"tv-shows":return te["tv-shows"];case"famous-people":return te["famous-people"];case"animals":return te.animals;case"household-items":return te["household-items"];case"places":return te.places;case"foods":return te.foods;case"sports":return te.sports;default:return[]}})(T);if(_e.length>0){const Ze=Math.floor(Math.random()*_e.length);le=_e[Ze],ie=le.answer}else{const Ze=[{answer:"Elephant",hints:["This has a distinctive feature extending from its face","This is known for exceptional recall abilities","This is the largest land mammal","This creates complex social structures with family bonds","This consumes massive quantities of vegetation daily"]},{answer:"Pizza",hints:["This originated in Mediterranean cuisine","This serves as a base for various added components","This requires high-temperature heating methods","This varies regionally with distinctive local styles","This combines baked dough with savory toppings"]},{answer:"Computer",hints:["This processes information through programmatic instructions","This contains multiple electronic components working in concert","This has evolved from room-sized to pocket-sized","This interfaces with users through input and output systems","This enables communication, calculation, and content creation"]}],xt=Math.floor(Math.random()*Ze.length);le=Ze[xt],ie=le.answer}const Pe={...Y,answer:ie};w(Pe),E(ie);const de=le.hints.filter(Ze=>{if(!Ze)return!1;const xt=Ze.toLowerCase(),Bt=ie.toLowerCase();return!(xt.includes(Bt)||Bt.split(" ").some(vn=>vn.length<=3||["the","and","but","for","not","with","this","that","has","was","is"].includes(vn.toLowerCase())?!1:xt.includes(vn)))}),Ve=(()=>{switch(T){case"movies":return["This tells a specific story","This evokes certain emotions","This was released in theaters","This has a specific runtime","This features actors and actresses"];case"tv-shows":return["This has multiple episodes","This tells an ongoing story","This has a specific number of seasons","This features recurring characters","This was broadcast on a network or streaming service"];case"famous-people":return["This person has a specific profession","This person is well-known for their work","This person has specific achievements","This person has influenced their field","This person has a unique talent or skill"];case"animals":return["This lives in specific habitats","This has distinctive physical traits","This eats a particular diet","This has evolved specific adaptations","This interacts with its environment in unique ways"];case"household-items":return["This serves a specific function","This has a distinctive design","This is used regularly in homes","This makes certain tasks easier","This can be found in specific rooms"];case"places":return["This has a specific geography","This has a particular climate","This has distinct cultural elements","This is known for certain features","This has historical significance"];case"foods":return["This has specific ingredients","This has a distinctive flavor","This is prepared in a particular way","This originated in a specific region","This is eaten in certain contexts"];case"sports":return["This has specific rules","This requires particular skills","This is played on a designated field or court","This involves specific equipment","This has professional leagues"];default:return["This has distinctive characteristics","This has specific properties","This has notable features","This has a particular significance","This has recognizable traits"]}})(),bt=de.length>=C?de.slice(0,C):[...de,...Ve.slice(0,C-de.length)];R(bt.slice(0,C)),x("playing")}else t({title:"No riddles available",description:"There are no Valentine riddles available. Try again later.",variant:"destructive"})},F=K=>{const Y=K.toLowerCase().trim().replace(/[,.?!'"]/g,""),ie=j.toLowerCase().trim();if(Y.includes(ie)){const le=Y.indexOf(ie),xe=le===0,_e=le+ie.length===Y.length,Pe=le>0&&Y[le-1]===" ",de=le+ie.length<Y.length&&Y[le+ie.length]===" ";if(xe||_e||Pe&&de)return["is it","could it be","is this","is the answer","might it be","is that","would it be","are we thinking of","is the character","is the movie","is the object","is the person"].some(Ve=>Y.includes(Ve))}const te=[/^is it (\w+)[\s\W]*$/i,/^is the answer (\w+)[\s\W]*$/i,/^could it be (\w+)[\s\W]*$/i,/^is this (\w+)[\s\W]*$/i,/^are we thinking of (\w+)[\s\W]*$/i,/^is the object (\w+)[\s\W]*$/i,/^is the person (\w+)[\s\W]*$/i,/^is the character (\w+)[\s\W]*$/i,/^is the movie (\w+)[\s\W]*$/i,/^would it be (\w+)[\s\W]*$/i,/^am i correct in saying it'?s (\w+)[\s\W]*$/i,/^is it called (\w+)[\s\W]*$/i,/^is the title (\w+)[\s\W]*$/i,/^is the name (\w+)[\s\W]*$/i,/^are you thinking of (\w+)[\s\W]*$/i];for(const le of te){const xe=K.match(le);if(xe&&xe[1]){const _e=xe[1].toLowerCase().trim();return _e===ie||ie.includes(_e)||_e.includes(ie)}}if(ie.includes(" ")){const le=ie.split(" ");if(le.length>1){let xe=0;for(const _e of le)Y.includes(_e)&&xe++;if(xe>=Math.ceil(le.length*.7))return["is it","could it be","is this","is the answer","would it be","is that","might it be"].some(Pe=>Y.includes(Pe))}}return!1},D=async()=>{try{m(ie=>ie-1),G(!0);const K=await fetch("/api/ai/hint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({riddle:`I need a simple, clear hint about "${j}" that middle school students (grades 5-8) can easily understand. The hint should be helpful and use basic language that kids know. Don't use any complicated words or confusing descriptions. The hint should be fun and give them a real clue, but without giving away the exact answer. Keep it to 1-2 simple sentences.`,isQuestion:!1})});if(!K.ok)throw new Error("Failed to get AI hint");const Y=await K.json();R(ie=>[...ie,`💡 UNIQUE AI HINT: ${Y.hint}`]),h<=1?setTimeout(()=>{t({title:"Game Over",description:"You're out of questions! The answer was: "+j,variant:"destructive"}),x("complete")},1500):t({title:"Unique AI Hint Revealed",description:`A special hint with new perspective has been provided. ${h-1} questions remaining.`,variant:"default"})}catch(K){console.error("Error getting AI hint:",K),t({title:"Error",description:"We had trouble getting a hint. Please try again.",variant:"destructive"})}finally{G(!1)}},L=async K=>{if(K.preventDefault(),!!r.trim()){if(a(Y=>[...Y,r]),s(""),m(Y=>Y-1),F(r)){c(Y=>[...Y,"Yes, that's correct!"]),setTimeout(()=>{t({title:"Correct!",description:"You guessed correctly with your question!",variant:"default"}),x("complete")},1500);return}d(!0);try{const Y=await fetch("/api/ai/hint",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({riddle:`${r} (The answer is: ${j})`,isQuestion:!0})});if(!Y.ok)throw new Error("Failed to get AI answer");const ie=await Y.json(),te=ie.hint.toLowerCase();["correct","that's right","you got it","you've guessed","that is the answer"].some(xe=>te.includes(xe))?(c(xe=>[...xe,ie.hint]),setTimeout(()=>{t({title:"Correct!",description:"You've correctly guessed the answer!",variant:"default"}),x("complete")},1500)):c(xe=>[...xe,ie.hint])}catch(Y){console.error("Error getting AI answer:",Y),t({title:"Error",description:"We had trouble getting an answer. Please try again.",variant:"destructive"});const ie=["I can't provide a definitive answer to that.","That question is difficult to answer with just yes or no.","I'd need more context to answer that properly.","Let's try a different approach to your question.","Could you rephrase your question to be more specific?"],te=Math.floor(Math.random()*ie.length);c(le=>[...le,ie[te]])}finally{d(!1)}}},X=K=>{K.preventDefault(),g.trim()&&(g.toLowerCase()===j.toLowerCase()?(t({title:"Correct!",description:"You've made the correct guess!",variant:"default"}),x("complete")):(t({title:"Try Again!",description:`Your guess "${g}" is not correct. You still have ${h-1} guesses left.`,variant:"default"}),m(Y=>Y-1),h<=1&&(t({title:"Game Over",description:`You ran out of guesses. The answer was "${j}".`,variant:"destructive"}),x("complete"))))},$=()=>{a([]),c([]),m(4),_(""),s(""),x("setup"),w(null),E(""),R([]),d(!1)};return i.jsxs("div",{className:"flex flex-col lg:flex-row min-h-screen bg-light",children:[i.jsx(w7,{userStats:{score:0,solvedCount:0,avgTimeSeconds:0,...typeof ue=="object"&&ue!==null?ue:{}},isOpen:e,onClose:()=>n(!1)}),i.jsxs("div",{className:"flex-1 flex flex-col",children:[i.jsx("header",{className:"lg:hidden bg-white border-b border-light-gray p-4 sticky top-0 z-10",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"bg-success rounded-lg w-8 h-8 flex items-center justify-center text-white",children:i.jsx("i",{className:"ri-question-line text-lg"})}),i.jsx("h1",{className:"ml-2 text-xl font-bold font-poppins text-dark",children:"Are You My Valentine?"})]}),i.jsx("button",{className:"text-dark-light focus:outline-none",onClick:()=>n(!0),children:i.jsx("i",{className:"ri-menu-line text-2xl"})})]})}),i.jsxs("main",{className:"flex-1 p-4 md:p-6 lg:p-8",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h1",{className:"text-2xl md:text-3xl font-bold font-poppins text-dark",children:"Are You My Valentine?"}),i.jsx("p",{className:"text-dark-light mt-1",children:"Guess the hidden subject with yes/no questions"})]}),i.jsxs(re,{className:"mb-6",children:[i.jsx(ye,{children:i.jsx(he,{children:"Rules"})}),i.jsx(ae,{children:i.jsxs("ul",{className:"list-disc pl-5 space-y-2",children:[i.jsx("li",{children:"You have 1 more guess than total amount of players on a team (currently set to 4 guesses for more gameplay time)"}),i.jsx("li",{children:"Questions and guesses count as the same thing"}),i.jsxs("li",{children:[i.jsx("span",{className:"font-semibold",children:"Players start with hints:"})," You'll receive all hints corresponding to your selected difficulty level before starting"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-semibold",children:"4 difficulties:"})," Easy (5 hints), Medium (4 hints), Hard (3 hints), Extreme (2 hints)"]}),i.jsx("li",{children:"Categories include: movies, tv-shows, famous-people, animals, household-items, places, foods, sports"}),i.jsx("li",{children:"Yes or no answer can be asked only"}),i.jsxs("li",{children:[i.jsx("span",{className:"font-bold bg-red-100 text-red-800 px-2 py-1 rounded-md border border-red-300",children:"HINTS MUST NEVER GIVE AWAY WHAT THE PERSON/OBJECT IS"})," - they should only describe characteristics or qualities indirectly"]}),i.jsxs("li",{children:[i.jsx("span",{className:"font-bold text-red-500 uppercase",children:"Cannot give title, actor names, or character names"})," if it's a movie or TV show! You can describe them but be careful about giving away too much information."]})]})})]}),v==="setup"&&i.jsxs(re,{className:"mb-6",children:[i.jsx(ye,{children:i.jsx(he,{children:"Start a New Game"})}),i.jsx(ae,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Difficulty"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(Fe,{className:`cursor-pointer px-4 py-2 text-sm font-semibold border-2 ${P==="easy"?"bg-green-600 text-white border-green-800 shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-800 border-gray-300"}`,onClick:()=>U("easy"),children:"Easy (5 hints)"}),i.jsx(Fe,{className:`cursor-pointer px-4 py-2 text-sm font-semibold border-2 ${P==="medium"?"bg-blue-600 text-white border-blue-800 shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-800 border-gray-300"}`,onClick:()=>U("medium"),children:"Medium (4 hints)"}),i.jsx(Fe,{className:`cursor-pointer px-4 py-2 text-sm font-semibold border-2 ${P==="hard"?"bg-amber-600 text-white border-amber-800 shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-800 border-gray-300"}`,onClick:()=>U("hard"),children:"Hard (3 hints)"}),i.jsx(Fe,{className:`cursor-pointer px-4 py-2 text-sm font-semibold border-2 ${P==="extreme"?"bg-red-600 text-white border-red-800 shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-800 border-gray-300"}`,onClick:()=>U("extreme"),children:"Extreme (2 hints)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-1",children:"Category"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.jsx(Fe,{className:`cursor-pointer px-4 py-2 text-sm font-semibold border-2 ${T==="movies"?"bg-purple-600 text-white border-purple-800 shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-800 border-gray-300"}`,onClick:()=>S("movies"),children:"Movies"}),i.jsx(Fe,{className:`cursor-pointer px-4 py-2 text-sm font-semibold border-2 ${T==="tv-shows"?"bg-purple-600 text-white border-purple-800 shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-800 border-gray-300"}`,onClick:()=>S("tv-shows"),children:"TV Shows"}),i.jsx(Fe,{className:`cursor-pointer px-4 py-2 text-sm font-semibold border-2 ${T==="famous-people"?"bg-purple-600 text-white border-purple-800 shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-800 border-gray-300"}`,onClick:()=>S("famous-people"),children:"Famous People"}),i.jsx(Fe,{className:`cursor-pointer px-4 py-2 text-sm font-semibold border-2 ${T==="animals"?"bg-purple-600 text-white border-purple-800 shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-800 border-gray-300"}`,onClick:()=>S("animals"),children:"Animals"}),i.jsx(Fe,{className:`cursor-pointer px-4 py-2 text-sm font-semibold border-2 ${T==="household-items"?"bg-purple-600 text-white border-purple-800 shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-800 border-gray-300"}`,onClick:()=>S("household-items"),children:"Household Items"}),i.jsx(Fe,{className:`cursor-pointer px-4 py-2 text-sm font-semibold border-2 ${T==="places"?"bg-purple-600 text-white border-purple-800 shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-800 border-gray-300"}`,onClick:()=>S("places"),children:"Places"}),i.jsx(Fe,{className:`cursor-pointer px-4 py-2 text-sm font-semibold border-2 ${T==="foods"?"bg-purple-600 text-white border-purple-800 shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-800 border-gray-300"}`,onClick:()=>S("foods"),children:"Foods"}),i.jsx(Fe,{className:`cursor-pointer px-4 py-2 text-sm font-semibold border-2 ${T==="sports"?"bg-purple-600 text-white border-purple-800 shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-800 border-gray-300"}`,onClick:()=>S("sports"),children:"Sports"})]})]})]})}),i.jsx(Of,{children:i.jsx(ee,{onClick:O,className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-6 rounded-lg shadow-md text-lg w-full",children:"Start Game"})})]}),v==="playing"&&i.jsxs("div",{className:"space-y-6",children:[i.jsx(re,{children:i.jsxs(ae,{className:"pt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{className:"bg-purple-100 px-3 py-2 rounded-md border border-purple-300",children:[i.jsx("span",{className:"font-bold text-purple-800",children:"Category:"})," ",i.jsx("span",{className:"text-purple-700 font-medium uppercase",children:T})]}),i.jsxs("div",{className:"bg-blue-100 px-3 py-2 rounded-md border border-blue-300",children:[i.jsx("span",{className:"font-bold text-blue-800",children:"Difficulty:"})," ",i.jsx("span",{className:"text-blue-700 font-medium uppercase",children:P})]}),i.jsxs("div",{className:"bg-amber-100 px-3 py-2 rounded-md border border-amber-300",children:[i.jsx("span",{className:"font-bold text-amber-800",children:"Guesses Left:"})," ",i.jsx("span",{className:"text-amber-700 font-medium",children:h})]})]}),(T==="movies"||T==="tv-shows")&&i.jsxs("div",{className:"bg-red-50 border-2 border-red-400 rounded-lg p-4 mb-4 text-base",children:[i.jsxs("div",{className:"flex items-center mb-2",children:[i.jsx("i",{className:"ri-error-warning-fill text-xl text-red-500 mr-2"}),i.jsx("p",{className:"font-bold text-red-700 uppercase",children:"Critical Rules:"})]}),i.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-red-700",children:[i.jsx("li",{className:"font-medium",children:"DO NOT mention the title of the movie/show"}),i.jsx("li",{className:"font-medium",children:"DO NOT mention actor names"}),i.jsx("li",{className:"font-medium",children:"DO NOT mention character names"})]}),i.jsx("p",{className:"mt-2 font-medium text-red-800",children:"Violation of these rules may spoil the game for everyone!"})]}),i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-3",children:[i.jsxs("h3",{className:"font-bold text-lg bg-indigo-100 px-3 py-1 rounded-md border border-indigo-300 text-indigo-800",children:["Hints Revealed: ",I.length,"/",C]}),i.jsxs("div",{className:"text-sm font-bold text-red-600 bg-red-100 px-4 py-2 rounded-md border-2 border-red-300 shadow-md flex items-center",children:[i.jsx("i",{className:"ri-error-warning-fill text-red-700 mr-2 text-xl"}),"NEVER REVEAL WHO/WHAT IS BEING GUESSED IN HINTS"]})]}),i.jsx("div",{className:"bg-blue-100 border-2 border-blue-300 rounded-lg p-4 shadow-sm",children:I.length===0?i.jsx("p",{className:"text-blue-700 font-medium italic",children:"No hints revealed yet. Click the button below to reveal your first hint."}):i.jsx("ul",{className:"list-disc pl-5 space-y-2",children:I.map((K,Y)=>i.jsx("li",{className:"text-blue-800 font-medium text-base",children:K},Y))})}),i.jsxs("div",{className:"mt-3",children:[i.jsxs("div",{className:"flex items-center justify-between bg-indigo-50 border border-indigo-200 p-2 rounded-md shadow-sm",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("i",{className:"ri-information-line text-blue-600 mr-2 text-lg"}),i.jsxs("span",{className:"text-sm font-medium text-blue-800",children:["All ",C," hints for your selected difficulty level are shown above."]})]}),i.jsx(ee,{onClick:D,variant:"outline",size:"sm",className:"bg-blue-100 hover:bg-blue-200 text-blue-700 border border-blue-300",disabled:A||v!=="playing"||h<=1,title:h<=1?"No questions remaining":"Get an additional hint (uses 1 question)",children:A?i.jsxs(i.Fragment,{children:[i.jsx("span",{className:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-solid border-current border-r-transparent mr-2"}),"Loading..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-lightbulb-line mr-1"}),"Get AI Hint (-1 Question)"]})})]}),I.length>0&&i.jsxs("div",{className:"text-sm font-bold text-red-700 bg-red-50 border-2 border-red-200 p-3 mt-2 rounded-md flex items-center",children:[i.jsx("i",{className:"ri-error-warning-fill text-red-600 mr-2 text-xl"}),i.jsxs("span",{children:[i.jsx("span",{className:"underline text-red-800",children:"IMPORTANT:"})," Hints should ",i.jsx("span",{className:"underline",children:"NEVER reveal who or what"})," is being guessed.",i.jsx("span",{className:"block mt-1",children:"Good hints describe characteristics, qualities, or behaviors without naming the subject."}),(T==="movies"||T==="tv-shows")&&i.jsx("span",{className:"block mt-1",children:"For movies/shows, never mention titles, actors, or characters!"})]})]})]})]})]})}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsx(he,{children:"Questions and Answers"})}),i.jsx(ae,{children:o.length===0?i.jsx("p",{className:"text-gray-600 bg-gray-50 p-3 rounded-md border border-gray-200 italic",children:"No questions asked yet. Ask a yes/no question or make a guess."}):i.jsx("ul",{className:"space-y-4",children:o.map((K,Y)=>i.jsxs("li",{className:"pb-4 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-start mb-2",children:[i.jsxs("span",{className:"flex-shrink-0 bg-purple-100 text-purple-800 font-bold rounded-full w-7 h-7 flex items-center justify-center text-xs mr-2 border border-purple-300 shadow-sm",children:["Q",Y+1]}),i.jsx("span",{className:"text-base font-medium text-gray-800 pt-1",children:K})]}),Y<l.length?i.jsxs("div",{className:"flex items-start ml-9 mt-2",children:[i.jsx("span",{className:"flex-shrink-0 bg-blue-100 text-blue-800 font-bold rounded-full w-7 h-7 flex items-center justify-center text-xs mr-2 border border-blue-300 shadow-sm",children:"A"}),i.jsx("div",{className:"text-base text-gray-700 pt-1 bg-blue-50 p-2 rounded-md border border-blue-100 flex-grow",children:l[Y]})]}):i.jsx("div",{className:"flex items-center ml-9 mt-2",children:u?i.jsxs("div",{className:"flex items-center text-gray-500",children:[i.jsx("span",{className:"inline-block h-4 w-4 animate-spin rounded-full border-2 border-solid border-current border-r-transparent mr-2"}),i.jsx("span",{children:"Getting answer..."})]}):i.jsx("span",{className:"text-gray-500 italic",children:"No answer available"})})]},Y))})})]}),i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsx(he,{children:"Ask a Question"}),(T==="movies"||T==="tv-shows")&&i.jsxs("div",{className:"flex items-center mt-2 bg-red-50 border border-red-300 rounded p-2",children:[i.jsx("i",{className:"ri-error-warning-fill text-red-500 mr-2"}),i.jsx("p",{className:"text-sm font-medium text-red-700",children:"Remember: NO title, actor names, or character names in your questions!"})]})]}),i.jsx(ae,{children:i.jsxs("form",{onSubmit:L,className:"space-y-4",children:[i.jsx(Mt,{type:"text",placeholder:"Ask a yes/no question...",value:r,onChange:K=>s(K.target.value),disabled:h<=0}),i.jsx(ee,{type:"submit",disabled:!r.trim()||h<=0,className:"bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm",children:"Submit Question"})]})})]}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsx(he,{children:"Make a Guess"})}),i.jsxs(ae,{children:[i.jsxs("form",{onSubmit:X,className:"space-y-4",children:[i.jsx(Mt,{type:"text",placeholder:"Enter your guess...",value:g,onChange:K=>_(K.target.value),disabled:h<=0}),i.jsx(ee,{type:"submit",disabled:!g.trim()||h<=0,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-md shadow-sm",children:"Submit Guess"})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-300",children:i.jsxs(ee,{type:"button",variant:"outline",className:"w-full border-2 border-red-300 text-red-600 hover:bg-red-50 font-medium",onClick:()=>{window.confirm("Are you sure you want to see the answer? Game will end with no points awarded.")&&(x("complete"),_(""))},children:[i.jsx("i",{className:"ri-eye-line mr-1 text-lg"}),"Show Answer",i.jsx("span",{className:"ml-2 text-xs bg-red-100 text-red-700 px-2 py-1 rounded-full font-bold border border-red-200",children:"0 pts"})]})})]})]})]}),v==="complete"&&i.jsxs(re,{children:[i.jsx(ye,{className:g.toLowerCase()===j.toLowerCase()?"bg-green-50 border-b border-green-200":"bg-red-50 border-b border-red-200",children:i.jsx(he,{className:g.toLowerCase()===j.toLowerCase()?"text-green-700":"text-red-700",children:g.toLowerCase()===j.toLowerCase()?"Congratulations!":"Game Over"})}),i.jsx(ae,{children:i.jsxs("div",{className:"text-center py-6",children:[g.toLowerCase()===j.toLowerCase()?i.jsx("div",{className:"w-24 h-24 mx-auto bg-green-100 rounded-full flex items-center justify-center text-green-600 mb-4 border-4 border-green-300 shadow-md",children:i.jsx("i",{className:"ri-check-line text-5xl"})}):i.jsx("div",{className:"w-24 h-24 mx-auto bg-red-100 rounded-full flex items-center justify-center text-red-600 mb-4 border-4 border-red-300 shadow-md",children:i.jsx("i",{className:"ri-close-line text-5xl"})}),i.jsx("h3",{className:"text-2xl font-bold mb-3",children:g.toLowerCase()===j.toLowerCase()?"You guessed correctly!":h<=0?"You ran out of guesses.":"Answer revealed."}),i.jsx("p",{className:"mb-5 text-lg",children:"Answer revealed only in direct play! Return to Brain Teasers to unlock all puzzles."}),i.jsx(ee,{onClick:$,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-md shadow-sm text-lg",children:"Play Again"})]})})]})]}),i.jsx(b7,{})]})]})}var yt;(function(t){t.assertEqual=s=>s;function e(s){}t.assertIs=e;function n(s){throw new Error}t.assertNever=n,t.arrayToEnum=s=>{const o={};for(const a of s)o[a]=a;return o},t.getValidEnumValues=s=>{const o=t.objectKeys(s).filter(l=>typeof s[s[l]]!="number"),a={};for(const l of o)a[l]=s[l];return t.objectValues(a)},t.objectValues=s=>t.objectKeys(s).map(function(o){return s[o]}),t.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const o=[];for(const a in s)Object.prototype.hasOwnProperty.call(s,a)&&o.push(a);return o},t.find=(s,o)=>{for(const a of s)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,o=" | "){return s.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}t.joinValues=r,t.jsonStringifyReplacer=(s,o)=>typeof o=="bigint"?o.toString():o})(yt||(yt={}));var Uw;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})(Uw||(Uw={}));const Ae=yt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Mi=t=>{switch(typeof t){case"undefined":return Ae.undefined;case"string":return Ae.string;case"number":return isNaN(t)?Ae.nan:Ae.number;case"boolean":return Ae.boolean;case"function":return Ae.function;case"bigint":return Ae.bigint;case"symbol":return Ae.symbol;case"object":return Array.isArray(t)?Ae.array:t===null?Ae.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?Ae.promise:typeof Map<"u"&&t instanceof Map?Ae.map:typeof Set<"u"&&t instanceof Set?Ae.set:typeof Date<"u"&&t instanceof Date?Ae.date:Ae.object;default:return Ae.unknown}},me=yt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),S7=t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:");class Br extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){const n=e||function(o){return o.message},r={_errors:[]},s=o=>{for(const a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(s);else if(a.code==="invalid_return_type")s(a.returnTypeError);else if(a.code==="invalid_arguments")s(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let l=r,c=0;for(;c<a.path.length;){const u=a.path[c];c===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(a))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}};return s(this),r}static assert(e){if(!(e instanceof Br))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,yt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(e(s))):r.push(e(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Br.create=t=>new Br(t);const wu=(t,e)=>{let n;switch(t.code){case me.invalid_type:t.received===Ae.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case me.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,yt.jsonStringifyReplacer)}`;break;case me.unrecognized_keys:n=`Unrecognized key(s) in object: ${yt.joinValues(t.keys,", ")}`;break;case me.invalid_union:n="Invalid input";break;case me.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${yt.joinValues(t.options)}`;break;case me.invalid_enum_value:n=`Invalid enum value. Expected ${yt.joinValues(t.options)}, received '${t.received}'`;break;case me.invalid_arguments:n="Invalid function arguments";break;case me.invalid_return_type:n="Invalid function return type";break;case me.invalid_date:n="Invalid date";break;case me.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:yt.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case me.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case me.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case me.custom:n="Invalid input";break;case me.invalid_intersection_types:n="Intersection results could not be merged";break;case me.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case me.not_finite:n="Number must be finite";break;default:n=e.defaultError,yt.assertNever(t)}return{message:n}};let SM=wu;function N7(t){SM=t}function Ag(){return SM}const Pg=t=>{const{data:e,path:n,errorMaps:r,issueData:s}=t,o=[...n,...s.path||[]],a={...s,path:o};if(s.message!==void 0)return{...s,path:o,message:s.message};let l="";const c=r.filter(u=>!!u).slice().reverse();for(const u of c)l=u(a,{data:e,defaultError:l}).message;return{...s,path:o,message:l}},T7=[];function Te(t,e){const n=Ag(),r=Pg({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===wu?void 0:wu].filter(s=>!!s)});t.common.issues.push(r)}class rr{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){const r=[];for(const s of n){if(s.status==="aborted")return qe;s.status==="dirty"&&e.dirty(),r.push(s.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){const r=[];for(const s of n){const o=await s.key,a=await s.value;r.push({key:o,value:a})}return rr.mergeObjectSync(e,r)}static mergeObjectSync(e,n){const r={};for(const s of n){const{key:o,value:a}=s;if(o.status==="aborted"||a.status==="aborted")return qe;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||s.alwaysSet)&&(r[o.value]=a.value)}return{status:e.value,value:r}}}const qe=Object.freeze({status:"aborted"}),Nc=t=>({status:"dirty",value:t}),hr=t=>({status:"valid",value:t}),Bw=t=>t.status==="aborted",$w=t=>t.status==="dirty",Al=t=>t.status==="valid",Wh=t=>typeof Promise<"u"&&t instanceof Promise;function Ig(t,e,n,r){if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return e.get(t)}function NM(t,e,n,r,s){if(typeof e=="function"?t!==e||!s:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var Le;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e==null?void 0:e.message})(Le||(Le={}));var Vd,Fd;class yi{constructor(e,n,r,s){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const JT=(t,e)=>{if(Al(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Br(t.common.issues);return this._error=n,this._error}}};function nt(t){if(!t)return{};const{errorMap:e,invalid_type_error:n,required_error:r,description:s}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(a,l)=>{var c,u;const{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??r)!==null&&c!==void 0?c:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:l.defaultError}},description:s}}class ot{get description(){return this._def.description}_getType(e){return Mi(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Mi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new rr,ctx:{common:e.parent.common,data:e.data,parsedType:Mi(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const n=this._parse(e);if(Wh(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){const n=this._parse(e);return Promise.resolve(n)}parse(e,n){const r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Mi(e)},o=this._parseSync({data:e,path:s.path,parent:s});return JT(s,o)}"~validate"(e){var n,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Mi(e)};if(!this["~standard"].async)try{const o=this._parseSync({data:e,path:[],parent:s});return Al(o)?{value:o.value}:{issues:s.common.issues}}catch(o){!((r=(n=o==null?void 0:o.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:s}).then(o=>Al(o)?{value:o.value}:{issues:s.common.issues})}async parseAsync(e,n){const r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Mi(e)},s=this._parse({data:e,path:r.path,parent:r}),o=await(Wh(s)?s:Promise.resolve(s));return JT(r,o)}refine(e,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,o)=>{const a=e(s),l=()=>o.addIssue({code:me.custom,...r(s)});return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,s)=>e(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(e){return new Vs({schema:this,typeName:He.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return ai.create(this,this._def)}nullable(){return va.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Rs.create(this)}promise(){return _u.create(this,this._def)}or(e){return Kh.create([this,e],this._def)}and(e){return Qh.create(this,e,this._def)}transform(e){return new Vs({...nt(this._def),schema:this,typeName:He.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const n=typeof e=="function"?e:()=>e;return new ef({...nt(this._def),innerType:this,defaultValue:n,typeName:He.ZodDefault})}brand(){return new N_({typeName:He.ZodBranded,type:this,...nt(this._def)})}catch(e){const n=typeof e=="function"?e:()=>e;return new tf({...nt(this._def),innerType:this,catchValue:n,typeName:He.ZodCatch})}describe(e){const n=this.constructor;return new n({...this._def,description:e})}pipe(e){return Vf.create(this,e)}readonly(){return nf.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const C7=/^c[^\s-]{8,}$/i,E7=/^[0-9a-z]+$/,k7=/^[0-9A-HJKMNP-TV-Z]{26}$/i,A7=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,P7=/^[a-z0-9_-]{21}$/i,I7=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,R7=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,M7=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,D7="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let H0;const L7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,O7=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,V7=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,F7=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,U7=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,B7=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,TM="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",$7=new RegExp(`^${TM}$`);function CM(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}function z7(t){return new RegExp(`^${CM(t)}$`)}function EM(t){let e=`${TM}T${CM(t)}`;const n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}function W7(t,e){return!!((e==="v4"||!e)&&L7.test(t)||(e==="v6"||!e)&&V7.test(t))}function H7(t,e){if(!I7.test(t))return!1;try{const[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||e&&s.alg!==e)}catch{return!1}}function q7(t,e){return!!((e==="v4"||!e)&&O7.test(t)||(e==="v6"||!e)&&F7.test(t))}class Cs extends ot{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==Ae.string){const o=this._getOrReturnCtx(e);return Te(o,{code:me.invalid_type,expected:Ae.string,received:o.parsedType}),qe}const r=new rr;let s;for(const o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(s=this._getOrReturnCtx(e,s),Te(s,{code:me.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(s=this._getOrReturnCtx(e,s),Te(s,{code:me.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){const a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(s=this._getOrReturnCtx(e,s),a?Te(s,{code:me.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&Te(s,{code:me.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")M7.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"email",code:me.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")H0||(H0=new RegExp(D7,"u")),H0.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"emoji",code:me.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")A7.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"uuid",code:me.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")P7.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"nanoid",code:me.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")C7.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"cuid",code:me.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")E7.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"cuid2",code:me.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")k7.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"ulid",code:me.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),Te(s,{validation:"url",code:me.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"regex",code:me.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(s=this._getOrReturnCtx(e,s),Te(s,{code:me.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(s=this._getOrReturnCtx(e,s),Te(s,{code:me.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(s=this._getOrReturnCtx(e,s),Te(s,{code:me.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?EM(o).test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{code:me.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?$7.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{code:me.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?z7(o).test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{code:me.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?R7.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"duration",code:me.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?W7(e.data,o.version)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"ip",code:me.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?H7(e.data,o.alg)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"jwt",code:me.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?q7(e.data,o.version)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"cidr",code:me.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?U7.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"base64",code:me.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?B7.test(e.data)||(s=this._getOrReturnCtx(e,s),Te(s,{validation:"base64url",code:me.invalid_string,message:o.message}),r.dirty()):yt.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(s=>e.test(s),{validation:n,code:me.invalid_string,...Le.errToObj(r)})}_addCheck(e){return new Cs({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Le.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Le.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Le.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Le.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Le.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Le.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Le.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Le.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Le.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Le.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Le.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Le.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Le.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,offset:(n=e==null?void 0:e.offset)!==null&&n!==void 0?n:!1,local:(r=e==null?void 0:e.local)!==null&&r!==void 0?r:!1,...Le.errToObj(e==null?void 0:e.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof(e==null?void 0:e.precision)>"u"?null:e==null?void 0:e.precision,...Le.errToObj(e==null?void 0:e.message)})}duration(e){return this._addCheck({kind:"duration",...Le.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Le.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n==null?void 0:n.position,...Le.errToObj(n==null?void 0:n.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Le.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Le.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Le.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Le.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Le.errToObj(n)})}nonempty(e){return this.min(1,Le.errToObj(e))}trim(){return new Cs({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Cs({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Cs({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}Cs.create=t=>{var e;return new Cs({checks:[],typeName:He.ZodString,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...nt(t)})};function G7(t,e){const n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,s=n>r?n:r,o=parseInt(t.toFixed(s).replace(".","")),a=parseInt(e.toFixed(s).replace(".",""));return o%a/Math.pow(10,s)}class ga extends ot{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==Ae.number){const o=this._getOrReturnCtx(e);return Te(o,{code:me.invalid_type,expected:Ae.number,received:o.parsedType}),qe}let r;const s=new rr;for(const o of this._def.checks)o.kind==="int"?yt.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),Te(r,{code:me.invalid_type,expected:"integer",received:"float",message:o.message}),s.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:me.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:me.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),s.dirty()):o.kind==="multipleOf"?G7(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),Te(r,{code:me.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),Te(r,{code:me.not_finite,message:o.message}),s.dirty()):yt.assertNever(o);return{status:s.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Le.toString(n))}setLimit(e,n,r,s){return new ga({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Le.toString(s)}]})}_addCheck(e){return new ga({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Le.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Le.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Le.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Le.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Le.toString(e)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&yt.isInteger(e.value))}get isFinite(){let e=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}}ga.create=t=>new ga({checks:[],typeName:He.ZodNumber,coerce:(t==null?void 0:t.coerce)||!1,...nt(t)});class ya extends ot{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==Ae.bigint)return this._getInvalidInput(e);let r;const s=new rr;for(const o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:me.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:me.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),s.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),Te(r,{code:me.not_multiple_of,multipleOf:o.value,message:o.message}),s.dirty()):yt.assertNever(o);return{status:s.value,value:e.data}}_getInvalidInput(e){const n=this._getOrReturnCtx(e);return Te(n,{code:me.invalid_type,expected:Ae.bigint,received:n.parsedType}),qe}gte(e,n){return this.setLimit("min",e,!0,Le.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Le.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Le.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Le.toString(n))}setLimit(e,n,r,s){return new ya({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Le.toString(s)}]})}_addCheck(e){return new ya({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Le.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Le.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Le.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Le.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Le.toString(n)})}get minValue(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}}ya.create=t=>{var e;return new ya({checks:[],typeName:He.ZodBigInt,coerce:(e=t==null?void 0:t.coerce)!==null&&e!==void 0?e:!1,...nt(t)})};class Hh extends ot{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==Ae.boolean){const r=this._getOrReturnCtx(e);return Te(r,{code:me.invalid_type,expected:Ae.boolean,received:r.parsedType}),qe}return hr(e.data)}}Hh.create=t=>new Hh({typeName:He.ZodBoolean,coerce:(t==null?void 0:t.coerce)||!1,...nt(t)});class Pl extends ot{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==Ae.date){const o=this._getOrReturnCtx(e);return Te(o,{code:me.invalid_type,expected:Ae.date,received:o.parsedType}),qe}if(isNaN(e.data.getTime())){const o=this._getOrReturnCtx(e);return Te(o,{code:me.invalid_date}),qe}const r=new rr;let s;for(const o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(s=this._getOrReturnCtx(e,s),Te(s,{code:me.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(s=this._getOrReturnCtx(e,s),Te(s,{code:me.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):yt.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Pl({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Le.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Le.toString(n)})}get minDate(){let e=null;for(const n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}}Pl.create=t=>new Pl({checks:[],coerce:(t==null?void 0:t.coerce)||!1,typeName:He.ZodDate,...nt(t)});class Rg extends ot{_parse(e){if(this._getType(e)!==Ae.symbol){const r=this._getOrReturnCtx(e);return Te(r,{code:me.invalid_type,expected:Ae.symbol,received:r.parsedType}),qe}return hr(e.data)}}Rg.create=t=>new Rg({typeName:He.ZodSymbol,...nt(t)});class qh extends ot{_parse(e){if(this._getType(e)!==Ae.undefined){const r=this._getOrReturnCtx(e);return Te(r,{code:me.invalid_type,expected:Ae.undefined,received:r.parsedType}),qe}return hr(e.data)}}qh.create=t=>new qh({typeName:He.ZodUndefined,...nt(t)});class Gh extends ot{_parse(e){if(this._getType(e)!==Ae.null){const r=this._getOrReturnCtx(e);return Te(r,{code:me.invalid_type,expected:Ae.null,received:r.parsedType}),qe}return hr(e.data)}}Gh.create=t=>new Gh({typeName:He.ZodNull,...nt(t)});class bu extends ot{constructor(){super(...arguments),this._any=!0}_parse(e){return hr(e.data)}}bu.create=t=>new bu({typeName:He.ZodAny,...nt(t)});class gl extends ot{constructor(){super(...arguments),this._unknown=!0}_parse(e){return hr(e.data)}}gl.create=t=>new gl({typeName:He.ZodUnknown,...nt(t)});class to extends ot{_parse(e){const n=this._getOrReturnCtx(e);return Te(n,{code:me.invalid_type,expected:Ae.never,received:n.parsedType}),qe}}to.create=t=>new to({typeName:He.ZodNever,...nt(t)});class Mg extends ot{_parse(e){if(this._getType(e)!==Ae.undefined){const r=this._getOrReturnCtx(e);return Te(r,{code:me.invalid_type,expected:Ae.void,received:r.parsedType}),qe}return hr(e.data)}}Mg.create=t=>new Mg({typeName:He.ZodVoid,...nt(t)});class Rs extends ot{_parse(e){const{ctx:n,status:r}=this._processInputParams(e),s=this._def;if(n.parsedType!==Ae.array)return Te(n,{code:me.invalid_type,expected:Ae.array,received:n.parsedType}),qe;if(s.exactLength!==null){const a=n.data.length>s.exactLength.value,l=n.data.length<s.exactLength.value;(a||l)&&(Te(n,{code:a?me.too_big:me.too_small,minimum:l?s.exactLength.value:void 0,maximum:a?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Te(n,{code:me.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Te(n,{code:me.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,l)=>s.type._parseAsync(new yi(n,a,n.path,l)))).then(a=>rr.mergeArray(r,a));const o=[...n.data].map((a,l)=>s.type._parseSync(new yi(n,a,n.path,l)));return rr.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new Rs({...this._def,minLength:{value:e,message:Le.toString(n)}})}max(e,n){return new Rs({...this._def,maxLength:{value:e,message:Le.toString(n)}})}length(e,n){return new Rs({...this._def,exactLength:{value:e,message:Le.toString(n)}})}nonempty(e){return this.min(1,e)}}Rs.create=(t,e)=>new Rs({type:t,minLength:null,maxLength:null,exactLength:null,typeName:He.ZodArray,...nt(e)});function lc(t){if(t instanceof Wt){const e={};for(const n in t.shape){const r=t.shape[n];e[n]=ai.create(lc(r))}return new Wt({...t._def,shape:()=>e})}else return t instanceof Rs?new Rs({...t._def,type:lc(t.element)}):t instanceof ai?ai.create(lc(t.unwrap())):t instanceof va?va.create(lc(t.unwrap())):t instanceof xi?xi.create(t.items.map(e=>lc(e))):t}class Wt extends ot{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),n=yt.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==Ae.object){const u=this._getOrReturnCtx(e);return Te(u,{code:me.invalid_type,expected:Ae.object,received:u.parsedType}),qe}const{status:r,ctx:s}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof to&&this._def.unknownKeys==="strip"))for(const u in s.data)a.includes(u)||l.push(u);const c=[];for(const u of a){const d=o[u],h=s.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new yi(s,h,s.path,u)),alwaysSet:u in s.data})}if(this._def.catchall instanceof to){const u=this._def.unknownKeys;if(u==="passthrough")for(const d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:s.data[d]}});else if(u==="strict")l.length>0&&(Te(s,{code:me.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const u=this._def.catchall;for(const d of l){const h=s.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new yi(s,h,s.path,d)),alwaysSet:d in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const u=[];for(const d of c){const h=await d.key,m=await d.value;u.push({key:h,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>rr.mergeObjectSync(r,u)):rr.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Le.errToObj,new Wt({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(n,r)=>{var s,o,a,l;const c=(a=(o=(s=this._def).errorMap)===null||o===void 0?void 0:o.call(s,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Le.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}}}:{}})}strip(){return new Wt({...this._def,unknownKeys:"strip"})}passthrough(){return new Wt({...this._def,unknownKeys:"passthrough"})}extend(e){return new Wt({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new Wt({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:He.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new Wt({...this._def,catchall:e})}pick(e){const n={};return yt.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new Wt({...this._def,shape:()=>n})}omit(e){const n={};return yt.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new Wt({...this._def,shape:()=>n})}deepPartial(){return lc(this)}partial(e){const n={};return yt.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];e&&!e[r]?n[r]=s:n[r]=s.optional()}),new Wt({...this._def,shape:()=>n})}required(e){const n={};return yt.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof ai;)o=o._def.innerType;n[r]=o}}),new Wt({...this._def,shape:()=>n})}keyof(){return kM(yt.objectKeys(this.shape))}}Wt.create=(t,e)=>new Wt({shape:()=>t,unknownKeys:"strip",catchall:to.create(),typeName:He.ZodObject,...nt(e)});Wt.strictCreate=(t,e)=>new Wt({shape:()=>t,unknownKeys:"strict",catchall:to.create(),typeName:He.ZodObject,...nt(e)});Wt.lazycreate=(t,e)=>new Wt({shape:t,unknownKeys:"strip",catchall:to.create(),typeName:He.ZodObject,...nt(e)});class Kh extends ot{_parse(e){const{ctx:n}=this._processInputParams(e),r=this._def.options;function s(o){for(const l of o)if(l.result.status==="valid")return l.result;for(const l of o)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;const a=o.map(l=>new Br(l.ctx.common.issues));return Te(n,{code:me.invalid_union,unionErrors:a}),qe}if(n.common.async)return Promise.all(r.map(async o=>{const a={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(s);{let o;const a=[];for(const c of r){const u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;const l=a.map(c=>new Br(c));return Te(n,{code:me.invalid_union,unionErrors:l}),qe}}get options(){return this._def.options}}Kh.create=(t,e)=>new Kh({options:t,typeName:He.ZodUnion,...nt(e)});const Pi=t=>t instanceof Zh?Pi(t.schema):t instanceof Vs?Pi(t.innerType()):t instanceof Xh?[t.value]:t instanceof xa?t.options:t instanceof Jh?yt.objectValues(t.enum):t instanceof ef?Pi(t._def.innerType):t instanceof qh?[void 0]:t instanceof Gh?[null]:t instanceof ai?[void 0,...Pi(t.unwrap())]:t instanceof va?[null,...Pi(t.unwrap())]:t instanceof N_||t instanceof nf?Pi(t.unwrap()):t instanceof tf?Pi(t._def.innerType):[];class nx extends ot{_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ae.object)return Te(n,{code:me.invalid_type,expected:Ae.object,received:n.parsedType}),qe;const r=this.discriminator,s=n.data[r],o=this.optionsMap.get(s);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(Te(n,{code:me.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),qe)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){const s=new Map;for(const o of n){const a=Pi(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(const l of a){if(s.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);s.set(l,o)}}return new nx({typeName:He.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:s,...nt(r)})}}function zw(t,e){const n=Mi(t),r=Mi(e);if(t===e)return{valid:!0,data:t};if(n===Ae.object&&r===Ae.object){const s=yt.objectKeys(e),o=yt.objectKeys(t).filter(l=>s.indexOf(l)!==-1),a={...t,...e};for(const l of o){const c=zw(t[l],e[l]);if(!c.valid)return{valid:!1};a[l]=c.data}return{valid:!0,data:a}}else if(n===Ae.array&&r===Ae.array){if(t.length!==e.length)return{valid:!1};const s=[];for(let o=0;o<t.length;o++){const a=t[o],l=e[o],c=zw(a,l);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return n===Ae.date&&r===Ae.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}class Qh extends ot{_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=(o,a)=>{if(Bw(o)||Bw(a))return qe;const l=zw(o.value,a.value);return l.valid?(($w(o)||$w(a))&&n.dirty(),{status:n.value,value:l.data}):(Te(r,{code:me.invalid_intersection_types}),qe)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,a])=>s(o,a)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}Qh.create=(t,e,n)=>new Qh({left:t,right:e,typeName:He.ZodIntersection,...nt(n)});class xi extends ot{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ae.array)return Te(r,{code:me.invalid_type,expected:Ae.array,received:r.parsedType}),qe;if(r.data.length<this._def.items.length)return Te(r,{code:me.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),qe;!this._def.rest&&r.data.length>this._def.items.length&&(Te(r,{code:me.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const o=[...r.data].map((a,l)=>{const c=this._def.items[l]||this._def.rest;return c?c._parse(new yi(r,a,r.path,l)):null}).filter(a=>!!a);return r.common.async?Promise.all(o).then(a=>rr.mergeArray(n,a)):rr.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new xi({...this._def,rest:e})}}xi.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new xi({items:t,typeName:He.ZodTuple,rest:null,...nt(e)})};class Yh extends ot{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ae.object)return Te(r,{code:me.invalid_type,expected:Ae.object,received:r.parsedType}),qe;const s=[],o=this._def.keyType,a=this._def.valueType;for(const l in r.data)s.push({key:o._parse(new yi(r,l,r.path,l)),value:a._parse(new yi(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?rr.mergeObjectAsync(n,s):rr.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ot?new Yh({keyType:e,valueType:n,typeName:He.ZodRecord,...nt(r)}):new Yh({keyType:Cs.create(),valueType:e,typeName:He.ZodRecord,...nt(n)})}}class Dg extends ot{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ae.map)return Te(r,{code:me.invalid_type,expected:Ae.map,received:r.parsedType}),qe;const s=this._def.keyType,o=this._def.valueType,a=[...r.data.entries()].map(([l,c],u)=>({key:s._parse(new yi(r,l,r.path,[u,"key"])),value:o._parse(new yi(r,c,r.path,[u,"value"]))}));if(r.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const c of a){const u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return qe;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{const l=new Map;for(const c of a){const u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return qe;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}}Dg.create=(t,e,n)=>new Dg({valueType:e,keyType:t,typeName:He.ZodMap,...nt(n)});class Il extends ot{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==Ae.set)return Te(r,{code:me.invalid_type,expected:Ae.set,received:r.parsedType}),qe;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Te(r,{code:me.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Te(r,{code:me.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const o=this._def.valueType;function a(c){const u=new Set;for(const d of c){if(d.status==="aborted")return qe;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}const l=[...r.data.values()].map((c,u)=>o._parse(new yi(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>a(c)):a(l)}min(e,n){return new Il({...this._def,minSize:{value:e,message:Le.toString(n)}})}max(e,n){return new Il({...this._def,maxSize:{value:e,message:Le.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}}Il.create=(t,e)=>new Il({valueType:t,minSize:null,maxSize:null,typeName:He.ZodSet,...nt(e)});class zc extends ot{constructor(){super(...arguments),this.validate=this.implement}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ae.function)return Te(n,{code:me.invalid_type,expected:Ae.function,received:n.parsedType}),qe;function r(l,c){return Pg({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ag(),wu].filter(u=>!!u),issueData:{code:me.invalid_arguments,argumentsError:c}})}function s(l,c){return Pg({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Ag(),wu].filter(u=>!!u),issueData:{code:me.invalid_return_type,returnTypeError:c}})}const o={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof _u){const l=this;return hr(async function(...c){const u=new Br([]),d=await l._def.args.parseAsync(c,o).catch(g=>{throw u.addIssue(r(c,g)),u}),h=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(h,o).catch(g=>{throw u.addIssue(s(h,g)),u})})}else{const l=this;return hr(function(...c){const u=l._def.args.safeParse(c,o);if(!u.success)throw new Br([r(c,u.error)]);const d=Reflect.apply(a,this,u.data),h=l._def.returns.safeParse(d,o);if(!h.success)throw new Br([s(d,h.error)]);return h.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new zc({...this._def,args:xi.create(e).rest(gl.create())})}returns(e){return new zc({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new zc({args:e||xi.create([]).rest(gl.create()),returns:n||gl.create(),typeName:He.ZodFunction,...nt(r)})}}class Zh extends ot{get schema(){return this._def.getter()}_parse(e){const{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}Zh.create=(t,e)=>new Zh({getter:t,typeName:He.ZodLazy,...nt(e)});class Xh extends ot{_parse(e){if(e.data!==this._def.value){const n=this._getOrReturnCtx(e);return Te(n,{received:n.data,code:me.invalid_literal,expected:this._def.value}),qe}return{status:"valid",value:e.data}}get value(){return this._def.value}}Xh.create=(t,e)=>new Xh({value:t,typeName:He.ZodLiteral,...nt(e)});function kM(t,e){return new xa({values:t,typeName:He.ZodEnum,...nt(e)})}class xa extends ot{constructor(){super(...arguments),Vd.set(this,void 0)}_parse(e){if(typeof e.data!="string"){const n=this._getOrReturnCtx(e),r=this._def.values;return Te(n,{expected:yt.joinValues(r),received:n.parsedType,code:me.invalid_type}),qe}if(Ig(this,Vd)||NM(this,Vd,new Set(this._def.values)),!Ig(this,Vd).has(e.data)){const n=this._getOrReturnCtx(e),r=this._def.values;return Te(n,{received:n.data,code:me.invalid_enum_value,options:r}),qe}return hr(e.data)}get options(){return this._def.values}get enum(){const e={};for(const n of this._def.values)e[n]=n;return e}get Values(){const e={};for(const n of this._def.values)e[n]=n;return e}get Enum(){const e={};for(const n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return xa.create(e,{...this._def,...n})}exclude(e,n=this._def){return xa.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}}Vd=new WeakMap;xa.create=kM;class Jh extends ot{constructor(){super(...arguments),Fd.set(this,void 0)}_parse(e){const n=yt.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==Ae.string&&r.parsedType!==Ae.number){const s=yt.objectValues(n);return Te(r,{expected:yt.joinValues(s),received:r.parsedType,code:me.invalid_type}),qe}if(Ig(this,Fd)||NM(this,Fd,new Set(yt.getValidEnumValues(this._def.values))),!Ig(this,Fd).has(e.data)){const s=yt.objectValues(n);return Te(r,{received:r.data,code:me.invalid_enum_value,options:s}),qe}return hr(e.data)}get enum(){return this._def.values}}Fd=new WeakMap;Jh.create=(t,e)=>new Jh({values:t,typeName:He.ZodNativeEnum,...nt(e)});class _u extends ot{unwrap(){return this._def.type}_parse(e){const{ctx:n}=this._processInputParams(e);if(n.parsedType!==Ae.promise&&n.common.async===!1)return Te(n,{code:me.invalid_type,expected:Ae.promise,received:n.parsedType}),qe;const r=n.parsedType===Ae.promise?n.data:Promise.resolve(n.data);return hr(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}_u.create=(t,e)=>new _u({type:t,typeName:He.ZodPromise,...nt(e)});class Vs extends ot{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===He.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:n,ctx:r}=this._processInputParams(e),s=this._def.effect||null,o={addIssue:a=>{Te(r,a),a.fatal?n.abort():n.dirty()},get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),s.type==="preprocess"){const a=s.transform(r.data,o);if(r.common.async)return Promise.resolve(a).then(async l=>{if(n.value==="aborted")return qe;const c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?qe:c.status==="dirty"||n.value==="dirty"?Nc(c.value):c});{if(n.value==="aborted")return qe;const l=this._def.schema._parseSync({data:a,path:r.path,parent:r});return l.status==="aborted"?qe:l.status==="dirty"||n.value==="dirty"?Nc(l.value):l}}if(s.type==="refinement"){const a=l=>{const c=s.refinement(l,o);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(r.common.async===!1){const l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?qe:(l.status==="dirty"&&n.dirty(),a(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?qe:(l.status==="dirty"&&n.dirty(),a(l.value).then(()=>({status:n.value,value:l.value}))))}if(s.type==="transform")if(r.common.async===!1){const a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!Al(a))return a;const l=s.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>Al(a)?Promise.resolve(s.transform(a.value,o)).then(l=>({status:n.value,value:l})):a);yt.assertNever(s)}}Vs.create=(t,e,n)=>new Vs({schema:t,typeName:He.ZodEffects,effect:e,...nt(n)});Vs.createWithPreprocess=(t,e,n)=>new Vs({schema:e,effect:{type:"preprocess",transform:t},typeName:He.ZodEffects,...nt(n)});class ai extends ot{_parse(e){return this._getType(e)===Ae.undefined?hr(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}ai.create=(t,e)=>new ai({innerType:t,typeName:He.ZodOptional,...nt(e)});class va extends ot{_parse(e){return this._getType(e)===Ae.null?hr(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}va.create=(t,e)=>new va({innerType:t,typeName:He.ZodNullable,...nt(e)});class ef extends ot{_parse(e){const{ctx:n}=this._processInputParams(e);let r=n.data;return n.parsedType===Ae.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}ef.create=(t,e)=>new ef({innerType:t,typeName:He.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...nt(e)});class tf extends ot{_parse(e){const{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return Wh(s)?s.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new Br(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Br(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}tf.create=(t,e)=>new tf({innerType:t,typeName:He.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...nt(e)});class Lg extends ot{_parse(e){if(this._getType(e)!==Ae.nan){const r=this._getOrReturnCtx(e);return Te(r,{code:me.invalid_type,expected:Ae.nan,received:r.parsedType}),qe}return{status:"valid",value:e.data}}}Lg.create=t=>new Lg({typeName:He.ZodNaN,...nt(t)});const K7=Symbol("zod_brand");class N_ extends ot{_parse(e){const{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class Vf extends ot{_parse(e){const{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return(async()=>{const o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?qe:o.status==="dirty"?(n.dirty(),Nc(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?qe:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(e,n){return new Vf({in:e,out:n,typeName:He.ZodPipeline})}}class nf extends ot{_parse(e){const n=this._def.innerType._parse(e),r=s=>(Al(s)&&(s.value=Object.freeze(s.value)),s);return Wh(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}nf.create=(t,e)=>new nf({innerType:t,typeName:He.ZodReadonly,...nt(e)});function eC(t,e){const n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}function AM(t,e={},n){return t?bu.create().superRefine((r,s)=>{var o,a;const l=t(r);if(l instanceof Promise)return l.then(c=>{var u,d;if(!c){const h=eC(e,r),m=(d=(u=h.fatal)!==null&&u!==void 0?u:n)!==null&&d!==void 0?d:!0;s.addIssue({code:"custom",...h,fatal:m})}});if(!l){const c=eC(e,r),u=(a=(o=c.fatal)!==null&&o!==void 0?o:n)!==null&&a!==void 0?a:!0;s.addIssue({code:"custom",...c,fatal:u})}}):bu.create()}const Q7={object:Wt.lazycreate};var He;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(He||(He={}));const Y7=(t,e={message:`Input not instance of ${t.name}`})=>AM(n=>n instanceof t,e),PM=Cs.create,IM=ga.create,Z7=Lg.create,X7=ya.create,RM=Hh.create,J7=Pl.create,eW=Rg.create,tW=qh.create,nW=Gh.create,rW=bu.create,sW=gl.create,iW=to.create,oW=Mg.create,aW=Rs.create,lW=Wt.create,cW=Wt.strictCreate,uW=Kh.create,dW=nx.create,hW=Qh.create,fW=xi.create,mW=Yh.create,pW=Dg.create,gW=Il.create,yW=zc.create,xW=Zh.create,vW=Xh.create,wW=xa.create,bW=Jh.create,_W=_u.create,tC=Vs.create,jW=ai.create,SW=va.create,NW=Vs.createWithPreprocess,TW=Vf.create,CW=()=>PM().optional(),EW=()=>IM().optional(),kW=()=>RM().optional(),AW={string:t=>Cs.create({...t,coerce:!0}),number:t=>ga.create({...t,coerce:!0}),boolean:t=>Hh.create({...t,coerce:!0}),bigint:t=>ya.create({...t,coerce:!0}),date:t=>Pl.create({...t,coerce:!0})},PW=qe;var Nt=Object.freeze({__proto__:null,defaultErrorMap:wu,setErrorMap:N7,getErrorMap:Ag,makeIssue:Pg,EMPTY_PATH:T7,addIssueToContext:Te,ParseStatus:rr,INVALID:qe,DIRTY:Nc,OK:hr,isAborted:Bw,isDirty:$w,isValid:Al,isAsync:Wh,get util(){return yt},get objectUtil(){return Uw},ZodParsedType:Ae,getParsedType:Mi,ZodType:ot,datetimeRegex:EM,ZodString:Cs,ZodNumber:ga,ZodBigInt:ya,ZodBoolean:Hh,ZodDate:Pl,ZodSymbol:Rg,ZodUndefined:qh,ZodNull:Gh,ZodAny:bu,ZodUnknown:gl,ZodNever:to,ZodVoid:Mg,ZodArray:Rs,ZodObject:Wt,ZodUnion:Kh,ZodDiscriminatedUnion:nx,ZodIntersection:Qh,ZodTuple:xi,ZodRecord:Yh,ZodMap:Dg,ZodSet:Il,ZodFunction:zc,ZodLazy:Zh,ZodLiteral:Xh,ZodEnum:xa,ZodNativeEnum:Jh,ZodPromise:_u,ZodEffects:Vs,ZodTransformer:Vs,ZodOptional:ai,ZodNullable:va,ZodDefault:ef,ZodCatch:tf,ZodNaN:Lg,BRAND:K7,ZodBranded:N_,ZodPipeline:Vf,ZodReadonly:nf,custom:AM,Schema:ot,ZodSchema:ot,late:Q7,get ZodFirstPartyTypeKind(){return He},coerce:AW,any:rW,array:aW,bigint:X7,boolean:RM,date:J7,discriminatedUnion:dW,effect:tC,enum:wW,function:yW,instanceof:Y7,intersection:hW,lazy:xW,literal:vW,map:pW,nan:Z7,nativeEnum:bW,never:iW,null:nW,nullable:SW,number:IM,object:lW,oboolean:kW,onumber:EW,optional:jW,ostring:CW,pipeline:TW,preprocess:NW,promise:_W,record:mW,set:gW,strictObject:cW,string:PM,symbol:eW,transformer:tC,tuple:fW,undefined:tW,union:uW,unknown:sW,void:oW,NEVER:PW,ZodIssueCode:me,quotelessJson:S7,ZodError:Br}),Ff=t=>t.type==="checkbox",tl=t=>t instanceof Date,ur=t=>t==null;const MM=t=>typeof t=="object";var fn=t=>!ur(t)&&!Array.isArray(t)&&MM(t)&&!tl(t),DM=t=>fn(t)&&t.target?Ff(t.target)?t.target.checked:t.target.value:t,IW=t=>t.substring(0,t.search(/\.\d+(\.|$)/))||t,LM=(t,e)=>t.has(IW(e)),RW=t=>{const e=t.constructor&&t.constructor.prototype;return fn(e)&&e.hasOwnProperty("isPrototypeOf")},T_=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Mn(t){let e;const n=Array.isArray(t),r=typeof FileList<"u"?t instanceof FileList:!1;if(t instanceof Date)e=new Date(t);else if(t instanceof Set)e=new Set(t);else if(!(T_&&(t instanceof Blob||r))&&(n||fn(t)))if(e=n?[]:{},!n&&!RW(t))e=t;else for(const s in t)t.hasOwnProperty(s)&&(e[s]=Mn(t[s]));else return t;return e}var rx=t=>Array.isArray(t)?t.filter(Boolean):[],un=t=>t===void 0,Ne=(t,e,n)=>{if(!e||!fn(t))return n;const r=rx(e.split(/[,[\].]+?/)).reduce((s,o)=>ur(s)?s:s[o],t);return un(r)||r===t?un(t[e])?n:t[e]:r},Dr=t=>typeof t=="boolean",C_=t=>/^\w*$/.test(t),OM=t=>rx(t.replace(/["|']|\]/g,"").split(/\.|\[/)),_t=(t,e,n)=>{let r=-1;const s=C_(e)?[e]:OM(e),o=s.length,a=o-1;for(;++r<o;){const l=s[r];let c=n;if(r!==a){const u=t[l];c=fn(u)||Array.isArray(u)?u:isNaN(+s[r+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;t[l]=c,t=t[l]}};const Og={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},js={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ki={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},VM=tt.createContext(null),sx=()=>tt.useContext(VM),MW=t=>{const{children:e,...n}=t;return tt.createElement(VM.Provider,{value:n},e)};var FM=(t,e,n,r=!0)=>{const s={defaultValues:e._defaultValues};for(const o in t)Object.defineProperty(s,o,{get:()=>{const a=o;return e._proxyFormState[a]!==js.all&&(e._proxyFormState[a]=!r||js.all),n&&(n[a]=!0),t[a]}});return s};function DW(t){const e=sx(),{control:n=e.control,disabled:r,name:s,exact:o}=t||{},[a,l]=tt.useState(n._formState),c=tt.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1}),u=tt.useRef(s);return u.current=s,tt.useEffect(()=>n._subscribe({name:u.current,formState:c.current,exact:o,callback:d=>{!r&&l({...n._formState,...d})}}),[n,r,o]),tt.useEffect(()=>{c.current.isValid&&n._setValid(!0)},[n]),tt.useMemo(()=>FM(a,n,c.current,!1),[a,n])}var ti=t=>typeof t=="string",UM=(t,e,n,r,s)=>ti(t)?(r&&e.watch.add(t),Ne(n,t,s)):Array.isArray(t)?t.map(o=>(r&&e.watch.add(o),Ne(n,o))):(r&&(e.watchAll=!0),n);function LW(t){const e=sx(),{control:n=e.control,name:r,defaultValue:s,disabled:o,exact:a}=t||{},l=tt.useRef(r),c=tt.useRef(s);l.current=r,tt.useEffect(()=>n._subscribe({name:l.current,formState:{values:!0},exact:a,callback:h=>!o&&d(UM(l.current,n._names,h.values||n._formValues,!1,c.current))}),[n,o,a]);const[u,d]=tt.useState(n._getWatch(r,s));return tt.useEffect(()=>n._removeUnmounted()),u}function OW(t){const e=sx(),{name:n,disabled:r,control:s=e.control,shouldUnregister:o}=t,a=LM(s._names.array,n),l=LW({control:s,name:n,defaultValue:Ne(s._formValues,n,Ne(s._defaultValues,n,t.defaultValue)),exact:!0}),c=DW({control:s,name:n,exact:!0}),u=tt.useRef(t),d=tt.useRef(s.register(n,{...t.rules,value:l,...Dr(t.disabled)?{disabled:t.disabled}:{}})),h=tt.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Ne(c.errors,n)},isDirty:{enumerable:!0,get:()=>!!Ne(c.dirtyFields,n)},isTouched:{enumerable:!0,get:()=>!!Ne(c.touchedFields,n)},isValidating:{enumerable:!0,get:()=>!!Ne(c.validatingFields,n)},error:{enumerable:!0,get:()=>Ne(c.errors,n)}}),[c,n]),m=tt.useCallback(x=>d.current.onChange({target:{value:DM(x),name:n},type:Og.CHANGE}),[n]),g=tt.useCallback(()=>d.current.onBlur({target:{value:Ne(s._formValues,n),name:n},type:Og.BLUR}),[n,s._formValues]),_=tt.useCallback(x=>{const y=Ne(s._fields,n);y&&x&&(y._f.ref={focus:()=>x.focus(),select:()=>x.select(),setCustomValidity:w=>x.setCustomValidity(w),reportValidity:()=>x.reportValidity()})},[s._fields,n]),v=tt.useMemo(()=>({name:n,value:l,...Dr(r)||c.disabled?{disabled:c.disabled||r}:{},onChange:m,onBlur:g,ref:_}),[n,r,c.disabled,m,g,_,l]);return tt.useEffect(()=>{const x=s._options.shouldUnregister||o;s.register(n,{...u.current.rules,...Dr(u.current.disabled)?{disabled:u.current.disabled}:{}});const y=(w,j)=>{const E=Ne(s._fields,w);E&&E._f&&(E._f.mount=j)};if(y(n,!0),x){const w=Mn(Ne(s._options.defaultValues,n));_t(s._defaultValues,n,w),un(Ne(s._formValues,n))&&_t(s._formValues,n,w)}return!a&&s.register(n),()=>{(a?x&&!s._state.action:x)?s.unregister(n):y(n,!1)}},[n,s,a,o]),tt.useEffect(()=>{s._setDisabledField({disabled:r,name:n})},[r,n,s]),tt.useMemo(()=>({field:v,formState:c,fieldState:h}),[v,c,h])}const VW=t=>t.render(OW(t));var BM=(t,e,n,r,s)=>e?{...n[t],types:{...n[t]&&n[t].types?n[t].types:{},[r]:s||!0}}:{},sh=t=>Array.isArray(t)?t:[t],nC=()=>{let t=[];return{get observers(){return t},next:s=>{for(const o of t)o.next&&o.next(s)},subscribe:s=>(t.push(s),{unsubscribe:()=>{t=t.filter(o=>o!==s)}}),unsubscribe:()=>{t=[]}}},Ww=t=>ur(t)||!MM(t);function Ro(t,e){if(Ww(t)||Ww(e))return t===e;if(tl(t)&&tl(e))return t.getTime()===e.getTime();const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(const s of n){const o=t[s];if(!r.includes(s))return!1;if(s!=="ref"){const a=e[s];if(tl(o)&&tl(a)||fn(o)&&fn(a)||Array.isArray(o)&&Array.isArray(a)?!Ro(o,a):o!==a)return!1}}return!0}var lr=t=>fn(t)&&!Object.keys(t).length,E_=t=>t.type==="file",Ss=t=>typeof t=="function",Vg=t=>{if(!T_)return!1;const e=t?t.ownerDocument:0;return t instanceof(e&&e.defaultView?e.defaultView.HTMLElement:HTMLElement)},$M=t=>t.type==="select-multiple",k_=t=>t.type==="radio",FW=t=>k_(t)||Ff(t),q0=t=>Vg(t)&&t.isConnected;function UW(t,e){const n=e.slice(0,-1).length;let r=0;for(;r<n;)t=un(t)?r++:t[e[r++]];return t}function BW(t){for(const e in t)if(t.hasOwnProperty(e)&&!un(t[e]))return!1;return!0}function bn(t,e){const n=Array.isArray(e)?e:C_(e)?[e]:OM(e),r=n.length===1?t:UW(t,n),s=n.length-1,o=n[s];return r&&delete r[o],s!==0&&(fn(r)&&lr(r)||Array.isArray(r)&&BW(r))&&bn(t,n.slice(0,-1)),t}var zM=t=>{for(const e in t)if(Ss(t[e]))return!0;return!1};function Fg(t,e={}){const n=Array.isArray(t);if(fn(t)||n)for(const r in t)Array.isArray(t[r])||fn(t[r])&&!zM(t[r])?(e[r]=Array.isArray(t[r])?[]:{},Fg(t[r],e[r])):ur(t[r])||(e[r]=!0);return e}function WM(t,e,n){const r=Array.isArray(t);if(fn(t)||r)for(const s in t)Array.isArray(t[s])||fn(t[s])&&!zM(t[s])?un(e)||Ww(n[s])?n[s]=Array.isArray(t[s])?Fg(t[s],[]):{...Fg(t[s])}:WM(t[s],ur(e)?{}:e[s],n[s]):n[s]=!Ro(t[s],e[s]);return n}var Cd=(t,e)=>WM(t,e,Fg(e));const rC={value:!1,isValid:!1},sC={value:!0,isValid:!0};var HM=t=>{if(Array.isArray(t)){if(t.length>1){const e=t.filter(n=>n&&n.checked&&!n.disabled).map(n=>n.value);return{value:e,isValid:!!e.length}}return t[0].checked&&!t[0].disabled?t[0].attributes&&!un(t[0].attributes.value)?un(t[0].value)||t[0].value===""?sC:{value:t[0].value,isValid:!0}:sC:rC}return rC},qM=(t,{valueAsNumber:e,valueAsDate:n,setValueAs:r})=>un(t)?t:e?t===""?NaN:t&&+t:n&&ti(t)?new Date(t):r?r(t):t;const iC={isValid:!1,value:null};var GM=t=>Array.isArray(t)?t.reduce((e,n)=>n&&n.checked&&!n.disabled?{isValid:!0,value:n.value}:e,iC):iC;function oC(t){const e=t.ref;return E_(e)?e.files:k_(e)?GM(t.refs).value:$M(e)?[...e.selectedOptions].map(({value:n})=>n):Ff(e)?HM(t.refs).value:qM(un(e.value)?t.ref.value:e.value,t)}var $W=(t,e,n,r)=>{const s={};for(const o of t){const a=Ne(e,o);a&&_t(s,o,a._f)}return{criteriaMode:n,names:[...t],fields:s,shouldUseNativeValidation:r}},Ug=t=>t instanceof RegExp,Ed=t=>un(t)?t:Ug(t)?t.source:fn(t)?Ug(t.value)?t.value.source:t.value:t,aC=t=>({isOnSubmit:!t||t===js.onSubmit,isOnBlur:t===js.onBlur,isOnChange:t===js.onChange,isOnAll:t===js.all,isOnTouch:t===js.onTouched});const lC="AsyncFunction";var zW=t=>!!t&&!!t.validate&&!!(Ss(t.validate)&&t.validate.constructor.name===lC||fn(t.validate)&&Object.values(t.validate).find(e=>e.constructor.name===lC)),WW=t=>t.mount&&(t.required||t.min||t.max||t.maxLength||t.minLength||t.pattern||t.validate),cC=(t,e,n)=>!n&&(e.watchAll||e.watch.has(t)||[...e.watch].some(r=>t.startsWith(r)&&/^\.\w+/.test(t.slice(r.length))));const ih=(t,e,n,r)=>{for(const s of n||Object.keys(t)){const o=Ne(t,s);if(o){const{_f:a,...l}=o;if(a){if(a.refs&&a.refs[0]&&e(a.refs[0],s)&&!r)return!0;if(a.ref&&e(a.ref,a.name)&&!r)return!0;if(ih(l,e))break}else if(fn(l)&&ih(l,e))break}}};function uC(t,e,n){const r=Ne(t,n);if(r||C_(n))return{error:r,name:n};const s=n.split(".");for(;s.length;){const o=s.join("."),a=Ne(e,o),l=Ne(t,o);if(a&&!Array.isArray(a)&&n!==o)return{name:n};if(l&&l.type)return{name:o,error:l};s.pop()}return{name:n}}var HW=(t,e,n,r)=>{n(t);const{name:s,...o}=t;return lr(o)||Object.keys(o).length>=Object.keys(e).length||Object.keys(o).find(a=>e[a]===(!r||js.all))},qW=(t,e,n)=>!t||!e||t===e||sh(t).some(r=>r&&(n?r===e:r.startsWith(e)||e.startsWith(r))),GW=(t,e,n,r,s)=>s.isOnAll?!1:!n&&s.isOnTouch?!(e||t):(n?r.isOnBlur:s.isOnBlur)?!t:(n?r.isOnChange:s.isOnChange)?t:!0,KW=(t,e)=>!rx(Ne(t,e)).length&&bn(t,e),QW=(t,e,n)=>{const r=sh(Ne(t,n));return _t(r,"root",e[n]),_t(t,n,r),t},Mp=t=>ti(t);function dC(t,e,n="validate"){if(Mp(t)||Array.isArray(t)&&t.every(Mp)||Dr(t)&&!t)return{type:n,message:Mp(t)?t:"",ref:e}}var ac=t=>fn(t)&&!Ug(t)?t:{value:t,message:""},hC=async(t,e,n,r,s,o)=>{const{ref:a,refs:l,required:c,maxLength:u,minLength:d,min:h,max:m,pattern:g,validate:_,name:v,valueAsNumber:x,mount:y}=t._f,w=Ne(n,v);if(!y||e.has(v))return{};const j=l?l[0]:a,E=R=>{s&&j.reportValidity&&(j.setCustomValidity(Dr(R)?"":R||""),j.reportValidity())},P={},U=k_(a),T=Ff(a),S=U||T,C=(x||E_(a))&&un(a.value)&&un(w)||Vg(a)&&a.value===""||w===""||Array.isArray(w)&&!w.length,k=BM.bind(null,v,r,P),I=(R,A,G,ue=ki.maxLength,B=ki.minLength)=>{const q=R?A:G;P[v]={type:R?ue:B,message:q,ref:a,...k(R?ue:B,q)}};if(o?!Array.isArray(w)||!w.length:c&&(!S&&(C||ur(w))||Dr(w)&&!w||T&&!HM(l).isValid||U&&!GM(l).isValid)){const{value:R,message:A}=Mp(c)?{value:!!c,message:c}:ac(c);if(R&&(P[v]={type:ki.required,message:A,ref:j,...k(ki.required,A)},!r))return E(A),P}if(!C&&(!ur(h)||!ur(m))){let R,A;const G=ac(m),ue=ac(h);if(!ur(w)&&!isNaN(w)){const B=a.valueAsNumber||w&&+w;ur(G.value)||(R=B>G.value),ur(ue.value)||(A=B<ue.value)}else{const B=a.valueAsDate||new Date(w),q=D=>new Date(new Date().toDateString()+" "+D),O=a.type=="time",F=a.type=="week";ti(G.value)&&w&&(R=O?q(w)>q(G.value):F?w>G.value:B>new Date(G.value)),ti(ue.value)&&w&&(A=O?q(w)<q(ue.value):F?w<ue.value:B<new Date(ue.value))}if((R||A)&&(I(!!R,G.message,ue.message,ki.max,ki.min),!r))return E(P[v].message),P}if((u||d)&&!C&&(ti(w)||o&&Array.isArray(w))){const R=ac(u),A=ac(d),G=!ur(R.value)&&w.length>+R.value,ue=!ur(A.value)&&w.length<+A.value;if((G||ue)&&(I(G,R.message,A.message),!r))return E(P[v].message),P}if(g&&!C&&ti(w)){const{value:R,message:A}=ac(g);if(Ug(R)&&!w.match(R)&&(P[v]={type:ki.pattern,message:A,ref:a,...k(ki.pattern,A)},!r))return E(A),P}if(_){if(Ss(_)){const R=await _(w,n),A=dC(R,j);if(A&&(P[v]={...A,...k(ki.validate,A.message)},!r))return E(A.message),P}else if(fn(_)){let R={};for(const A in _){if(!lr(R)&&!r)break;const G=dC(await _[A](w,n),j,A);G&&(R={...G,...k(A,G.message)},E(G.message),r&&(P[v]=R))}if(!lr(R)&&(P[v]={ref:j,...R},!r))return P}}return E(!0),P};const YW={mode:js.onSubmit,reValidateMode:js.onChange,shouldFocusError:!0};function ZW(t={}){let e={...YW,...t},n={submitCount:0,isDirty:!1,isLoading:Ss(e.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1};const r={};let s=fn(e.defaultValues)||fn(e.values)?Mn(e.values||e.defaultValues)||{}:{},o=e.shouldUnregister?{}:Mn(s),a={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c,u=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let h={...d};const m={array:nC(),state:nC()},g=aC(e.mode),_=aC(e.reValidateMode),v=e.criteriaMode===js.all,x=W=>Z=>{clearTimeout(u),u=setTimeout(W,Z)},y=async W=>{if(!e.disabled&&(d.isValid||h.isValid||W)){const Z=e.resolver?lr((await C()).errors):await I(r,!0);Z!==n.isValid&&m.state.next({isValid:Z})}},w=(W,Z)=>{!e.disabled&&(d.isValidating||d.validatingFields||h.isValidating||h.validatingFields)&&((W||Array.from(l.mount)).forEach(se=>{se&&(Z?_t(n.validatingFields,se,Z):bn(n.validatingFields,se))}),m.state.next({validatingFields:n.validatingFields,isValidating:!lr(n.validatingFields)}))},j=(W,Z=[],se,Se,ve=!0,pe=!0)=>{if(Se&&se&&!e.disabled){if(a.action=!0,pe&&Array.isArray(Ne(r,W))){const Ee=se(Ne(r,W),Se.argA,Se.argB);ve&&_t(r,W,Ee)}if(pe&&Array.isArray(Ne(n.errors,W))){const Ee=se(Ne(n.errors,W),Se.argA,Se.argB);ve&&_t(n.errors,W,Ee),KW(n.errors,W)}if((d.touchedFields||h.touchedFields)&&pe&&Array.isArray(Ne(n.touchedFields,W))){const Ee=se(Ne(n.touchedFields,W),Se.argA,Se.argB);ve&&_t(n.touchedFields,W,Ee)}(d.dirtyFields||h.dirtyFields)&&(n.dirtyFields=Cd(s,o)),m.state.next({name:W,isDirty:A(W,Z),dirtyFields:n.dirtyFields,errors:n.errors,isValid:n.isValid})}else _t(o,W,Z)},E=(W,Z)=>{_t(n.errors,W,Z),m.state.next({errors:n.errors})},P=W=>{n.errors=W,m.state.next({errors:n.errors,isValid:!1})},U=(W,Z,se,Se)=>{const ve=Ne(r,W);if(ve){const pe=Ne(o,W,un(se)?Ne(s,W):se);un(pe)||Se&&Se.defaultChecked||Z?_t(o,W,Z?pe:oC(ve._f)):B(W,pe),a.mount&&y()}},T=(W,Z,se,Se,ve)=>{let pe=!1,Ee=!1;const et={name:W};if(!e.disabled){if(!se||Se){(d.isDirty||h.isDirty)&&(Ee=n.isDirty,n.isDirty=et.isDirty=A(),pe=Ee!==et.isDirty);const At=Ro(Ne(s,W),Z);Ee=!!Ne(n.dirtyFields,W),At?bn(n.dirtyFields,W):_t(n.dirtyFields,W,!0),et.dirtyFields=n.dirtyFields,pe=pe||(d.dirtyFields||h.dirtyFields)&&Ee!==!At}if(se){const At=Ne(n.touchedFields,W);At||(_t(n.touchedFields,W,se),et.touchedFields=n.touchedFields,pe=pe||(d.touchedFields||h.touchedFields)&&At!==se)}pe&&ve&&m.state.next(et)}return pe?et:{}},S=(W,Z,se,Se)=>{const ve=Ne(n.errors,W),pe=(d.isValid||h.isValid)&&Dr(Z)&&n.isValid!==Z;if(e.delayError&&se?(c=x(()=>E(W,se)),c(e.delayError)):(clearTimeout(u),c=null,se?_t(n.errors,W,se):bn(n.errors,W)),(se?!Ro(ve,se):ve)||!lr(Se)||pe){const Ee={...Se,...pe&&Dr(Z)?{isValid:Z}:{},errors:n.errors,name:W};n={...n,...Ee},m.state.next(Ee)}},C=async W=>{w(W,!0);const Z=await e.resolver(o,e.context,$W(W||l.mount,r,e.criteriaMode,e.shouldUseNativeValidation));return w(W),Z},k=async W=>{const{errors:Z}=await C(W);if(W)for(const se of W){const Se=Ne(Z,se);Se?_t(n.errors,se,Se):bn(n.errors,se)}else n.errors=Z;return Z},I=async(W,Z,se={valid:!0})=>{for(const Se in W){const ve=W[Se];if(ve){const{_f:pe,...Ee}=ve;if(pe){const et=l.array.has(pe.name),At=ve._f&&zW(ve._f);At&&d.validatingFields&&w([Se],!0);const Lt=await hC(ve,l.disabled,o,v,e.shouldUseNativeValidation&&!Z,et);if(At&&d.validatingFields&&w([Se]),Lt[pe.name]&&(se.valid=!1,Z))break;!Z&&(Ne(Lt,pe.name)?et?QW(n.errors,Lt,pe.name):_t(n.errors,pe.name,Lt[pe.name]):bn(n.errors,pe.name))}!lr(Ee)&&await I(Ee,Z,se)}}return se.valid},R=()=>{for(const W of l.unMount){const Z=Ne(r,W);Z&&(Z._f.refs?Z._f.refs.every(se=>!q0(se)):!q0(Z._f.ref))&&xe(W)}l.unMount=new Set},A=(W,Z)=>!e.disabled&&(W&&Z&&_t(o,W,Z),!Ro(X(),s)),G=(W,Z,se)=>UM(W,l,{...a.mount?o:un(Z)?s:ti(W)?{[W]:Z}:Z},se,Z),ue=W=>rx(Ne(a.mount?o:s,W,e.shouldUnregister?Ne(s,W,[]):[])),B=(W,Z,se={})=>{const Se=Ne(r,W);let ve=Z;if(Se){const pe=Se._f;pe&&(!pe.disabled&&_t(o,W,qM(Z,pe)),ve=Vg(pe.ref)&&ur(Z)?"":Z,$M(pe.ref)?[...pe.ref.options].forEach(Ee=>Ee.selected=ve.includes(Ee.value)):pe.refs?Ff(pe.ref)?pe.refs.length>1?pe.refs.forEach(Ee=>(!Ee.defaultChecked||!Ee.disabled)&&(Ee.checked=Array.isArray(ve)?!!ve.find(et=>et===Ee.value):ve===Ee.value)):pe.refs[0]&&(pe.refs[0].checked=!!ve):pe.refs.forEach(Ee=>Ee.checked=Ee.value===ve):E_(pe.ref)?pe.ref.value="":(pe.ref.value=ve,pe.ref.type||m.state.next({name:W,values:Mn(o)})))}(se.shouldDirty||se.shouldTouch)&&T(W,ve,se.shouldTouch,se.shouldDirty,!0),se.shouldValidate&&L(W)},q=(W,Z,se)=>{for(const Se in Z){const ve=Z[Se],pe=`${W}.${Se}`,Ee=Ne(r,pe);(l.array.has(W)||fn(ve)||Ee&&!Ee._f)&&!tl(ve)?q(pe,ve,se):B(pe,ve,se)}},O=(W,Z,se={})=>{const Se=Ne(r,W),ve=l.array.has(W),pe=Mn(Z);_t(o,W,pe),ve?(m.array.next({name:W,values:Mn(o)}),(d.isDirty||d.dirtyFields||h.isDirty||h.dirtyFields)&&se.shouldDirty&&m.state.next({name:W,dirtyFields:Cd(s,o),isDirty:A(W,pe)})):Se&&!Se._f&&!ur(pe)?q(W,pe,se):B(W,pe,se),cC(W,l)&&m.state.next({...n}),m.state.next({name:a.mount?W:void 0,values:Mn(o)})},F=async W=>{a.mount=!0;const Z=W.target;let se=Z.name,Se=!0;const ve=Ne(r,se),pe=Ee=>{Se=Number.isNaN(Ee)||tl(Ee)&&isNaN(Ee.getTime())||Ro(Ee,Ne(o,se,Ee))};if(ve){let Ee,et;const At=Z.type?oC(ve._f):DM(W),Lt=W.type===Og.BLUR||W.type===Og.FOCUS_OUT,Si=!WW(ve._f)&&!e.resolver&&!Ne(n.errors,se)&&!ve._f.deps||GW(Lt,Ne(n.touchedFields,se),n.isSubmitted,_,g),vr=cC(se,l,Lt);_t(o,se,At),Lt?(ve._f.onBlur&&ve._f.onBlur(W),c&&c(0)):ve._f.onChange&&ve._f.onChange(W);const us=T(se,At,Lt),La=!lr(us)||vr;if(!Lt&&m.state.next({name:se,type:W.type,values:Mn(o)}),Si)return(d.isValid||h.isValid)&&(e.mode==="onBlur"?Lt&&y():Lt||y()),La&&m.state.next({name:se,...vr?{}:us});if(!Lt&&vr&&m.state.next({...n}),e.resolver){const{errors:ir}=await C([se]);if(pe(At),Se){const Ql=uC(n.errors,r,se),Us=uC(ir,r,Ql.name||se);Ee=Us.error,se=Us.name,et=lr(ir)}}else w([se],!0),Ee=(await hC(ve,l.disabled,o,v,e.shouldUseNativeValidation))[se],w([se]),pe(At),Se&&(Ee?et=!1:(d.isValid||h.isValid)&&(et=await I(r,!0)));Se&&(ve._f.deps&&L(ve._f.deps),S(se,et,Ee,us))}},D=(W,Z)=>{if(Ne(n.errors,Z)&&W.focus)return W.focus(),1},L=async(W,Z={})=>{let se,Se;const ve=sh(W);if(e.resolver){const pe=await k(un(W)?W:ve);se=lr(pe),Se=W?!ve.some(Ee=>Ne(pe,Ee)):se}else W?(Se=(await Promise.all(ve.map(async pe=>{const Ee=Ne(r,pe);return await I(Ee&&Ee._f?{[pe]:Ee}:Ee)}))).every(Boolean),!(!Se&&!n.isValid)&&y()):Se=se=await I(r);return m.state.next({...!ti(W)||(d.isValid||h.isValid)&&se!==n.isValid?{}:{name:W},...e.resolver||!W?{isValid:se}:{},errors:n.errors}),Z.shouldFocus&&!Se&&ih(r,D,W?ve:l.mount),Se},X=W=>{const Z={...a.mount?o:s};return un(W)?Z:ti(W)?Ne(Z,W):W.map(se=>Ne(Z,se))},$=(W,Z)=>({invalid:!!Ne((Z||n).errors,W),isDirty:!!Ne((Z||n).dirtyFields,W),error:Ne((Z||n).errors,W),isValidating:!!Ne(n.validatingFields,W),isTouched:!!Ne((Z||n).touchedFields,W)}),K=W=>{W&&sh(W).forEach(Z=>bn(n.errors,Z)),m.state.next({errors:W?n.errors:{}})},Y=(W,Z,se)=>{const Se=(Ne(r,W,{_f:{}})._f||{}).ref,ve=Ne(n.errors,W)||{},{ref:pe,message:Ee,type:et,...At}=ve;_t(n.errors,W,{...At,...Z,ref:Se}),m.state.next({name:W,errors:n.errors,isValid:!1}),se&&se.shouldFocus&&Se&&Se.focus&&Se.focus()},ie=(W,Z)=>Ss(W)?m.state.subscribe({next:se=>W(G(void 0,Z),se)}):G(W,Z,!0),te=W=>m.state.subscribe({next:Z=>{qW(W.name,Z.name,W.exact)&&HW(Z,W.formState||d,lt,W.reRenderRoot)&&W.callback({values:{...o},...n,...Z})}}).unsubscribe,le=W=>(a.mount=!0,h={...h,...W.formState},te({...W,formState:h})),xe=(W,Z={})=>{for(const se of W?sh(W):l.mount)l.mount.delete(se),l.array.delete(se),Z.keepValue||(bn(r,se),bn(o,se)),!Z.keepError&&bn(n.errors,se),!Z.keepDirty&&bn(n.dirtyFields,se),!Z.keepTouched&&bn(n.touchedFields,se),!Z.keepIsValidating&&bn(n.validatingFields,se),!e.shouldUnregister&&!Z.keepDefaultValue&&bn(s,se);m.state.next({values:Mn(o)}),m.state.next({...n,...Z.keepDirty?{isDirty:A()}:{}}),!Z.keepIsValid&&y()},_e=({disabled:W,name:Z})=>{(Dr(W)&&a.mount||W||l.disabled.has(Z))&&(W?l.disabled.add(Z):l.disabled.delete(Z))},Pe=(W,Z={})=>{let se=Ne(r,W);const Se=Dr(Z.disabled)||Dr(e.disabled);return _t(r,W,{...se||{},_f:{...se&&se._f?se._f:{ref:{name:W}},name:W,mount:!0,...Z}}),l.mount.add(W),se?_e({disabled:Dr(Z.disabled)?Z.disabled:e.disabled,name:W}):U(W,!0,Z.value),{...Se?{disabled:Z.disabled||e.disabled}:{},...e.progressive?{required:!!Z.required,min:Ed(Z.min),max:Ed(Z.max),minLength:Ed(Z.minLength),maxLength:Ed(Z.maxLength),pattern:Ed(Z.pattern)}:{},name:W,onChange:F,onBlur:F,ref:ve=>{if(ve){Pe(W,Z),se=Ne(r,W);const pe=un(ve.value)&&ve.querySelectorAll&&ve.querySelectorAll("input,select,textarea")[0]||ve,Ee=FW(pe),et=se._f.refs||[];if(Ee?et.find(At=>At===pe):pe===se._f.ref)return;_t(r,W,{_f:{...se._f,...Ee?{refs:[...et.filter(q0),pe,...Array.isArray(Ne(s,W))?[{}]:[]],ref:{type:pe.type,name:W}}:{ref:pe}}}),U(W,!1,void 0,pe)}else se=Ne(r,W,{}),se._f&&(se._f.mount=!1),(e.shouldUnregister||Z.shouldUnregister)&&!(LM(l.array,W)&&a.action)&&l.unMount.add(W)}}},de=()=>e.shouldFocusError&&ih(r,D,l.mount),Ke=W=>{Dr(W)&&(m.state.next({disabled:W}),ih(r,(Z,se)=>{const Se=Ne(r,se);Se&&(Z.disabled=Se._f.disabled||W,Array.isArray(Se._f.refs)&&Se._f.refs.forEach(ve=>{ve.disabled=Se._f.disabled||W}))},0,!1))},Ve=(W,Z)=>async se=>{let Se;se&&(se.preventDefault&&se.preventDefault(),se.persist&&se.persist());let ve=Mn(o);if(m.state.next({isSubmitting:!0}),e.resolver){const{errors:pe,values:Ee}=await C();n.errors=pe,ve=Ee}else await I(r);if(l.disabled.size)for(const pe of l.disabled)_t(ve,pe,void 0);if(bn(n.errors,"root"),lr(n.errors)){m.state.next({errors:{}});try{await W(ve,se)}catch(pe){Se=pe}}else Z&&await Z({...n.errors},se),de(),setTimeout(de);if(m.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:lr(n.errors)&&!Se,submitCount:n.submitCount+1,errors:n.errors}),Se)throw Se},bt=(W,Z={})=>{Ne(r,W)&&(un(Z.defaultValue)?O(W,Mn(Ne(s,W))):(O(W,Z.defaultValue),_t(s,W,Mn(Z.defaultValue))),Z.keepTouched||bn(n.touchedFields,W),Z.keepDirty||(bn(n.dirtyFields,W),n.isDirty=Z.defaultValue?A(W,Mn(Ne(s,W))):A()),Z.keepError||(bn(n.errors,W),d.isValid&&y()),m.state.next({...n}))},Ze=(W,Z={})=>{const se=W?Mn(W):s,Se=Mn(se),ve=lr(W),pe=ve?s:Se;if(Z.keepDefaultValues||(s=se),!Z.keepValues){if(Z.keepDirtyValues){const Ee=new Set([...l.mount,...Object.keys(Cd(s,o))]);for(const et of Array.from(Ee))Ne(n.dirtyFields,et)?_t(pe,et,Ne(o,et)):O(et,Ne(pe,et))}else{if(T_&&un(W))for(const Ee of l.mount){const et=Ne(r,Ee);if(et&&et._f){const At=Array.isArray(et._f.refs)?et._f.refs[0]:et._f.ref;if(Vg(At)){const Lt=At.closest("form");if(Lt){Lt.reset();break}}}}for(const Ee of l.mount)O(Ee,Ne(pe,Ee))}o=Mn(pe),m.array.next({values:{...pe}}),m.state.next({values:{...pe}})}l={mount:Z.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!d.isValid||!!Z.keepIsValid||!!Z.keepDirtyValues,a.watch=!!e.shouldUnregister,m.state.next({submitCount:Z.keepSubmitCount?n.submitCount:0,isDirty:ve?!1:Z.keepDirty?n.isDirty:!!(Z.keepDefaultValues&&!Ro(W,s)),isSubmitted:Z.keepIsSubmitted?n.isSubmitted:!1,dirtyFields:ve?{}:Z.keepDirtyValues?Z.keepDefaultValues&&o?Cd(s,o):n.dirtyFields:Z.keepDefaultValues&&W?Cd(s,W):Z.keepDirty?n.dirtyFields:{},touchedFields:Z.keepTouched?n.touchedFields:{},errors:Z.keepErrors?n.errors:{},isSubmitSuccessful:Z.keepIsSubmitSuccessful?n.isSubmitSuccessful:!1,isSubmitting:!1})},xt=(W,Z)=>Ze(Ss(W)?W(o):W,Z),Bt=(W,Z={})=>{const se=Ne(r,W),Se=se&&se._f;if(Se){const ve=Se.refs?Se.refs[0]:Se.ref;ve.focus&&(ve.focus(),Z.shouldSelect&&Ss(ve.select)&&ve.select())}},lt=W=>{n={...n,...W}},vn={control:{register:Pe,unregister:xe,getFieldState:$,handleSubmit:Ve,setError:Y,_subscribe:te,_runSchema:C,_getWatch:G,_getDirty:A,_setValid:y,_setFieldArray:j,_setDisabledField:_e,_setErrors:P,_getFieldArray:ue,_reset:Ze,_resetDefaultValues:()=>Ss(e.defaultValues)&&e.defaultValues().then(W=>{xt(W,e.resetOptions),m.state.next({isLoading:!1})}),_removeUnmounted:R,_disableForm:Ke,_subjects:m,_proxyFormState:d,get _fields(){return r},get _formValues(){return o},get _state(){return a},set _state(W){a=W},get _defaultValues(){return s},get _names(){return l},set _names(W){l=W},get _formState(){return n},get _options(){return e},set _options(W){e={...e,...W}}},subscribe:le,trigger:L,register:Pe,handleSubmit:Ve,watch:ie,setValue:O,getValues:X,reset:xt,resetField:bt,clearErrors:K,unregister:xe,setError:Y,setFocus:Bt,getFieldState:$};return{...vn,formControl:vn}}function Bg(t={}){const e=tt.useRef(void 0),n=tt.useRef(void 0),[r,s]=tt.useState({isDirty:!1,isValidating:!1,isLoading:Ss(t.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1,defaultValues:Ss(t.defaultValues)?void 0:t.defaultValues});e.current||(e.current={...t.formControl?t.formControl:ZW(t),formState:r},t.formControl&&t.defaultValues&&!Ss(t.defaultValues)&&t.formControl.reset(t.defaultValues,t.resetOptions));const o=e.current.control;return o._options=t,tt.useLayoutEffect(()=>o._subscribe({formState:o._proxyFormState,callback:()=>s({...o._formState}),reRenderRoot:!0}),[o]),tt.useEffect(()=>o._disableForm(t.disabled),[o,t.disabled]),tt.useEffect(()=>{if(o._proxyFormState.isDirty){const a=o._getDirty();a!==r.isDirty&&o._subjects.state.next({isDirty:a})}},[o,r.isDirty]),tt.useEffect(()=>{t.values&&!Ro(t.values,n.current)?(o._reset(t.values,o._options.resetOptions),n.current=t.values,s(a=>({...a}))):o._resetDefaultValues()},[t.values,o]),tt.useEffect(()=>{t.errors&&!lr(t.errors)&&o._setErrors(t.errors)},[t.errors,o]),tt.useEffect(()=>{o._state.mount||(o._setValid(),o._state.mount=!0),o._state.watch&&(o._state.watch=!1,o._subjects.state.next({...o._formState})),o._removeUnmounted()}),tt.useEffect(()=>{t.shouldUnregister&&o._subjects.state.next({values:o._getWatch()})},[t.shouldUnregister,o]),e.current.formState=FM(r,o),e.current}const fC=(t,e,n)=>{if(t&&"reportValidity"in t){const r=Ne(n,e);t.setCustomValidity(r&&r.message||""),t.reportValidity()}},KM=(t,e)=>{for(const n in e.fields){const r=e.fields[n];r&&r.ref&&"reportValidity"in r.ref?fC(r.ref,n,t):r.refs&&r.refs.forEach(s=>fC(s,n,t))}},XW=(t,e)=>{e.shouldUseNativeValidation&&KM(t,e);const n={};for(const r in t){const s=Ne(e.fields,r),o=Object.assign(t[r]||{},{ref:s&&s.ref});if(JW(e.names||Object.keys(t),r)){const a=Object.assign({},Ne(n,r));_t(a,"root",o),_t(n,r,a)}else _t(n,r,o)}return n},JW=(t,e)=>t.some(n=>n.startsWith(e+"."));var eH=function(t,e){for(var n={};t.length;){var r=t[0],s=r.code,o=r.message,a=r.path.join(".");if(!n[a])if("unionErrors"in r){var l=r.unionErrors[0].errors[0];n[a]={message:l.message,type:l.code}}else n[a]={message:o,type:s};if("unionErrors"in r&&r.unionErrors.forEach(function(d){return d.errors.forEach(function(h){return t.push(h)})}),e){var c=n[a].types,u=c&&c[r.code];n[a]=BM(a,e,n,s,u?[].concat(u,r.message):r.message)}t.shift()}return n},$g=function(t,e,n){return n===void 0&&(n={}),function(r,s,o){try{return Promise.resolve(function(a,l){try{var c=Promise.resolve(t[n.mode==="sync"?"parse":"parseAsync"](r,e)).then(function(u){return o.shouldUseNativeValidation&&KM({},o),{errors:{},values:n.raw?r:u}})}catch(u){return l(u)}return c&&c.then?c.then(void 0,l):c}(0,function(a){if(function(l){return Array.isArray(l==null?void 0:l.errors)}(a))return{values:{},errors:XW(eH(a.errors,!o.shouldUseNativeValidation&&o.criteriaMode==="all"),o)};throw a}))}catch(a){return Promise.reject(a)}}},tH="Label",QM=p.forwardRef((t,e)=>i.jsx(De.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));QM.displayName=tH;var YM=QM;const nH=Df("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ix=p.forwardRef(({className:t,...e},n)=>i.jsx(YM,{ref:n,className:Ce(nH(),t),...e}));ix.displayName=YM.displayName;const zg=MW,ZM=p.createContext({}),an=({...t})=>i.jsx(ZM.Provider,{value:{name:t.name},children:i.jsx(VW,{...t})}),ox=()=>{const t=p.useContext(ZM),e=p.useContext(XM),{getFieldState:n,formState:r}=sx(),s=n(t.name,r);if(!t)throw new Error("useFormField should be used within <FormField>");const{id:o}=e;return{id:o,name:t.name,formItemId:`${o}-form-item`,formDescriptionId:`${o}-form-item-description`,formMessageId:`${o}-form-item-message`,...s}},XM=p.createContext({}),qt=p.forwardRef(({className:t,...e},n)=>{const r=p.useId();return i.jsx(XM.Provider,{value:{id:r},children:i.jsx("div",{ref:n,className:Ce("space-y-2",t),...e})})});qt.displayName="FormItem";const Gt=p.forwardRef(({className:t,...e},n)=>{const{error:r,formItemId:s}=ox();return i.jsx(ix,{ref:n,className:Ce(r&&"text-destructive",t),htmlFor:s,...e})});Gt.displayName="FormLabel";const Kt=p.forwardRef(({...t},e)=>{const{error:n,formItemId:r,formDescriptionId:s,formMessageId:o}=ox();return i.jsx(oI,{ref:e,id:r,"aria-describedby":n?`${s} ${o}`:`${s}`,"aria-invalid":!!n,...t})});Kt.displayName="FormControl";const es=p.forwardRef(({className:t,...e},n)=>{const{formDescriptionId:r}=ox();return i.jsx("p",{ref:n,id:r,className:Ce("text-sm text-muted-foreground",t),...e})});es.displayName="FormDescription";const ln=p.forwardRef(({className:t,children:e,...n},r)=>{const{error:s,formMessageId:o}=ox(),a=s?String((s==null?void 0:s.message)??""):e;return a?i.jsx("p",{ref:r,id:o,className:Ce("text-sm font-medium text-destructive",t),...n,children:a}):null});ln.displayName="FormMessage";const Hw=p.forwardRef(({className:t,...e},n)=>i.jsx("textarea",{className:Ce("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));Hw.displayName="Textarea";function rf(t,[e,n]){return Math.min(n,Math.max(e,t))}var rH=p.createContext(void 0);function Ku(t){const e=p.useContext(rH);return t||e||"ltr"}function A_(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var sH=[" ","Enter","ArrowUp","ArrowDown"],iH=[" ","Enter"],Uf="Select",[ax,lx,oH]=If(Uf),[Qu,Qae]=gr(Uf,[oH,Gu]),cx=Gu(),[aH,Pa]=Qu(Uf),[lH,cH]=Qu(Uf),JM=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:o,value:a,defaultValue:l,onValueChange:c,dir:u,name:d,autoComplete:h,disabled:m,required:g,form:_}=t,v=cx(e),[x,y]=p.useState(null),[w,j]=p.useState(null),[E,P]=p.useState(!1),U=Ku(u),[T=!1,S]=Zi({prop:r,defaultProp:s,onChange:o}),[C,k]=Zi({prop:a,defaultProp:l,onChange:c}),I=p.useRef(null),R=x?_||!!x.closest("form"):!0,[A,G]=p.useState(new Set),ue=Array.from(A).map(B=>B.props.value).join(";");return i.jsx(TR,{...v,children:i.jsxs(aH,{required:g,scope:e,trigger:x,onTriggerChange:y,valueNode:w,onValueNodeChange:j,valueNodeHasChildren:E,onValueNodeHasChildrenChange:P,contentId:ii(),value:C,onValueChange:k,open:T,onOpenChange:S,dir:U,triggerPointerDownPosRef:I,disabled:m,children:[i.jsx(ax.Provider,{scope:e,children:i.jsx(lH,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(B=>{G(q=>new Set(q).add(B))},[]),onNativeOptionRemove:p.useCallback(B=>{G(q=>{const O=new Set(q);return O.delete(B),O})},[]),children:n})}),R?i.jsxs(S4,{"aria-hidden":!0,required:g,tabIndex:-1,name:d,autoComplete:h,value:C,onChange:B=>k(B.target.value),disabled:m,form:_,children:[C===void 0?i.jsx("option",{value:""}):null,Array.from(A)]},ue):null]})})};JM.displayName=Uf;var e4="SelectTrigger",t4=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,o=cx(n),a=Pa(e4,n),l=a.disabled||r,c=Je(e,a.onTriggerChange),u=lx(n),d=p.useRef("touch"),[h,m,g]=N4(v=>{const x=u().filter(j=>!j.disabled),y=x.find(j=>j.value===a.value),w=T4(x,v,y);w!==void 0&&a.onValueChange(w.value)}),_=v=>{l||(a.onOpenChange(!0),g()),v&&(a.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return i.jsx(f_,{asChild:!0,...o,children:i.jsx(De.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":j4(a.value)?"":void 0,...s,ref:c,onClick:we(s.onClick,v=>{v.currentTarget.focus(),d.current!=="mouse"&&_(v)}),onPointerDown:we(s.onPointerDown,v=>{d.current=v.pointerType;const x=v.target;x.hasPointerCapture(v.pointerId)&&x.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(_(v),v.preventDefault())}),onKeyDown:we(s.onKeyDown,v=>{const x=h.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(x&&v.key===" ")&&sH.includes(v.key)&&(_(),v.preventDefault())})})})});t4.displayName=e4;var n4="SelectValue",r4=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:o,placeholder:a="",...l}=t,c=Pa(n4,n),{onValueNodeHasChildrenChange:u}=c,d=o!==void 0,h=Je(e,c.onValueNodeChange);return xn(()=>{u(d)},[u,d]),i.jsx(De.span,{...l,ref:h,style:{pointerEvents:"none"},children:j4(c.value)?i.jsx(i.Fragment,{children:a}):o})});r4.displayName=n4;var uH="SelectIcon",s4=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return i.jsx(De.span,{"aria-hidden":!0,...s,ref:e,children:r||"▼"})});s4.displayName=uH;var dH="SelectPortal",i4=t=>i.jsx(Rf,{asChild:!0,...t});i4.displayName=dH;var Rl="SelectContent",o4=p.forwardRef((t,e)=>{const n=Pa(Rl,t.__scopeSelect),[r,s]=p.useState();if(xn(()=>{s(new DocumentFragment)},[]),!n.open){const o=r;return o?$l.createPortal(i.jsx(a4,{scope:t.__scopeSelect,children:i.jsx(ax.Slot,{scope:t.__scopeSelect,children:i.jsx("div",{children:t.children})})}),o):null}return i.jsx(l4,{...t,ref:e})});o4.displayName=Rl;var ps=10,[a4,Ia]=Qu(Rl),hH="SelectContentImpl",fH=Cl("SelectContent.RemoveScroll"),l4=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:o,onPointerDownOutside:a,side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:_,hideWhenDetached:v,avoidCollisions:x,...y}=t,w=Pa(Rl,n),[j,E]=p.useState(null),[P,U]=p.useState(null),T=Je(e,te=>E(te)),[S,C]=p.useState(null),[k,I]=p.useState(null),R=lx(n),[A,G]=p.useState(!1),ue=p.useRef(!1);p.useEffect(()=>{if(j)return x_(j)},[j]),y_();const B=p.useCallback(te=>{const[le,...xe]=R().map(de=>de.ref.current),[_e]=xe.slice(-1),Pe=document.activeElement;for(const de of te)if(de===Pe||(de==null||de.scrollIntoView({block:"nearest"}),de===le&&P&&(P.scrollTop=0),de===_e&&P&&(P.scrollTop=P.scrollHeight),de==null||de.focus(),document.activeElement!==Pe))return},[R,P]),q=p.useCallback(()=>B([S,j]),[B,S,j]);p.useEffect(()=>{A&&q()},[A,q]);const{onOpenChange:O,triggerPointerDownPosRef:F}=w;p.useEffect(()=>{if(j){let te={x:0,y:0};const le=_e=>{var Pe,de;te={x:Math.abs(Math.round(_e.pageX)-(((Pe=F.current)==null?void 0:Pe.x)??0)),y:Math.abs(Math.round(_e.pageY)-(((de=F.current)==null?void 0:de.y)??0))}},xe=_e=>{te.x<=10&&te.y<=10?_e.preventDefault():j.contains(_e.target)||O(!1),document.removeEventListener("pointermove",le),F.current=null};return F.current!==null&&(document.addEventListener("pointermove",le),document.addEventListener("pointerup",xe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",le),document.removeEventListener("pointerup",xe,{capture:!0})}}},[j,O,F]),p.useEffect(()=>{const te=()=>O(!1);return window.addEventListener("blur",te),window.addEventListener("resize",te),()=>{window.removeEventListener("blur",te),window.removeEventListener("resize",te)}},[O]);const[D,L]=N4(te=>{const le=R().filter(Pe=>!Pe.disabled),xe=le.find(Pe=>Pe.ref.current===document.activeElement),_e=T4(le,te,xe);_e&&setTimeout(()=>_e.ref.current.focus())}),X=p.useCallback((te,le,xe)=>{const _e=!ue.current&&!xe;(w.value!==void 0&&w.value===le||_e)&&(C(te),_e&&(ue.current=!0))},[w.value]),$=p.useCallback(()=>j==null?void 0:j.focus(),[j]),K=p.useCallback((te,le,xe)=>{const _e=!ue.current&&!xe;(w.value!==void 0&&w.value===le||_e)&&I(te)},[w.value]),Y=r==="popper"?qw:c4,ie=Y===qw?{side:l,sideOffset:c,align:u,alignOffset:d,arrowPadding:h,collisionBoundary:m,collisionPadding:g,sticky:_,hideWhenDetached:v,avoidCollisions:x}:{};return i.jsx(a4,{scope:n,content:j,viewport:P,onViewportChange:U,itemRefCallback:X,selectedItem:S,onItemLeave:$,itemTextRefCallback:K,focusSelectedItem:q,selectedItemText:k,position:r,isPositioned:A,searchRef:D,children:i.jsx(Zy,{as:fH,allowPinchZoom:!0,children:i.jsx(Qy,{asChild:!0,trapped:w.open,onMountAutoFocus:te=>{te.preventDefault()},onUnmountAutoFocus:we(s,te=>{var le;(le=w.trigger)==null||le.focus({preventScroll:!0}),te.preventDefault()}),children:i.jsx(zu,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:a,onFocusOutside:te=>te.preventDefault(),onDismiss:()=>w.onOpenChange(!1),children:i.jsx(Y,{role:"listbox",id:w.contentId,"data-state":w.open?"open":"closed",dir:w.dir,onContextMenu:te=>te.preventDefault(),...y,...ie,onPlaced:()=>G(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...y.style},onKeyDown:we(y.onKeyDown,te=>{const le=te.ctrlKey||te.altKey||te.metaKey;if(te.key==="Tab"&&te.preventDefault(),!le&&te.key.length===1&&L(te.key),["ArrowUp","ArrowDown","Home","End"].includes(te.key)){let _e=R().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);if(["ArrowUp","End"].includes(te.key)&&(_e=_e.slice().reverse()),["ArrowUp","ArrowDown"].includes(te.key)){const Pe=te.target,de=_e.indexOf(Pe);_e=_e.slice(de+1)}setTimeout(()=>B(_e)),te.preventDefault()}})})})})})})});l4.displayName=hH;var mH="SelectItemAlignedPosition",c4=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,o=Pa(Rl,n),a=Ia(Rl,n),[l,c]=p.useState(null),[u,d]=p.useState(null),h=Je(e,T=>d(T)),m=lx(n),g=p.useRef(!1),_=p.useRef(!0),{viewport:v,selectedItem:x,selectedItemText:y,focusSelectedItem:w}=a,j=p.useCallback(()=>{if(o.trigger&&o.valueNode&&l&&u&&v&&x&&y){const T=o.trigger.getBoundingClientRect(),S=u.getBoundingClientRect(),C=o.valueNode.getBoundingClientRect(),k=y.getBoundingClientRect();if(o.dir!=="rtl"){const Pe=k.left-S.left,de=C.left-Pe,Ke=T.left-de,Ve=T.width+Ke,bt=Math.max(Ve,S.width),Ze=window.innerWidth-ps,xt=rf(de,[ps,Math.max(ps,Ze-bt)]);l.style.minWidth=Ve+"px",l.style.left=xt+"px"}else{const Pe=S.right-k.right,de=window.innerWidth-C.right-Pe,Ke=window.innerWidth-T.right-de,Ve=T.width+Ke,bt=Math.max(Ve,S.width),Ze=window.innerWidth-ps,xt=rf(de,[ps,Math.max(ps,Ze-bt)]);l.style.minWidth=Ve+"px",l.style.right=xt+"px"}const I=m(),R=window.innerHeight-ps*2,A=v.scrollHeight,G=window.getComputedStyle(u),ue=parseInt(G.borderTopWidth,10),B=parseInt(G.paddingTop,10),q=parseInt(G.borderBottomWidth,10),O=parseInt(G.paddingBottom,10),F=ue+B+A+O+q,D=Math.min(x.offsetHeight*5,F),L=window.getComputedStyle(v),X=parseInt(L.paddingTop,10),$=parseInt(L.paddingBottom,10),K=T.top+T.height/2-ps,Y=R-K,ie=x.offsetHeight/2,te=x.offsetTop+ie,le=ue+B+te,xe=F-le;if(le<=K){const Pe=I.length>0&&x===I[I.length-1].ref.current;l.style.bottom="0px";const de=u.clientHeight-v.offsetTop-v.offsetHeight,Ke=Math.max(Y,ie+(Pe?$:0)+de+q),Ve=le+Ke;l.style.height=Ve+"px"}else{const Pe=I.length>0&&x===I[0].ref.current;l.style.top="0px";const Ke=Math.max(K,ue+v.offsetTop+(Pe?X:0)+ie)+xe;l.style.height=Ke+"px",v.scrollTop=le-K+v.offsetTop}l.style.margin=`${ps}px 0`,l.style.minHeight=D+"px",l.style.maxHeight=R+"px",r==null||r(),requestAnimationFrame(()=>g.current=!0)}},[m,o.trigger,o.valueNode,l,u,v,x,y,o.dir,r]);xn(()=>j(),[j]);const[E,P]=p.useState();xn(()=>{u&&P(window.getComputedStyle(u).zIndex)},[u]);const U=p.useCallback(T=>{T&&_.current===!0&&(j(),w==null||w(),_.current=!1)},[j,w]);return i.jsx(gH,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:g,onScrollButtonChange:U,children:i.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:i.jsx(De.div,{...s,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});c4.displayName=mH;var pH="SelectPopperPosition",qw=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=ps,...o}=t,a=cx(n);return i.jsx(m_,{...a,...o,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});qw.displayName=pH;var[gH,P_]=Qu(Rl,{}),Gw="SelectViewport",u4=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,o=Ia(Gw,n),a=P_(Gw,n),l=Je(e,o.onViewportChange),c=p.useRef(0);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),i.jsx(ax.Slot,{scope:n,children:i.jsx(De.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:we(s.onScroll,u=>{const d=u.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:m}=a;if(m!=null&&m.current&&h){const g=Math.abs(c.current-d.scrollTop);if(g>0){const _=window.innerHeight-ps*2,v=parseFloat(h.style.minHeight),x=parseFloat(h.style.height),y=Math.max(v,x);if(y<_){const w=y+g,j=Math.min(_,w),E=w-j;h.style.height=j+"px",h.style.bottom==="0px"&&(d.scrollTop=E>0?E:0,h.style.justifyContent="flex-end")}}}c.current=d.scrollTop})})})]})});u4.displayName=Gw;var d4="SelectGroup",[yH,xH]=Qu(d4),vH=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=ii();return i.jsx(yH,{scope:n,id:s,children:i.jsx(De.div,{role:"group","aria-labelledby":s,...r,ref:e})})});vH.displayName=d4;var h4="SelectLabel",f4=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=xH(h4,n);return i.jsx(De.div,{id:s.id,...r,ref:e})});f4.displayName=h4;var Wg="SelectItem",[wH,m4]=Qu(Wg),p4=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:o,...a}=t,l=Pa(Wg,n),c=Ia(Wg,n),u=l.value===r,[d,h]=p.useState(o??""),[m,g]=p.useState(!1),_=Je(e,w=>{var j;return(j=c.itemRefCallback)==null?void 0:j.call(c,w,r,s)}),v=ii(),x=p.useRef("touch"),y=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return i.jsx(wH,{scope:n,value:r,disabled:s,textId:v,isSelected:u,onItemTextChange:p.useCallback(w=>{h(j=>j||((w==null?void 0:w.textContent)??"").trim())},[]),children:i.jsx(ax.ItemSlot,{scope:n,value:r,disabled:s,textValue:d,children:i.jsx(De.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":u&&m,"data-state":u?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...a,ref:_,onFocus:we(a.onFocus,()=>g(!0)),onBlur:we(a.onBlur,()=>g(!1)),onClick:we(a.onClick,()=>{x.current!=="mouse"&&y()}),onPointerUp:we(a.onPointerUp,()=>{x.current==="mouse"&&y()}),onPointerDown:we(a.onPointerDown,w=>{x.current=w.pointerType}),onPointerMove:we(a.onPointerMove,w=>{var j;x.current=w.pointerType,s?(j=c.onItemLeave)==null||j.call(c):x.current==="mouse"&&w.currentTarget.focus({preventScroll:!0})}),onPointerLeave:we(a.onPointerLeave,w=>{var j;w.currentTarget===document.activeElement&&((j=c.onItemLeave)==null||j.call(c))}),onKeyDown:we(a.onKeyDown,w=>{var E;((E=c.searchRef)==null?void 0:E.current)!==""&&w.key===" "||(iH.includes(w.key)&&y(),w.key===" "&&w.preventDefault())})})})})});p4.displayName=Wg;var Ud="SelectItemText",g4=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...o}=t,a=Pa(Ud,n),l=Ia(Ud,n),c=m4(Ud,n),u=cH(Ud,n),[d,h]=p.useState(null),m=Je(e,y=>h(y),c.onItemTextChange,y=>{var w;return(w=l.itemTextRefCallback)==null?void 0:w.call(l,y,c.value,c.disabled)}),g=d==null?void 0:d.textContent,_=p.useMemo(()=>i.jsx("option",{value:c.value,disabled:c.disabled,children:g},c.value),[c.disabled,c.value,g]),{onNativeOptionAdd:v,onNativeOptionRemove:x}=u;return xn(()=>(v(_),()=>x(_)),[v,x,_]),i.jsxs(i.Fragment,{children:[i.jsx(De.span,{id:c.textId,...o,ref:m}),c.isSelected&&a.valueNode&&!a.valueNodeHasChildren?$l.createPortal(o.children,a.valueNode):null]})});g4.displayName=Ud;var y4="SelectItemIndicator",x4=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return m4(y4,n).isSelected?i.jsx(De.span,{"aria-hidden":!0,...r,ref:e}):null});x4.displayName=y4;var Kw="SelectScrollUpButton",v4=p.forwardRef((t,e)=>{const n=Ia(Kw,t.__scopeSelect),r=P_(Kw,t.__scopeSelect),[s,o]=p.useState(!1),a=Je(e,r.onScrollButtonChange);return xn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollTop>0;o(u)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(b4,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});v4.displayName=Kw;var Qw="SelectScrollDownButton",w4=p.forwardRef((t,e)=>{const n=Ia(Qw,t.__scopeSelect),r=P_(Qw,t.__scopeSelect),[s,o]=p.useState(!1),a=Je(e,r.onScrollButtonChange);return xn(()=>{if(n.viewport&&n.isPositioned){let l=function(){const u=c.scrollHeight-c.clientHeight,d=Math.ceil(c.scrollTop)<u;o(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?i.jsx(b4,{...t,ref:a,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});w4.displayName=Qw;var b4=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,o=Ia("SelectScrollButton",n),a=p.useRef(null),l=lx(n),c=p.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),xn(()=>{var d;const u=l().find(h=>h.ref.current===document.activeElement);(d=u==null?void 0:u.ref.current)==null||d.scrollIntoView({block:"nearest"})},[l]),i.jsx(De.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:we(s.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(r,50))}),onPointerMove:we(s.onPointerMove,()=>{var u;(u=o.onItemLeave)==null||u.call(o),a.current===null&&(a.current=window.setInterval(r,50))}),onPointerLeave:we(s.onPointerLeave,()=>{c()})})}),bH="SelectSeparator",_4=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return i.jsx(De.div,{"aria-hidden":!0,...r,ref:e})});_4.displayName=bH;var Yw="SelectArrow",_H=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=cx(n),o=Pa(Yw,n),a=Ia(Yw,n);return o.open&&a.position==="popper"?i.jsx(p_,{...s,...r,ref:e}):null});_H.displayName=Yw;function j4(t){return t===""||t===void 0}var S4=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=p.useRef(null),o=Je(e,s),a=A_(n);return p.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,d=Object.getOwnPropertyDescriptor(c,"value").set;if(a!==n&&d){const h=new Event("change",{bubbles:!0});d.call(l,n),l.dispatchEvent(h)}},[a,n]),i.jsx(Mf,{asChild:!0,children:i.jsx("select",{...r,ref:o,defaultValue:n})})});S4.displayName="BubbleSelect";function N4(t){const e=zt(t),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(a=>{const l=n.current+a;e(l),function c(u){n.current=u,window.clearTimeout(r.current),u!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),o=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,o]}function T4(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let a=jH(t,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function jH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var SH=JM,C4=t4,NH=r4,TH=s4,CH=i4,E4=o4,EH=u4,k4=f4,A4=p4,kH=g4,AH=x4,P4=v4,I4=w4,R4=_4;const Es=SH,ks=NH,rs=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(C4,{ref:r,className:Ce("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,i.jsx(TH,{asChild:!0,children:i.jsx(DI,{className:"h-4 w-4 opacity-50"})})]}));rs.displayName=C4.displayName;const M4=p.forwardRef(({className:t,...e},n)=>i.jsx(P4,{ref:n,className:Ce("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(AU,{className:"h-4 w-4"})}));M4.displayName=P4.displayName;const D4=p.forwardRef(({className:t,...e},n)=>i.jsx(I4,{ref:n,className:Ce("flex cursor-default items-center justify-center py-1",t),...e,children:i.jsx(DI,{className:"h-4 w-4"})}));D4.displayName=I4.displayName;const ss=p.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>i.jsx(CH,{children:i.jsxs(E4,{ref:s,className:Ce("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[i.jsx(M4,{}),i.jsx(EH,{className:Ce("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),i.jsx(D4,{})]})}));ss.displayName=E4.displayName;const PH=p.forwardRef(({className:t,...e},n)=>i.jsx(k4,{ref:n,className:Ce("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));PH.displayName=k4.displayName;const gt=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(A4,{ref:r,className:Ce("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(AH,{children:i.jsx(MI,{className:"h-4 w-4"})})}),i.jsx(kH,{children:e})]}));gt.displayName=A4.displayName;const IH=p.forwardRef(({className:t,...e},n)=>i.jsx(R4,{ref:n,className:Ce("-mx-1 my-1 h-px bg-muted",t),...e}));IH.displayName=R4.displayName;const RH=Nt.object({question:Nt.string().min(3,"Question must be at least 3 characters").max(500,"Question cannot exceed 500 characters"),answer:Nt.string().min(1,"Answer is required").max(100,"Answer cannot exceed 100 characters"),explanation:Nt.string().optional().nullable(),hint:Nt.string().optional().nullable(),categoryId:Nt.string().refine(t=>!isNaN(parseInt(t,10)),{message:"Category is required"}),difficulty:Nt.enum(["easy","medium","hard","extreme"]),imageUrl:Nt.union([Nt.string().url("If provided, must be a valid URL"),Nt.string().max(0),Nt.null()]).optional(),creatorName:Nt.string().min(2,"Creator name must be at least 2 characters").max(30,"Creator name cannot exceed 30 characters")});function MH(){const{toast:t}=tn(),[e,n]=p.useState(!1),{data:r=[]}=Et({queryKey:["/api/categories"]}),s=Bg({resolver:$g(RH),defaultValues:{question:"",answer:"",explanation:"",hint:"",categoryId:"",difficulty:"medium",imageUrl:"",creatorName:""}}),o=c=>{const{onChange:u,onBlur:d,name:h,ref:m}=c;return{onChange:u,onBlur:d,name:h,ref:m,value:c.value===null||c.value===void 0?"":c.value}},a=Tn({mutationFn:async c=>{const u=c.imageUrl===""?null:c.imageUrl,d={...c,imageUrl:u,categoryId:parseInt(c.categoryId,10)};return(await Zt("POST","/api/riddles/submit",d)).json()},onSuccess:c=>{c.success?(t({title:"Riddle Submitted!",description:c.message||"Your riddle has been submitted successfully.",duration:5e3}),s.reset(),_s.invalidateQueries({queryKey:["/api/riddles"]}),_s.invalidateQueries({queryKey:["/api/riddles/with-categories"]}),_s.invalidateQueries({queryKey:["/api/user/1/stats"]})):t({title:"Submission Failed",description:c.message||"There was an error submitting your riddle.",variant:"destructive"}),n(!1)},onError:c=>{t({title:"Submission Error",description:"There was a problem connecting to the server. Please try again.",variant:"destructive"}),n(!1)}}),l=c=>{n(!0),a.mutate(c)};return i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Submit Your Riddle"}),i.jsx("p",{className:"text-center text-muted-foreground mb-6",children:"Create your own riddle and earn 10 points! Be creative and challenge other players."}),i.jsx(zg,{...s,children:i.jsxs("form",{onSubmit:s.handleSubmit(l),className:"space-y-6",children:[i.jsx(an,{control:s.control,name:"question",render:({field:c})=>i.jsxs(qt,{children:[i.jsx(Gt,{className:"font-medium",children:"Riddle Question"}),i.jsx(Kt,{children:i.jsx(Hw,{...c,placeholder:"Write your riddle question here...",className:"min-h-[100px]",disabled:e})}),i.jsx(es,{children:"Be clear but clever. A good riddle should be challenging but solvable."}),i.jsx(ln,{})]})}),i.jsx(an,{control:s.control,name:"answer",render:({field:c})=>i.jsxs(qt,{children:[i.jsx(Gt,{className:"font-medium",children:"Answer"}),i.jsx(Kt,{children:i.jsx(Mt,{...c,placeholder:"The solution to your riddle",disabled:e})}),i.jsx(es,{children:"The correct answer to your riddle. Be specific."}),i.jsx(ln,{})]})}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsx(an,{control:s.control,name:"categoryId",render:({field:c})=>i.jsxs(qt,{children:[i.jsx(Gt,{className:"font-medium",children:"Category"}),i.jsxs(Es,{disabled:e,onValueChange:c.onChange,value:c.value,children:[i.jsx(Kt,{children:i.jsx(rs,{children:i.jsx(ks,{placeholder:"Select a category"})})}),i.jsx(ss,{children:r.map(u=>i.jsx(gt,{value:u.id.toString(),children:u.name},u.id))})]}),i.jsx(ln,{})]})}),i.jsx(an,{control:s.control,name:"difficulty",render:({field:c})=>i.jsxs(qt,{children:[i.jsx(Gt,{className:"font-medium",children:"Difficulty"}),i.jsxs(Es,{disabled:e,onValueChange:c.onChange,value:c.value,children:[i.jsx(Kt,{children:i.jsx(rs,{children:i.jsx(ks,{placeholder:"Select difficulty"})})}),i.jsxs(ss,{children:[i.jsx(gt,{value:"easy",children:"Easy"}),i.jsx(gt,{value:"medium",children:"Medium"}),i.jsx(gt,{value:"hard",children:"Hard"}),i.jsx(gt,{value:"extreme",children:"Extreme"})]})]}),i.jsx(ln,{})]})})]}),i.jsx(an,{control:s.control,name:"hint",render:({field:c})=>i.jsxs(qt,{children:[i.jsx(Gt,{className:"font-medium",children:"Hint (Optional)"}),i.jsx(Kt,{children:i.jsx(Mt,{...o(c),placeholder:"Provide a helpful hint",disabled:e})}),i.jsx(es,{children:"A clue to help players solve your riddle."}),i.jsx(ln,{})]})}),i.jsx(an,{control:s.control,name:"explanation",render:({field:c})=>i.jsxs(qt,{children:[i.jsx(Gt,{className:"font-medium",children:"Explanation (Optional)"}),i.jsx(Kt,{children:i.jsx(Hw,{...o(c),placeholder:"Explain the answer...",className:"min-h-[80px]",disabled:e})}),i.jsx(es,{children:"Explain why your answer is correct or provide additional context."}),i.jsx(ln,{})]})}),i.jsx(an,{control:s.control,name:"imageUrl",render:({field:c})=>i.jsxs(qt,{children:[i.jsx(Gt,{className:"font-medium",children:"Image URL (Optional)"}),i.jsx(Kt,{children:i.jsx(Mt,{...o(c),placeholder:"https://example.com/image.jpg",type:"url",disabled:e})}),i.jsx(es,{children:"For visual riddles, provide a direct URL to your image. You can leave this empty."}),i.jsx(ln,{})]})}),i.jsx(an,{control:s.control,name:"creatorName",render:({field:c})=>i.jsxs(qt,{children:[i.jsx(Gt,{className:"font-medium",children:"Creator Name"}),i.jsx(Kt,{children:i.jsx(Mt,{...o(c),placeholder:"Your name or nickname",disabled:e})}),i.jsx(es,{children:"Let others know who created this riddle."}),i.jsx(ln,{})]})}),i.jsx(ee,{type:"submit",className:"w-full",disabled:e,children:e?"Submitting...":"Submit Riddle"})]})})]})}const DH="/assets/WordPuzzleBrainTeasers-Doy_mB8w.jpg",LH="/assets/images-Dw2rlrTh.png";function OH(){return i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Visual Riddle Examples"}),i.jsx("p",{className:"text-dark-light mb-6",children:"Visual riddles like rebuses and visual brain teasers are a fun way to challenge players. Here are some examples to inspire your own submissions:"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"border rounded-lg overflow-hidden",children:i.jsx("img",{src:LH,alt:"Rebus Puzzles",className:"w-full h-auto object-contain"})}),i.jsx("h3",{className:"font-medium text-lg",children:"Rebus Puzzles"}),i.jsx("p",{className:"text-dark-light text-sm",children:"These puzzles use pictures, symbols, and arrangement of words to represent common phrases or expressions."})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"border rounded-lg overflow-hidden",children:i.jsx("img",{src:DH,alt:"Word Brain Teasers",className:"w-full h-auto object-contain"})}),i.jsx("h3",{className:"font-medium text-lg",children:"Word Puzzles"}),i.jsx("p",{className:"text-dark-light text-sm",children:"Word puzzles use creative arrangements of text, symbols, and sometimes images to create a hidden meaning."})]})]}),i.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-100",children:[i.jsx("h3",{className:"font-medium mb-2",children:"How to Create Great Visual Riddles:"}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 text-dark-light",children:[i.jsx("li",{children:"Make sure the image clearly shows all the elements needed to solve the puzzle"}),i.jsx("li",{children:"Include a descriptive question to guide the player"}),i.jsx("li",{children:"Provide an image URL that is publicly accessible"}),i.jsx("li",{children:"Consider sharing a unique visual concept rather than copying existing puzzles"})]})]})]})}function VH(){const[t,e]=Pf(),{data:n={score:0,solvedCount:0,avgTimeSeconds:0}}=Et({queryKey:["/api/user/1/stats"]});return i.jsxs("div",{className:"container max-w-4xl mx-auto px-4 py-8 pb-16",children:[i.jsx("div",{className:"flex items-center mb-6",children:i.jsxs(ee,{variant:"ghost",size:"sm",className:"mr-2",onClick:()=>e("/"),children:[i.jsx(ml,{className:"h-4 w-4 mr-2"}),"Back to Home"]})}),i.jsxs("div",{className:"mb-8 text-center",children:[i.jsx("h1",{className:"text-3xl font-extrabold mb-2 text-gradient",children:"Create Your Own Riddle"}),i.jsx("p",{className:"text-dark-light",children:"Share your brain teasers with the Burble community!"})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Your Stats"}),i.jsxs("div",{className:"flex flex-wrap justify-between",children:[i.jsxs("div",{className:"text-center p-2 flex-1",children:[i.jsx("p",{className:"text-dark-light text-sm mb-1",children:"Total Score"}),i.jsx("p",{className:"text-2xl font-bold",children:(n==null?void 0:n.score)||0})]}),i.jsxs("div",{className:"text-center p-2 flex-1",children:[i.jsx("p",{className:"text-dark-light text-sm mb-1",children:"Riddles Solved"}),i.jsx("p",{className:"text-2xl font-bold",children:(n==null?void 0:n.solvedCount)||0})]}),i.jsxs("div",{className:"text-center p-2 flex-1",children:[i.jsx("p",{className:"text-dark-light text-sm mb-1",children:"Avg. Time"}),i.jsxs("p",{className:"text-2xl font-bold",children:[(n==null?void 0:n.avgTimeSeconds)||0,"s"]})]})]}),i.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:i.jsxs("p",{className:"text-center text-dark-light text-sm",children:["Earn ",i.jsx("span",{className:"font-semibold text-success",children:"10 points"})," for each riddle you submit!"]})})]}),i.jsx(OH,{}),i.jsx(MH,{}),i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[i.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Tips for Creating Great Riddles"}),i.jsxs("ul",{className:"space-y-3 list-disc list-inside ml-4",children:[i.jsx("li",{children:"Make sure your riddle has a unique and clear solution"}),i.jsx("li",{children:"Add a detailed explanation to help others understand the answer"}),i.jsx("li",{children:"For visual riddles, provide an image URL that shows the riddle clearly"}),i.jsx("li",{children:"Double-check your spelling and grammar before submission"}),i.jsx("li",{children:"Be creative but fair - the best riddles are challenging but solvable"})]})]})]})}const mC={Food:{4:["cake","taco","rice","soup","bean","fish","pear","plum"],5:["pizza","apple","salad","pasta","fruit","onion","bread","steak"],6:["burger","cheese","cookie","banana","orange","tomato","potato"],7:["avocado","chicken","pancake","almond","noodles","sausage"],8:["broccoli","mushroom","sandwich","blueberry","eggplant","pineapple"]},Animals:{4:["frog","wolf","bear","deer","bird","fish","lion","duck"],5:["tiger","sheep","snake","mouse","panda","koala","horse"],6:["turtle","giraffe","monkey","beaver","weasel","rabbit"],7:["dolphin","penguin","octopus","raccoon","leopard","buffalo"],8:["elephant","hedgehog","flamingo","kangaroo","scorpion","crocodile"]},Colors:{4:["blue","pink","gold","gray","teal","cyan"],5:["green","brown","black","white","amber","azure"],6:["purple","silver","indigo","maroon","ochre","orange"],7:["crimson","magenta","cerulean","lavender","turquoise"],8:["burgundy","periwinkle","sapphire","platinum","marigold"]},Cities:{4:["rome","oslo","bali","lima","york","lyon","riga","kiev"],5:["tokyo","paris","miami","delhi","dubai","seoul","cairo"],6:["london","berlin","moscow","madrid","munich","sydney"],7:["beijing","chicago","toronto","atlanta","houston","phoenix"],8:["shanghai","istanbul","budapest","montreal","florence","helsinki"]},Items:{4:["fork","lamp","book","ring","desk","mask","pen","phone","shoe"],5:["table","chair","clock","brush","phone","purse","scarf","watch"],6:["mirror","pillow","remote","candle","wallet","hammer","laptop"],7:["charger","suitcase","backpack","earbuds","cushion","toaster"],8:["scissors","notebook","umbrella","keyboard","television","bookshelf"]},Sports:{4:["golf","swim","bike","surf","bowl","judo","dive","ski"],5:["chess","rugby","skate","climb","kayak","dance","jog","cycle"],6:["soccer","hockey","tennis","boxing","rowing","hiking","racing"],7:["archery","bowling","cricket","fencing","jogging","baseball"],8:["football","basketball","wrestling","athletics","marathon","swimming"]},Jobs:{4:["chef","cop","vet","host","waiter","maid","tech","tutor"],5:["nurse","actor","pilot","agent","clerk","coach","judge","baker"],6:["banker","dentist","painter","teacher","doctor","driver","singer"],7:["manager","surgeon","designer","plumber","engineer","janitor"],8:["fireman","therapist","director","musician","developer","scientist"]},Words:{4:["play","work","time","love","life","help","kind","cool","open"],5:["happy","brave","peace","learn","enjoy","smart","dream","laugh"],6:["joyful","friend","nature","wealth","energy","wonder","wisdom"],7:["inspire","courage","freedom","harmony","believe","achieve"],8:["faithful","knowledge","gratitude","laughter","adventure","compassion"]}};function FH(){const{toast:t}=tn(),{user:e}=Rn(),[n,r]=p.useState("setup"),[s,o]=p.useState("4"),[a,l]=p.useState("medium"),[c,u]=p.useState("Food"),[d,h]=p.useState(""),[m,g]=p.useState([]),[_,v]=p.useState(""),[x,y]=p.useState([]),[w,j]=p.useState(10),[E,P]=p.useState(10),[U,T]=p.useState(""),[S,C]=p.useState(!1),[k,I]=p.useState(!1);p.useState([]);const R=async()=>{let O=10;a==="easy"?O=15:a==="hard"&&(O=5),g([]),y([]),j(O),P(O),v(""),C(!1),I(!1),r("loading"),T("Loading a verified dictionary word...");try{const F=mC[c][s];let D=!1,L="",X=0;const $=10;for(;!D&&X<$;){L=F[Math.floor(Math.random()*F.length)],X++;try{(await(await fetch(`/api/dictionary/validate/${L}`)).json()).isValid&&(D=!0)}catch(Y){console.error("Error validating word:",Y),D=!0}}h(L),r("playing");let K=`${a.charAt(0).toUpperCase()+a.slice(1)} mode`;T(`Category: ${c} - Find the ${s}-letter word (${K})`),t({title:`${K} Selected`,description:a==="hard"?`You have ${O} attempts, but you can get 1 hint!`:`You have ${O} attempts to guess the word.`})}catch(F){console.error("Error starting game:",F),t({title:"Error Starting Game",description:"Something went wrong while starting the game. Please try again.",variant:"destructive"}),r("setup")}},A=O=>{if(O.length!==parseInt(s))return 0;let F=0;const D=d.split(""),L=O.split("");for(let X=0;X<D.length;X++)L[X]===D[X]&&(F+=2,D[X]="*",L[X]="#");for(let X=0;X<L.length;X++)if(L[X]!=="#"){const $=D.indexOf(L[X]);$!==-1&&(F+=1,D[$]="*")}return F},G=()=>{if(a!=="hard"||S)return;const O=[];for(let L=0;L<d.length;L++)O.push(L);O.sort(()=>Math.random()-.5);const F=O[0],D=`Letter at position ${F+1} is "${d[F].toUpperCase()}"`;I(!0),C(!0),t({title:"Hint Used!",description:D,className:"bg-yellow-100 border-yellow-700"})},ue=async()=>{if(_.length!==parseInt(s)){t({title:"Invalid Length",description:`Your guess must be exactly ${s} letters.`,variant:"destructive"});return}const O=_.toLowerCase();try{if(!(await(await fetch(`/api/dictionary/validate/${O}`)).json()).isValid){t({title:"Invalid Word",description:`"${O}" is not a valid English word. Please try again.`,variant:"destructive"});return}const L=A(O);if(g([...m,O]),y([...x,L]),v(""),P(E-1),O===d){r("gameover");const X=w-(E-1);T(`Congratulations! You found the word "${d.toUpperCase()}" with ${E-1} attempts remaining! (Used ${X} attempts)`);return}E<=1&&(r("gameover"),T(`Game Over! The word was "${d.toUpperCase()}". Better luck next time!`),e&&t({title:"Answer Revealed",description:"You won't earn points for solving this word now.",variant:"destructive"}))}catch(F){console.error("Error validating word:",F);const D=A(O);g([...m,O]),y([...x,D]),v(""),P(E-1)}},B=()=>m.map((O,F)=>i.jsxs("div",{className:"flex items-center mb-3",children:[i.jsx(Fe,{className:"mr-3 bg-primary text-white w-8 h-8 flex items-center justify-center text-sm",children:x[F]}),i.jsx("div",{className:"flex space-x-2",children:O.split("").map((D,L)=>i.jsx("div",{className:"w-10 h-10 border-2 border-gray-300 rounded-md flex items-center justify-center uppercase font-bold text-lg",children:D},L))})]},F)),q=()=>Array.from({length:parseInt(s)}).map((O,F)=>i.jsx("div",{className:"w-10 h-10 border-2 border-gray-300 rounded-md flex items-center justify-center"},F));return i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs("div",{className:"max-w-xl mx-auto",children:[i.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-center mb-2",children:"Burble"}),i.jsx("p",{className:"text-center text-gray-500 mb-6",children:"A word guessing game where points show how close you are!"}),n==="setup"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Game Difficulty"}),i.jsxs(Es,{value:a,onValueChange:O=>l(O),children:[i.jsx(rs,{children:i.jsx(ks,{placeholder:"Select game difficulty"})}),i.jsxs(ss,{children:[i.jsx(gt,{value:"easy",children:"Easy Mode (15 Attempts)"}),i.jsx(gt,{value:"medium",children:"Medium Mode (10 Attempts)"}),i.jsx(gt,{value:"hard",children:"Hard Mode (5 Attempts + 1 Hint)"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Word Length"}),i.jsxs(Es,{value:s,onValueChange:O=>o(O),children:[i.jsx(rs,{children:i.jsx(ks,{placeholder:"Select word length"})}),i.jsxs(ss,{children:[i.jsx(gt,{value:"4",children:"4 Letters"}),i.jsx(gt,{value:"5",children:"5 Letters"}),i.jsx(gt,{value:"6",children:"6 Letters"}),i.jsx(gt,{value:"7",children:"7 Letters"}),i.jsx(gt,{value:"8",children:"8 Letters"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Select Category"}),i.jsxs(Es,{value:c,onValueChange:O=>u(O),children:[i.jsx(rs,{children:i.jsx(ks,{placeholder:"Select category"})}),i.jsx(ss,{children:Object.keys(mC).map(O=>i.jsx(gt,{value:O,children:O},O))})]})]}),i.jsx("div",{className:"pt-4",children:i.jsx(ee,{className:"w-full",onClick:R,children:"Start Game"})})]}),n==="loading"&&i.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary mb-4"}),i.jsx("p",{className:"text-lg font-medium",children:U}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Ensuring we use real dictionary words..."})]}),(n==="playing"||n==="gameover")&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx(Fe,{className:"px-3 py-1 text-sm",children:U}),i.jsxs(Fe,{variant:"outline",className:"px-3 py-1",children:["Attempts: ",w-E,"/",w]})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"space-y-2",children:B()}),n==="playing"&&i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"flex space-x-2",children:q()}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx(Mt,{value:_,onChange:O=>v(O.target.value.toLowerCase()),placeholder:`Enter a ${s}-letter word`,maxLength:parseInt(s),className:"flex-1"}),i.jsx(ee,{onClick:ue,children:"Submit"})]}),a==="hard"&&!S&&i.jsx("div",{className:"flex justify-center pt-2",children:i.jsx(ee,{variant:"outline",onClick:G,className:"text-sm",children:"Use Hint (1 available)"})}),k&&i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3 text-center text-yellow-800 text-sm",children:"Hint used! Check the toast message for your hint."})]}),n==="gameover"&&i.jsxs("div",{className:"flex justify-center space-x-4 pt-4",children:[i.jsx(ee,{onClick:R,variant:"default",children:"Play Again"}),i.jsx(ee,{onClick:()=>r("setup"),variant:"outline",children:"Change Settings"})]})]})]})]}),i.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"How to Play Burble"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsx("p",{children:"1. Choose a difficulty level (4-8 letter words) and category."}),i.jsx("p",{children:"2. You have 5 attempts to guess the target word."}),i.jsx("p",{children:"3. After each guess, you'll see a score showing how close you are:"}),i.jsxs("ul",{className:"list-disc pl-6 space-y-1",children:[i.jsx("li",{children:"1 point for each correct letter in the wrong position"}),i.jsx("li",{children:"2 points for each letter in the correct position"})]}),i.jsx("p",{children:"4. The maximum score equals the total points possible for the word (2 points per letter)."}),i.jsx("p",{children:"5. Use the score to refine your next guess!"})]})]})]})})}var G0="rovingFocusGroup.onEntryFocus",UH={bubbles:!1,cancelable:!0},ux="RovingFocusGroup",[Zw,L4,BH]=If(ux),[$H,dx]=gr(ux,[BH]),[zH,WH]=$H(ux),O4=p.forwardRef((t,e)=>i.jsx(Zw.Provider,{scope:t.__scopeRovingFocusGroup,children:i.jsx(Zw.Slot,{scope:t.__scopeRovingFocusGroup,children:i.jsx(HH,{...t,ref:e})})}));O4.displayName=ux;var HH=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:o,currentTabStopId:a,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:d=!1,...h}=t,m=p.useRef(null),g=Je(e,m),_=Ku(o),[v=null,x]=Zi({prop:a,defaultProp:l,onChange:c}),[y,w]=p.useState(!1),j=zt(u),E=L4(n),P=p.useRef(!1),[U,T]=p.useState(0);return p.useEffect(()=>{const S=m.current;if(S)return S.addEventListener(G0,j),()=>S.removeEventListener(G0,j)},[j]),i.jsx(zH,{scope:n,orientation:r,dir:_,loop:s,currentTabStopId:v,onItemFocus:p.useCallback(S=>x(S),[x]),onItemShiftTab:p.useCallback(()=>w(!0),[]),onFocusableItemAdd:p.useCallback(()=>T(S=>S+1),[]),onFocusableItemRemove:p.useCallback(()=>T(S=>S-1),[]),children:i.jsx(De.div,{tabIndex:y||U===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:we(t.onMouseDown,()=>{P.current=!0}),onFocus:we(t.onFocus,S=>{const C=!P.current;if(S.target===S.currentTarget&&C&&!y){const k=new CustomEvent(G0,UH);if(S.currentTarget.dispatchEvent(k),!k.defaultPrevented){const I=E().filter(B=>B.focusable),R=I.find(B=>B.active),A=I.find(B=>B.id===v),ue=[R,A,...I].filter(Boolean).map(B=>B.ref.current);U4(ue,d)}}P.current=!1}),onBlur:we(t.onBlur,()=>w(!1))})})}),V4="RovingFocusGroupItem",F4=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:o,...a}=t,l=ii(),c=o||l,u=WH(V4,n),d=u.currentTabStopId===c,h=L4(n),{onFocusableItemAdd:m,onFocusableItemRemove:g}=u;return p.useEffect(()=>{if(r)return m(),()=>g()},[r,m,g]),i.jsx(Zw.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:i.jsx(De.span,{tabIndex:d?0:-1,"data-orientation":u.orientation,...a,ref:e,onMouseDown:we(t.onMouseDown,_=>{r?u.onItemFocus(c):_.preventDefault()}),onFocus:we(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:we(t.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){u.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const v=KH(_,u.orientation,u.dir);if(v!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let y=h().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")y.reverse();else if(v==="prev"||v==="next"){v==="prev"&&y.reverse();const w=y.indexOf(_.currentTarget);y=u.loop?QH(y,w+1):y.slice(w+1)}setTimeout(()=>U4(y))}})})})});F4.displayName=V4;var qH={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function GH(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function KH(t,e,n){const r=GH(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return qH[r]}function U4(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function QH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var B4=O4,$4=F4,I_="Tabs",[YH,Yae]=gr(I_,[dx]),z4=dx(),[ZH,R_]=YH(I_),W4=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:o,orientation:a="horizontal",dir:l,activationMode:c="automatic",...u}=t,d=Ku(l),[h,m]=Zi({prop:r,onChange:s,defaultProp:o});return i.jsx(ZH,{scope:n,baseId:ii(),value:h,onValueChange:m,orientation:a,dir:d,activationMode:c,children:i.jsx(De.div,{dir:d,"data-orientation":a,...u,ref:e})})});W4.displayName=I_;var H4="TabsList",q4=p.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,o=R_(H4,n),a=z4(n);return i.jsx(B4,{asChild:!0,...a,orientation:o.orientation,dir:o.dir,loop:r,children:i.jsx(De.div,{role:"tablist","aria-orientation":o.orientation,...s,ref:e})})});q4.displayName=H4;var G4="TabsTrigger",K4=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...o}=t,a=R_(G4,n),l=z4(n),c=Z4(a.baseId,r),u=X4(a.baseId,r),d=r===a.value;return i.jsx($4,{asChild:!0,...l,focusable:!s,active:d,children:i.jsx(De.button,{type:"button",role:"tab","aria-selected":d,"aria-controls":u,"data-state":d?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...o,ref:e,onMouseDown:we(t.onMouseDown,h=>{!s&&h.button===0&&h.ctrlKey===!1?a.onValueChange(r):h.preventDefault()}),onKeyDown:we(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&a.onValueChange(r)}),onFocus:we(t.onFocus,()=>{const h=a.activationMode!=="manual";!d&&!s&&h&&a.onValueChange(r)})})})});K4.displayName=G4;var Q4="TabsContent",Y4=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:o,...a}=t,l=R_(Q4,n),c=Z4(l.baseId,r),u=X4(l.baseId,r),d=r===l.value,h=p.useRef(d);return p.useEffect(()=>{const m=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(m)},[]),i.jsx(yr,{present:s||d,children:({present:m})=>i.jsx(De.div,{"data-state":d?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:u,tabIndex:0,...a,ref:e,style:{...t.style,animationDuration:h.current?"0s":void 0},children:m&&o})})});Y4.displayName=Q4;function Z4(t,e){return`${t}-trigger-${e}`}function X4(t,e){return`${t}-content-${e}`}var XH=W4,J4=q4,e5=K4,t5=Y4;const Yu=XH,zl=p.forwardRef(({className:t,...e},n)=>i.jsx(J4,{ref:n,className:Ce("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));zl.displayName=J4.displayName;const gn=p.forwardRef(({className:t,...e},n)=>i.jsx(e5,{ref:n,className:Ce("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));gn.displayName=e5.displayName;const Jn=p.forwardRef(({className:t,...e},n)=>i.jsx(t5,{ref:n,className:Ce("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));Jn.displayName=t5.displayName;function n5(){const{user:t}=Rn(),{data:e=[],isLoading:n,error:r}=Et({queryKey:["/api/user",t==null?void 0:t.id,"favorites"],enabled:!!t}),s=async l=>{if(!t)return!1;try{const c=`favorite-${t.id}-${l}`,u=sessionStorage.getItem(c);if(u!==null)return u==="true";const d=await Zt("GET",`/api/user/${t.id}/favorites/check/${l}`);if(!d.ok)throw new Error(`HTTP error ${d.status}`);const h=await d.json();return sessionStorage.setItem(c,String(h.isFavorited)),h.isFavorited}catch{return!1}},o=Tn({mutationFn:async l=>{if(!t)throw new Error("User not authenticated");try{return await(await Zt("POST",`/api/user/${t.id}/favorites/toggle/${l}`,{})).json()}catch(c){throw console.error("Error toggling favorite:",c),c}},onSuccess:()=>{_s.invalidateQueries({queryKey:["/api/user",t==null?void 0:t.id,"favorites"]})},onError:l=>{console.error("Error in favorite mutation:",l)}});return{favorites:e,isLoadingFavorites:n,favoritesError:r,checkIsFavorited:s,toggleFavorite:(l,c)=>{o.mutate(l,{onSuccess:u=>{if(t){const d=`favorite-${t.id}-${l}`;sessionStorage.setItem(d,String(u.added)),_s.invalidateQueries({queryKey:["/api/user",t.id,"favorites"]})}c!=null&&c.onSuccess&&c.onSuccess()},onError:u=>{c!=null&&c.onError&&c.onError(u)}})},isTogglingFavorite:o.isPending}}const r5=p.createContext(void 0);function JH({children:t}){const[e,n]=p.useState(()=>localStorage.getItem("theme")||"light"),[r,s]=p.useState(!1);return p.useEffect(()=>{const o=window.document.documentElement;o.classList.remove("light","dark");let a=e;if(e==="system"&&(a=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),o.classList.add(a),s(a==="dark"),localStorage.setItem("theme",e),e==="system"){const l=window.matchMedia("(prefers-color-scheme: dark)"),c=()=>{o.classList.remove("light","dark");const u=l.matches?"dark":"light";o.classList.add(u),s(u==="dark")};return l.addEventListener("change",c),()=>l.removeEventListener("change",c)}},[e]),i.jsx(r5.Provider,{value:{theme:e,setTheme:n,isDarkMode:r},children:t})}function eq(){const t=p.useContext(r5);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}function s5({riddleId:t,size:e="md",className:n,alwaysShow:r=!1}){const{user:s}=Rn(),{isDarkMode:o}=eq(),{checkIsFavorited:a,toggleFavorite:l,isTogglingFavorite:c}=n5(),[u,d]=p.useState(!1),[h,m]=p.useState(!0),[g,_]=p.useState(!1),{toast:v}=tn(),x={sm:"w-6 h-6",md:"w-8 h-8",lg:"w-10 h-10"};p.useEffect(()=>{(async()=>{m(!0);try{if(s){const j=await a(t);d(j)}}catch(j){console.error("Error checking favorite status:",j)}finally{m(!1)}})()},[t,s,a]);const y=w=>{if(w.stopPropagation(),!s){v({title:"Sign in required",description:"Please sign in to save favorites",variant:"destructive"});return}if(c||h)return;_(!0),setTimeout(()=>_(!1),500);const j=!u;d(j),l(t,{onError:()=>{d(!j),v({title:j?"Failed to add favorite":"Failed to remove favorite",description:"Please try again",variant:"destructive"})},onSuccess:()=>{v({title:j?"Added to favorites":"Removed from favorites",variant:"default"})}})};return!s&&!r?null:!s&&r?i.jsx("button",{className:Ce("flex items-center justify-center rounded-full p-1 transition-all duration-200",o?"text-gray-400 hover:text-gray-300":"text-gray-400 hover:text-gray-500",n),onClick:w=>{w.stopPropagation(),v({title:"Sign in required",description:"Please sign in to save favorites",variant:"destructive"})},"aria-label":"Add to favorites (requires sign in)",children:i.jsx(pu,{className:Ce(x[e],"transition-all duration-200 fill-none")})}):i.jsx("button",{className:Ce("flex items-center justify-center rounded-full p-1 transition-all duration-200",u?"text-red-500 dark:text-red-400 hover:text-red-600 dark:hover:text-red-500":o?"text-gray-400 hover:text-red-400":"text-gray-400 hover:text-red-500",h||c?"opacity-50 cursor-not-allowed":"",n),onClick:y,disabled:h||c,"aria-label":u?"Remove from favorites":"Add to favorites",children:i.jsx(pu,{className:Ce(x[e],"transition-all duration-300",g&&u&&"animate-heartbeat",u?"fill-current":"fill-none")})})}function tq(){const{toast:t}=tn(),[e,n]=p.useState(!1),[r,s]=p.useState(!1),o=Tn({mutationFn:async({riddle:h})=>{n(!0);try{const m=await fetch("/api/ai/hint",{method:"POST",body:JSON.stringify({riddle:h}),headers:{"Content-Type":"application/json"}});if(!m.ok)throw new Error(`Error: ${m.status}`);return await m.json()}catch(m){throw console.error("Error getting AI hint:",m),m}finally{n(!1)}},onError:()=>{t({title:"Error",description:"Failed to generate AI hint. Please try again later.",variant:"destructive"})}}),a=Tn({mutationFn:async({category:h,difficulty:m})=>{s(!0);try{const g=await fetch("/api/ai/generate-riddle",{method:"POST",body:JSON.stringify({category:h,difficulty:m}),headers:{"Content-Type":"application/json"}});if(!g.ok)throw new Error(`Error: ${g.status}`);return await g.json()}catch(g){throw console.error("Error generating AI riddle:",g),g}finally{s(!1)}},onError:()=>{t({title:"Error",description:"Failed to generate riddle. Please try again later.",variant:"destructive"})}}),l=Tn({mutationFn:async({question:h,answer:m,explanation:g,hint:_,categoryId:v,difficulty:x})=>{const y=await fetch("/api/ai/save-riddle",{method:"POST",body:JSON.stringify({question:h,answer:m,explanation:g,hint:_,categoryId:v,difficulty:x}),headers:{"Content-Type":"application/json"}});if(!y.ok)throw new Error(`Error: ${y.status}`);return await y.json()},onSuccess:()=>{t({title:"Success",description:"Riddle saved successfully!"})},onError:()=>{t({title:"Error",description:"Failed to save riddle. Please try again.",variant:"destructive"})}});return{getAIHint:async h=>{try{return await o.mutateAsync({riddle:h})}catch{return null}},generateAIRiddle:async(h,m)=>{try{return await a.mutateAsync({category:h,difficulty:m})}catch{return null}},saveGeneratedRiddle:async h=>l.mutateAsync(h),isGeneratingHint:e,isGeneratingRiddle:r,isSaving:l.isPending}}const sf=lM,nq=cM,i5=p.forwardRef(({className:t,...e},n)=>i.jsx(Xy,{ref:n,className:Ce("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));i5.displayName=Xy.displayName;const ju=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(nq,{children:[i.jsx(i5,{}),i.jsxs(Jy,{ref:r,className:Ce("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,i.jsxs(uM,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(zy,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ju.displayName=Jy.displayName;const Hg=({className:t,...e})=>i.jsx("div",{className:Ce("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});Hg.displayName="DialogHeader";const o5=({className:t,...e})=>i.jsx("div",{className:Ce("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});o5.displayName="DialogFooter";const Su=p.forwardRef(({className:t,...e},n)=>i.jsx(ex,{ref:n,className:Ce("text-lg font-semibold leading-none tracking-tight",t),...e}));Su.displayName=ex.displayName;const hx=p.forwardRef(({className:t,...e},n)=>i.jsx(tx,{ref:n,className:Ce("text-sm text-muted-foreground",t),...e}));hx.displayName=tx.displayName;function rq(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var M_="ScrollArea",[a5,Zae]=gr(M_),[sq,cs]=a5(M_),l5=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:o=600,...a}=t,[l,c]=p.useState(null),[u,d]=p.useState(null),[h,m]=p.useState(null),[g,_]=p.useState(null),[v,x]=p.useState(null),[y,w]=p.useState(0),[j,E]=p.useState(0),[P,U]=p.useState(!1),[T,S]=p.useState(!1),C=Je(e,I=>c(I)),k=Ku(s);return i.jsx(sq,{scope:n,type:r,dir:k,scrollHideDelay:o,scrollArea:l,viewport:u,onViewportChange:d,content:h,onContentChange:m,scrollbarX:g,onScrollbarXChange:_,scrollbarXEnabled:P,onScrollbarXEnabledChange:U,scrollbarY:v,onScrollbarYChange:x,scrollbarYEnabled:T,onScrollbarYEnabledChange:S,onCornerWidthChange:w,onCornerHeightChange:E,children:i.jsx(De.div,{dir:k,...a,ref:C,style:{position:"relative","--radix-scroll-area-corner-width":y+"px","--radix-scroll-area-corner-height":j+"px",...t.style}})})});l5.displayName=M_;var c5="ScrollAreaViewport",u5=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...o}=t,a=cs(c5,n),l=p.useRef(null),c=Je(e,l,a.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),i.jsx(De.div,{"data-radix-scroll-area-viewport":"",...o,ref:c,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...t.style},children:i.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});u5.displayName=c5;var ji="ScrollAreaScrollbar",D_=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=cs(ji,t.__scopeScrollArea),{onScrollbarXEnabledChange:o,onScrollbarYEnabledChange:a}=s,l=t.orientation==="horizontal";return p.useEffect(()=>(l?o(!0):a(!0),()=>{l?o(!1):a(!1)}),[l,o,a]),s.type==="hover"?i.jsx(iq,{...r,ref:e,forceMount:n}):s.type==="scroll"?i.jsx(oq,{...r,ref:e,forceMount:n}):s.type==="auto"?i.jsx(d5,{...r,ref:e,forceMount:n}):s.type==="always"?i.jsx(L_,{...r,ref:e}):null});D_.displayName=ji;var iq=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=cs(ji,t.__scopeScrollArea),[o,a]=p.useState(!1);return p.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),a(!0)},d=()=>{c=window.setTimeout(()=>a(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",d),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",d)}}},[s.scrollArea,s.scrollHideDelay]),i.jsx(yr,{present:n||o,children:i.jsx(d5,{"data-state":o?"visible":"hidden",...r,ref:e})})}),oq=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=cs(ji,t.__scopeScrollArea),o=t.orientation==="horizontal",a=mx(()=>c("SCROLL_END"),100),[l,c]=rq("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),p.useEffect(()=>{const u=s.viewport,d=o?"scrollLeft":"scrollTop";if(u){let h=u[d];const m=()=>{const g=u[d];h!==g&&(c("SCROLL"),a()),h=g};return u.addEventListener("scroll",m),()=>u.removeEventListener("scroll",m)}},[s.viewport,o,c,a]),i.jsx(yr,{present:n||l!=="hidden",children:i.jsx(L_,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:we(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:we(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),d5=p.forwardRef((t,e)=>{const n=cs(ji,t.__scopeScrollArea),{forceMount:r,...s}=t,[o,a]=p.useState(!1),l=t.orientation==="horizontal",c=mx(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,d=n.viewport.offsetHeight<n.viewport.scrollHeight;a(l?u:d)}},10);return Nu(n.viewport,c),Nu(n.content,c),i.jsx(yr,{present:r||o,children:i.jsx(L_,{"data-state":o?"visible":"hidden",...s,ref:e})})}),L_=p.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=cs(ji,t.__scopeScrollArea),o=p.useRef(null),a=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=g5(l.viewport,l.content),d={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:m=>o.current=m,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:m=>a.current=m};function h(m,g){return hq(m,a.current,l,g)}return n==="horizontal"?i.jsx(aq,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollLeft,g=pC(m,l,s.dir);o.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=h(m,s.dir))}}):n==="vertical"?i.jsx(lq,{...d,ref:e,onThumbPositionChange:()=>{if(s.viewport&&o.current){const m=s.viewport.scrollTop,g=pC(m,l);o.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=h(m))}}):null}),aq=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,o=cs(ji,t.__scopeScrollArea),[a,l]=p.useState(),c=p.useRef(null),u=Je(e,c,o.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(f5,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:o.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:o.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":fx(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.x),onDragScroll:d=>t.onDragScroll(d.x),onWheelScroll:(d,h)=>{if(o.viewport){const m=o.viewport.scrollLeft+d.deltaX;t.onWheelScroll(m),x5(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Gg(a.paddingLeft),paddingEnd:Gg(a.paddingRight)}})}})}),lq=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,o=cs(ji,t.__scopeScrollArea),[a,l]=p.useState(),c=p.useRef(null),u=Je(e,c,o.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),i.jsx(f5,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":fx(n)+"px",...t.style},onThumbPointerDown:d=>t.onThumbPointerDown(d.y),onDragScroll:d=>t.onDragScroll(d.y),onWheelScroll:(d,h)=>{if(o.viewport){const m=o.viewport.scrollTop+d.deltaY;t.onWheelScroll(m),x5(m,h)&&d.preventDefault()}},onResize:()=>{c.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Gg(a.paddingTop),paddingEnd:Gg(a.paddingBottom)}})}})}),[cq,h5]=a5(ji),f5=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:o,onThumbPointerUp:a,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:d,onResize:h,...m}=t,g=cs(ji,n),[_,v]=p.useState(null),x=Je(e,C=>v(C)),y=p.useRef(null),w=p.useRef(""),j=g.viewport,E=r.content-r.viewport,P=zt(d),U=zt(c),T=mx(h,10);function S(C){if(y.current){const k=C.clientX-y.current.left,I=C.clientY-y.current.top;u({x:k,y:I})}}return p.useEffect(()=>{const C=k=>{const I=k.target;(_==null?void 0:_.contains(I))&&P(k,E)};return document.addEventListener("wheel",C,{passive:!1}),()=>document.removeEventListener("wheel",C,{passive:!1})},[j,_,E,P]),p.useEffect(U,[r,U]),Nu(_,T),Nu(g.content,T),i.jsx(cq,{scope:n,scrollbar:_,hasThumb:s,onThumbChange:zt(o),onThumbPointerUp:zt(a),onThumbPositionChange:U,onThumbPointerDown:zt(l),children:i.jsx(De.div,{...m,ref:x,style:{position:"absolute",...m.style},onPointerDown:we(t.onPointerDown,C=>{C.button===0&&(C.target.setPointerCapture(C.pointerId),y.current=_.getBoundingClientRect(),w.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),S(C))}),onPointerMove:we(t.onPointerMove,S),onPointerUp:we(t.onPointerUp,C=>{const k=C.target;k.hasPointerCapture(C.pointerId)&&k.releasePointerCapture(C.pointerId),document.body.style.webkitUserSelect=w.current,g.viewport&&(g.viewport.style.scrollBehavior=""),y.current=null})})})}),qg="ScrollAreaThumb",m5=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=h5(qg,t.__scopeScrollArea);return i.jsx(yr,{present:n||s.hasThumb,children:i.jsx(uq,{ref:e,...r})})}),uq=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,o=cs(qg,n),a=h5(qg,n),{onThumbPositionChange:l}=a,c=Je(e,h=>a.onThumbChange(h)),u=p.useRef(void 0),d=mx(()=>{u.current&&(u.current(),u.current=void 0)},100);return p.useEffect(()=>{const h=o.viewport;if(h){const m=()=>{if(d(),!u.current){const g=fq(h,l);u.current=g,l()}};return l(),h.addEventListener("scroll",m),()=>h.removeEventListener("scroll",m)}},[o.viewport,d,l]),i.jsx(De.div,{"data-state":a.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:we(t.onPointerDownCapture,h=>{const g=h.target.getBoundingClientRect(),_=h.clientX-g.left,v=h.clientY-g.top;a.onThumbPointerDown({x:_,y:v})}),onPointerUp:we(t.onPointerUp,a.onThumbPointerUp)})});m5.displayName=qg;var O_="ScrollAreaCorner",p5=p.forwardRef((t,e)=>{const n=cs(O_,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?i.jsx(dq,{...t,ref:e}):null});p5.displayName=O_;var dq=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=cs(O_,n),[o,a]=p.useState(0),[l,c]=p.useState(0),u=!!(o&&l);return Nu(s.scrollbarX,()=>{var h;const d=((h=s.scrollbarX)==null?void 0:h.offsetHeight)||0;s.onCornerHeightChange(d),c(d)}),Nu(s.scrollbarY,()=>{var h;const d=((h=s.scrollbarY)==null?void 0:h.offsetWidth)||0;s.onCornerWidthChange(d),a(d)}),u?i.jsx(De.div,{...r,ref:e,style:{width:o,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Gg(t){return t?parseInt(t,10):0}function g5(t,e){const n=t/e;return isNaN(n)?0:n}function fx(t){const e=g5(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function hq(t,e,n,r="ltr"){const s=fx(n),o=s/2,a=e||o,l=s-a,c=n.scrollbar.paddingStart+a,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,d=n.content-n.viewport,h=r==="ltr"?[0,d]:[d*-1,0];return y5([c,u],h)(t)}function pC(t,e,n="ltr"){const r=fx(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,o=e.scrollbar.size-s,a=e.content-e.viewport,l=o-r,c=n==="ltr"?[0,a]:[a*-1,0],u=rf(t,c);return y5([0,a],[0,l])(u)}function y5(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function x5(t,e){return t>0&&t<e}var fq=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const o={left:t.scrollLeft,top:t.scrollTop},a=n.left!==o.left,l=n.top!==o.top;(a||l)&&e(),n=o,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function mx(t,e){const n=zt(t),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Nu(t,e){const n=zt(e);xn(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var v5=l5,mq=u5,pq=p5;const w5=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(v5,{ref:r,className:Ce("relative overflow-hidden",t),...n,children:[i.jsx(mq,{className:"h-full w-full rounded-[inherit]",children:e}),i.jsx(b5,{}),i.jsx(pq,{})]}));w5.displayName=v5.displayName;const b5=p.forwardRef(({className:t,orientation:e="vertical",...n},r)=>i.jsx(D_,{ref:r,orientation:e,className:Ce("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:i.jsx(m5,{className:"relative flex-1 rounded-full bg-border"})}));b5.displayName=D_.displayName;function _5({riddle:t,onGetHint:e}){const{getAIHint:n,isGeneratingHint:r}=tq(),[s,o]=p.useState(!1),[a,l]=p.useState(null),[c,u]=p.useState([]),d=async()=>{if(a){o(!0);return}try{const h=await n(t);h&&(l(h.hint),u(h.citations||[]),e&&e(h.hint),o(!0))}catch(h){console.error("Error getting AI hint:",h)}};return i.jsxs(i.Fragment,{children:[i.jsxs(ee,{variant:"outline",size:"sm",className:"flex items-center gap-1 bg-gradient-to-r from-purple-500 to-blue-400 hover:from-purple-600 hover:to-blue-500 text-white border-none",onClick:d,disabled:r,children:[i.jsx(gu,{className:"w-4 h-4"}),i.jsx("span",{children:"AI Hint"})]}),i.jsx(sf,{open:s,onOpenChange:o,modal:!1,children:i.jsxs(ju,{className:"max-w-md",onPointerDownOutside:h=>h.preventDefault(),children:[i.jsxs(Hg,{children:[i.jsx(Su,{className:"text-xl font-bold text-purple-600",children:"AI Assistant Hint"}),i.jsx(hx,{children:"Powered by AI to help you solve the riddle - you can continue playing while viewing this hint"})]}),i.jsx(w5,{className:"max-h-[300px] mt-4",children:r?i.jsxs("div",{className:"flex flex-col items-center justify-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mb-4"}),i.jsx("p",{className:"text-sm text-gray-500",children:"Generating a helpful hint..."})]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-100",children:i.jsx("p",{className:"text-gray-800",children:a})}),c.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsx("h4",{className:"text-sm font-semibold text-gray-700",children:"Sources:"}),i.jsx("ul",{className:"text-xs text-gray-500 space-y-1",children:c.map((h,m)=>i.jsx("li",{children:i.jsx("a",{href:h,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline truncate block",children:h})},m))})]})]})}),i.jsx(o5,{children:i.jsx(ee,{onClick:()=>o(!1),children:"Close"})})]})})]})}function gq(){const{toast:t}=tn(),{user:e}=Rn(),[n,r]=p.useState("setup"),[s,o]=p.useState("medium"),[a,l]=p.useState("all"),[c,u]=p.useState(null),[d,h]=p.useState(""),[m,g]=p.useState(0),[_,v]=p.useState(0),[x,y]=p.useState({current:0,total:0}),[w,j]=p.useState(!1),[E,P]=p.useState(!1),[U,T]=p.useState([]),S=B=>{const q=(B.explanation||"").toLowerCase()+" "+(B.hint||"").toLowerCase();return q.includes("movie")?"Movie":q.includes("tv")||q.includes("show")||q.includes("series")?"TV Show":q.includes("food")||q.includes("dish")||q.includes("meal")?"Food":q.includes("item")||q.includes("object")||q.includes("thing")?"Household Item":q.includes("sport")||q.includes("game")||q.includes("athletic")?"Sport/Game":q.includes("place")||q.includes("location")||q.includes("destination")?"Place":q.includes("celebrity")||q.includes("famous")||q.includes("star")?"Celebrity":q.includes("character")||q.includes("fictional")?"Character":q.includes("book")||q.includes("novel")?"Book":q.includes("song")||q.includes("music")||q.includes("band")?"Music":q.includes("car")||q.includes("vehicle")||q.includes("transport")?"Vehicle":q.includes("animal")||q.includes("creature")?"Animal":"Entertainment"},{data:C=[]}=Et({queryKey:["/api/riddles/with-categories"],select:B=>B.filter(q=>{if(q.category.name!=="Emoji Guess")return!1;if(a==="all")return!0;const F=((q.explanation||"")+" "+(q.hint||"")).toLowerCase();switch(a){case"movies":return F.includes("movie")||F.includes("film");case"tv-shows":return F.includes("tv")||F.includes("show")||F.includes("series");case"foods":return F.includes("food")||F.includes("dish")||F.includes("meal");case"household-items":return F.includes("item")||F.includes("object")||F.includes("tool");default:return F.includes(typeof a=="string"?a.toLowerCase():"")}})}),k=C.filter(B=>B.difficulty===s&&!U.includes(B.id)),I=()=>{if(k.length===0){t({title:"No puzzles available",description:"Try a different difficulty level or type",variant:"destructive"});return}const B=Math.floor(Math.random()*k.length),q=k[B];u(q),h(""),g(0),j(!1),P(!1),y({current:U.length+1,total:k.length}),r("playing")},R=()=>{if(!c)return;const B=K=>K.toLowerCase().replace(/[^\w\s]/g,"").replace(/\s+/g," ").trim(),q=K=>{const Y={zero:"0",one:"1",two:"2",three:"3",four:"4",five:"5",six:"6",seven:"7",eight:"8",nine:"9",ten:"10",eleven:"11",twelve:"12",thirteen:"13",fourteen:"14",fifteen:"15",twenty:"20",thirty:"30",forty:"40",fifty:"50",hundred:"100",thousand:"1000"};let ie=K;return Object.keys(Y).forEach(te=>{const le=new RegExp(`\\b${te}\\b`,"g");ie=ie.replace(le,Y[te])}),ie},O=B(d),F=B(c.answer),D=q(O),L=q(F);let X=O===F||D===L;if(!X){const K=O.replace(/\s+/g,""),Y=F.replace(/\s+/g,""),ie=D.replace(/\s+/g,""),te=L.replace(/\s+/g,"");(K===Y||ie===te)&&(X=!0)}let $=0;X?(s==="easy"?$=10:s==="medium"?$=15:s==="hard"?$=25:s==="extreme"&&($=40),$=Math.max(0,$-m*5),v(K=>K+$),P(!0),T(K=>[...K,c.id]),e&&c&&fetch("/api/mark-viewed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({riddleId:c.id,userId:e.id})}).catch(K=>{console.error("Error marking riddle as viewed:",K)}),t({title:"Correct!",description:`You earned ${$} points.`,variant:"default"})):t({title:"Not quite right",description:"Try again or use a hint!",variant:"destructive"})},A=()=>{c&&(g(B=>B+1),j(!0),t({title:"Hint used",description:"Using hints reduces points earned",variant:"destructive"}))},G=()=>{if(k.length<=1){r("complete");return}const B=k.filter(F=>F.id!==(c==null?void 0:c.id)&&!U.includes(F.id));if(B.length===0){r("complete");return}const q=Math.floor(Math.random()*B.length),O=B[q];u(O),h(""),g(0),j(!1),P(!1),y({current:U.length+1,total:B.length+1})},ue=()=>{r("setup"),u(null),h(""),g(0),v(0),y({current:0,total:0}),j(!1),P(!1),T([])};return i.jsxs("div",{className:"container max-w-4xl py-8",children:[i.jsx("h1",{className:"text-3xl font-bold text-center mb-6 text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 to-purple-500",children:"Emoji Guess Challenge"}),i.jsxs(re,{className:"mb-6",children:[i.jsxs(ye,{children:[i.jsx(he,{children:"How to Play"}),i.jsx(Ue,{children:"Guess the movie, food, or item based on the emoji combinations!"})]}),i.jsx(ae,{children:i.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[i.jsx("li",{children:"Each puzzle is a series of emojis that hint at a movie, food, item, or other concept"}),i.jsx("li",{children:"Type your guess in the answer box and submit"}),i.jsx("li",{children:"If you're stuck, you can use a hint, but it will reduce your points"}),i.jsx("li",{children:"Points are awarded based on difficulty: Easy (10), Medium (15), Hard (25), Extreme (40)"}),i.jsx("li",{children:"Each hint used reduces your points by 5"})]})})]}),n==="setup"&&i.jsxs(re,{className:"border-2 border-indigo-200 overflow-hidden shadow-md",children:[i.jsx(ye,{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-b-2 border-indigo-200",children:i.jsx(he,{className:"text-center text-xl font-bold text-indigo-800",children:i.jsxs("span",{className:"flex justify-center items-center gap-2",children:[i.jsx("i",{className:"ri-game-line text-indigo-600 text-2xl"}),"Start New Emoji Game",i.jsx("i",{className:"ri-emotion-laugh-line text-indigo-600 text-2xl"})]})})}),i.jsxs(ae,{className:"pt-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsxs("h3",{className:"text-lg font-bold mb-3 text-indigo-800 flex items-center",children:[i.jsx("span",{className:"bg-indigo-100 p-1.5 rounded-full mr-2",children:i.jsx("i",{className:"ri-speed-up-line text-indigo-600"})}),"Select Difficulty:"]}),i.jsxs("div",{className:"flex flex-wrap gap-3 p-3 bg-indigo-50 dark:bg-indigo-900/20 rounded-lg border border-indigo-200 dark:border-indigo-700 shadow-sm",children:[i.jsx(Fe,{className:`cursor-pointer px-5 py-2.5 text-base font-bold border-2 rounded-lg transition-all duration-200 transform hover:scale-105 ${s==="easy"?"bg-green-600 text-white border-green-700 shadow-md dark:bg-green-500 dark:border-green-600":"bg-white dark:bg-gray-800 hover:bg-green-50 dark:hover:bg-green-900/30 text-green-700 dark:text-green-400 border-green-400 dark:border-green-700"}`,onClick:()=>o("easy"),children:"Easy (10 pts)"}),i.jsx(Fe,{className:`cursor-pointer px-5 py-2.5 text-base font-bold border-2 rounded-lg transition-all duration-200 transform hover:scale-105 ${s==="medium"?"bg-blue-600 text-white border-blue-700 shadow-md dark:bg-blue-500 dark:border-blue-600":"bg-white dark:bg-gray-800 hover:bg-blue-50 dark:hover:bg-blue-900/30 text-blue-700 dark:text-blue-400 border-blue-400 dark:border-blue-700"}`,onClick:()=>o("medium"),children:"Medium (15 pts)"}),i.jsx(Fe,{className:`cursor-pointer px-5 py-2.5 text-base font-bold border-2 rounded-lg transition-all duration-200 transform hover:scale-105 ${s==="hard"?"bg-amber-600 text-white border-amber-700 shadow-md dark:bg-amber-500 dark:border-amber-600":"bg-white dark:bg-gray-800 hover:bg-amber-50 dark:hover:bg-amber-900/30 text-amber-700 dark:text-amber-400 border-amber-400 dark:border-amber-700"}`,onClick:()=>o("hard"),children:"Hard (25 pts)"}),i.jsx(Fe,{className:`cursor-pointer px-5 py-2.5 text-base font-bold border-2 rounded-lg transition-all duration-200 transform hover:scale-105 ${s==="extreme"?"bg-red-600 text-white border-red-700 shadow-md dark:bg-red-500 dark:border-red-600":"bg-white dark:bg-gray-800 hover:bg-red-50 dark:hover:bg-red-900/30 text-red-700 dark:text-red-400 border-red-400 dark:border-red-700"}`,onClick:()=>o("extreme"),children:"Extreme (40 pts)"})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("h3",{className:"text-lg font-bold mb-3 text-indigo-800 flex items-center",children:[i.jsx("span",{className:"bg-indigo-100 p-1.5 rounded-full mr-2",children:i.jsx("i",{className:"ri-shapes-line text-indigo-600"})}),"Select Category:"]}),i.jsx("div",{className:"bg-indigo-50 p-4 rounded-lg border border-indigo-100",children:i.jsxs(Yu,{defaultValue:"all",onValueChange:B=>l(B),className:"w-full",children:[i.jsxs(zl,{className:"grid grid-cols-4 mb-4 bg-white p-1.5 border-2 border-indigo-200 rounded-lg",children:[i.jsx(gn,{value:"all",className:"font-bold text-base data-[state=active]:bg-gradient-to-r data-[state=active]:from-indigo-500 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-md rounded-md px-4 py-2.5",children:"All Types"}),i.jsx(gn,{value:"movies",className:"font-bold text-base data-[state=active]:bg-gradient-to-r data-[state=active]:from-indigo-500 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-md rounded-md px-4 py-2.5",children:"Movies"}),i.jsx(gn,{value:"foods",className:"font-bold text-base data-[state=active]:bg-gradient-to-r data-[state=active]:from-indigo-500 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-md rounded-md px-4 py-2.5",children:"Foods"}),i.jsx(gn,{value:"household-items",className:"font-bold text-base data-[state=active]:bg-gradient-to-r data-[state=active]:from-indigo-500 data-[state=active]:to-purple-600 data-[state=active]:text-white data-[state=active]:shadow-md rounded-md px-4 py-2.5",children:"Items"})]}),i.jsxs("div",{className:"grid grid-cols-4 gap-2 text-center",children:[i.jsx("div",{className:"text-4xl",children:"🎮"}),i.jsx("div",{className:"text-4xl",children:"🎬"}),i.jsx("div",{className:"text-4xl",children:"🍕"}),i.jsx("div",{className:"text-4xl",children:"⚽"})]})]})})]})]}),i.jsx(Of,{className:"bg-gradient-to-r from-indigo-50 to-purple-50 border-t-2 border-indigo-200 p-6",children:i.jsxs(ee,{onClick:I,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold py-4 px-6 rounded-lg shadow-lg text-lg border-2 border-green-600 transition-all duration-200 transform hover:scale-105",children:[i.jsx("i",{className:"ri-gamepad-line mr-2 text-xl"}),"Start Emoji Game"]})})]}),n==="playing"&&c&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs(he,{children:["Puzzle ",x.current," of ",x.total]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fe,{className:`py-1 px-3 font-semibold ${s==="easy"?"bg-green-100 text-green-800 border-2 border-green-300":s==="medium"?"bg-blue-100 text-blue-800 border-2 border-blue-300":s==="hard"?"bg-amber-100 text-amber-800 border-2 border-amber-300":"bg-red-100 text-red-800 border-2 border-red-300"}`,children:i.jsx("span",{className:"font-bold",children:s.toUpperCase()})}),i.jsxs(Fe,{className:"bg-indigo-100 text-indigo-800 border-2 border-indigo-300 py-1 px-3 font-semibold",children:["Score: ",i.jsx("span",{className:"font-bold ml-1",children:_})]}),c&&i.jsx(s5,{riddleId:c.id,size:"sm",alwaysShow:!0,className:"transition-all duration-300 hover:scale-110 ml-1"})]})]}),c.explanation&&i.jsx("div",{className:"mt-3 bg-gradient-to-r from-yellow-100 to-orange-100 border-2 border-yellow-300 rounded-lg p-4 shadow-sm",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"font-bold text-base mr-1 text-yellow-900",children:"CATEGORY:"}),i.jsx(Fe,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-4 py-1 text-base uppercase font-bold border border-yellow-600 shadow-sm",children:(()=>{const q=((c.explanation||"")+" "+(c.hint||"")).toLowerCase();return q.includes("movie")||q.includes("film")?"Movies":q.includes("tv")||q.includes("show")||q.includes("series")?"TV Shows":q.includes("food")||q.includes("dish")||q.includes("meal")?"Foods":q.includes("item")||q.includes("object")||q.includes("tool")?"Household Items":q.includes("place")||q.includes("location")?"Places":q.includes("sport")||q.includes("game")||q.includes("athletic")?"Sports":q.includes("celebrity")||q.includes("person")||q.includes("actor")?"Famous People":q.includes("animal")||q.includes("creature")?"Animals":"Entertainment"})()})]})})]}),i.jsxs(ae,{className:"flex flex-col items-center",children:[i.jsxs("div",{className:"relative w-full max-w-xl mx-auto",children:[i.jsx("div",{className:"mb-3 flex justify-center",children:i.jsxs(Fe,{className:"bg-indigo-600 text-white px-4 py-2 text-sm font-bold",children:["Difficulty: ",c.difficulty.charAt(0).toUpperCase()+c.difficulty.slice(1)]})}),i.jsxs("div",{className:"text-6xl md:text-8xl my-4 text-center leading-normal p-8 bg-gradient-to-br from-amber-100 to-purple-100 rounded-xl border-4 border-yellow-300 shadow-lg relative",children:[i.jsx("div",{className:"animate-pulse",children:c.question}),i.jsxs("div",{className:"absolute -top-5 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-6 py-1.5 rounded-full text-base font-bold uppercase shadow-lg border-2 border-yellow-600",children:["Category: ",S(c)]})]}),i.jsx("div",{className:"mt-2 bg-amber-50 border border-amber-200 rounded-lg p-3 text-center",children:i.jsxs("span",{className:"text-amber-800 font-medium",children:["Guess the ",S(c).toLowerCase()," based on these emojis!"]})})]}),w&&i.jsxs("div",{className:"bg-gradient-to-r from-amber-50 to-yellow-100 border-2 border-amber-300 p-4 rounded-lg mb-6 w-full shadow-md",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx("div",{className:"bg-amber-200 p-2 rounded-full",children:i.jsx("i",{className:"ri-lightbulb-flash-line text-amber-600 text-xl"})}),i.jsx("h3",{className:"font-bold text-amber-800 text-lg",children:"Hint:"}),i.jsx(Fe,{className:"ml-auto bg-red-100 text-red-600 border-2 border-red-300 px-3 py-1 text-sm font-bold",children:"-5 points"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-gray-800 font-medium bg-white p-3 rounded-md border border-amber-200",children:c.hint}),i.jsx("div",{className:"flex justify-end",children:i.jsx(_5,{riddle:`These emoji '${c.question}' represent '${c.answer}' which is a ${c.explanation.toLowerCase().includes("movie")?"movie":c.explanation.toLowerCase().includes("tv")?"TV show":c.explanation.toLowerCase().includes("food")?"food item":c.explanation.toLowerCase().includes("item")?"household item":"entertainment concept"}. Give a middle-school friendly hint that helps understand what these emoji represent.`})})]})]}),E?i.jsxs("div",{className:"w-full mt-4",children:[i.jsxs("div",{className:"bg-gradient-to-r from-green-100 to-emerald-100 border-3 border-green-300 p-6 rounded-lg mb-6 relative shadow-lg",children:[i.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 bg-gradient-to-r from-green-500 to-emerald-600 text-white px-6 py-1.5 rounded-full text-base font-bold uppercase shadow-lg border-2 border-green-400",children:"🎉 CORRECT! 🎉"}),i.jsxs("div",{className:"flex items-center justify-between mb-4 mt-2",children:[i.jsx("h3",{className:"font-bold text-green-800 text-xl",children:"Answer:"}),i.jsx(Fe,{className:"bg-gradient-to-r from-yellow-500 to-orange-500 text-white px-4 py-1 text-base uppercase font-bold border border-yellow-600 shadow-sm",children:c.explanation.toLowerCase().includes("movie")?"Movie":c.explanation.toLowerCase().includes("food")?"Food":c.explanation.toLowerCase().includes("item")?"Item":"General"})]}),i.jsxs("div",{className:"bg-white p-5 rounded-lg border-2 border-green-200 shadow-inner mb-6",children:[i.jsx("p",{className:"text-green-700 text-3xl font-bold pb-4 text-center",children:c.answer}),i.jsxs("div",{className:"flex justify-center items-center gap-3 mb-4",children:[i.jsx(Fe,{className:"bg-purple-100 text-purple-700 border-2 border-purple-300 px-4 py-1.5 text-base font-bold",children:"+15 Points"}),i.jsxs(Fe,{className:"bg-blue-100 text-blue-700 border-2 border-blue-300 px-4 py-1.5 text-base font-bold",children:["Total: ",_," Points"]})]})]}),i.jsxs("div",{className:"bg-gradient-to-r from-green-50 to-teal-50 p-5 rounded-lg border-2 border-green-200 shadow-md mb-4",children:[i.jsxs("h4",{className:"font-bold text-green-800 mb-3 text-lg flex items-center",children:[i.jsx("div",{className:"bg-green-200 p-1.5 rounded-full mr-2",children:i.jsx("i",{className:"ri-information-line text-green-700 text-xl"})}),"About this puzzle:"]}),i.jsx("p",{className:"text-green-800 text-lg",children:c.explanation})]})]}),i.jsx(ee,{onClick:G,className:"w-full bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold py-3 text-lg shadow-md",children:"Next Puzzle →"})]}):i.jsxs("div",{className:"w-full max-w-md bg-white p-4 rounded-lg border-2 border-indigo-200 shadow-md",children:[i.jsx("h3",{className:"font-bold text-indigo-800 mb-3 text-center",children:"Enter Your Answer"}),i.jsxs("div",{className:"flex gap-2 mb-4",children:[i.jsx(Mt,{type:"text",placeholder:"Your answer...",value:d,onChange:B=>h(B.target.value),className:"flex-1 border-2 border-indigo-300 focus:border-indigo-500 h-11"}),i.jsx(ee,{onClick:R,disabled:!d.trim(),className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold px-5 h-11",children:"Check"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ee,{variant:"outline",onClick:A,disabled:w,className:"flex-1 border-2 border-amber-400 text-amber-700 hover:bg-amber-50 font-semibold",children:"Get Hint (-5 points)"}),i.jsx(ee,{variant:"outline",className:"flex-1 border-2 border-red-400 text-red-700 hover:bg-red-50 font-semibold",onClick:()=>{e&&c&&fetch("/api/mark-viewed",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({riddleId:c.id,userId:e.id})}).catch(B=>{console.error("Error marking riddle as viewed:",B)}),P(!0),t({title:"You gave up",description:"No points awarded. The answer is revealed.",variant:"destructive"})},children:"Give Up (No points)"})]})]})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(ee,{variant:"outline",onClick:ue,children:"Back to Setup"}),i.jsx("div",{className:"text-right",children:i.jsxs("p",{className:"text-sm text-gray-500",children:["Hints Used: ",m]})})]})]}),n==="complete"&&i.jsxs(re,{className:"border-4 border-purple-300 shadow-lg overflow-hidden",children:[i.jsx(ye,{className:"bg-gradient-to-r from-yellow-100 to-purple-100 border-b-4 border-yellow-300",children:i.jsx(he,{className:"text-center text-2xl font-bold text-purple-800",children:i.jsxs("span",{className:"flex justify-center items-center gap-2",children:[i.jsx("i",{className:"ri-trophy-line text-yellow-500 text-3xl"}),"Game Complete!",i.jsx("i",{className:"ri-trophy-line text-yellow-500 text-3xl"})]})})}),i.jsxs(ae,{className:"text-center py-8 bg-gradient-to-br from-white to-purple-50",children:[i.jsxs("div",{className:"mb-6 relative inline-block",children:[i.jsx("div",{className:"text-7xl font-bold mb-2 bg-gradient-to-r from-yellow-500 to-purple-600 bg-clip-text text-transparent",children:_}),i.jsx("p",{className:"text-xl mb-6 font-bold text-purple-800",children:"Your Final Score"}),i.jsx("div",{className:"absolute -top-4 -right-4 text-4xl animate-pulse",children:"🎉"}),i.jsx("div",{className:"absolute -bottom-4 -left-4 text-4xl animate-pulse",children:"🎊"})]}),i.jsx("div",{className:"bg-white p-4 rounded-lg border-2 border-purple-200 shadow-md mb-8 max-w-md mx-auto",children:i.jsx("p",{className:"text-lg text-purple-800",children:"You've completed all the puzzles at this difficulty level!"})}),i.jsx(ee,{onClick:ue,className:"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold py-3 px-8 rounded-lg shadow-lg text-lg",children:"Play Again"})]})]})]})}var V_="Progress",F_=100,[yq,Xae]=gr(V_),[xq,vq]=yq(V_),j5=p.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:o=wq,...a}=t;(s||s===0)&&!gC(s)&&console.error(bq(`${s}`,"Progress"));const l=gC(s)?s:F_;r!==null&&!yC(r,l)&&console.error(_q(`${r}`,"Progress"));const c=yC(r,l)?r:null,u=Kg(c)?o(c,l):void 0;return i.jsx(xq,{scope:n,value:c,max:l,children:i.jsx(De.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":Kg(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":T5(c,l),"data-value":c??void 0,"data-max":l,...a,ref:e})})});j5.displayName=V_;var S5="ProgressIndicator",N5=p.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=vq(S5,n);return i.jsx(De.div,{"data-state":T5(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});N5.displayName=S5;function wq(t,e){return`${Math.round(t/e*100)}%`}function T5(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function Kg(t){return typeof t=="number"}function gC(t){return Kg(t)&&!isNaN(t)&&t>0}function yC(t,e){return Kg(t)&&!isNaN(t)&&t<=e&&t>=0}function bq(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${F_}\`.`}function _q(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${F_} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var C5=j5,jq=N5;const Tr=p.forwardRef(({className:t,value:e,...n},r)=>i.jsx(C5,{ref:r,className:Ce("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:i.jsx(jq,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));Tr.displayName=C5.displayName;const E5=({isOpen:t,onClose:e,userAnswer:n,onShowAnswer:r,onTryAgain:s,onNextQuestion:o,hint:a,isAttemptsExhausted:l=!1})=>i.jsx(sf,{open:t,onOpenChange:e,modal:!1,children:i.jsx(ju,{className:"sm:max-w-md mx-4 rounded-xl shadow-xl p-6 fade-in",onPointerDownOutside:c=>c.preventDefault(),children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-20 h-20 mx-auto bg-error bg-opacity-10 rounded-full flex items-center justify-center text-error mb-4",children:i.jsx("i",{className:"ri-close-line text-4xl"})}),i.jsx(Su,{className:"text-2xl font-bold font-poppins text-dark mb-2",children:"Not Quite!"}),i.jsxs(hx,{className:"text-dark-light mb-4",children:['Your answer: "',n,'"']}),i.jsx("div",{className:"bg-light-gray p-3 rounded-lg mb-6",children:i.jsx("p",{className:"text-dark-light text-sm",children:a})}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsxs(ee,{onClick:r,variant:"outline",className:"flex-1 bg-light-gray hover:bg-light-gray/80 text-dark font-medium py-3 rounded-lg transition duration-200",children:[i.jsx("i",{className:"ri-lightbulb-line mr-1"}),"Show Answer"]}),l&&o?i.jsxs(ee,{onClick:o,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-medium py-3 rounded-lg transition duration-200",children:[i.jsx("i",{className:"ri-arrow-right-line mr-1"}),"Next Question"]}):i.jsx(ee,{onClick:s,className:"flex-1 bg-primary hover:bg-primary/90 text-white font-medium py-3 rounded-lg transition duration-200",children:"Try Again"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"You can continue playing while this dialog is open"})]})})});function Sq(t){if(typeof Proxy>"u")return t;const e=new Map,n=(...r)=>t(...r);return new Proxy(n,{get:(r,s)=>s==="create"?t:(e.has(s)||e.set(s,t(s)),e.get(s))})}function px(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Xw=t=>Array.isArray(t);function k5(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let r=0;r<n;r++)if(e[r]!==t[r])return!1;return!0}function of(t){return typeof t=="string"||Array.isArray(t)}function xC(t){const e=[{},{}];return t==null||t.values.forEach((n,r)=>{e[0][r]=n.get(),e[1][r]=n.getVelocity()}),e}function U_(t,e,n,r){if(typeof e=="function"){const[s,o]=xC(r);e=e(n!==void 0?n:t.custom,s,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,o]=xC(r);e=e(n!==void 0?n:t.custom,s,o)}return e}function gx(t,e,n){const r=t.getProps();return U_(r,e,n!==void 0?n:r.custom,t)}const B_=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$_=["initial",...B_],Bf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Wl=new Set(Bf),Wi=t=>t*1e3,Hi=t=>t/1e3,Nq={type:"spring",stiffness:500,damping:25,restSpeed:10},Tq=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Cq={type:"keyframes",duration:.8},Eq={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},kq=(t,{keyframes:e})=>e.length>2?Cq:Wl.has(t)?t.startsWith("scale")?Tq(e[1]):Nq:Eq;function z_(t,e){return t?t[e]||t.default||t:void 0}const Aq={skipAnimations:!1,useManualTiming:!1},Pq=t=>t!==null;function yx(t,{repeat:e,repeatType:n="loop"},r){const s=t.filter(Pq),o=e&&n!=="loop"&&e%2===1?0:s.length-1;return!o||r===void 0?s[o]:r}const tr=t=>t;let Jw=tr;function Iq(t){let e=new Set,n=new Set,r=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,d=!1,h=!1)=>{const g=h&&r?e:n;return d&&o.add(u),g.has(u)||g.add(u),u},cancel:u=>{n.delete(u),o.delete(u)},process:u=>{if(a=u,r){s=!0;return}r=!0,[e,n]=[n,e],n.clear(),e.forEach(l),r=!1,s&&(s=!1,c.process(u))}};return c}const ep=["read","resolveKeyframes","update","preRender","render","postRender"],Rq=40;function A5(t,e){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,a=ep.reduce((y,w)=>(y[w]=Iq(o),y),{}),{read:l,resolveKeyframes:c,update:u,preRender:d,render:h,postRender:m}=a,g=()=>{const y=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(y-s.timestamp,Rq),1),s.timestamp=y,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),d.process(s),h.process(s),m.process(s),s.isProcessing=!1,n&&e&&(r=!1,t(g))},_=()=>{n=!0,r=!0,s.isProcessing||t(g)};return{schedule:ep.reduce((y,w)=>{const j=a[w];return y[w]=(E,P=!1,U=!1)=>(n||_(),j.schedule(E,P,U)),y},{}),cancel:y=>{for(let w=0;w<ep.length;w++)a[ep[w]].cancel(y)},state:s,steps:a}}const{schedule:kt,cancel:wa,state:Ln,steps:K0}=A5(typeof requestAnimationFrame<"u"?requestAnimationFrame:tr,!0),P5=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,Mq=1e-7,Dq=12;function Lq(t,e,n,r,s){let o,a,l=0;do a=e+(n-e)/2,o=P5(a,r,s)-t,o>0?n=a:e=a;while(Math.abs(o)>Mq&&++l<Dq);return a}function $f(t,e,n,r){if(t===e&&n===r)return tr;const s=o=>Lq(o,0,1,t,n);return o=>o===0||o===1?o:P5(s(o),e,r)}const I5=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,R5=t=>e=>1-t(1-e),M5=$f(.33,1.53,.69,.99),W_=R5(M5),D5=I5(W_),L5=t=>(t*=2)<1?.5*W_(t):.5*(2-Math.pow(2,-10*(t-1))),H_=t=>1-Math.sin(Math.acos(t)),O5=R5(H_),V5=I5(H_),F5=t=>/^0[^.\s]+$/u.test(t);function Oq(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||F5(t):!0}const U5=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t),B5=t=>e=>typeof e=="string"&&e.startsWith(t),$5=B5("--"),Vq=B5("var(--"),q_=t=>Vq(t)?Fq.test(t.split("/*")[0].trim()):!1,Fq=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Uq=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Bq(t){const e=Uq.exec(t);if(!e)return[,];const[,n,r,s]=e;return[`--${n??r}`,s]}function z5(t,e,n=1){const[r,s]=Bq(t);if(!r)return;const o=window.getComputedStyle(e).getPropertyValue(r);if(o){const a=o.trim();return U5(a)?parseFloat(a):a}return q_(s)?z5(s,e,n+1):s}const no=(t,e,n)=>n>e?e:n<t?t:n,Zu={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},af={...Zu,transform:t=>no(0,1,t)},tp={...Zu,default:1},zf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Eo=zf("deg"),li=zf("%"),ze=zf("px"),$q=zf("vh"),zq=zf("vw"),vC={...li,parse:t=>li.parse(t)/100,transform:t=>li.transform(t*100)},Wq=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),wC=t=>t===Zu||t===ze,bC=(t,e)=>parseFloat(t.split(", ")[e]),_C=(t,e)=>(n,{transform:r})=>{if(r==="none"||!r)return 0;const s=r.match(/^matrix3d\((.+)\)$/u);if(s)return bC(s[1],e);{const o=r.match(/^matrix\((.+)\)$/u);return o?bC(o[1],t):0}},Hq=new Set(["x","y","z"]),qq=Bf.filter(t=>!Hq.has(t));function Gq(t){const e=[];return qq.forEach(n=>{const r=t.getValue(n);r!==void 0&&(e.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),e}const Tu={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:_C(4,13),y:_C(5,14)};Tu.translateX=Tu.x;Tu.translateY=Tu.y;const W5=t=>e=>e.test(t),Kq={test:t=>t==="auto",parse:t=>t},H5=[Zu,ze,li,Eo,zq,$q,Kq],jC=t=>H5.find(W5(t)),yl=new Set;let eb=!1,tb=!1;function q5(){if(tb){const t=Array.from(yl).filter(r=>r.needsMeasurement),e=new Set(t.map(r=>r.element)),n=new Map;e.forEach(r=>{const s=Gq(r);s.length&&(n.set(r,s),r.render())}),t.forEach(r=>r.measureInitialState()),e.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([o,a])=>{var l;(l=r.getValue(o))===null||l===void 0||l.set(a)})}),t.forEach(r=>r.measureEndState()),t.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}tb=!1,eb=!1,yl.forEach(t=>t.complete()),yl.clear()}function G5(){yl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(tb=!0)})}function Qq(){G5(),q5()}class G_{constructor(e,n,r,s,o,a=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=r,this.motionValue=s,this.element=o,this.isAsync=a}scheduleResolve(){this.isScheduled=!0,this.isAsync?(yl.add(this),eb||(eb=!0,kt.read(G5),kt.resolveKeyframes(q5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:r,motionValue:s}=this;for(let o=0;o<e.length;o++)if(e[o]===null)if(o===0){const a=s==null?void 0:s.get(),l=e[e.length-1];if(a!==void 0)e[0]=a;else if(r&&n){const c=r.readValue(n,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),s&&a===void 0&&s.set(e[0])}else e[o]=e[o-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),yl.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,yl.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const oh=t=>Math.round(t*1e5)/1e5,K_=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Yq(t){return t==null}const Zq=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Q_=(t,e)=>n=>!!(typeof n=="string"&&Zq.test(n)&&n.startsWith(t)||e&&!Yq(n)&&Object.prototype.hasOwnProperty.call(n,e)),K5=(t,e,n)=>r=>{if(typeof r!="string")return r;const[s,o,a,l]=r.match(K_);return{[t]:parseFloat(s),[e]:parseFloat(o),[n]:parseFloat(a),alpha:l!==void 0?parseFloat(l):1}},Xq=t=>no(0,255,t),Q0={...Zu,transform:t=>Math.round(Xq(t))},nl={test:Q_("rgb","red"),parse:K5("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:r=1})=>"rgba("+Q0.transform(t)+", "+Q0.transform(e)+", "+Q0.transform(n)+", "+oh(af.transform(r))+")"};function Jq(t){let e="",n="",r="",s="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),r=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),r=t.substring(3,4),s=t.substring(4,5),e+=e,n+=n,r+=r,s+=s),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const nb={test:Q_("#"),parse:Jq,transform:nl.transform},Tc={test:Q_("hsl","hue"),parse:K5("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:r=1})=>"hsla("+Math.round(t)+", "+li.transform(oh(e))+", "+li.transform(oh(n))+", "+oh(af.transform(r))+")"},Qn={test:t=>nl.test(t)||nb.test(t)||Tc.test(t),parse:t=>nl.test(t)?nl.parse(t):Tc.test(t)?Tc.parse(t):nb.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?nl.transform(t):Tc.transform(t)},eG=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function tG(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(K_))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(eG))===null||n===void 0?void 0:n.length)||0)>0}const Q5="number",Y5="color",nG="var",rG="var(",SC="${}",sG=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function lf(t){const e=t.toString(),n=[],r={color:[],number:[],var:[]},s=[];let o=0;const l=e.replace(sG,c=>(Qn.test(c)?(r.color.push(o),s.push(Y5),n.push(Qn.parse(c))):c.startsWith(rG)?(r.var.push(o),s.push(nG),n.push(c)):(r.number.push(o),s.push(Q5),n.push(parseFloat(c))),++o,SC)).split(SC);return{values:n,split:l,indexes:r,types:s}}function Z5(t){return lf(t).values}function X5(t){const{split:e,types:n}=lf(t),r=e.length;return s=>{let o="";for(let a=0;a<r;a++)if(o+=e[a],s[a]!==void 0){const l=n[a];l===Q5?o+=oh(s[a]):l===Y5?o+=Qn.transform(s[a]):o+=s[a]}return o}}const iG=t=>typeof t=="number"?0:t;function oG(t){const e=Z5(t);return X5(t)(e.map(iG))}const ba={test:tG,parse:Z5,createTransformer:X5,getAnimatableNone:oG},aG=new Set(["brightness","contrast","saturate","opacity"]);function lG(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[r]=n.match(K_)||[];if(!r)return t;const s=n.replace(r,"");let o=aG.has(e)?1:0;return r!==n&&(o*=100),e+"("+o+s+")"}const cG=/\b([a-z-]*)\(.*?\)/gu,rb={...ba,getAnimatableNone:t=>{const e=t.match(cG);return e?e.map(lG).join(" "):t}},uG={borderWidth:ze,borderTopWidth:ze,borderRightWidth:ze,borderBottomWidth:ze,borderLeftWidth:ze,borderRadius:ze,radius:ze,borderTopLeftRadius:ze,borderTopRightRadius:ze,borderBottomRightRadius:ze,borderBottomLeftRadius:ze,width:ze,maxWidth:ze,height:ze,maxHeight:ze,top:ze,right:ze,bottom:ze,left:ze,padding:ze,paddingTop:ze,paddingRight:ze,paddingBottom:ze,paddingLeft:ze,margin:ze,marginTop:ze,marginRight:ze,marginBottom:ze,marginLeft:ze,backgroundPositionX:ze,backgroundPositionY:ze},dG={rotate:Eo,rotateX:Eo,rotateY:Eo,rotateZ:Eo,scale:tp,scaleX:tp,scaleY:tp,scaleZ:tp,skew:Eo,skewX:Eo,skewY:Eo,distance:ze,translateX:ze,translateY:ze,translateZ:ze,x:ze,y:ze,z:ze,perspective:ze,transformPerspective:ze,opacity:af,originX:vC,originY:vC,originZ:ze},NC={...Zu,transform:Math.round},Y_={...uG,...dG,zIndex:NC,size:ze,fillOpacity:af,strokeOpacity:af,numOctaves:NC},hG={...Y_,color:Qn,backgroundColor:Qn,outlineColor:Qn,fill:Qn,stroke:Qn,borderColor:Qn,borderTopColor:Qn,borderRightColor:Qn,borderBottomColor:Qn,borderLeftColor:Qn,filter:rb,WebkitFilter:rb},Z_=t=>hG[t];function J5(t,e){let n=Z_(t);return n!==rb&&(n=ba),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const fG=new Set(["auto","none","0"]);function mG(t,e,n){let r=0,s;for(;r<t.length&&!s;){const o=t[r];typeof o=="string"&&!fG.has(o)&&lf(o).values.length&&(s=t[r]),r++}if(s&&n)for(const o of e)t[o]=J5(n,s)}class eD extends G_{constructor(e,n,r,s,o){super(e,n,r,s,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="string"&&(u=u.trim(),q_(u))){const d=z5(u,n.current);d!==void 0&&(e[c]=d),c===e.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Wq.has(r)||e.length!==2)return;const[s,o]=e,a=jC(s),l=jC(o);if(a!==l)if(wC(a)&&wC(l))for(let c=0;c<e.length;c++){const u=e[c];typeof u=="string"&&(e[c]=parseFloat(u))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,r=[];for(let s=0;s<e.length;s++)Oq(e[s])&&r.push(s);r.length&&mG(e,r,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:r}=this;if(!e||!e.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Tu[r](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&e.getValue(r,s).jump(s,!1)}measureEndState(){var e;const{element:n,name:r,unresolvedKeyframes:s}=this;if(!n||!n.current)return;const o=n.getValue(r);o&&o.jump(this.measuredOrigin,!1);const a=s.length-1,l=s[a];s[a]=Tu[r](n.measureViewportBox(),window.getComputedStyle(n.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([c,u])=>{n.getValue(c).set(u)}),this.resolveNoneKeyframes()}}function X_(t){return typeof t=="function"}let Dp;function pG(){Dp=void 0}const ci={now:()=>(Dp===void 0&&ci.set(Ln.isProcessing||Aq.useManualTiming?Ln.timestamp:performance.now()),Dp),set:t=>{Dp=t,queueMicrotask(pG)}},TC=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(ba.test(t)||t==="0")&&!t.startsWith("url("));function gG(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function yG(t,e,n,r){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],a=TC(s,e),l=TC(o,e);return!a||!l?!1:gG(t)||(n==="spring"||X_(n))&&r}const xG=40;class tD{constructor({autoplay:e=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:o=0,repeatType:a="loop",...l}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ci.now(),this.options={autoplay:e,delay:n,type:r,repeat:s,repeatDelay:o,repeatType:a,...l},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>xG?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Qq(),this._resolved}onKeyframesResolved(e,n){this.resolvedAt=ci.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:o,delay:a,onComplete:l,onUpdate:c,isGenerator:u}=this.options;if(!u&&!yG(e,r,s,o))if(a)this.options.duration=0;else{c==null||c(yx(e,this.options,n)),l==null||l(),this.resolveFinishedPromise();return}const d=this.initPlayback(e,n);d!==!1&&(this._resolved={keyframes:e,finalKeyframe:n,...d},this.onPostResolved())}onPostResolved(){}then(e,n){return this.currentFinishedPromise.then(e,n)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const Cu=(t,e,n)=>{const r=e-t;return r===0?1:(n-t)/r},nD=(t,e,n=10)=>{let r="";const s=Math.max(Math.round(e/n),2);for(let o=0;o<s;o++)r+=t(Cu(0,s-1,o))+", ";return`linear(${r.substring(0,r.length-2)})`};function rD(t,e){return e?t*(1e3/e):0}const vG=5;function sD(t,e,n){const r=Math.max(e-vG,0);return rD(n-t(r),e-r)}const sn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Y0=.001;function wG({duration:t=sn.duration,bounce:e=sn.bounce,velocity:n=sn.velocity,mass:r=sn.mass}){let s,o,a=1-e;a=no(sn.minDamping,sn.maxDamping,a),t=no(sn.minDuration,sn.maxDuration,Hi(t)),a<1?(s=u=>{const d=u*a,h=d*t,m=d-n,g=sb(u,a),_=Math.exp(-h);return Y0-m/g*_},o=u=>{const h=u*a*t,m=h*n+n,g=Math.pow(a,2)*Math.pow(u,2)*t,_=Math.exp(-h),v=sb(Math.pow(u,2),a);return(-s(u)+Y0>0?-1:1)*((m-g)*_)/v}):(s=u=>{const d=Math.exp(-u*t),h=(u-n)*t+1;return-Y0+d*h},o=u=>{const d=Math.exp(-u*t),h=(n-u)*(t*t);return d*h});const l=5/t,c=_G(s,o,l);if(t=Wi(t),isNaN(c))return{stiffness:sn.stiffness,damping:sn.damping,duration:t};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:a*2*Math.sqrt(r*u),duration:t}}}const bG=12;function _G(t,e,n){let r=n;for(let s=1;s<bG;s++)r=r-t(r)/e(r);return r}function sb(t,e){return t*Math.sqrt(1-e*e)}const ib=2e4;function iD(t){let e=0;const n=50;let r=t.next(e);for(;!r.done&&e<ib;)e+=n,r=t.next(e);return e>=ib?1/0:e}const jG=["duration","bounce"],SG=["stiffness","damping","mass"];function CC(t,e){return e.some(n=>t[n]!==void 0)}function NG(t){let e={velocity:sn.velocity,stiffness:sn.stiffness,damping:sn.damping,mass:sn.mass,isResolvedFromDuration:!1,...t};if(!CC(t,SG)&&CC(t,jG))if(t.visualDuration){const n=t.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,o=2*no(.05,1,1-t.bounce)*Math.sqrt(s);e={...e,mass:sn.mass,stiffness:s,damping:o}}else{const n=wG(t);e={...e,...n,mass:sn.mass},e.isResolvedFromDuration=!0}return e}function oD(t=sn.visualDuration,e=sn.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:r,restDelta:s}=n;const o=n.keyframes[0],a=n.keyframes[n.keyframes.length-1],l={done:!1,value:o},{stiffness:c,damping:u,mass:d,duration:h,velocity:m,isResolvedFromDuration:g}=NG({...n,velocity:-Hi(n.velocity||0)}),_=m||0,v=u/(2*Math.sqrt(c*d)),x=a-o,y=Hi(Math.sqrt(c/d)),w=Math.abs(x)<5;r||(r=w?sn.restSpeed.granular:sn.restSpeed.default),s||(s=w?sn.restDelta.granular:sn.restDelta.default);let j;if(v<1){const P=sb(y,v);j=U=>{const T=Math.exp(-v*y*U);return a-T*((_+v*y*x)/P*Math.sin(P*U)+x*Math.cos(P*U))}}else if(v===1)j=P=>a-Math.exp(-y*P)*(x+(_+y*x)*P);else{const P=y*Math.sqrt(v*v-1);j=U=>{const T=Math.exp(-v*y*U),S=Math.min(P*U,300);return a-T*((_+v*y*x)*Math.sinh(S)+P*x*Math.cosh(S))/P}}const E={calculatedDuration:g&&h||null,next:P=>{const U=j(P);if(g)l.done=P>=h;else{let T=0;v<1&&(T=P===0?Wi(_):sD(j,P,U));const S=Math.abs(T)<=r,C=Math.abs(a-U)<=s;l.done=S&&C}return l.value=l.done?a:U,l},toString:()=>{const P=Math.min(iD(E),ib),U=nD(T=>E.next(P*T).value,P,30);return P+"ms "+U}};return E}function EC({keyframes:t,velocity:e=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:o=500,modifyTarget:a,min:l,max:c,restDelta:u=.5,restSpeed:d}){const h=t[0],m={done:!1,value:h},g=S=>l!==void 0&&S<l||c!==void 0&&S>c,_=S=>l===void 0?c:c===void 0||Math.abs(l-S)<Math.abs(c-S)?l:c;let v=n*e;const x=h+v,y=a===void 0?x:a(x);y!==x&&(v=y-h);const w=S=>-v*Math.exp(-S/r),j=S=>y+w(S),E=S=>{const C=w(S),k=j(S);m.done=Math.abs(C)<=u,m.value=m.done?y:k};let P,U;const T=S=>{g(m.value)&&(P=S,U=oD({keyframes:[m.value,_(m.value)],velocity:sD(j,S,m.value),damping:s,stiffness:o,restDelta:u,restSpeed:d}))};return T(0),{calculatedDuration:null,next:S=>{let C=!1;return!U&&P===void 0&&(C=!0,E(S),T(S)),P!==void 0&&S>=P?U.next(S-P):(!C&&E(S),m)}}}const TG=$f(.42,0,1,1),CG=$f(0,0,.58,1),aD=$f(.42,0,.58,1),EG=t=>Array.isArray(t)&&typeof t[0]!="number",J_=t=>Array.isArray(t)&&typeof t[0]=="number",kC={linear:tr,easeIn:TG,easeInOut:aD,easeOut:CG,circIn:H_,circInOut:V5,circOut:O5,backIn:W_,backInOut:D5,backOut:M5,anticipate:L5},AC=t=>{if(J_(t)){Jw(t.length===4);const[e,n,r,s]=t;return $f(e,n,r,s)}else if(typeof t=="string")return Jw(kC[t]!==void 0),kC[t];return t},kG=(t,e)=>n=>e(t(n)),sa=(...t)=>t.reduce(kG),Yt=(t,e,n)=>t+(e-t)*n;function Z0(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function AG({hue:t,saturation:e,lightness:n,alpha:r}){t/=360,e/=100,n/=100;let s=0,o=0,a=0;if(!e)s=o=a=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;s=Z0(c,l,t+1/3),o=Z0(c,l,t),a=Z0(c,l,t-1/3)}return{red:Math.round(s*255),green:Math.round(o*255),blue:Math.round(a*255),alpha:r}}function Qg(t,e){return n=>n>0?e:t}const X0=(t,e,n)=>{const r=t*t,s=n*(e*e-r)+r;return s<0?0:Math.sqrt(s)},PG=[nb,nl,Tc],IG=t=>PG.find(e=>e.test(t));function PC(t){const e=IG(t);if(!e)return!1;let n=e.parse(t);return e===Tc&&(n=AG(n)),n}const IC=(t,e)=>{const n=PC(t),r=PC(e);if(!n||!r)return Qg(t,e);const s={...n};return o=>(s.red=X0(n.red,r.red,o),s.green=X0(n.green,r.green,o),s.blue=X0(n.blue,r.blue,o),s.alpha=Yt(n.alpha,r.alpha,o),nl.transform(s))},ob=new Set(["none","hidden"]);function RG(t,e){return ob.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function MG(t,e){return n=>Yt(t,e,n)}function ej(t){return typeof t=="number"?MG:typeof t=="string"?q_(t)?Qg:Qn.test(t)?IC:OG:Array.isArray(t)?lD:typeof t=="object"?Qn.test(t)?IC:DG:Qg}function lD(t,e){const n=[...t],r=n.length,s=t.map((o,a)=>ej(o)(o,e[a]));return o=>{for(let a=0;a<r;a++)n[a]=s[a](o);return n}}function DG(t,e){const n={...t,...e},r={};for(const s in n)t[s]!==void 0&&e[s]!==void 0&&(r[s]=ej(t[s])(t[s],e[s]));return s=>{for(const o in r)n[o]=r[o](s);return n}}function LG(t,e){var n;const r=[],s={color:0,var:0,number:0};for(let o=0;o<e.values.length;o++){const a=e.types[o],l=t.indexes[a][s[a]],c=(n=t.values[l])!==null&&n!==void 0?n:0;r[o]=c,s[a]++}return r}const OG=(t,e)=>{const n=ba.createTransformer(e),r=lf(t),s=lf(e);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?ob.has(t)&&!s.values.length||ob.has(e)&&!r.values.length?RG(t,e):sa(lD(LG(r,s),s.values),n):Qg(t,e)};function cD(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Yt(t,e,n):ej(t)(t,e)}function VG(t,e,n){const r=[],s=n||cD,o=t.length-1;for(let a=0;a<o;a++){let l=s(t[a],t[a+1]);if(e){const c=Array.isArray(e)?e[a]||tr:e;l=sa(c,l)}r.push(l)}return r}function FG(t,e,{clamp:n=!0,ease:r,mixer:s}={}){const o=t.length;if(Jw(o===e.length),o===1)return()=>e[0];if(o===2&&t[0]===t[1])return()=>e[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=VG(e,r,s),l=a.length,c=u=>{let d=0;if(l>1)for(;d<t.length-2&&!(u<t[d+1]);d++);const h=Cu(t[d],t[d+1],u);return a[d](h)};return n?u=>c(no(t[0],t[o-1],u)):c}function UG(t,e){const n=t[t.length-1];for(let r=1;r<=e;r++){const s=Cu(0,e,r);t.push(Yt(n,1,s))}}function BG(t){const e=[0];return UG(e,t.length-1),e}function $G(t,e){return t.map(n=>n*e)}function zG(t,e){return t.map(()=>e||aD).splice(0,t.length-1)}function Yg({duration:t=300,keyframes:e,times:n,ease:r="easeInOut"}){const s=EG(r)?r.map(AC):AC(r),o={done:!1,value:e[0]},a=$G(n&&n.length===e.length?n:BG(e),t),l=FG(a,e,{ease:Array.isArray(s)?s:zG(e,s)});return{calculatedDuration:t,next:c=>(o.value=l(c),o.done=c>=t,o)}}const WG=t=>{const e=({timestamp:n})=>t(n);return{start:()=>kt.update(e,!0),stop:()=>wa(e),now:()=>Ln.isProcessing?Ln.timestamp:ci.now()}},HG={decay:EC,inertia:EC,tween:Yg,keyframes:Yg,spring:oD},qG=t=>t/100;class tj extends tD{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:c}=this.options;c&&c()};const{name:n,motionValue:r,element:s,keyframes:o}=this.options,a=(s==null?void 0:s.KeyframeResolver)||G_,l=(c,u)=>this.onKeyframesResolved(c,u);this.resolver=new a(o,l,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o,velocity:a=0}=this.options,l=X_(n)?n:HG[n]||Yg;let c,u;l!==Yg&&typeof e[0]!="number"&&(c=sa(qG,cD(e[0],e[1])),e=[0,100]);const d=l({...this.options,keyframes:e});o==="mirror"&&(u=l({...this.options,keyframes:[...e].reverse(),velocity:-a})),d.calculatedDuration===null&&(d.calculatedDuration=iD(d));const{calculatedDuration:h}=d,m=h+s,g=m*(r+1)-s;return{generator:d,mirroredGenerator:u,mapPercentToKeyframes:c,calculatedDuration:h,resolvedDuration:m,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,n=!1){const{resolved:r}=this;if(!r){const{keyframes:S}=this.options;return{done:!0,value:S[S.length-1]}}const{finalKeyframe:s,generator:o,mirroredGenerator:a,mapPercentToKeyframes:l,keyframes:c,calculatedDuration:u,totalDuration:d,resolvedDuration:h}=r;if(this.startTime===null)return o.next(0);const{delay:m,repeat:g,repeatType:_,repeatDelay:v,onUpdate:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-d/this.speed,this.startTime)),n?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const y=this.currentTime-m*(this.speed>=0?1:-1),w=this.speed>=0?y<0:y>d;this.currentTime=Math.max(y,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=d);let j=this.currentTime,E=o;if(g){const S=Math.min(this.currentTime,d)/h;let C=Math.floor(S),k=S%1;!k&&S>=1&&(k=1),k===1&&C--,C=Math.min(C,g+1),!!(C%2)&&(_==="reverse"?(k=1-k,v&&(k-=v/h)):_==="mirror"&&(E=a)),j=no(0,1,k)*h}const P=w?{done:!1,value:c[0]}:E.next(j);l&&(P.value=l(P.value));let{done:U}=P;!w&&u!==null&&(U=this.speed>=0?this.currentTime>=d:this.currentTime<=0);const T=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&U);return T&&s!==void 0&&(P.value=yx(c,this.options,s)),x&&x(P.value),T&&this.finish(),P}get duration(){const{resolved:e}=this;return e?Hi(e.calculatedDuration):0}get time(){return Hi(this.currentTime)}set time(e){e=Wi(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Hi(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=WG,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const GG=new Set(["opacity","clipPath","filter","transform"]);function nj(t){let e;return()=>(e===void 0&&(e=t()),e)}const KG={linearEasing:void 0};function QG(t,e){const n=nj(t);return()=>{var r;return(r=KG[e])!==null&&r!==void 0?r:n()}}const Zg=QG(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function uD(t){return!!(typeof t=="function"&&Zg()||!t||typeof t=="string"&&(t in ab||Zg())||J_(t)||Array.isArray(t)&&t.every(uD))}const Bd=([t,e,n,r])=>`cubic-bezier(${t}, ${e}, ${n}, ${r})`,ab={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Bd([0,.65,.55,1]),circOut:Bd([.55,0,1,.45]),backIn:Bd([.31,.01,.66,-.59]),backOut:Bd([.33,1.53,.69,.99])};function dD(t,e){if(t)return typeof t=="function"&&Zg()?nD(t,e):J_(t)?Bd(t):Array.isArray(t)?t.map(n=>dD(n,e)||ab.easeOut):ab[t]}function YG(t,e,n,{delay:r=0,duration:s=300,repeat:o=0,repeatType:a="loop",ease:l="easeInOut",times:c}={}){const u={[e]:n};c&&(u.offset=c);const d=dD(l,s);return Array.isArray(d)&&(u.easing=d),t.animate(u,{delay:r,duration:s,easing:Array.isArray(d)?"linear":d,fill:"both",iterations:o+1,direction:a==="reverse"?"alternate":"normal"})}function RC(t,e){t.timeline=e,t.onfinish=null}const ZG=nj(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Xg=10,XG=2e4;function JG(t){return X_(t.type)||t.type==="spring"||!uD(t.ease)}function eK(t,e){const n=new tj({...e,keyframes:t,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:t[0]};const s=[];let o=0;for(;!r.done&&o<XG;)r=n.sample(o),s.push(r.value),o+=Xg;return{times:void 0,keyframes:s,duration:o-Xg,ease:"linear"}}const hD={anticipate:L5,backInOut:D5,circInOut:V5};function tK(t){return t in hD}class MC extends tD{constructor(e){super(e);const{name:n,motionValue:r,element:s,keyframes:o}=this.options;this.resolver=new eD(o,(a,l)=>this.onKeyframesResolved(a,l),n,r,s),this.resolver.scheduleResolve()}initPlayback(e,n){var r;let{duration:s=300,times:o,ease:a,type:l,motionValue:c,name:u,startTime:d}=this.options;if(!(!((r=c.owner)===null||r===void 0)&&r.current))return!1;if(typeof a=="string"&&Zg()&&tK(a)&&(a=hD[a]),JG(this.options)){const{onComplete:m,onUpdate:g,motionValue:_,element:v,...x}=this.options,y=eK(e,x);e=y.keyframes,e.length===1&&(e[1]=e[0]),s=y.duration,o=y.times,a=y.ease,l="keyframes"}const h=YG(c.owner.current,u,e,{...this.options,duration:s,times:o,ease:a});return h.startTime=d??this.calcStartTime(),this.pendingTimeline?(RC(h,this.pendingTimeline),this.pendingTimeline=void 0):h.onfinish=()=>{const{onComplete:m}=this.options;c.set(yx(e,this.options,n)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:h,duration:s,times:o,type:l,ease:a,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:n}=e;return Hi(n)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:n}=e;return Hi(n.currentTime||0)}set time(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Wi(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:n}=e;return n.playbackRate}set speed(e){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:n}=e;return n.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:n}=e;return n.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:n}=this;if(!n)return tr;const{animation:r}=n;RC(r,e)}return tr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:n}=e;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:n,keyframes:r,duration:s,type:o,ease:a,times:l}=e;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:u,onUpdate:d,onComplete:h,element:m,...g}=this.options,_=new tj({...g,keyframes:r,duration:s,type:o,ease:a,times:l,isGenerator:!0}),v=Wi(this.time);u.setWithVelocity(_.sample(v-Xg).value,_.sample(v).value,Xg)}const{onStop:c}=this.options;c&&c(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:n,name:r,repeatDelay:s,repeatType:o,damping:a,type:l}=e;return ZG()&&r&&GG.has(r)&&n&&n.owner&&n.owner.current instanceof HTMLElement&&!n.owner.getProps().onUpdate&&!s&&o!=="mirror"&&a!==0&&l!=="inertia"}}const nK=nj(()=>window.ScrollTimeline!==void 0);class rK{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,n){return Promise.all(this.animations).then(e).catch(n)}getAll(e){return this.animations[0][e]}setAll(e,n){for(let r=0;r<this.animations.length;r++)this.animations[r][e]=n}attachTimeline(e,n){const r=this.animations.map(s=>nK()&&s.attachTimeline?s.attachTimeline(e):n(s));return()=>{r.forEach((s,o)=>{s&&s(),this.animations[o].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let n=0;n<this.animations.length;n++)e=Math.max(e,this.animations[n].duration);return e}runAll(e){this.animations.forEach(n=>n[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function sK({when:t,delay:e,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:o,repeatType:a,repeatDelay:l,from:c,elapsed:u,...d}){return!!Object.keys(d).length}const rj=(t,e,n,r={},s,o)=>a=>{const l=z_(r,t)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Wi(c);let d={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...l,delay:-u,onUpdate:m=>{e.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{a(),l.onComplete&&l.onComplete()},name:t,motionValue:e,element:o?void 0:s};sK(l)||(d={...d,...kq(t,d)}),d.duration&&(d.duration=Wi(d.duration)),d.repeatDelay&&(d.repeatDelay=Wi(d.repeatDelay)),d.from!==void 0&&(d.keyframes[0]=d.from);let h=!1;if((d.type===!1||d.duration===0&&!d.repeatDelay)&&(d.duration=0,d.delay===0&&(h=!0)),h&&!o&&e.get()!==void 0){const m=yx(d.keyframes,l);if(m!==void 0)return kt.update(()=>{d.onUpdate(m),d.onComplete()}),new rK([])}return!o&&MC.supports(d)?new MC(d):new tj(d)},iK=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),oK=t=>Xw(t)?t[t.length-1]||0:t;function sj(t,e){t.indexOf(e)===-1&&t.push(e)}function ij(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class oj{constructor(){this.subscriptions=[]}add(e){return sj(this.subscriptions,e),()=>ij(this.subscriptions,e)}notify(e,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,n,r);else for(let o=0;o<s;o++){const a=this.subscriptions[o];a&&a(e,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const DC=30,aK=t=>!isNaN(parseFloat(t));class lK{constructor(e,n={}){this.version="11.13.1",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const o=ci.now();this.updatedAt!==o&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=ci.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=aK(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new oj);const r=this.events[e].add(n);return e==="change"?()=>{r(),kt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ci.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>DC)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,DC);return rD(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cf(t,e){return new lK(t,e)}function cK(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,cf(n))}function uK(t,e){const n=gx(t,e);let{transitionEnd:r={},transition:s={},...o}=n||{};o={...o,...r};for(const a in o){const l=oK(o[a]);cK(t,a,l)}}const aj=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),dK="framerAppearId",fD="data-"+aj(dK);function mD(t){return t.props[fD]}const er=t=>!!(t&&t.getVelocity);function hK(t){return!!(er(t)&&t.add)}function lb(t,e){const n=t.getValue("willChange");if(hK(n))return n.add(e)}function fK({protectedKeys:t,needsAnimating:e},n){const r=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,r}function pD(t,e,{delay:n=0,transitionOverride:r,type:s}={}){var o;let{transition:a=t.getDefaultTransition(),transitionEnd:l,...c}=e;r&&(a=r);const u=[],d=s&&t.animationState&&t.animationState.getState()[s];for(const h in c){const m=t.getValue(h,(o=t.latestValues[h])!==null&&o!==void 0?o:null),g=c[h];if(g===void 0||d&&fK(d,h))continue;const _={delay:n,...z_(a||{},h)};let v=!1;if(window.MotionHandoffAnimation){const y=mD(t);if(y){const w=window.MotionHandoffAnimation(y,h,kt);w!==null&&(_.startTime=w,v=!0)}}lb(t,h),m.start(rj(h,m,g,t.shouldReduceMotion&&Wl.has(h)?{type:!1}:_,t,v));const x=m.animation;x&&u.push(x)}return l&&Promise.all(u).then(()=>{kt.update(()=>{l&&uK(t,l)})}),u}function cb(t,e,n={}){var r;const s=gx(t,e,n.type==="exit"?(r=t.presenceContext)===null||r===void 0?void 0:r.custom:void 0);let{transition:o=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(o=n.transitionOverride);const a=s?()=>Promise.all(pD(t,s,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:m}=o;return mK(t,e,d+u,h,m,n)}:()=>Promise.resolve(),{when:c}=o;if(c){const[u,d]=c==="beforeChildren"?[a,l]:[l,a];return u().then(()=>d())}else return Promise.all([a(),l(n.delay)])}function mK(t,e,n=0,r=0,s=1,o){const a=[],l=(t.variantChildren.size-1)*r,c=s===1?(u=0)=>u*r:(u=0)=>l-u*r;return Array.from(t.variantChildren).sort(pK).forEach((u,d)=>{u.notify("AnimationStart",e),a.push(cb(u,e,{...o,delay:n+c(d)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(a)}function pK(t,e){return t.sortNodePosition(e)}function gK(t,e,n={}){t.notify("AnimationStart",e);let r;if(Array.isArray(e)){const s=e.map(o=>cb(t,o,n));r=Promise.all(s)}else if(typeof e=="string")r=cb(t,e,n);else{const s=typeof e=="function"?gx(t,e,n.custom):e;r=Promise.all(pD(t,s,n))}return r.then(()=>{t.notify("AnimationComplete",e)})}const yK=$_.length;function gD(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?gD(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<yK;n++){const r=$_[n],s=t.props[r];(of(s)||s===!1)&&(e[r]=s)}return e}const xK=[...B_].reverse(),vK=B_.length;function wK(t){return e=>Promise.all(e.map(({animation:n,options:r})=>gK(t,n,r)))}function bK(t){let e=wK(t),n=LC(),r=!0;const s=c=>(u,d)=>{var h;const m=gx(t,d,c==="exit"?(h=t.presenceContext)===null||h===void 0?void 0:h.custom:void 0);if(m){const{transition:g,transitionEnd:_,...v}=m;u={...u,...v,..._}}return u};function o(c){e=c(t)}function a(c){const{props:u}=t,d=gD(t.parent)||{},h=[],m=new Set;let g={},_=1/0;for(let x=0;x<vK;x++){const y=xK[x],w=n[y],j=u[y]!==void 0?u[y]:d[y],E=of(j),P=y===c?w.isActive:null;P===!1&&(_=x);let U=j===d[y]&&j!==u[y]&&E;if(U&&r&&t.manuallyAnimateOnMount&&(U=!1),w.protectedKeys={...g},!w.isActive&&P===null||!j&&!w.prevProp||px(j)||typeof j=="boolean")continue;const T=_K(w.prevProp,j);let S=T||y===c&&w.isActive&&!U&&E||x>_&&E,C=!1;const k=Array.isArray(j)?j:[j];let I=k.reduce(s(y),{});P===!1&&(I={});const{prevResolvedValues:R={}}=w,A={...R,...I},G=q=>{S=!0,m.has(q)&&(C=!0,m.delete(q)),w.needsAnimating[q]=!0;const O=t.getValue(q);O&&(O.liveStyle=!1)};for(const q in A){const O=I[q],F=R[q];if(g.hasOwnProperty(q))continue;let D=!1;Xw(O)&&Xw(F)?D=!k5(O,F):D=O!==F,D?O!=null?G(q):m.add(q):O!==void 0&&m.has(q)?G(q):w.protectedKeys[q]=!0}w.prevProp=j,w.prevResolvedValues=I,w.isActive&&(g={...g,...I}),r&&t.blockInitialAnimation&&(S=!1),S&&(!(U&&T)||C)&&h.push(...k.map(q=>({animation:q,options:{type:y}})))}if(m.size){const x={};m.forEach(y=>{const w=t.getBaseTarget(y),j=t.getValue(y);j&&(j.liveStyle=!0),x[y]=w??null}),h.push({animation:x})}let v=!!h.length;return r&&(u.initial===!1||u.initial===u.animate)&&!t.manuallyAnimateOnMount&&(v=!1),r=!1,v?e(h):Promise.resolve()}function l(c,u){var d;if(n[c].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(c,u)}),n[c].isActive=u;const h=a(c);for(const m in n)n[m].protectedKeys={};return h}return{animateChanges:a,setActive:l,setAnimateFunction:o,getState:()=>n,reset:()=>{n=LC(),r=!0}}}function _K(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!k5(e,t):!1}function qa(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function LC(){return{animate:qa(!0),whileInView:qa(),whileHover:qa(),whileTap:qa(),whileDrag:qa(),whileFocus:qa(),exit:qa()}}class Ra{constructor(e){this.isMounted=!1,this.node=e}update(){}}class jK extends Ra{constructor(e){super(e),e.animationState||(e.animationState=bK(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();px(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let SK=0;class NK extends Ra{constructor(){super(...arguments),this.id=SK++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);n&&!e&&s.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const TK={animation:{Feature:jK},exit:{Feature:NK}};function CK(t,e,n){var r;if(t instanceof Element)return[t];if(typeof t=="string"){let s=document;const o=(r=void 0)!==null&&r!==void 0?r:s.querySelectorAll(t);return o?Array.from(o):[]}return Array.from(t)}const gs={x:!1,y:!1};function yD(){return gs.x||gs.y}function OC(t){return e=>{e.pointerType==="touch"||yD()||t(e)}}function EK(t,e,n={}){const r=new AbortController,s={passive:!0,...n,signal:r.signal},o=OC(a=>{const{target:l}=a,c=e(a);if(!c||!l)return;const u=OC(d=>{c(d),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,s)});return CK(t).forEach(a=>{a.addEventListener("pointerenter",o,s)}),()=>r.abort()}function kK(t){return t==="x"||t==="y"?gs[t]?null:(gs[t]=!0,()=>{gs[t]=!1}):gs.x||gs.y?null:(gs.x=gs.y=!0,()=>{gs.x=gs.y=!1})}const xD=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Wf(t){return{point:{x:t.pageX,y:t.pageY}}}const AK=t=>e=>xD(e)&&t(e,Wf(e));function Ui(t,e,n,r={passive:!0}){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n)}function ia(t,e,n,r){return Ui(t,e,AK(n),r)}const VC=(t,e)=>Math.abs(t-e);function PK(t,e){const n=VC(t.x,e.x),r=VC(t.y,e.y);return Math.sqrt(n**2+r**2)}class vD{constructor(e,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:o=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const h=ev(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=PK(h.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:_}=h,{timestamp:v}=Ln;this.history.push({..._,timestamp:v});const{onStart:x,onMove:y}=this.handlers;m||(x&&x(this.lastMoveEvent,h),this.startEvent=this.lastMoveEvent),y&&y(this.lastMoveEvent,h)},this.handlePointerMove=(h,m)=>{this.lastMoveEvent=h,this.lastMoveEventInfo=J0(m,this.transformPagePoint),kt.update(this.updatePoint,!0)},this.handlePointerUp=(h,m)=>{this.end();const{onEnd:g,onSessionEnd:_,resumeAnimation:v}=this.handlers;if(this.dragSnapToOrigin&&v&&v(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const x=ev(h.type==="pointercancel"?this.lastMoveEventInfo:J0(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(h,x),_&&_(h,x)},!xD(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const a=Wf(e),l=J0(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=Ln;this.history=[{...c,timestamp:u}];const{onSessionStart:d}=n;d&&d(e,ev(l,this.history)),this.removeListeners=sa(ia(this.contextWindow,"pointermove",this.handlePointerMove),ia(this.contextWindow,"pointerup",this.handlePointerUp),ia(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),wa(this.updatePoint)}}function J0(t,e){return e?{point:e(t.point)}:t}function FC(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ev({point:t},e){return{point:t,delta:FC(t,wD(e)),offset:FC(t,IK(e)),velocity:RK(e,.1)}}function IK(t){return t[0]}function wD(t){return t[t.length-1]}function RK(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,r=null;const s=wD(t);for(;n>=0&&(r=t[n],!(s.timestamp-r.timestamp>Wi(e)));)n--;if(!r)return{x:0,y:0};const o=Hi(s.timestamp-r.timestamp);if(o===0)return{x:0,y:0};const a={x:(s.x-r.x)/o,y:(s.y-r.y)/o};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Cc(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}const bD=1e-4,MK=1-bD,DK=1+bD,_D=.01,LK=0-_D,OK=0+_D;function zr(t){return t.max-t.min}function VK(t,e,n){return Math.abs(t-e)<=n}function UC(t,e,n,r=.5){t.origin=r,t.originPoint=Yt(e.min,e.max,t.origin),t.scale=zr(n)/zr(e),t.translate=Yt(n.min,n.max,t.origin)-t.originPoint,(t.scale>=MK&&t.scale<=DK||isNaN(t.scale))&&(t.scale=1),(t.translate>=LK&&t.translate<=OK||isNaN(t.translate))&&(t.translate=0)}function ah(t,e,n,r){UC(t.x,e.x,n.x,r?r.originX:void 0),UC(t.y,e.y,n.y,r?r.originY:void 0)}function BC(t,e,n){t.min=n.min+e.min,t.max=t.min+zr(e)}function FK(t,e,n){BC(t.x,e.x,n.x),BC(t.y,e.y,n.y)}function $C(t,e,n){t.min=e.min-n.min,t.max=t.min+zr(e)}function lh(t,e,n){$C(t.x,e.x,n.x),$C(t.y,e.y,n.y)}function UK(t,{min:e,max:n},r){return e!==void 0&&t<e?t=r?Yt(e,t,r.min):Math.max(t,e):n!==void 0&&t>n&&(t=r?Yt(n,t,r.max):Math.min(t,n)),t}function zC(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function BK(t,{top:e,left:n,bottom:r,right:s}){return{x:zC(t.x,n,s),y:zC(t.y,e,r)}}function WC(t,e){let n=e.min-t.min,r=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,r]=[r,n]),{min:n,max:r}}function $K(t,e){return{x:WC(t.x,e.x),y:WC(t.y,e.y)}}function zK(t,e){let n=.5;const r=zr(t),s=zr(e);return s>r?n=Cu(e.min,e.max-r,t.min):r>s&&(n=Cu(t.min,t.max-s,e.min)),no(0,1,n)}function WK(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const ub=.35;function HK(t=ub){return t===!1?t=0:t===!0&&(t=ub),{x:HC(t,"left","right"),y:HC(t,"top","bottom")}}function HC(t,e,n){return{min:qC(t,e),max:qC(t,n)}}function qC(t,e){return typeof t=="number"?t:t[e]||0}const GC=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ec=()=>({x:GC(),y:GC()}),KC=()=>({min:0,max:0}),cn=()=>({x:KC(),y:KC()});function Qr(t){return[t("x"),t("y")]}function jD({top:t,left:e,right:n,bottom:r}){return{x:{min:e,max:n},y:{min:t,max:r}}}function qK({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function GK(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),r=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function tv(t){return t===void 0||t===1}function db({scale:t,scaleX:e,scaleY:n}){return!tv(t)||!tv(e)||!tv(n)}function Qa(t){return db(t)||SD(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function SD(t){return QC(t.x)||QC(t.y)}function QC(t){return t&&t!=="0%"}function Jg(t,e,n){const r=t-n,s=e*r;return n+s}function YC(t,e,n,r,s){return s!==void 0&&(t=Jg(t,s,r)),Jg(t,n,r)+e}function hb(t,e=0,n=1,r,s){t.min=YC(t.min,e,n,r,s),t.max=YC(t.max,e,n,r,s)}function ND(t,{x:e,y:n}){hb(t.x,e.translate,e.scale,e.originPoint),hb(t.y,n.translate,n.scale,n.originPoint)}const ZC=.999999999999,XC=1.0000000000001;function KK(t,e,n,r=!1){const s=n.length;if(!s)return;e.x=e.y=1;let o,a;for(let l=0;l<s;l++){o=n[l],a=o.projectionDelta;const{visualElement:c}=o.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&o.options.layoutScroll&&o.scroll&&o!==o.root&&Ac(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),a&&(e.x*=a.x.scale,e.y*=a.y.scale,ND(t,a)),r&&Qa(o.latestValues)&&Ac(t,o.latestValues))}e.x<XC&&e.x>ZC&&(e.x=1),e.y<XC&&e.y>ZC&&(e.y=1)}function kc(t,e){t.min=t.min+e,t.max=t.max+e}function JC(t,e,n,r,s=.5){const o=Yt(t.min,t.max,s);hb(t,e,n,o,r)}function Ac(t,e){JC(t.x,e.x,e.scaleX,e.scale,e.originX),JC(t.y,e.y,e.scaleY,e.scale,e.originY)}function TD(t,e){return jD(GK(t.getBoundingClientRect(),e))}function QK(t,e,n){const r=TD(t,n),{scroll:s}=e;return s&&(kc(r.x,s.offset.x),kc(r.y,s.offset.y)),r}const CD=({current:t})=>t?t.ownerDocument.defaultView:null,YK=new WeakMap;class ZK{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=cn(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=d=>{const{dragSnapToOrigin:h}=this.getProps();h?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Wf(d).point)},o=(d,h)=>{const{drag:m,dragPropagation:g,onDragStart:_}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=kK(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Qr(x=>{let y=this.getAxisMotionValue(x).get()||0;if(li.test(y)){const{projection:w}=this.visualElement;if(w&&w.layout){const j=w.layout.layoutBox[x];j&&(y=zr(j)*(parseFloat(y)/100))}}this.originPoint[x]=y}),_&&kt.postRender(()=>_(d,h)),lb(this.visualElement,"transform");const{animationState:v}=this.visualElement;v&&v.setActive("whileDrag",!0)},a=(d,h)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:_,onDrag:v}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:x}=h;if(g&&this.currentDirection===null){this.currentDirection=XK(x),this.currentDirection!==null&&_&&_(this.currentDirection);return}this.updateAxis("x",h.point,x),this.updateAxis("y",h.point,x),this.visualElement.render(),v&&v(d,h)},l=(d,h)=>this.stop(d,h),c=()=>Qr(d=>{var h;return this.getAnimationState(d)==="paused"&&((h=this.getAxisMotionValue(d).animation)===null||h===void 0?void 0:h.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new vD(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:CD(this.visualElement)})}stop(e,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:o}=this.getProps();o&&kt.postRender(()=>o(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,r){const{drag:s}=this.getProps();if(!r||!np(e,s,this.currentDirection))return;const o=this.getAxisMotionValue(e);let a=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(a=UK(a,this.constraints[e],this.elastic[e])),o.set(a)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:r}=this.getProps(),s=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,o=this.constraints;n&&Cc(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&s?this.constraints=BK(s.layoutBox,n):this.constraints=!1,this.elastic=HK(r),o!==this.constraints&&s&&this.constraints&&!this.hasMutatedConstraints&&Qr(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=WK(s.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!Cc(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const o=QK(r,s.root,this.visualElement.getTransformPagePoint());let a=$K(s.layout.layoutBox,o);if(n){const l=n(qK(a));this.hasMutatedConstraints=!!l,l&&(a=jD(l))}return a}startAnimation(e){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:o,dragSnapToOrigin:a,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=Qr(d=>{if(!np(d,n,this.currentDirection))return;let h=c&&c[d]||{};a&&(h={min:0,max:0});const m=s?200:1e6,g=s?40:1e7,_={type:"inertia",velocity:r?e[d]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...o,...h};return this.startAxisValueAnimation(d,_)});return Promise.all(u).then(l)}startAxisValueAnimation(e,n){const r=this.getAxisMotionValue(e);return lb(this.visualElement,e),r.start(rj(e,r,0,n,this.visualElement,!1))}stopAnimation(){Qr(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Qr(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){Qr(n=>{const{drag:r}=this.getProps();if(!np(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,o=this.getAxisMotionValue(n);if(s&&s.layout){const{min:a,max:l}=s.layout.layoutBox[n];o.set(e[n]-Yt(a,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Cc(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Qr(a=>{const l=this.getAxisMotionValue(a);if(l&&this.constraints!==!1){const c=l.get();s[a]=zK({min:c,max:c},this.constraints[a])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Qr(a=>{if(!np(a,e,null))return;const l=this.getAxisMotionValue(a),{min:c,max:u}=this.constraints[a];l.set(Yt(c,u,s[a]))})}addListeners(){if(!this.visualElement.current)return;YK.set(this.visualElement,this);const e=this.visualElement.current,n=ia(e,"pointerdown",c=>{const{drag:u,dragListener:d=!0}=this.getProps();u&&d&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Cc(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,o=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),kt.read(r);const a=Ui(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(Qr(d=>{const h=this.getAxisMotionValue(d);h&&(this.originPoint[d]+=c[d].translate,h.set(h.get()+c[d].translate))}),this.visualElement.render())});return()=>{a(),n(),o(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:o=!1,dragElastic:a=ub,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:o,dragElastic:a,dragMomentum:l}}}function np(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function XK(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class JK extends Ra{constructor(e){super(e),this.removeGroupControls=tr,this.removeListeners=tr,this.controls=new ZK(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tr}unmount(){this.removeGroupControls(),this.removeListeners()}}const eE=t=>(e,n)=>{t&&kt.postRender(()=>t(e,n))};class eQ extends Ra{constructor(){super(...arguments),this.removePointerDownListener=tr}onPointerDown(e){this.session=new vD(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:CD(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:eE(e),onStart:eE(n),onMove:r,onEnd:(o,a)=>{delete this.session,s&&kt.postRender(()=>s(o,a))}}}mount(){this.removePointerDownListener=ia(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const xx=p.createContext(null);function tQ(){const t=p.useContext(xx);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:r}=t,s=p.useId();p.useEffect(()=>r(s),[]);const o=p.useCallback(()=>n&&n(s),[s,n]);return!e&&n?[!1,o]:[!0]}const lj=p.createContext({}),ED=p.createContext({}),Lp={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tE(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const kd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ze.test(t))t=parseFloat(t);else return t;const n=tE(t,e.target.x),r=tE(t,e.target.y);return`${n}% ${r}%`}},nQ={correct:(t,{treeScale:e,projectionDelta:n})=>{const r=t,s=ba.parse(t);if(s.length>5)return r;const o=ba.createTransformer(t),a=typeof s[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;s[0+a]/=l,s[1+a]/=c;const u=Yt(l,c,.5);return typeof s[2+a]=="number"&&(s[2+a]/=u),typeof s[3+a]=="number"&&(s[3+a]/=u),o(s)}},ey={};function rQ(t){Object.assign(ey,t)}const{schedule:cj,cancel:Jae}=A5(queueMicrotask,!1);class sQ extends p.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:o}=e;rQ(iQ),o&&(n.group&&n.group.add(o),r&&r.register&&s&&r.register(o),o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Lp.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:r,drag:s,isPresent:o}=this.props,a=r.projection;return a&&(a.isPresent=o,s||e.layoutDependency!==n||n===void 0?a.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?a.promote():a.relegate()||kt.postRender(()=>{const l=a.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),cj.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function kD(t){const[e,n]=tQ(),r=p.useContext(lj);return i.jsx(sQ,{...t,layoutGroup:r,switchLayoutGroup:p.useContext(ED),isPresent:e,safeToRemove:n})}const iQ={borderRadius:{...kd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:kd,borderTopRightRadius:kd,borderBottomLeftRadius:kd,borderBottomRightRadius:kd,boxShadow:nQ},AD=["TopLeft","TopRight","BottomLeft","BottomRight"],oQ=AD.length,nE=t=>typeof t=="string"?parseFloat(t):t,rE=t=>typeof t=="number"||ze.test(t);function aQ(t,e,n,r,s,o){s?(t.opacity=Yt(0,n.opacity!==void 0?n.opacity:1,lQ(r)),t.opacityExit=Yt(e.opacity!==void 0?e.opacity:1,0,cQ(r))):o&&(t.opacity=Yt(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let a=0;a<oQ;a++){const l=`border${AD[a]}Radius`;let c=sE(e,l),u=sE(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||rE(c)===rE(u)?(t[l]=Math.max(Yt(nE(c),nE(u),r),0),(li.test(u)||li.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||n.rotate)&&(t.rotate=Yt(e.rotate||0,n.rotate||0,r))}function sE(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const lQ=PD(0,.5,O5),cQ=PD(.5,.95,tr);function PD(t,e,n){return r=>r<t?0:r>e?1:n(Cu(t,e,r))}function iE(t,e){t.min=e.min,t.max=e.max}function Gr(t,e){iE(t.x,e.x),iE(t.y,e.y)}function oE(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function aE(t,e,n,r,s){return t-=e,t=Jg(t,1/n,r),s!==void 0&&(t=Jg(t,1/s,r)),t}function uQ(t,e=0,n=1,r=.5,s,o=t,a=t){if(li.test(e)&&(e=parseFloat(e),e=Yt(a.min,a.max,e/100)-a.min),typeof e!="number")return;let l=Yt(o.min,o.max,r);t===o&&(l-=e),t.min=aE(t.min,e,n,l,s),t.max=aE(t.max,e,n,l,s)}function lE(t,e,[n,r,s],o,a){uQ(t,e[n],e[r],e[s],e.scale,o,a)}const dQ=["x","scaleX","originX"],hQ=["y","scaleY","originY"];function cE(t,e,n,r){lE(t.x,e,dQ,n?n.x:void 0,r?r.x:void 0),lE(t.y,e,hQ,n?n.y:void 0,r?r.y:void 0)}function uE(t){return t.translate===0&&t.scale===1}function ID(t){return uE(t.x)&&uE(t.y)}function dE(t,e){return t.min===e.min&&t.max===e.max}function fQ(t,e){return dE(t.x,e.x)&&dE(t.y,e.y)}function hE(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function RD(t,e){return hE(t.x,e.x)&&hE(t.y,e.y)}function fE(t){return zr(t.x)/zr(t.y)}function mE(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class mQ{constructor(){this.members=[]}add(e){sj(this.members,e),e.scheduleRender()}remove(e){if(ij(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(s=>e===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const o=this.members[s];if(o.isPresent!==!1){r=o;break}}return r?(this.promote(r),!0):!1}promote(e,n){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,n&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:r}=e;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function pQ(t,e,n){let r="";const s=t.x.translate/e.x,o=t.y.translate/e.y,a=(n==null?void 0:n.z)||0;if((s||o||a)&&(r=`translate3d(${s}px, ${o}px, ${a}px) `),(e.x!==1||e.y!==1)&&(r+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:u,rotate:d,rotateX:h,rotateY:m,skewX:g,skewY:_}=n;u&&(r=`perspective(${u}px) ${r}`),d&&(r+=`rotate(${d}deg) `),h&&(r+=`rotateX(${h}deg) `),m&&(r+=`rotateY(${m}deg) `),g&&(r+=`skewX(${g}deg) `),_&&(r+=`skewY(${_}deg) `)}const l=t.x.scale*e.x,c=t.y.scale*e.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const gQ=(t,e)=>t.depth-e.depth;class yQ{constructor(){this.children=[],this.isDirty=!1}add(e){sj(this.children,e),this.isDirty=!0}remove(e){ij(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(gQ),this.isDirty=!1,this.children.forEach(e)}}function Op(t){const e=er(t)?t.get():t;return iK(e)?e.toValue():e}function xQ(t,e){const n=ci.now(),r=({timestamp:s})=>{const o=s-n;o>=e&&(wa(r),t(o-e))};return kt.read(r,!0),()=>wa(r)}function vQ(t){return t instanceof SVGElement&&t.tagName!=="svg"}function wQ(t,e,n){const r=er(t)?t:cf(t);return r.start(rj("",r,e,n)),r.animation}const Ya={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},$d=typeof window<"u"&&window.MotionDebug!==void 0,nv=["","X","Y","Z"],bQ={visibility:"hidden"},pE=1e3;let _Q=0;function rv(t,e,n,r){const{latestValues:s}=e;s[t]&&(n[t]=s[t],e.setStaticValue(t,0),r&&(r[t]=0))}function MD(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=mD(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",kt,!(s||o))}const{parent:r}=t;r&&!r.hasCheckedOptimisedAppear&&MD(r)}function DD({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(a={},l=e==null?void 0:e()){this.id=_Q++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,$d&&(Ya.totalNodes=Ya.resolvedTargetDeltas=Ya.recalculatedProjection=0),this.nodes.forEach(NQ),this.nodes.forEach(AQ),this.nodes.forEach(PQ),this.nodes.forEach(TQ),$d&&window.MotionDebug.record(Ya)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=a,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new yQ)}addEventListener(a,l){return this.eventHandlers.has(a)||this.eventHandlers.set(a,new oj),this.eventHandlers.get(a).add(l)}notifyListeners(a,...l){const c=this.eventHandlers.get(a);c&&c.notify(...l)}hasListeners(a){return this.eventHandlers.has(a)}mount(a,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=vQ(a),this.instance=a;const{layoutId:c,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(a),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),t){let h;const m=()=>this.root.updateBlockedByResize=!1;t(a,()=>{this.root.updateBlockedByResize=!0,h&&h(),h=xQ(m,250),Lp.hasAnimatedSinceResize&&(Lp.hasAnimatedSinceResize=!1,this.nodes.forEach(yE))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&d&&(c||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:_})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||LQ,{onLayoutAnimationStart:x,onLayoutAnimationComplete:y}=d.getProps(),w=!this.targetLayout||!RD(this.targetLayout,_)||g,j=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||j||m&&(w||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(h,j);const E={...z_(v,"layout"),onPlay:x,onComplete:y};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E)}else m||yE(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=_})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const a=this.getStack();a&&a.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,wa(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(IQ),this.animationId++)}getTransformTemplate(){const{visualElement:a}=this.options;return a&&a.getProps().transformTemplate}willUpdate(a=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&MD(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let d=0;d<this.path.length;d++){const h=this.path[d];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),a&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gE);return}this.isUpdating||this.nodes.forEach(EQ),this.isUpdating=!1,this.nodes.forEach(kQ),this.nodes.forEach(jQ),this.nodes.forEach(SQ),this.clearAllSnapshots();const l=ci.now();Ln.delta=no(0,1e3/60,l-Ln.timestamp),Ln.timestamp=l,Ln.isProcessing=!0,K0.update.process(Ln),K0.preRender.process(Ln),K0.render.process(Ln),Ln.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,cj.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(CQ),this.sharedNodes.forEach(RQ)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,kt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){kt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const a=this.layout;this.layout=this.measure(!1),this.layoutCorrected=cn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,a?a.layoutBox:void 0)}updateScroll(a="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===a&&(l=!1),l){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:a,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const a=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!ID(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,d=u!==this.prevTransformTemplateValue;a&&(l||Qa(this.latestValues)||d)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(a=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return a&&(c=this.removeTransform(c)),OQ(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var a;const{visualElement:l}=this.options;if(!l)return cn();const c=l.measureViewportBox();if(!(((a=this.scroll)===null||a===void 0?void 0:a.wasRoot)||this.path.some(VQ))){const{scroll:d}=this.root;d&&(kc(c.x,d.offset.x),kc(c.y,d.offset.y))}return c}removeElementScroll(a){var l;const c=cn();if(Gr(c,a),!((l=this.scroll)===null||l===void 0)&&l.wasRoot)return c;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:m}=d;d!==this.root&&h&&m.layoutScroll&&(h.wasRoot&&Gr(c,a),kc(c.x,h.offset.x),kc(c.y,h.offset.y))}return c}applyTransform(a,l=!1){const c=cn();Gr(c,a);for(let u=0;u<this.path.length;u++){const d=this.path[u];!l&&d.options.layoutScroll&&d.scroll&&d!==d.root&&Ac(c,{x:-d.scroll.offset.x,y:-d.scroll.offset.y}),Qa(d.latestValues)&&Ac(c,d.latestValues)}return Qa(this.latestValues)&&Ac(c,this.latestValues),c}removeTransform(a){const l=cn();Gr(l,a);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Qa(u.latestValues))continue;db(u.latestValues)&&u.updateSnapshot();const d=cn(),h=u.measurePageBox();Gr(d,h),cE(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,d)}return Qa(this.latestValues)&&cE(l,this.latestValues),l}setTargetDelta(a){this.targetDelta=a,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(a){this.options={...this.options,...a,crossfade:a.crossfade!==void 0?a.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ln.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(a=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(a||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:m}=this.options;if(!(!this.layout||!(h||m))){if(this.resolvedRelativeTargetAt=Ln.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cn(),this.relativeTargetOrigin=cn(),lh(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Gr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=cn(),this.targetWithTransforms=cn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),FK(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Gr(this.target,this.layout.layoutBox),ND(this.target,this.targetDelta)):Gr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=cn(),this.relativeTargetOrigin=cn(),lh(this.relativeTargetOrigin,this.target,g.target),Gr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}$d&&Ya.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||db(this.parent.latestValues)||SD(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var a;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===Ln.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;Gr(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;KK(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=cn());const{target:_}=l;if(!_){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(oE(this.prevProjectionDelta.x,this.projectionDelta.x),oE(this.prevProjectionDelta.y,this.projectionDelta.y)),ah(this.projectionDelta,this.layoutCorrected,_,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!mE(this.projectionDelta.x,this.prevProjectionDelta.x)||!mE(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",_)),$d&&Ya.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(a=!0){var l;if((l=this.options.visualElement)===null||l===void 0||l.scheduleRender(),a){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ec(),this.projectionDelta=Ec(),this.projectionDeltaWithTransform=Ec()}setAnimationOrigin(a,l=!1){const c=this.snapshot,u=c?c.latestValues:{},d={...this.latestValues},h=Ec();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=cn(),g=c?c.source:void 0,_=this.layout?this.layout.source:void 0,v=g!==_,x=this.getStack(),y=!x||x.members.length<=1,w=!!(v&&!y&&this.options.crossfade===!0&&!this.path.some(DQ));this.animationProgress=0;let j;this.mixTargetDelta=E=>{const P=E/1e3;xE(h.x,a.x,P),xE(h.y,a.y,P),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(lh(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),MQ(this.relativeTarget,this.relativeTargetOrigin,m,P),j&&fQ(this.relativeTarget,j)&&(this.isProjectionDirty=!1),j||(j=cn()),Gr(j,this.relativeTarget)),v&&(this.animationValues=d,aQ(d,u,this.latestValues,P,w,y)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=P},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(a){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(wa(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=kt.update(()=>{Lp.hasAnimatedSinceResize=!0,this.currentAnimation=wQ(0,pE,{...a,onUpdate:l=>{this.mixTargetDelta(l),a.onUpdate&&a.onUpdate(l)},onComplete:()=>{a.onComplete&&a.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const a=this.getStack();a&&a.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pE),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const a=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:d}=a;if(!(!l||!c||!u)){if(this!==a&&this.layout&&u&&LD(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||cn();const h=zr(this.layout.layoutBox.x);c.x.min=a.target.x.min,c.x.max=c.x.min+h;const m=zr(this.layout.layoutBox.y);c.y.min=a.target.y.min,c.y.max=c.y.min+m}Gr(l,c),Ac(l,d),ah(this.projectionDeltaWithTransform,this.layoutCorrected,l,d)}}registerSharedNode(a,l){this.sharedNodes.has(a)||this.sharedNodes.set(a,new mQ),this.sharedNodes.get(a).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const a=this.getStack();return a?a.lead===this:!0}getLead(){var a;const{layoutId:l}=this.options;return l?((a=this.getStack())===null||a===void 0?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:l}=this.options;return l?(a=this.getStack())===null||a===void 0?void 0:a.prevLead:void 0}getStack(){const{layoutId:a}=this.options;if(a)return this.root.sharedNodes.get(a)}promote({needsReset:a,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),a&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const a=this.getStack();return a?a.relegate(this):!1}resetSkewAndRotation(){const{visualElement:a}=this.options;if(!a)return;let l=!1;const{latestValues:c}=a;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&rv("z",a,u,this.animationValues);for(let d=0;d<nv.length;d++)rv(`rotate${nv[d]}`,a,u,this.animationValues),rv(`skew${nv[d]}`,a,u,this.animationValues);a.render();for(const d in u)a.setStaticValue(d,u[d]),this.animationValues&&(this.animationValues[d]=u[d]);a.scheduleRender()}getProjectionStyles(a){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return bQ;const u={visibility:""},d=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Op(a==null?void 0:a.pointerEvents)||"",u.transform=d?d(this.latestValues,""):"none",u;const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){const v={};return this.options.layoutId&&(v.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,v.pointerEvents=Op(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!Qa(this.latestValues)&&(v.transform=d?d({},""):"none",this.hasProjected=!1),v}const m=h.animationValues||h.latestValues;this.applyTransformsToTarget(),u.transform=pQ(this.projectionDeltaWithTransform,this.treeScale,m),d&&(u.transform=d(m,u.transform));const{x:g,y:_}=this.projectionDelta;u.transformOrigin=`${g.origin*100}% ${_.origin*100}% 0`,h.animationValues?u.opacity=h===this?(c=(l=m.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:u.opacity=h===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const v in ey){if(m[v]===void 0)continue;const{correct:x,applyTo:y}=ey[v],w=u.transform==="none"?m[v]:x(m[v],h);if(y){const j=y.length;for(let E=0;E<j;E++)u[y[E]]=w}else u[v]=w}return this.options.layoutId&&(u.pointerEvents=h===this?Op(a==null?void 0:a.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(a=>{var l;return(l=a.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(gE),this.root.sharedNodes.clear()}}}function jQ(t){t.updateLayout()}function SQ(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=t.layout,{animationType:o}=t.options,a=n.source!==t.layout.source;o==="size"?Qr(h=>{const m=a?n.measuredBox[h]:n.layoutBox[h],g=zr(m);m.min=r[h].min,m.max=m.min+g}):LD(o,n.layoutBox,r)&&Qr(h=>{const m=a?n.measuredBox[h]:n.layoutBox[h],g=zr(r[h]);m.max=m.min+g,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+g)});const l=Ec();ah(l,r,n.layoutBox);const c=Ec();a?ah(c,t.applyTransform(s,!0),n.measuredBox):ah(c,r,n.layoutBox);const u=!ID(l);let d=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:m,layout:g}=h;if(m&&g){const _=cn();lh(_,n.layoutBox,m.layoutBox);const v=cn();lh(v,r,g.layoutBox),RD(_,v)||(d=!0),h.options.layoutRoot&&(t.relativeTarget=v,t.relativeTargetOrigin=_,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:r,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:d})}else if(t.isLead()){const{onExitComplete:r}=t.options;r&&r()}t.options.transition=void 0}function NQ(t){$d&&Ya.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function TQ(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function CQ(t){t.clearSnapshot()}function gE(t){t.clearMeasurements()}function EQ(t){t.isLayoutDirty=!1}function kQ(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function yE(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function AQ(t){t.resolveTargetDelta()}function PQ(t){t.calcProjection()}function IQ(t){t.resetSkewAndRotation()}function RQ(t){t.removeLeadSnapshot()}function xE(t,e,n){t.translate=Yt(e.translate,0,n),t.scale=Yt(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function vE(t,e,n,r){t.min=Yt(e.min,n.min,r),t.max=Yt(e.max,n.max,r)}function MQ(t,e,n,r){vE(t.x,e.x,n.x,r),vE(t.y,e.y,n.y,r)}function DQ(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const LQ={duration:.45,ease:[.4,0,.1,1]},wE=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),bE=wE("applewebkit/")&&!wE("chrome/")?Math.round:tr;function _E(t){t.min=bE(t.min),t.max=bE(t.max)}function OQ(t){_E(t.x),_E(t.y)}function LD(t,e,n){return t==="position"||t==="preserve-aspect"&&!VK(fE(e),fE(n),.2)}function VQ(t){var e;return t!==t.root&&((e=t.scroll)===null||e===void 0?void 0:e.wasRoot)}const FQ=DD({attachResizeListener:(t,e)=>Ui(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),sv={current:void 0},OD=DD({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!sv.current){const t=new FQ({});t.mount(window),t.setOptions({layoutScroll:!0}),sv.current=t}return sv.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),UQ={pan:{Feature:eQ},drag:{Feature:JK,ProjectionNode:OD,MeasureLayout:kD}};function jE(t,e,n){const{props:r}=t;t.animationState&&r.whileHover&&t.animationState.setActive("whileHover",n);const s=r[n?"onHoverStart":"onHoverEnd"];s&&kt.postRender(()=>s(e,Wf(e)))}class BQ extends Ra{mount(){const{current:e,props:n}=this.node;e&&(this.unmount=EK(e,r=>(jE(this.node,r,!0),s=>jE(this.node,s,!1)),{passive:!n.onHoverStart&&!n.onHoverEnd}))}unmount(){}}class $Q extends Ra{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sa(Ui(this.node.current,"focus",()=>this.onFocus()),Ui(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const VD=(t,e)=>e?t===e?!0:VD(t,e.parentElement):!1;function iv(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,Wf(n))}class zQ extends Ra{constructor(){super(...arguments),this.removeStartListeners=tr,this.removeEndListeners=tr,this.removeAccessibleListeners=tr,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const r=this.node.getProps(),o=ia(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:d,globalTapTarget:h}=this.node.getProps(),m=!h&&!VD(this.node.current,l.target)?d:u;m&&kt.update(()=>m(l,c))},{passive:!(r.onTap||r.onPointerUp)}),a=ia(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(r.onTapCancel||r.onPointerCancel)});this.removeEndListeners=sa(o,a),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=o=>{if(o.key!=="Enter"||this.isPressing)return;const a=l=>{l.key!=="Enter"||!this.checkPressEnd()||iv("up",(c,u)=>{const{onTap:d}=this.node.getProps();d&&kt.postRender(()=>d(c,u))})};this.removeEndListeners(),this.removeEndListeners=Ui(this.node.current,"keyup",a),iv("down",(l,c)=>{this.startPress(l,c)})},n=Ui(this.node.current,"keydown",e),r=()=>{this.isPressing&&iv("cancel",(o,a)=>this.cancelPress(o,a))},s=Ui(this.node.current,"blur",r);this.removeAccessibleListeners=sa(n,s)}}startPress(e,n){this.isPressing=!0;const{onTapStart:r,whileTap:s}=this.node.getProps();s&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&kt.postRender(()=>r(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!yD()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:r}=this.node.getProps();r&&kt.postRender(()=>r(e,n))}mount(){const e=this.node.getProps(),n=ia(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),r=Ui(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=sa(n,r)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const fb=new WeakMap,ov=new WeakMap,WQ=t=>{const e=fb.get(t.target);e&&e(t)},HQ=t=>{t.forEach(WQ)};function qQ({root:t,...e}){const n=t||document;ov.has(n)||ov.set(n,{});const r=ov.get(n),s=JSON.stringify(e);return r[s]||(r[s]=new IntersectionObserver(HQ,{root:t,...e})),r[s]}function GQ(t,e,n){const r=qQ(e);return fb.set(t,n),r.observe(t),()=>{fb.delete(t),r.unobserve(t)}}const KQ={some:0,all:1};class QQ extends Ra{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:o}=e,a={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:KQ[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,o&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:d,onViewportLeave:h}=this.node.getProps(),m=u?d:h;m&&m(c)};return GQ(this.node.current,a,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(YQ(e,n))&&this.startObserver()}unmount(){}}function YQ({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const ZQ={inView:{Feature:QQ},tap:{Feature:zQ},focus:{Feature:$Q},hover:{Feature:BQ}},XQ={layout:{ProjectionNode:OD,MeasureLayout:kD}},uj=p.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),vx=p.createContext({}),dj=typeof window<"u",FD=dj?p.useLayoutEffect:p.useEffect,UD=p.createContext({strict:!1});function JQ(t,e,n,r,s){var o,a;const{visualElement:l}=p.useContext(vx),c=p.useContext(UD),u=p.useContext(xx),d=p.useContext(uj).reducedMotion,h=p.useRef();r=r||c.renderer,!h.current&&r&&(h.current=r(t,{visualState:e,parent:l,props:n,presenceContext:u,blockInitialAnimation:u?u.initial===!1:!1,reducedMotionConfig:d}));const m=h.current,g=p.useContext(ED);m&&!m.projection&&s&&(m.type==="html"||m.type==="svg")&&eY(h.current,n,s,g);const _=p.useRef(!1);p.useInsertionEffect(()=>{m&&_.current&&m.update(n,u)});const v=n[fD],x=p.useRef(!!v&&!(!((o=window.MotionHandoffIsComplete)===null||o===void 0)&&o.call(window,v))&&((a=window.MotionHasOptimisedAnimation)===null||a===void 0?void 0:a.call(window,v)));return FD(()=>{m&&(_.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),cj.render(m.render),x.current&&m.animationState&&m.animationState.animateChanges())}),p.useEffect(()=>{m&&(!x.current&&m.animationState&&m.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var y;(y=window.MotionHandoffMarkAsComplete)===null||y===void 0||y.call(window,v)}),x.current=!1))}),m}function eY(t,e,n,r){const{layoutId:s,layout:o,drag:a,dragConstraints:l,layoutScroll:c,layoutRoot:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:BD(t.parent)),t.projection.setOptions({layoutId:s,layout:o,alwaysMeasureLayout:!!a||l&&Cc(l),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:r,layoutScroll:c,layoutRoot:u})}function BD(t){if(t)return t.options.allowProjection!==!1?t.projection:BD(t.parent)}function tY(t,e,n){return p.useCallback(r=>{r&&t.mount&&t.mount(r),e&&(r?e.mount(r):e.unmount()),n&&(typeof n=="function"?n(r):Cc(n)&&(n.current=r))},[e])}function wx(t){return px(t.animate)||$_.some(e=>of(t[e]))}function $D(t){return!!(wx(t)||t.variants)}function nY(t,e){if(wx(t)){const{initial:n,animate:r}=t;return{initial:n===!1||of(n)?n:void 0,animate:of(r)?r:void 0}}return t.inherit!==!1?e:{}}function rY(t){const{initial:e,animate:n}=nY(t,p.useContext(vx));return p.useMemo(()=>({initial:e,animate:n}),[SE(e),SE(n)])}function SE(t){return Array.isArray(t)?t.join(" "):t}const NE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Eu={};for(const t in NE)Eu[t]={isEnabled:e=>NE[t].some(n=>!!e[n])};function sY(t){for(const e in t)Eu[e]={...Eu[e],...t[e]}}const iY=Symbol.for("motionComponentSymbol");function oY({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:r,Component:s}){t&&sY(t);function o(l,c){let u;const d={...p.useContext(uj),...l,layoutId:aY(l)},{isStatic:h}=d,m=rY(l),g=r(l,h);if(!h&&dj){lY();const _=cY(d);u=_.MeasureLayout,m.visualElement=JQ(s,g,d,e,_.ProjectionNode)}return i.jsxs(vx.Provider,{value:m,children:[u&&m.visualElement?i.jsx(u,{visualElement:m.visualElement,...d}):null,n(s,l,tY(g,m.visualElement,c),g,h,m.visualElement)]})}const a=p.forwardRef(o);return a[iY]=s,a}function aY({layoutId:t}){const e=p.useContext(lj).id;return e&&t!==void 0?e+"-"+t:t}function lY(t,e){p.useContext(UD).strict}function cY(t){const{drag:e,layout:n}=Eu;if(!e&&!n)return{};const r={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const uY=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function hj(t){return typeof t!="string"||t.includes("-")?!1:!!(uY.indexOf(t)>-1||/[A-Z]/u.test(t))}function zD(t,{style:e,vars:n},r,s){Object.assign(t.style,e,s&&s.getProjectionStyles(r));for(const o in n)t.style.setProperty(o,n[o])}const WD=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function HD(t,e,n,r){zD(t,e,void 0,r);for(const s in e.attrs)t.setAttribute(WD.has(s)?s:aj(s),e.attrs[s])}function qD(t,{layout:e,layoutId:n}){return Wl.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!ey[t]||t==="opacity")}function fj(t,e,n){var r;const{style:s}=t,o={};for(const a in s)(er(s[a])||e.style&&er(e.style[a])||qD(a,t)||((r=n==null?void 0:n.getValue(a))===null||r===void 0?void 0:r.liveStyle)!==void 0)&&(o[a]=s[a]);return o}function GD(t,e,n){const r=fj(t,e,n);for(const s in t)if(er(t[s])||er(e[s])){const o=Bf.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[o]=t[s]}return r}function mj(t){const e=p.useRef(null);return e.current===null&&(e.current=t()),e.current}function dY({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},r,s,o){const a={latestValues:hY(r,s,o,t),renderState:e()};return n&&(a.mount=l=>n(r,l,a)),a}const KD=t=>(e,n)=>{const r=p.useContext(vx),s=p.useContext(xx),o=()=>dY(t,e,r,s);return n?o():mj(o)};function hY(t,e,n,r){const s={},o=r(t,{});for(const m in o)s[m]=Op(o[m]);let{initial:a,animate:l}=t;const c=wx(t),u=$D(t);e&&u&&!c&&t.inherit!==!1&&(a===void 0&&(a=e.initial),l===void 0&&(l=e.animate));let d=n?n.initial===!1:!1;d=d||a===!1;const h=d?l:a;if(h&&typeof h!="boolean"&&!px(h)){const m=Array.isArray(h)?h:[h];for(let g=0;g<m.length;g++){const _=U_(t,m[g]);if(_){const{transitionEnd:v,transition:x,...y}=_;for(const w in y){let j=y[w];if(Array.isArray(j)){const E=d?j.length-1:0;j=j[E]}j!==null&&(s[w]=j)}for(const w in v)s[w]=v[w]}}}return s}const pj=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),QD=()=>({...pj(),attrs:{}}),YD=(t,e)=>e&&typeof t=="number"?e.transform(t):t,fY={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},mY=Bf.length;function pY(t,e,n){let r="",s=!0;for(let o=0;o<mY;o++){const a=Bf[o],l=t[a];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(a.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=YD(l,Y_[a]);if(!c){s=!1;const d=fY[a]||a;r+=`${d}(${u}) `}n&&(e[a]=u)}}return r=r.trim(),n?r=n(e,s?"":r):s&&(r="none"),r}function gj(t,e,n){const{style:r,vars:s,transformOrigin:o}=t;let a=!1,l=!1;for(const c in e){const u=e[c];if(Wl.has(c)){a=!0;continue}else if($5(c)){s[c]=u;continue}else{const d=YD(u,Y_[c]);c.startsWith("origin")?(l=!0,o[c]=d):r[c]=d}}if(e.transform||(a||n?r.transform=pY(e,t.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:d=0}=o;r.transformOrigin=`${c} ${u} ${d}`}}function TE(t,e,n){return typeof t=="string"?t:ze.transform(e+n*t)}function gY(t,e,n){const r=TE(e,t.x,t.width),s=TE(n,t.y,t.height);return`${r} ${s}`}const yY={offset:"stroke-dashoffset",array:"stroke-dasharray"},xY={offset:"strokeDashoffset",array:"strokeDasharray"};function vY(t,e,n=1,r=0,s=!0){t.pathLength=1;const o=s?yY:xY;t[o.offset]=ze.transform(-r);const a=ze.transform(e),l=ze.transform(n);t[o.array]=`${a} ${l}`}function yj(t,{attrX:e,attrY:n,attrScale:r,originX:s,originY:o,pathLength:a,pathSpacing:l=1,pathOffset:c=0,...u},d,h){if(gj(t,u,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:g,dimensions:_}=t;m.transform&&(_&&(g.transform=m.transform),delete m.transform),_&&(s!==void 0||o!==void 0||g.transform)&&(g.transformOrigin=gY(_,s!==void 0?s:.5,o!==void 0?o:.5)),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),a!==void 0&&vY(m,a,l,c,!1)}const xj=t=>typeof t=="string"&&t.toLowerCase()==="svg",wY={useVisualState:KD({scrapeMotionValuesFromProps:GD,createRenderState:QD,onMount:(t,e,{renderState:n,latestValues:r})=>{kt.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),kt.render(()=>{yj(n,r,xj(e.tagName),t.transformTemplate),HD(e,n)})}})},bY={useVisualState:KD({scrapeMotionValuesFromProps:fj,createRenderState:pj})};function ZD(t,e,n){for(const r in e)!er(e[r])&&!qD(r,n)&&(t[r]=e[r])}function _Y({transformTemplate:t},e){return p.useMemo(()=>{const n=pj();return gj(n,e,t),Object.assign({},n.vars,n.style)},[e])}function jY(t,e){const n=t.style||{},r={};return ZD(r,n,t),Object.assign(r,_Y(t,e)),r}function SY(t,e){const n={},r=jY(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=r,n}const NY=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ty(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||NY.has(t)}let XD=t=>!ty(t);function TY(t){t&&(XD=e=>e.startsWith("on")?!ty(e):t(e))}try{TY(require("@emotion/is-prop-valid").default)}catch{}function CY(t,e,n){const r={};for(const s in t)s==="values"&&typeof t.values=="object"||(XD(s)||n===!0&&ty(s)||!e&&!ty(s)||t.draggable&&s.startsWith("onDrag"))&&(r[s]=t[s]);return r}function EY(t,e,n,r){const s=p.useMemo(()=>{const o=QD();return yj(o,e,xj(r),t.transformTemplate),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};ZD(o,t.style,t),s.style={...o,...s.style}}return s}function kY(t=!1){return(n,r,s,{latestValues:o},a)=>{const c=(hj(n)?EY:SY)(r,o,a,n),u=CY(r,typeof n=="string",t),d=n!==p.Fragment?{...u,...c,ref:s}:{},{children:h}=r,m=p.useMemo(()=>er(h)?h.get():h,[h]);return p.createElement(n,{...d,children:m})}}function AY(t,e){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const a={...hj(r)?wY:bY,preloadedFeatures:t,useRender:kY(s),createVisualElement:e,Component:r};return oY(a)}}const mb={current:null},JD={current:!1};function PY(){if(JD.current=!0,!!dj)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>mb.current=t.matches;t.addListener(e),e()}else mb.current=!1}function IY(t,e,n){for(const r in e){const s=e[r],o=n[r];if(er(s))t.addValue(r,s);else if(er(o))t.addValue(r,cf(s,{owner:t}));else if(o!==s)if(t.hasValue(r)){const a=t.getValue(r);a.liveStyle===!0?a.jump(s):a.hasAnimated||a.set(s)}else{const a=t.getStaticValue(r);t.addValue(r,cf(a!==void 0?a:s,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const CE=new WeakMap,RY=[...H5,Qn,ba],MY=t=>RY.find(W5(t)),EE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class DY{scrapeMotionValuesFromProps(e,n,r){return{}}constructor({parent:e,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:o,visualState:a},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=G_,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=ci.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,kt.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=a;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=e,this.props=n,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!o,this.isControllingVariants=wx(n),this.isVariantNode=$D(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:d,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in h){const g=h[m];c[m]!==void 0&&er(g)&&g.set(c[m],!1)}}mount(e){this.current=e,CE.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),JD.current||PY(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:mb.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){CE.delete(this.current),this.projection&&this.projection.unmount(),wa(this.notifyUpdate),wa(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Wl.has(e),s=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&kt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),o=n.on("renderRequest",this.scheduleRender);let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{s(),o(),a&&a(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Eu){const n=Eu[e];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):cn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<EE.length;r++){const s=EE[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const o="on"+s,a=e[o];a&&(this.propEventSubscriptions[s]=this.on(s,a))}this.prevMotionValues=IY(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const r=this.values.get(e);n!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return r===void 0&&n!==void 0&&(r=cf(n===null?void 0:n,{owner:this}),this.addValue(e,r)),r}readValue(e,n){var r;let s=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(r=this.getBaseTargetFromProps(this.props,e))!==null&&r!==void 0?r:this.readValueFromInstance(this.current,e,this.options);return s!=null&&(typeof s=="string"&&(U5(s)||F5(s))?s=parseFloat(s):!MY(s)&&ba.test(n)&&(s=J5(e,n)),this.setBaseTarget(e,er(s)?s.get():s)),er(s)?s.get():s}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:r}=this.props;let s;if(typeof r=="string"||typeof r=="object"){const a=U_(this.props,r,(n=this.presenceContext)===null||n===void 0?void 0:n.custom);a&&(s=a[e])}if(r&&s!==void 0)return s;const o=this.getBaseTargetFromProps(this.props,e);return o!==void 0&&!er(o)?o:this.initialValues[e]!==void 0&&s===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new oj),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class eL extends DY{constructor(){super(...arguments),this.KeyframeResolver=eD}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:r}){delete n[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;er(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function LY(t){return window.getComputedStyle(t)}class OY extends eL{constructor(){super(...arguments),this.type="html",this.renderInstance=zD}readValueFromInstance(e,n){if(Wl.has(n)){const r=Z_(n);return r&&r.default||0}else{const r=LY(e),s=($5(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return TD(e,n)}build(e,n,r){gj(e,n,r.transformTemplate)}scrapeMotionValuesFromProps(e,n,r){return fj(e,n,r)}}class VY extends eL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=cn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Wl.has(n)){const r=Z_(n);return r&&r.default||0}return n=WD.has(n)?n:aj(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,r){return GD(e,n,r)}build(e,n,r){yj(e,n,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,r,s){HD(e,n,r,s)}mount(e){this.isSVGTag=xj(e.tagName),super.mount(e)}}const FY=(t,e)=>hj(t)?new VY(e):new OY(e,{allowProjection:t!==p.Fragment}),UY=AY({...TK,...ZQ,...UQ,...XQ},FY),rp=Sq(UY);class BY extends p.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const r=this.props.sizeRef.current;r.height=n.offsetHeight||0,r.width=n.offsetWidth||0,r.top=n.offsetTop,r.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function $Y({children:t,isPresent:e}){const n=p.useId(),r=p.useRef(null),s=p.useRef({width:0,height:0,top:0,left:0}),{nonce:o}=p.useContext(uj);return p.useInsertionEffect(()=>{const{width:a,height:l,top:c,left:u}=s.current;if(e||!r.current||!a||!l)return;r.current.dataset.motionPopId=n;const d=document.createElement("style");return o&&(d.nonce=o),document.head.appendChild(d),d.sheet&&d.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${l}px !important;
            top: ${c}px !important;
            left: ${u}px !important;
          }
        `),()=>{document.head.removeChild(d)}},[e]),i.jsx(BY,{isPresent:e,childRef:r,sizeRef:s,children:p.cloneElement(t,{ref:r})})}const zY=({children:t,initial:e,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:o,mode:a})=>{const l=mj(WY),c=p.useId(),u=p.useCallback(h=>{l.set(h,!0);for(const m of l.values())if(!m)return;r&&r()},[l,r]),d=p.useMemo(()=>({id:c,initial:e,isPresent:n,custom:s,onExitComplete:u,register:h=>(l.set(h,!1),()=>l.delete(h))}),o?[Math.random(),u]:[n,u]);return p.useMemo(()=>{l.forEach((h,m)=>l.set(m,!1))},[n]),p.useEffect(()=>{!n&&!l.size&&r&&r()},[n]),a==="popLayout"&&(t=i.jsx($Y,{isPresent:n,children:t})),i.jsx(xx.Provider,{value:d,children:t})};function WY(){return new Map}const sp=t=>t.key||"";function kE(t){const e=[];return p.Children.forEach(t,n=>{p.isValidElement(n)&&e.push(n)}),e}const HY=({children:t,exitBeforeEnter:e,custom:n,initial:r=!0,onExitComplete:s,presenceAffectsLayout:o=!0,mode:a="sync"})=>{const l=p.useMemo(()=>kE(t),[t]),c=l.map(sp),u=p.useRef(!0),d=p.useRef(l),h=mj(()=>new Map),[m,g]=p.useState(l),[_,v]=p.useState(l);FD(()=>{u.current=!1,d.current=l;for(let w=0;w<_.length;w++){const j=sp(_[w]);c.includes(j)?h.delete(j):h.get(j)!==!0&&h.set(j,!1)}},[_,c.length,c.join("-")]);const x=[];if(l!==m){let w=[...l];for(let j=0;j<_.length;j++){const E=_[j],P=sp(E);c.includes(P)||(w.splice(j,0,E),x.push(E))}a==="wait"&&x.length&&(w=x),v(kE(w)),g(l);return}const{forceRender:y}=p.useContext(lj);return i.jsx(i.Fragment,{children:_.map(w=>{const j=sp(w),E=l===_||c.includes(j),P=()=>{if(h.has(j))h.set(j,!0);else return;let U=!0;h.forEach(T=>{T||(U=!1)}),U&&(y==null||y(),v(d.current),s&&s())};return i.jsx(zY,{isPresent:E,initial:!u.current||r?void 0:!1,custom:E?void 0:n,presenceAffectsLayout:o,mode:a,onExitComplete:E?void 0:P,children:w},j)})})},qY="/assets/image_1757430101336-D1LaAzMO.png",Ad=[{id:"psychic_sage",name:"Psychic Sage",type:"Psychic",emoji:"🧠",description:"Master of mental powers with energy manipulation abilities",baseStats:{hp:75,attack:85,defense:60,speed:70,energy:100},abilities:[{name:"Mind Blast",damage:25,energyCost:30,description:"Powerful psychic attack"},{name:"Energy Drain",damage:15,energyCost:20,special:"steals_energy",description:"Drains enemy energy"},{name:"Barrier",damage:0,energyCost:25,special:"defense_boost",description:"Increases defense for 2 turns"},{name:"Heal",damage:0,energyCost:40,special:"heal_self",description:"Restores 30 HP"}],strengths:["Fighting","Poison"],weaknesses:["Dark","Bug"]},{id:"shadow_striker",name:"Shadow Striker",type:"Dark",emoji:"🥷",description:"High-risk, high-reward assassin with critical strike abilities",baseStats:{hp:60,attack:95,defense:50,speed:90,energy:80},abilities:[{name:"Shadow Strike",damage:30,energyCost:35,special:"crit_chance",description:"50% chance for double damage"},{name:"Poison Dart",damage:20,energyCost:25,special:"poison",description:"Deals damage over time"},{name:"Vanish",damage:0,energyCost:30,special:"dodge_next",description:"Avoid next attack"},{name:"Berserk",damage:40,energyCost:50,special:"self_damage",description:"Powerful attack that hurts self"}],strengths:["Psychic","Ghost"],weaknesses:["Fighting","Bug"]},{id:"iron_guardian",name:"Iron Guardian",type:"Steel",emoji:"🛡️",description:"Heavily armored defender with protective abilities",baseStats:{hp:120,attack:70,defense:100,speed:40,energy:90},abilities:[{name:"Steel Slam",damage:25,energyCost:30,description:"Heavy metallic attack"},{name:"Iron Defense",damage:0,energyCost:20,special:"damage_reduction",description:"Reduce incoming damage"},{name:"Taunt",damage:0,energyCost:15,special:"force_target",description:"Forces enemy to attack you"},{name:"Shield Bash",damage:35,energyCost:40,special:"stun",description:"Attack that may stun enemy"}],strengths:["Rock","Ice"],weaknesses:["Fire","Fighting"]},{id:"mirror_mage",name:"Mirror Mage",type:"Psychic",emoji:"🪞",description:"Mystical spellcaster with reflection and counter abilities",baseStats:{hp:70,attack:75,defense:80,speed:85,energy:95},abilities:[{name:"Mirror Shot",damage:20,energyCost:25,description:"Reflects light energy"},{name:"Counter Spell",damage:0,energyCost:30,special:"reflect_damage",description:"Next attack reflects back"},{name:"Illusion",damage:0,energyCost:20,special:"confuse",description:"May cause enemy to hit themselves"},{name:"Prism Beam",damage:35,energyCost:45,special:"type_change",description:"Changes damage type randomly"}],strengths:["Fighting","Poison"],weaknesses:["Ghost","Dark"]},{id:"elemental_warrior",name:"Elemental Warrior",type:"Normal",emoji:"⚡",image:qY,description:"Versatile fighter with balanced elemental abilities",baseStats:{hp:80,attack:80,defense:70,speed:75,energy:85},abilities:[{name:"Elemental Strike",damage:25,energyCost:30,description:"Adapts to enemy weakness"},{name:"Quick Attack",damage:15,energyCost:15,special:"always_first",description:"Always goes first"},{name:"Meditate",damage:0,energyCost:0,special:"restore_energy",description:"Restores 25 energy"},{name:"Combo Attack",damage:20,energyCost:35,special:"multi_hit",description:"Hits 2-3 times"}],strengths:[],weaknesses:["Fighting"]}],So={grunts:[{name:"Shadow Grunt",type:"Dark",hp:40,attack:20,defense:15,abilities:["Dark Slash"]},{name:"Rock Minion",type:"Rock",hp:50,attack:18,defense:25,abilities:["Stone Throw"]},{name:"Fire Imp",type:"Fire",hp:35,attack:25,defense:10,abilities:["Ember"]},{name:"Ice Shard",type:"Ice",hp:30,attack:22,defense:20,abilities:["Frost Bite"]}],bosses:[{name:"Dungeon Lord",type:"Dark",hp:150,attack:35,defense:30,abilities:["Shadow Storm","Dark Barrier","Soul Drain"],phase2:{name:"Enraged Form",hpThreshold:50,attackBoost:15}},{name:"Crystal Golem",type:"Rock",hp:200,attack:30,defense:45,abilities:["Boulder Smash","Crystal Shield","Earthquake"],phase2:{name:"Shattered Core",hpThreshold:60,speedBoost:20}}]},GY=({moves:t,isVisible:e})=>!e||t.length===0?null:i.jsx("div",{className:"fixed top-4 right-4 pointer-events-none z-50 max-w-sm",children:i.jsx("div",{className:"space-y-2",children:t.map((n,r)=>i.jsx("div",{className:`transform transition-all duration-300 animate-in slide-in-from-right
              ${n.type==="hp_loss"?"bg-red-900/90 border border-red-500":"bg-purple-900/90 border border-purple-500"} 
              rounded-lg p-3 backdrop-blur-sm shadow-lg`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${n.type==="hp_loss"?"bg-red-400":"bg-purple-400"}`}),i.jsxs("div",{children:[i.jsx("div",{className:"text-white font-medium text-sm",children:n.playerName}),i.jsx("div",{className:"text-gray-300 text-xs",children:n.reason})]})]}),i.jsxs("div",{className:`font-bold ${n.type==="hp_loss"?"text-red-400":"text-purple-400"} ml-3`,children:[n.type==="hp_loss"?"-":"+",n.amount," ",n.type==="hp_loss"?"HP":"Energy"]})]})},r))})}),AE=({isVisible:t,type:e,message:n,onDismiss:r})=>{if(!t)return null;const o=(()=>{switch(e){case"time":return{icon:Li,color:"from-orange-500 to-red-500",bg:"bg-orange-900/90 border-orange-400",iconColor:"text-orange-300",animation:"animate-pulse"};case"wrong":return{icon:gu,color:"from-yellow-500 to-orange-500",bg:"bg-yellow-900/90 border-yellow-400",iconColor:"text-yellow-300",animation:"animate-bounce"};case"energy":return{icon:Xi,color:"from-purple-500 to-blue-500",bg:"bg-purple-900/90 border-purple-400",iconColor:"text-purple-300",animation:"animate-pulse"};default:return{icon:GI,color:"from-blue-500 to-cyan-500",bg:"bg-blue-900/90 border-blue-400",iconColor:"text-blue-300",animation:"animate-pulse"}}})(),a=o.icon;return i.jsx("div",{className:"fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-50 pointer-events-auto",children:i.jsx("div",{className:`${o.bg} border-2 rounded-lg p-6 max-w-md w-full mx-4 backdrop-blur-sm shadow-2xl
        animate-in fade-in-0 zoom-in-95 duration-300`,children:i.jsxs("div",{className:"flex items-start space-x-4",children:[i.jsx("div",{className:`${o.animation} p-2 rounded-full bg-gradient-to-r ${o.color}`,children:i.jsx(a,{className:`w-6 h-6 ${o.iconColor}`})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-white font-bold mb-2",children:e==="time"?"Time Running Out!":e==="wrong"?"Need a Hint?":e==="energy"?"Energy Tip!":"Game Hint"}),i.jsx("p",{className:"text-gray-200 text-sm mb-4",children:n}),i.jsx("div",{className:"flex justify-end",children:i.jsx(ee,{size:"sm",variant:"outline",onClick:r,className:"text-xs",children:"Got it!"})})]})]})})})};function KY(){var dd,mm,hs,Ar,ho,fo,ec,Ct,za,mo,po,pm,hd,gm,ym,xm;const{user:t,isLoading:e}=Rn(),{toast:n}=tn(),r=$u(),s=(V,z)=>{const J=Math.random().toString(36).substr(2,9);ir(oe=>[...oe,{id:J,amount:V,type:z,timestamp:Date.now()}]),V>=20&&(Us(!0),setTimeout(()=>Us(!1),500)),z==="player"?(Bs(oe=>({...oe,player:!0})),setTimeout(()=>Bs(oe=>({...oe,player:!1})),300)):(Bs(oe=>({...oe,enemy:!0})),setTimeout(()=>Bs(oe=>({...oe,enemy:!1})),300)),setTimeout(()=>{ir(oe=>oe.filter(be=>be.id!==J))},2e3)},o=(V,z)=>{const J=Math.random().toString(36).substr(2,9);ir(oe=>[...oe,{id:J,amount:-V,type:z,timestamp:Date.now()}]),setTimeout(()=>{ir(oe=>oe.filter(be=>be.id!==J))},2e3)},a=p.useRef(null);if(e)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 to-secondary/5 p-6 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),i.jsx("p",{className:"text-lg text-muted-foreground",children:"Loading..."})]})});const l=!t,[c,u]=p.useState("menu"),[d,h]=p.useState(""),[m,g]=p.useState(null),[_,v]=p.useState(null),[x,y]=p.useState(0),[w,j]=p.useState(30),[E,P]=p.useState(""),[U,T]=p.useState([]),[S,C]=p.useState(null),[k,I]=p.useState(!1),[R,A]=p.useState([]),[G,ue]=p.useState(!1),[B,q]=p.useState("general"),[O,F]=p.useState(""),[D,L]=p.useState(0),[X,$]=p.useState(null),[K,Y]=p.useState(null),[ie,te]=p.useState(!1),[le,xe]=p.useState(null),[_e,Pe]=p.useState(null),[de,Ke]=p.useState(null),[Ve,bt]=p.useState(!1),[Ze,xt]=p.useState(null),[Bt,lt]=p.useState(null),[mt,vn]=p.useState(""),[W,Z]=p.useState(!1),[se,Se]=p.useState(!1),[ve,pe]=p.useState(15),[Ee,et]=p.useState(!1),[At,Lt]=p.useState(""),[Si,vr]=p.useState(0),us=3,[La,ir]=p.useState([]),[Ql,Us]=p.useState(!1),[od,Bs]=p.useState({player:!1,enemy:!1}),[ht,Pt]=p.useState(null);p.useState(null);const[Oa,zn]=p.useState("category-select"),[Rt,ad]=p.useState(null),Kx=V=>{const z=So.grunts[Math.floor(Math.random()*So.grunts.length)];Pt({playerTurn:!0,turnNumber:1,playerCharacter:{...V,currentHp:V.baseStats.hp,currentEnergy:V.baseStats.energy,statusEffects:[]},currentEnemy:{...z,currentHp:z.hp,statusEffects:[]},combatLog:[`You encounter a ${z.name}!`],statusEffects:{player:[],enemy:[]},dungeonLevel:1,defeatedEnemies:0,isBossFight:!1}),zn("combat")},Ni=async()=>{if(!(!Ze||!Bt||!mt.trim())){Z(!0);try{const z=await(await Zt("POST","/api/quiz/validate-answer",{questionId:Ze.id,userAnswer:mt.trim()})).json();if(z.isCorrect){bt(!1);const J=z.energyReward||15;Yx(Bt.name,J)}else n({title:"Incorrect Answer",description:`The correct answer was: ${z.correctAnswer||Ze.correctAnswer}`,variant:"destructive"}),bt(!1)}catch(V){console.error("Error validating quiz answer:",V),n({title:"Error",description:"Failed to validate answer. Please try again.",variant:"destructive"})}finally{Z(!1),xt(null),lt(null),vn("")}}},Qx=V=>{if(!ht||!ht.playerTurn)return;const z=Rt.abilities.find(be=>be.name===V);if(!z)return;if(!Va||Array.isArray(Va)&&Va.length===0){Yl(V);return}const J=Array.isArray(Va)?Va:[],oe=J[Math.floor(Math.random()*J.length)];xt(oe),lt(z),vn(""),bt(!0)},Yx=(V,z)=>{if(!ht||!ht.playerTurn)return;const J=Rt.abilities.find(Xe=>Xe.name===V);if(!J)return;let oe=J.damage,be={...ht};if(be.playerCharacter.currentEnergy<J.energyCost){be.combatLog.push(`Not enough energy! Need ${J.energyCost} energy. Answer questions correctly to gain energy!`),Pt(be);return}if(be.playerCharacter.currentEnergy-=J.energyCost,be.combatLog.push(`Used ${V} (-${J.energyCost} energy)`),J.special==="crit_chance"&&Math.random()<.5&&(oe*=2,be.combatLog.push(`Critical hit! ${oe} damage!`)),J.special==="energy_drain"&&(be.currentEnemy.currentEnergy=Math.max(0,(be.currentEnemy.currentEnergy||0)-20),be.combatLog.push("Drained 20 energy from enemy!")),J.special==="heal"){const Xe=J.damage;be.playerCharacter.currentHp=Math.min(be.playerCharacter.currentHp+Xe,Rt.baseStats.hp),be.combatLog.push(`Healed ${Xe} HP!`),o(Xe,"player")}else be.currentEnemy.currentHp-=oe,be.combatLog.push(`${V} deals ${oe} damage!`),s(oe,"enemy");if(J.special==="barrier"&&(be.playerCharacter.statusEffects.push({type:"damage_reduction",value:30,duration:2}),be.combatLog.push("Barrier active! 30% damage reduction for 2 turns.")),J.special==="stun"&&(be.currentEnemy.statusEffects.push({type:"stun",value:1,duration:1}),be.combatLog.push("Enemy is stunned for 1 turn!")),be.playerCharacter.currentEnergy=Math.min(be.playerCharacter.currentEnergy+z,Rt.baseStats.energy),be.combatLog.push(`Correct! Gained ${z} energy!`),be.currentEnemy.currentHp<=0)if(be.combatLog.push(`You defeated the ${be.currentEnemy.name}!`),be.defeatedEnemies+=1,be.defeatedEnemies>=3){zn("victory");return}else{const Xe=So.grunts[Math.floor(Math.random()*So.grunts.length)];be.currentEnemy={...Xe,currentHp:Xe.hp,statusEffects:[]},be.combatLog.push(`A new ${Xe.name} appears!`)}be.playerTurn=!1,be.turnNumber+=1,Pt(be),setTimeout(()=>ld(be),1500)},Yl=V=>{if(!ht||!ht.playerTurn)return;const z=Rt.abilities.find(be=>be.name===V);if(!z)return;let J=z.damage,oe={...ht};if(oe.playerCharacter.currentEnergy<z.energyCost){oe.combatLog.push(`Not enough energy! Need ${z.energyCost} energy. Answer questions correctly to gain energy!`),Pt(oe);return}if(oe.playerCharacter.currentEnergy-=z.energyCost,oe.combatLog.push(`Used ${V} (-${z.energyCost} energy)`),z.special==="crit_chance"&&Math.random()<.5?(J*=2,oe.combatLog.push(`Critical hit! ${J} damage!`)):z.special==="heal_self"?(oe.playerCharacter.currentHp=Math.min(oe.playerCharacter.currentHp+30,Rt.baseStats.hp),oe.combatLog.push("You heal for 30 HP!")):z.special==="steals_energy"?(oe.playerCharacter.currentEnergy=Math.min(oe.playerCharacter.currentEnergy+20,Rt.baseStats.energy),oe.combatLog.push("Drained 20 energy from enemy!")):z.special==="defense_boost"?(oe.playerCharacter.statusEffects.push({type:"defense_boost",duration:2,value:50}),oe.combatLog.push("Defense increased for 2 turns!")):z.special==="poison"?(oe.currentEnemy.statusEffects.push({type:"poison",duration:3,value:10}),oe.combatLog.push("Enemy is poisoned for 3 turns!")):z.special==="dodge_next"?(oe.playerCharacter.statusEffects.push({type:"dodge_next",duration:1,value:100}),oe.combatLog.push("Next attack will be dodged!")):z.special==="self_damage"?(oe.playerCharacter.currentHp-=15,oe.combatLog.push("Powerful attack hurts you for 15 damage!")):z.special==="damage_reduction"?(oe.playerCharacter.statusEffects.push({type:"damage_reduction",duration:3,value:30}),oe.combatLog.push("Damage reduced by 30% for 3 turns!")):z.special==="stun"&&Math.random()<.3&&(oe.currentEnemy.statusEffects.push({type:"stun",duration:1,value:100}),oe.combatLog.push("Enemy is stunned and will miss next turn!")),J>0&&(oe.currentEnemy.currentHp-=J,oe.combatLog.push(`${V} deals ${J} damage!`)),oe.currentEnemy.currentHp<=0)if(oe.defeatedEnemies+=1,oe.combatLog.push(`${oe.currentEnemy.name} defeated!`),oe.defeatedEnemies>=3&&!oe.isBossFight){const be=So.bosses[Math.floor(Math.random()*So.bosses.length)];oe.currentEnemy={...be,currentHp:be.hp,statusEffects:[]},oe.isBossFight=!0,oe.combatLog.push(`Boss appears: ${be.name}!`)}else if(oe.isBossFight){zn("victory"),Pt(oe);return}else{const be=So.grunts[Math.floor(Math.random()*So.grunts.length)];oe.currentEnemy={...be,currentHp:be.hp,statusEffects:[]},oe.combatLog.push(`Next enemy: ${be.name}!`)}oe.playerTurn=!1,oe.turnNumber+=1,Pt(oe),setTimeout(()=>ld(oe),1500)},sm=V=>{let z={...V};return z.playerCharacter.statusEffects=z.playerCharacter.statusEffects.filter(J=>(J.type==="poison"&&(z.playerCharacter.currentHp-=J.value,z.combatLog.push(`You take ${J.value} poison damage!`)),J.duration-=1,J.duration>0)),z.currentEnemy.statusEffects=z.currentEnemy.statusEffects.filter(J=>(J.type==="poison"&&(z.currentEnemy.currentHp-=J.value,z.combatLog.push(`${z.currentEnemy.name} takes ${J.value} poison damage!`)),J.duration-=1,J.duration>0)),z},ld=V=>{if(!V.currentEnemy||V.currentEnemy.currentHp<=0)return;let z=sm(V);if(z.currentEnemy.statusEffects.some(Pr=>Pr.type==="stun")){z.combatLog.push(`${z.currentEnemy.name} is stunned and misses their turn!`),z.playerTurn=!0,Pt(z);return}const oe=z.currentEnemy.abilities||["Basic Attack"],be=oe[Math.floor(Math.random()*oe.length)];let Xe=Math.floor(Math.random()*15)+10;if(z.playerCharacter.statusEffects.some(Pr=>Pr.type==="dodge_next"))z.combatLog.push("You dodge the attack completely!"),z.playerCharacter.statusEffects=z.playerCharacter.statusEffects.filter(Pr=>Pr.type!=="dodge_next");else{const Pr=z.playerCharacter.statusEffects.find(go=>go.type==="damage_reduction");Pr&&(Xe=Math.floor(Xe*(1-Pr.value/100)),z.combatLog.push(`Damage reduced! ${Xe} damage taken.`)),z.playerCharacter.currentHp-=Xe,z.combatLog.push(`${z.currentEnemy.name} uses ${be} for ${Xe} damage!`),s(Xe,"player")}if(z.playerCharacter.currentHp<=0){z.combatLog.push("You have been defeated!"),zn("character-select"),Pt(null);return}z.playerTurn=!0,Pt(z)},{data:Zl=[]}=Et({queryKey:["/api/categories"],staleTime:5*60*1e3}),{data:$s=[]}=Et({queryKey:["/api/quiz/topics"],staleTime:5*60*1e3}),{data:Va=[]}=Et({queryKey:[`/api/quiz/topics/${de==null?void 0:de.id}/questions`],enabled:!!(de!=null&&de.id),staleTime:2*60*1e3}),{data:qr=[]}=Et({queryKey:["/api/burblemons/species"],staleTime:10*60*1e3}),im=V=>{const z={Electric:[{name:"Thunder Bolt",damage:25,energyCost:30,description:"Powerful electric attack"},{name:"Static Shield",damage:0,energyCost:25,special:"defense_boost",description:"Increases defense with electric barrier"},{name:"Energy Drain",damage:15,energyCost:20,special:"steals_energy",description:"Absorbs enemy energy"},{name:"Quick Strike",damage:20,energyCost:25,description:"Fast electric attack"}],Fire:[{name:"Flame Burst",damage:30,energyCost:35,special:"crit_chance",description:"50% chance for double damage"},{name:"Heat Wave",damage:20,energyCost:25,description:"Spreading fire attack"},{name:"Ignite",damage:15,energyCost:30,special:"poison",description:"Burns enemy over time"},{name:"Blazing Rush",damage:25,energyCost:30,description:"Fierce charging attack"}],Water:[{name:"Aqua Pulse",damage:25,energyCost:30,description:"Powerful water attack"},{name:"Healing Stream",damage:30,energyCost:40,special:"heal_self",description:"Restores HP with water"},{name:"Bubble Shield",damage:0,energyCost:25,special:"defense_boost",description:"Creates protective bubble"},{name:"Tidal Force",damage:28,energyCost:35,description:"Overwhelming water pressure"}],Grass:[{name:"Leaf Storm",damage:25,energyCost:30,description:"Swirling leaves attack"},{name:"Root Heal",damage:25,energyCost:40,special:"heal_self",description:"Absorbs nutrients to heal"},{name:"Vine Whip",damage:20,energyCost:25,description:"Quick vine attack"},{name:"Nature's Wrath",damage:35,energyCost:45,description:"Powerful nature attack"}]},J={Electric:{strengths:["Water"],weaknesses:["Grass"]},Fire:{strengths:["Grass"],weaknesses:["Water"]},Water:{strengths:["Fire"],weaknesses:["Electric"]},Grass:{strengths:["Electric","Water"],weaknesses:["Fire"]}},oe=V.element_type||V.type||"Electric",be=z[oe]||z.Electric,Xe=J[oe]||J.Electric;return{id:`burblemon_${V.id}`,name:V.name,type:oe,emoji:V.sprite_url||V.iconEmoji||"🔵",description:V.description||`A ${oe.toLowerCase()} type Burblemon`,baseStats:{hp:V.base_hp||V.baseHp||50,attack:V.base_attack||V.baseAttack||50,defense:V.base_defense||V.baseDefense||50,speed:V.base_speed||V.baseSpeed||50,energy:80+(V.base_speed||V.baseSpeed||50)},abilities:be,strengths:Xe.strengths,weaknesses:Xe.weaknesses}},ds=Array.isArray(qr)&&qr.length>0?qr.map(im):Ad,{data:Fa}=Et({queryKey:[`/api/multiplayer/session/${m==null?void 0:m.id}`],enabled:!!(m!=null&&m.id),refetchInterval:c==="playing"?3e3:!1,staleTime:2e3}),Ti=Tn({mutationFn:async V=>(await Zt("POST","/api/multiplayer/create-session",{hostUserId:(t==null?void 0:t.id)||1,...V})).json(),onSuccess:V=>{console.log("Session creation response:",V),V.session?(g(V.session),u("character-select"),om(V.session.id),n({title:"Game Created!",description:`Share code: ${V.session.sessionCode}`}),console.log("Game mode set to character-select, session:",V.session)):(console.error("No session in response:",V),u("menu"),n({title:"Error",description:"Session creation failed - no session data received",variant:"destructive"}))},onError:V=>{console.error("Failed to create game:",V),u("menu"),n({title:"Failed to Create Game",description:V.message||"Unable to create game session. Please try again.",variant:"destructive"})}}),Xl=Tn({mutationFn:async V=>(await Zt("POST","/api/multiplayer/join-session",{sessionCode:V,userId:(t==null?void 0:t.id)||1})).json(),onSuccess:V=>{g(V.session),u("character-select"),om(V.session.id),n({title:"Joined Game!",description:"Welcome to the battle!"})},onError:V=>{n({title:"Failed to Join",description:V.message||"Game not found or already started",variant:"destructive"})}}),om=V=>{try{const J=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}/ws`;console.log("Connecting to WebSocket:",J),a.current=new WebSocket(J),a.current.onopen=()=>{var oe;console.log("WebSocket connected"),(oe=a.current)==null||oe.send(JSON.stringify({type:"join",userId:(t==null?void 0:t.id)||1,sessionId:V}))},a.current.onmessage=oe=>{try{const be=JSON.parse(oe.data);am(be)}catch(be){console.error("Error parsing WebSocket message:",be)}},a.current.onclose=()=>{console.log("WebSocket connection closed")},a.current.onerror=oe=>{console.error("WebSocket error:",oe)}}catch(z){console.error("Error creating WebSocket connection:",z),n({title:"Connection Error",description:"Failed to connect to game server",variant:"destructive"})}},am=V=>{var z;switch(V.type){case"user-joined":r.invalidateQueries({queryKey:[`/api/multiplayer/session/${m==null?void 0:m.id}`]});break;case"player-ready":m&&g(V.session);break;case"game-started":v(V.currentQuestion),y(V.questionIndex),j(V.timePerQuestion),C(Date.now()),u("playing"),V.questionIndex===0&&setTimeout(()=>{co("general","Welcome to Dungeon Arena! Fight through grunts to reach the boss. Answer correctly to power your abilities. Wrong answers cost HP but you can still progress!")},2e3);break;case"answer-submitted":if(V.userId===((t==null?void 0:t.id)||1))if(te(V.isCorrect),n({title:V.isCorrect?"🎉 Correct Answer!":"❌ Wrong Answer",description:V.isCorrect?"Great job! You gained energy and can choose your battle action.":"You lost HP! Keep trying - you can still win this battle.",variant:V.isCorrect?"default":"destructive"}),V.isCorrect){L(0),console.log("🎉 Correct answer! Transitioning to action-select mode"),u("action-select");const J=(z=m==null?void 0:m.participants)==null?void 0:z.find(be=>be.userId===((t==null?void 0:t.id)||1)),oe=Ad.find(be=>be.id===(J==null?void 0:J.characterType))||Ad[4];oe.baseStats.energy>0&&co("energy",`Great! Your ${oe.name} character gained energy! Use it wisely for powerful abilities.`)}else{const J=D+1;L(J),Lt(E);const oe=Si+1;if(vr(oe),oe>=us)et(!0),n({title:"Maximum attempts reached",description:V.correctAnswer?`The correct answer was "${V.correctAnswer}". Click Next Question to continue!`:"No more attempts. Try the next question!",variant:"destructive"});else{const be=us-oe;n({title:"Incorrect Answer",description:`You lost HP! ${be} ${be===1?"attempt":"attempts"} remaining.`,variant:"destructive"})}J>=2&&!G&&co("wrong","Having trouble? Remember: think about word meanings, patterns, or try breaking down complex riddles into parts. Use battle actions strategically!")}V.battleEffects&&(A([V.battleEffects]),I(!0),setTimeout(()=>{I(!1),A([])},1500)),m&&r.invalidateQueries({queryKey:[`/api/multiplayer/session/${m.id}`]});break;case"battle-moves":A(V.moves),I(!0),setTimeout(()=>{I(!1),A([])},2e3);break;case"next-question":v(V.currentQuestion),y(V.questionIndex),j((m==null?void 0:m.timePerQuestion)||30),C(Date.now()),P(""),u("playing");break;case"battle-action-confirmed":break;case"battle-result":Y(V),u("battle-result"),setTimeout(()=>{u("playing"),Y(null),$(null)},4e3);break;case"participant-action":m&&r.invalidateQueries({queryKey:[`/api/multiplayer/session/${m.id}`]});break;case"game-finished":T(V.leaderboard),u("finished");break;case"character-selected":m&&(r.invalidateQueries({queryKey:[`/api/multiplayer/session/${m.id}`]}),setTimeout(()=>{r.refetchQueries({queryKey:[`/api/multiplayer/session/${m.id}`]})},100));break}},co=(V,z)=>{q(V),F(z),ue(!0)},Ua=()=>{ue(!1)},lm=()=>{_&&n({title:"Answer Revealed",description:`The correct answer was: ${_.answer}`,variant:"default"})},cd=()=>{et(!1)},Ba=()=>{et(!1),vr(0),P(""),a.current&&m&&a.current.send(JSON.stringify({type:"next-question",userId:(t==null?void 0:t.id)||1,sessionId:m.id}))};p.useEffect(()=>{if(c==="playing"&&w>0){const V=setTimeout(()=>{j(w-1)},1e3);return w===10&&!G&&co("time",`Only ${w} seconds left! Think quickly or use a strategic guess. Wrong answers cost HP but you can still progress.`),()=>clearTimeout(V)}else w===0&&c==="playing"&&(n({title:"Time's Up!",description:"You lost HP for running out of time!",variant:"destructive"}),uo())},[w,c,G]),p.useEffect(()=>{var V;if(c==="playing"&&m&&_&&((V=m.participants)==null?void 0:V.some(J=>J.user.username.startsWith("Bot_")))){const J=m.difficulty||"easy";let oe;switch(J){case"easy":oe=1e4;break;case"medium":oe=5e3;break;case"hard":oe=3e3;break;default:oe=1e4}const be=setInterval(()=>{var tc;((tc=m.participants)==null?void 0:tc.find(Pr=>Pr.user.username.startsWith("Bot_")))&&a.current&&console.log(`Bot auto-attacking after ${oe/1e3}s on ${J} difficulty`)},oe);return()=>clearInterval(be)}},[c,m,_]),p.useEffect(()=>()=>{a.current&&a.current.close()},[]);const Ci=()=>{a.current&&m&&a.current.send(JSON.stringify({type:"ready",userId:(t==null?void 0:t.id)||1,sessionId:m.id}))},uo=()=>{if(a.current&&m&&S){const V=Math.floor((Date.now()-S)/1e3);a.current.send(JSON.stringify({type:"submit-answer",userId:(t==null?void 0:t.id)||1,sessionId:m.id,answer:E,timeToAnswerSeconds:V,questionIndex:x})),P("")}},$a=V=>{a.current&&m&&($(V),a.current.send(JSON.stringify({type:"battle-action",userId:(t==null?void 0:t.id)||1,sessionId:m.id,action:V,questionIndex:x})),u("battle-result"))},cm=V=>{var z;if(xe(V),Se(!0),a.current&&m){a.current.send(JSON.stringify({type:"select-character",userId:(t==null?void 0:t.id)||1,sessionId:m.id,characterType:V})),a.current.send(JSON.stringify({type:"ready",userId:(t==null?void 0:t.id)||1,sessionId:m.id})),setTimeout(async()=>{r.invalidateQueries({queryKey:[`/api/multiplayer/session/${m.id}`]}),r.refetchQueries({queryKey:[`/api/multiplayer/session/${m.id}`]});try{const oe=await fetch(`/api/multiplayer/session/${m.id}`);if(oe.ok){const be=await oe.json();be.success&&be.session&&(g(be.session),console.log("Updated session with fresh API data:",be.session))}}catch(oe){console.error("Failed to fetch fresh session data:",oe)}},800);const J=(z=m.participants)==null?void 0:z.some(oe=>oe.user.username.startsWith("Bot_"));u(J?"waiting-for-start":"lobby")}},um=()=>{d.trim()&&Xl.mutate(d.toUpperCase())},dm=V=>{try{if(!t){n({title:"Authentication Required",description:"Please log in to create a game",variant:"destructive"});return}const z=V.withBot===!0;Ti.mutate({categoryId:V.categoryId?Number(V.categoryId):null,difficulty:V.difficulty||null,maxPlayers:Number(V.maxPlayers)||2,timePerQuestion:Number(V.timePerQuestion)||30,withBot:z})}catch(z){console.error("Error creating game:",z),n({title:"Error",description:"Failed to create game",variant:"destructive"})}},Jl=({participant:V,isCurrentUser:z})=>{const J=V.hp/(V.maxHp||50)*100,oe=ds.find(be=>be.id===V.characterType)||ds[0];return i.jsxs("div",{className:`p-4 rounded-lg border-2 ${z?"border-blue-500 bg-blue-50":"border-gray-300 bg-gray-50"}`,children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center text-lg",children:oe.emoji}),i.jsxs("div",{children:[i.jsx("span",{className:"font-medium",children:V.user.username}),i.jsx("div",{className:"text-xs text-gray-500",children:oe.name})]}),z&&i.jsx(Fe,{variant:"outline",children:"You"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[V.energy>0&&i.jsxs("div",{className:"flex items-center text-purple-600",children:[i.jsx(Xi,{className:"w-4 h-4 mr-1"}),i.jsx("span",{className:"text-xs",children:V.energy})]}),V.hasShield&&i.jsxs("div",{className:"flex items-center text-blue-600",children:[i.jsx(Fc,{className:"w-4 h-4 mr-1"}),i.jsx("span",{className:"text-xs",children:"Shield"})]}),V.chargePower>0&&i.jsxs("div",{className:"flex items-center text-orange-600",children:[i.jsx(wT,{className:"w-4 h-4 mr-1"}),i.jsxs("span",{className:"text-xs",children:["+",V.chargePower]})]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(pu,{className:"w-4 h-4 text-red-500"}),i.jsx("div",{className:"flex-1",children:i.jsx(Tr,{value:J,className:"h-3"})}),i.jsxs("span",{className:"text-sm font-bold",children:[V.hp,"/",V.maxHp||50]})]}),V.lastAction&&i.jsxs("div",{className:"mt-2 text-xs text-gray-600",children:["Last action: ",i.jsx("span",{className:"capitalize",children:V.lastAction})]})]})};if(c==="menu")return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 to-secondary/5 p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent mb-4",children:"Multiplayer Dungeon Arena"}),i.jsx("p",{className:"text-xl text-muted-foreground",children:"Challenge players worldwide in real-time brain battles!"})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:[i.jsx(re,{className:`hover:shadow-lg transition-all cursor-pointer border-2 ${l?"opacity-50 hover:border-gray-300":"hover:border-primary"}`,onClick:()=>l?alert("Please log in to create multiplayer games"):u("create"),children:i.jsxs(ye,{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-primary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Km,{className:"w-8 h-8 text-primary"})}),i.jsx(he,{className:"text-xl",children:"Create Game"}),i.jsx(Ue,{children:l?"🔒 Login required for multiplayer":"Host a new session and wait for players to join"})]})}),i.jsx(re,{className:"hover:shadow-lg transition-all cursor-pointer border-2 hover:border-purple-500",onClick:()=>{zn("character-select"),u("difficulty-select")},children:i.jsxs(ye,{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-purple-500/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(pl,{className:"w-8 h-8 text-purple-500"})}),i.jsx(he,{className:"text-xl",children:"Solo Dungeon"}),i.jsx(Ue,{children:"Fight grunts and bosses in Pokemon-style turn-based combat"})]})}),i.jsx(re,{className:`hover:shadow-lg transition-all cursor-pointer border-2 ${l?"opacity-50 hover:border-gray-300":"hover:border-secondary"}`,onClick:()=>l?alert("Please log in to join multiplayer games"):u("join"),children:i.jsxs(ye,{className:"text-center",children:[i.jsx("div",{className:"w-16 h-16 bg-secondary/10 rounded-full flex items-center justify-center mx-auto mb-4",children:i.jsx(Km,{className:"w-8 h-8 text-secondary"})}),i.jsx(he,{className:"text-xl",children:"Join Game"}),i.jsx(Ue,{children:l?"🔒 Login required for multiplayer":"Enter a game code to join an existing battle"})]})})]})]})});if(Oa==="category-select")return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-orange-500/10 to-purple-500/10 p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx(ee,{variant:"ghost",onClick:()=>{zn("category-select"),u("menu")},className:"mb-6",children:"← Back to Menu"}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-orange-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"Choose Quiz Category"}),i.jsx("p",{className:"text-xl text-muted-foreground",children:"Select a category to earn energy through knowledge in battle!"})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Featured Categories"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsx(re,{className:`cursor-pointer hover:shadow-lg transition-all border-2 ${(de==null?void 0:de.name)==="Math"?"border-blue-500 bg-blue-50 dark:bg-blue-950":"hover:border-blue-300"}`,onClick:()=>Ke({id:1,name:"Math",description:"Mathematical problems and equations",colorTheme:"blue",iconEmoji:"🔢"}),"data-testid":"category-math",children:i.jsxs(ye,{className:"text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:"🔢"}),i.jsx(he,{className:"text-xl",children:"Math"}),i.jsx(Ue,{children:"Solve mathematical problems to gain energy and defeat enemies"})]})}),i.jsx(re,{className:`cursor-pointer hover:shadow-lg transition-all border-2 ${(de==null?void 0:de.name)==="History"?"border-amber-500 bg-amber-50 dark:bg-amber-950":"hover:border-amber-300"}`,onClick:()=>Ke({id:2,name:"History",description:"Historical events and figures",colorTheme:"amber",iconEmoji:"🏛️"}),"data-testid":"category-history",children:i.jsxs(ye,{className:"text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:"🏛️"}),i.jsx(he,{className:"text-xl",children:"History"}),i.jsx(Ue,{children:"Answer historical questions to power your abilities"})]})}),i.jsx(re,{className:`cursor-pointer hover:shadow-lg transition-all border-2 ${(de==null?void 0:de.name)==="Animal Facts"?"border-green-500 bg-green-50 dark:bg-green-950":"hover:border-green-300"}`,onClick:()=>Ke({id:3,name:"Animal Facts",description:"Fascinating facts about the animal kingdom",colorTheme:"green",iconEmoji:"🦁"}),"data-testid":"category-animals",children:i.jsxs(ye,{className:"text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:"🦁"}),i.jsx(he,{className:"text-xl",children:"Animal Facts"}),i.jsx(Ue,{children:"Use your knowledge of animals to gain combat energy"})]})})]})]}),Array.isArray($s)&&$s.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsx("h2",{className:"text-2xl font-bold mb-4 text-center",children:"Available Topics"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Array.isArray($s)&&$s.map(V=>i.jsx(re,{className:`cursor-pointer hover:shadow-lg transition-all border-2 ${(de==null?void 0:de.id)===V.id?"border-purple-500 bg-purple-50 dark:bg-purple-950":"hover:border-purple-300"}`,onClick:()=>Ke(V),"data-testid":`category-${V.name.toLowerCase().replace(/\s+/g,"-")}`,children:i.jsxs(ye,{className:"text-center",children:[i.jsx("div",{className:"text-4xl mb-2",children:V.iconEmoji||"🧠"}),i.jsx(he,{className:"text-lg",children:V.name}),i.jsx(Ue,{className:"text-sm",children:V.description})]})},V.id))})]}),de&&i.jsx("div",{className:"text-center",children:i.jsx(ee,{onClick:()=>zn("character-select"),size:"lg",className:"bg-gradient-to-r from-orange-500 to-purple-500 hover:from-orange-600 hover:to-purple-600 text-white px-8 py-3","data-testid":"button-continue-to-character-select",children:"Continue to Character Selection →"})}),de&&i.jsx("div",{className:"mt-6 text-center",children:i.jsxs("p",{className:"text-sm text-gray-600",children:["Selected: ",i.jsx("span",{className:"font-bold",children:de.name})]})})]})});if(Oa==="character-select")return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-500/10 to-blue-500/10 p-6",children:i.jsxs("div",{className:"max-w-6xl mx-auto",children:[i.jsx(ee,{variant:"ghost",onClick:()=>zn("category-select"),className:"mb-6","data-testid":"button-back-to-category",children:"← Back to Categories"}),i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent mb-4",children:"Choose Your Fighter"}),i.jsx("p",{className:"text-xl text-muted-foreground",children:"Select a character and fight through the dungeon!"}),de&&i.jsxs("div",{className:"mt-4 inline-flex items-center space-x-2 bg-gradient-to-r from-orange-100 to-purple-100 dark:from-orange-900/20 dark:to-purple-900/20 px-6 py-3 rounded-full",children:[i.jsx("span",{className:"text-2xl",children:de.iconEmoji||"🧠"}),i.jsxs("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:["Quiz Category: ",de.name]})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ds.map(V=>i.jsxs(re,{className:`cursor-pointer hover:shadow-lg transition-all border-2 ${(Rt==null?void 0:Rt.id)===V.id?"border-purple-500 bg-purple-50 dark:bg-purple-950":"hover:border-purple-300"}`,onClick:()=>ad(V),children:[i.jsxs(ye,{className:"text-center",children:[i.jsx("div",{className:"text-6xl mb-4",children:V.emoji}),i.jsx(he,{className:"text-xl",children:V.name}),i.jsx(Ue,{children:V.description})]}),i.jsx(ae,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"HP:"}),i.jsx("span",{className:"font-bold text-red-500",children:V.baseStats.hp})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Energy:"}),i.jsx("span",{className:"font-bold text-blue-500",children:V.baseStats.energy})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Type:"}),i.jsx("span",{className:"font-bold text-purple-500 capitalize",children:V.type})]}),i.jsxs("div",{className:"pt-2 border-t",children:[i.jsx("h4",{className:"font-semibold text-sm mb-2",children:"Abilities:"}),i.jsx("div",{className:"space-y-1",children:V.abilities.map((z,J)=>i.jsxs("div",{className:"text-xs bg-gray-100 dark:bg-gray-800 p-2 rounded",children:[i.jsx("div",{className:"font-semibold",children:z.name}),i.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:z.damage?`${z.damage} damage`:"Special ability"})]},J))})]})]})})]},V.id))}),Rt&&i.jsx("div",{className:"text-center mt-8",children:i.jsx(ee,{onClick:()=>Kx(Rt),className:"px-8 py-3 text-lg bg-purple-600 hover:bg-purple-700",children:"Enter Dungeon"})})]})});const ud=()=>{if(!de)return"min-h-screen bg-gradient-to-br from-purple-900/20 to-blue-900/20 p-6";switch(de.name){case"Math":return"min-h-screen bg-gradient-to-br from-blue-900/30 to-cyan-900/30 p-6 relative overflow-hidden";case"History":return"min-h-screen bg-gradient-to-br from-amber-900/30 to-orange-900/30 p-6 relative overflow-hidden";case"Animal Facts":return"min-h-screen bg-gradient-to-br from-green-900/30 to-emerald-900/30 p-6 relative overflow-hidden";default:return"min-h-screen bg-gradient-to-br from-purple-900/30 to-pink-900/30 p-6 relative overflow-hidden"}},hm=()=>{if(!de)return null;switch(de.name){case"Math":return i.jsxs("div",{className:"absolute inset-0 opacity-10",children:[i.jsx("div",{className:"absolute top-10 left-10 text-6xl text-blue-300 select-none",children:"∑"}),i.jsx("div",{className:"absolute top-20 right-20 text-4xl text-cyan-300 select-none",children:"π"}),i.jsx("div",{className:"absolute bottom-20 left-20 text-5xl text-blue-300 select-none",children:"∞"}),i.jsx("div",{className:"absolute bottom-10 right-10 text-3xl text-cyan-300 select-none",children:"√"}),i.jsx("div",{className:"absolute top-1/2 left-1/4 text-4xl text-blue-300 select-none",children:"∂"}),i.jsx("div",{className:"absolute top-1/3 right-1/3 text-5xl text-cyan-300 select-none",children:"∫"})]});case"History":return i.jsxs("div",{className:"absolute inset-0 opacity-10",children:[i.jsx("div",{className:"absolute top-10 left-10 text-6xl text-amber-300 select-none",children:"🏛️"}),i.jsx("div",{className:"absolute top-20 right-20 text-4xl text-orange-300 select-none",children:"⚔️"}),i.jsx("div",{className:"absolute bottom-20 left-20 text-5xl text-amber-300 select-none",children:"👑"}),i.jsx("div",{className:"absolute bottom-10 right-10 text-3xl text-orange-300 select-none",children:"🏺"}),i.jsx("div",{className:"absolute top-1/2 left-1/4 text-4xl text-amber-300 select-none",children:"📜"}),i.jsx("div",{className:"absolute top-1/3 right-1/3 text-5xl text-orange-300 select-none",children:"🗿"})]});case"Animal Facts":return i.jsxs("div",{className:"absolute inset-0 opacity-10",children:[i.jsx("div",{className:"absolute top-10 left-10 text-6xl text-green-300 select-none",children:"🦁"}),i.jsx("div",{className:"absolute top-20 right-20 text-4xl text-emerald-300 select-none",children:"🐺"}),i.jsx("div",{className:"absolute bottom-20 left-20 text-5xl text-green-300 select-none",children:"🦅"}),i.jsx("div",{className:"absolute bottom-10 right-10 text-3xl text-emerald-300 select-none",children:"🐢"}),i.jsx("div",{className:"absolute top-1/2 left-1/4 text-4xl text-green-300 select-none",children:"🦋"}),i.jsx("div",{className:"absolute top-1/3 right-1/3 text-5xl text-emerald-300 select-none",children:"🌿"})]});default:return i.jsxs("div",{className:"absolute inset-0 opacity-10",children:[i.jsx("div",{className:"absolute top-10 left-10 text-6xl text-purple-300 select-none",children:"✨"}),i.jsx("div",{className:"absolute top-20 right-20 text-4xl text-pink-300 select-none",children:"🌟"}),i.jsx("div",{className:"absolute bottom-20 left-20 text-5xl text-purple-300 select-none",children:"🔮"}),i.jsx("div",{className:"absolute bottom-10 right-10 text-3xl text-pink-300 select-none",children:"⭐"}),i.jsx("div",{className:"absolute top-1/2 left-1/4 text-4xl text-purple-300 select-none",children:"🎭"}),i.jsx("div",{className:"absolute top-1/3 right-1/3 text-5xl text-pink-300 select-none",children:"🎪"})]})}};if(Oa==="combat"&&ht)return i.jsxs("div",{className:ud(),children:[hm(),i.jsxs(rp.div,{className:"relative z-10",animate:Ql?{x:[-3,3,-3,3,0],y:[-2,2,-2,2,0]}:{},transition:{duration:.5,times:[0,.25,.5,.75,1]},children:[i.jsx(HY,{children:La.map(V=>i.jsx(rp.div,{className:`absolute text-3xl font-bold pointer-events-none z-50 ${V.amount>0?"text-red-500 drop-shadow-lg":"text-green-400 drop-shadow-lg"}`,style:{left:V.type==="player"?"20%":"80%",top:"35%"},initial:{opacity:1,y:0,scale:1},animate:{opacity:0,y:-60,scale:1.3,x:(Math.random()-.5)*50},exit:{opacity:0},transition:{duration:2.5,ease:"easeOut"},children:V.amount>0?`-${V.amount}`:`+${Math.abs(V.amount)}`},V.id))}),i.jsxs("div",{className:"max-w-6xl mx-auto",children:[de&&i.jsx("div",{className:"text-center mb-4",children:i.jsxs("div",{className:"inline-flex items-center space-x-3 bg-black/20 backdrop-blur-sm px-6 py-3 rounded-full border border-white/20",children:[i.jsx("span",{className:"text-3xl",children:de.iconEmoji||"🧠"}),i.jsxs("div",{className:"text-white",children:[i.jsx("div",{className:"text-sm font-medium opacity-80",children:"Battle Arena"}),i.jsx("div",{className:"text-lg font-bold",children:de.name})]})]})}),i.jsxs("div",{className:"text-center mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx(Fe,{variant:ht.isBossFight?"destructive":"secondary",className:"text-lg py-2 px-4",children:ht.isBossFight?"🔥 BOSS FIGHT":`Grunt ${ht.defeatedEnemies+1}/3`}),i.jsxs(Fe,{variant:"outline",className:"text-lg py-2 px-4",children:["Turn ",ht.turnNumber]})]}),i.jsx("h2",{className:"text-2xl font-bold",children:ht.playerTurn?"Your Turn":`${ht.currentEnemy.name}'s Turn`})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(he,{className:"flex items-center justify-between",children:[i.jsx("span",{children:Rt.name}),i.jsx("span",{className:"text-2xl",children:Rt.sprite})]})}),i.jsx(ae,{children:i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{children:"HP"}),i.jsxs("span",{children:[ht.playerCharacter.currentHp,"/",Rt.baseStats.hp]})]}),i.jsx(rp.div,{animate:od.player?{backgroundColor:["#ffffff","#ff4444","#ffffff"],scale:[1,1.02,1]}:{},transition:{duration:.3,times:[0,.5,1]},children:i.jsx(Tr,{value:ht.playerCharacter.currentHp/Rt.baseStats.hp*100,className:`h-3 transition-all duration-300 ${ht.playerCharacter.currentHp/Rt.baseStats.hp<=.25?"animate-pulse":""}`})})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{children:"Energy"}),i.jsxs("span",{children:[ht.playerCharacter.currentEnergy,"/",Rt.baseStats.energy]})]}),i.jsx(Tr,{value:ht.playerCharacter.currentEnergy/Rt.baseStats.energy*100,className:"h-3 bg-blue-200"})]})]})})]}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(he,{className:"flex items-center justify-between",children:[i.jsx("span",{children:ht.currentEnemy.name}),i.jsx("span",{className:"text-2xl",children:ht.currentEnemy.sprite})]})}),i.jsx(ae,{children:i.jsx("div",{className:"space-y-3",children:i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{children:"HP"}),i.jsxs("span",{children:[ht.currentEnemy.currentHp,"/",ht.currentEnemy.hp]})]}),i.jsx(rp.div,{animate:od.enemy?{backgroundColor:["#ffffff","#ff4444","#ffffff"],scale:[1,1.02,1]}:{},transition:{duration:.3,times:[0,.5,1]},children:i.jsx(Tr,{value:ht.currentEnemy.currentHp/ht.currentEnemy.hp*100,className:`h-3 transition-all duration-300 ${ht.currentEnemy.currentHp/ht.currentEnemy.hp<=.25?"animate-pulse":""}`})})]})})})]})]}),ht.playerTurn&&i.jsxs(re,{className:"mb-6",children:[i.jsx(ye,{children:i.jsx(he,{children:"Choose Your Action"})}),i.jsx(ae,{children:i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Rt.abilities.map((V,z)=>{const J=ht.playerCharacter.currentEnergy>=V.energyCost;return i.jsxs(ee,{variant:"outline",className:`p-4 h-auto text-left flex flex-col items-start ${J?"hover:bg-blue-50":"opacity-50 cursor-not-allowed"}`,onClick:()=>Qx(V.name),disabled:!ht.playerTurn||!J,children:[i.jsx("div",{className:"font-semibold",children:V.name}),i.jsx("div",{className:"text-xs text-gray-600 mt-1",children:V.damage?`${V.damage} damage`:V.description}),i.jsxs("div",{className:`text-xs mt-2 font-bold flex items-center ${J?"text-blue-600":"text-red-600"}`,children:[i.jsx(Xi,{className:"w-3 h-3 mr-1"}),V.energyCost," energy ",J?"✓":"✗"]})]},z)})})})]}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsx(he,{children:"Combat Log"})}),i.jsx(ae,{children:i.jsx("div",{className:"bg-gray-100 dark:bg-gray-800 p-4 rounded max-h-32 overflow-y-auto",children:ht.combatLog.map((V,z)=>i.jsx("div",{className:"text-sm mb-1",children:V},z))})})]}),Ve&&Ze&&Bt&&i.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50","data-testid":"quiz-modal",children:i.jsxs(re,{className:"w-full max-w-2xl mx-4",children:[i.jsxs(ye,{children:[i.jsxs(he,{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"text-2xl",children:(de==null?void 0:de.iconEmoji)||"🧠"}),i.jsxs("span",{children:["Answer to Use ",Bt.name]})]}),i.jsx(Ue,{children:"Answer correctly to execute your ability and gain energy!"})]}),i.jsxs(ae,{className:"space-y-4",children:[i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 p-4 rounded-lg",children:i.jsx("p",{className:"text-lg font-medium",children:Ze.questionText})}),Ze.choices&&i.jsx("div",{className:"space-y-2",children:JSON.parse(Ze.choices).map((V,z)=>i.jsxs(ee,{variant:mt===V?"default":"outline",className:"w-full text-left justify-start",onClick:()=>vn(V),"data-testid":`choice-${z}`,children:[String.fromCharCode(65+z),". ",V]},z))}),Ze.questionType==="text_input"&&i.jsx(Mt,{placeholder:"Type your answer...",value:mt,onChange:V=>vn(V.target.value),onKeyPress:V=>V.key==="Enter"&&Ni(),"data-testid":"text-answer-input"}),i.jsxs("div",{className:"flex justify-between items-center pt-4",children:[i.jsx(ee,{variant:"outline",onClick:()=>{bt(!1),xt(null),lt(null),vn("")},"data-testid":"cancel-quiz",children:"Cancel"}),i.jsx(ee,{onClick:Ni,disabled:!mt.trim()||W,"data-testid":"submit-answer",children:W?"Submitting...":"Submit Answer"})]})]})]})})]})]})]});if(Oa==="victory")return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-yellow-500/20 to-purple-500/20 p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[i.jsx("div",{className:"text-8xl mb-6",children:"🏆"}),i.jsx("h1",{className:"text-5xl font-bold bg-gradient-to-r from-yellow-600 to-purple-600 bg-clip-text text-transparent mb-4",children:"Victory!"}),i.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"You conquered the dungeon and defeated the boss!"}),i.jsxs("div",{className:"space-y-4",children:[i.jsx(ee,{onClick:()=>{zn("character-select"),Pt(null),ad(null)},className:"mr-4",children:"Play Again"}),i.jsx(ee,{variant:"outline",onClick:()=>{zn("character-select"),Pt(null),ad(null),u("menu")},children:"Return to Menu"})]})]})});if(c==="create")return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 to-secondary/5 p-6",children:i.jsxs("div",{className:"max-w-lg mx-auto",children:[i.jsx(ee,{variant:"ghost",onClick:()=>u("menu"),className:"mb-6",children:"← Back to Menu"}),i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsx(he,{children:"Create Multiplayer Game"}),i.jsx(Ue,{children:"Set up your battle arena"})]}),i.jsx(ae,{children:i.jsxs("form",{onSubmit:V=>{V.preventDefault();const z=new FormData(V.currentTarget);dm({categoryId:z.get("categoryId"),difficulty:z.get("difficulty"),maxPlayers:z.get("maxPlayers"),timePerQuestion:z.get("timePerQuestion")})},className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Category"}),i.jsxs(Es,{name:"categoryId",children:[i.jsx(rs,{children:i.jsx(ks,{placeholder:"Any Category"})}),i.jsxs(ss,{children:[i.jsx(gt,{value:"any",children:"Any Category"}),Zl.map(V=>i.jsx(gt,{value:V.id.toString(),children:V.name},V.id))]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Difficulty"}),i.jsxs(Es,{name:"difficulty",defaultValue:"mixed",children:[i.jsx(rs,{children:i.jsx(ks,{})}),i.jsxs(ss,{children:[i.jsx(gt,{value:"mixed",children:"Mixed"}),i.jsx(gt,{value:"easy",children:"Easy"}),i.jsx(gt,{value:"medium",children:"Medium"}),i.jsx(gt,{value:"hard",children:"Hard"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Max Players"}),i.jsxs(Es,{name:"maxPlayers",defaultValue:"2",children:[i.jsx(rs,{children:i.jsx(ks,{})}),i.jsxs(ss,{children:[i.jsx(gt,{value:"2",children:"2 Players"}),i.jsx(gt,{value:"4",children:"4 Players"}),i.jsx(gt,{value:"6",children:"6 Players"})]})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium mb-2",children:"Time per Question"}),i.jsxs(Es,{name:"timePerQuestion",defaultValue:"45",children:[i.jsx(rs,{children:i.jsx(ks,{})}),i.jsxs(ss,{children:[i.jsx(gt,{value:"15",children:"15 seconds"}),i.jsx(gt,{value:"30",children:"30 seconds"}),i.jsx(gt,{value:"45",children:"45 seconds"}),i.jsx(gt,{value:"60",children:"60 seconds"})]})]})]}),i.jsx(ee,{type:"submit",className:"w-full",disabled:Ti.isPending,children:Ti.isPending?"Creating...":"Create Game"})]})})]})]})});if(c==="join")return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-500/5 to-blue-500/5 p-6",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsx(ee,{variant:"ghost",onClick:()=>u("menu"),className:"mb-8",size:"lg",children:"← Back to Menu"}),i.jsxs("div",{className:"text-center mb-12",children:[i.jsx("h1",{className:"text-5xl font-bold mb-4 text-green-600",children:"🎮 Join Game"}),i.jsx("p",{className:"text-xl text-gray-600",children:"Enter the game code to join the battle"})]}),i.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-12 mb-8 border-4 border-green-500",children:i.jsxs("div",{className:"text-center",children:[i.jsx("label",{className:"block text-lg text-gray-600 mb-6 font-semibold",children:"Enter Game Code"}),i.jsx(Mt,{value:d,onChange:V=>h(V.target.value.toUpperCase()),placeholder:"ABCDEF",className:"text-center text-6xl font-mono tracking-wider h-20 border-4 border-gray-300 rounded-xl bg-gray-50 mb-8",maxLength:6,autoFocus:!0}),i.jsx(ee,{onClick:um,size:"lg",className:"bg-green-600 hover:bg-green-700 text-2xl px-16 py-6 h-auto",disabled:d.length!==6||Xl.isPending,children:Xl.isPending?i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-white border-t-transparent rounded-full mr-3"}),"Joining..."]}):"🚀 Join Game"})]})}),i.jsx("div",{className:"text-center",children:i.jsxs("div",{className:"bg-blue-50 rounded-lg p-6 border border-blue-200",children:[i.jsx("h3",{className:"font-semibold text-blue-800 mb-2",children:"How to Join"}),i.jsx("p",{className:"text-blue-700",children:"Ask your host for the 6-character game code and enter it above. The code will automatically convert to uppercase letters."})]})})]})});if(c==="difficulty-select")return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-500/5 to-emerald-500/5 p-6",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs(ee,{variant:"ghost",onClick:()=>u("menu"),className:"mb-6",children:[i.jsx(ml,{className:"w-4 h-4 mr-2"}),"Back to Menu"]}),i.jsxs(re,{className:"mb-6 bg-gradient-to-r from-purple-50 to-indigo-50 border-2 border-purple-200",children:[i.jsx(ye,{className:"text-center",children:i.jsx(he,{className:"text-xl text-purple-800 flex items-center justify-center",children:"🤖 AI Bot Challenge Level"})}),i.jsxs(ae,{children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-3xl font-bold text-purple-600",children:["Level ",(t==null?void 0:t.botDifficultyLevel)||1]}),i.jsxs("div",{className:"text-sm text-gray-600",children:[(t==null?void 0:t.botWins)||0,"W - ",(t==null?void 0:t.botLosses)||0,"L"]})]}),i.jsxs("div",{className:"flex-1 mx-6",children:[i.jsx("div",{className:"bg-gray-200 rounded-full h-3",children:i.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-500 h-3 rounded-full transition-all duration-500",style:{width:`${(((t==null?void 0:t.botDifficultyLevel)||1)-1)/9*100}%`}})}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[i.jsx("span",{children:"Beginner"}),i.jsx("span",{children:"Expert"})]})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-lg font-semibold text-indigo-600",children:["+",Math.round(10+(((t==null?void 0:t.botDifficultyLevel)||1)-1)*11),"% Bot Power"]}),i.jsx("div",{className:"text-xs text-gray-600",children:"Current Difficulty"})]})]}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx("p",{className:"text-sm text-gray-700",children:"Win 2 consecutive battles to increase difficulty • Lose 3 in a row to decrease"})})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[i.jsxs(re,{children:[i.jsxs(ye,{className:"text-center",children:[i.jsx(he,{className:"text-xl mb-2",children:"Choose Category"}),i.jsx(Ue,{children:"Select the type of questions you want to face"})]}),i.jsx(ae,{className:"space-y-3",children:Zl.map(V=>i.jsx(re,{className:`cursor-pointer hover:shadow-md transition-all border-2 ${de===V.id?"border-primary bg-primary/5":"hover:border-primary"}`,onClick:()=>Ke(V.id),children:i.jsx(ae,{className:"p-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold",children:V.name}),i.jsx("p",{className:"text-xs text-muted-foreground",children:V.description})]}),i.jsx("div",{className:"text-lg",children:de===V.id?"✅":"📚"})]})})},V.id))})]}),i.jsxs(re,{children:[i.jsxs(ye,{className:"text-center",children:[i.jsx(he,{className:"text-xl mb-2",children:"Choose Difficulty"}),i.jsx(Ue,{children:"Select the challenge level for your battle"})]}),i.jsx(ae,{className:"space-y-3",children:["easy","medium","hard"].map(V=>i.jsx(re,{className:`cursor-pointer hover:shadow-md transition-all border-2 ${_e===V?"border-primary bg-primary/5":"hover:border-primary"}`,onClick:()=>Pe(V),children:i.jsx(ae,{className:"p-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold capitalize",children:V}),i.jsx("p",{className:"text-xs text-muted-foreground",children:V==="easy"?"Perfect for beginners":V==="medium"?"Balanced challenge":"Ultimate challenge"})]}),i.jsx("div",{className:"text-lg",children:V==="easy"?"🟢":V==="medium"?"🟡":"🔴"})]})})},V))})]})]}),i.jsx("div",{className:"text-center mt-6",children:i.jsx(ee,{size:"lg",disabled:!de||!_e,onClick:()=>{de&&_e&&Ti.mutate({categoryId:de,difficulty:_e,timePerQuestion:45,withBot:!0})},className:"px-8",children:!de||!_e?"Select Category & Difficulty":`Start ${_e.charAt(0).toUpperCase()+_e.slice(1)} Battle`})})]})});if(m&&m.status==="waiting"&&m.participants){const V=m.participants.find(J=>J.userId===((t==null?void 0:t.id)||1));!((V==null?void 0:V.characterType)&&V.characterType!=="balanced")&&!se&&c!=="character-select"&&(console.log("Forcing character selection - user has not selected character yet"),u("character-select"))}if(m&&m.status==="waiting"&&m.hostUserId===((t==null?void 0:t.id)||1)&&!((dd=m.participants)!=null&&dd.some(V=>V.user.username.startsWith("Bot_")))){const V=((mm=m.participants)==null?void 0:mm.length)||0;return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-500/5 to-purple-500/5 p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold mb-2 text-blue-600",children:"🎮 Game Lobby"}),i.jsx("p",{className:"text-lg text-gray-600",children:"Share the code below for players to join"})]}),i.jsx("div",{className:"bg-white rounded-xl shadow-lg p-8 mb-8 border-4 border-blue-500",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-sm text-gray-500 mb-2 uppercase tracking-wide font-semibold",children:"Join Code"}),i.jsx("div",{className:"text-6xl font-bold font-mono tracking-wider text-blue-600 mb-4",children:m.sessionCode}),i.jsx(ee,{size:"lg",className:"bg-blue-600 hover:bg-blue-700 px-8 py-3 text-lg",onClick:()=>{navigator.clipboard.writeText(m.sessionCode),n({title:"📋 Copied to Clipboard!",description:"Share this code with your players"})},children:"📋 Copy Code"})]})}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(he,{className:"text-xl flex items-center",children:[i.jsx(Km,{className:"w-5 h-5 mr-2"}),"Players (",V,"/",m.maxPlayers,")"]})}),i.jsx(ae,{children:i.jsxs("div",{className:"space-y-3",children:[(m.participants||[]).map(z=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-green-500 rounded-full flex items-center justify-center text-white font-bold",children:z.user.username.charAt(0).toUpperCase()}),i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold",children:z.user.username}),z.userId===m.hostUserId&&i.jsx(Fe,{variant:"secondary",className:"text-xs",children:"👑 Host"})]})]}),i.jsx("div",{className:"text-green-600 font-semibold",children:"✓ Ready"})]},z.id)),Array.from({length:m.maxPlayers-V}).map((z,J)=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:i.jsx(Km,{className:"w-5 h-5 text-gray-500"})}),i.jsx("div",{className:"text-gray-500",children:"Waiting for player..."})]}),i.jsx("div",{className:"text-gray-400",children:"⏳"})]},`empty-${J}`))]})})]}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(he,{className:"text-xl flex items-center",children:[i.jsx(HI,{className:"w-5 h-5 mr-2"}),"Game Settings"]})}),i.jsxs(ae,{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between py-2 border-b",children:[i.jsx("span",{className:"text-gray-600",children:"Category"}),i.jsx("span",{className:"font-semibold",children:"Logic Puzzles"})]}),i.jsxs("div",{className:"flex justify-between py-2 border-b",children:[i.jsx("span",{className:"text-gray-600",children:"Difficulty"}),i.jsx("span",{className:"font-semibold capitalize",children:m.difficulty})]}),i.jsxs("div",{className:"flex justify-between py-2 border-b",children:[i.jsx("span",{className:"text-gray-600",children:"Time per Question"}),i.jsxs("span",{className:"font-semibold",children:[m.timePerQuestion,"s"]})]}),i.jsxs("div",{className:"flex justify-between py-2",children:[i.jsx("span",{className:"text-gray-600",children:"Max Players"}),i.jsx("span",{className:"font-semibold",children:m.maxPlayers})]})]})]})]}),i.jsx("div",{className:"mt-8 text-center",children:V>=2?i.jsxs(ee,{size:"lg",className:"bg-green-600 hover:bg-green-700 text-xl px-12 py-4",onClick:()=>{u("character-select")},children:["🚀 Start Game (",V," players)"]}):i.jsxs("div",{className:"space-y-4",children:[i.jsx(ee,{size:"lg",className:"bg-orange-600 hover:bg-orange-700 text-xl px-12 py-4",onClick:()=>{Ti.mutate({categoryId:m.categoryId,difficulty:m.difficulty,timePerQuestion:m.timePerQuestion,withBot:!0})},children:"🤖 Add AI Bot & Start"}),i.jsx("p",{className:"text-gray-500",children:"Or wait for more players to join"}),i.jsx(ee,{variant:"outline",onClick:()=>{var z;u("menu"),g(null),(z=a.current)==null||z.close()},className:"ml-4",children:"Cancel Game"})]})})]})})}if(m&&m.status==="waiting"&&(((hs=m.participants)==null?void 0:hs.length)||0)>=2&&!((Ar=m.participants)!=null&&Ar.some(V=>V.user.username==="AI Bot"))&&((ho=m.participants)!=null&&ho.every(V=>V.characterType&&V.characterType!=="balanced"))){const V=t&&m.hostUserId===t.id;return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-500/10 to-blue-500/10 p-6",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Battle!"}),i.jsxs("p",{className:"text-lg text-gray-600",children:["All players have joined. ",V?"Start the game when ready!":"Waiting for host to start the game."]})]}),i.jsxs(re,{className:"mb-6",children:[i.jsx(ye,{children:i.jsxs(he,{children:["Battle Participants (",((fo=m.participants)==null?void 0:fo.length)||0,"/",m.maxPlayers,")"]})}),i.jsx(ae,{children:i.jsx("div",{className:"space-y-3",children:(m.participants||[]).map(z=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary/10 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center",children:"👤"}),i.jsx("span",{className:"font-medium",children:z.user.username}),z.userId===m.hostUserId&&i.jsx(Fe,{variant:"secondary",children:"Host"})]}),i.jsx(Fe,{variant:"default",className:"bg-green-500",children:"Ready"})]},z.id))})})]}),i.jsxs("div",{className:"text-center space-y-4",children:[V?i.jsx(ee,{size:"lg",className:"px-8",onClick:()=>{a.current&&m?(console.log("Sending start-game message:",{type:"start-game",userId:(t==null?void 0:t.id)||1,sessionId:m.id}),a.current.send(JSON.stringify({type:"start-game",userId:(t==null?void 0:t.id)||1,sessionId:m.id})),console.log("Start game message sent")):console.error("WebSocket not connected or no current session")},children:"Start Dungeon Adventure"}):i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),i.jsx("span",{children:"Waiting for host to start the game..."})]}),i.jsx(ee,{variant:"outline",onClick:()=>{var z;u("menu"),g(null),(z=a.current)==null||z.close()},children:"Leave Game"})]})]})})}if(c==="character-select")return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-500/10 to-pink-500/10 p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Choose Your Battle Sprite"}),i.jsx("p",{className:"text-lg text-gray-600",children:"Each character has unique abilities that affect gameplay"}),m&&m.participants&&i.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Game Code: ",i.jsx("span",{className:"font-mono font-bold",children:m.sessionCode})]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:ds.map(V=>i.jsxs(re,{className:`cursor-pointer transition-all hover:shadow-lg border-2 ${le===V.id?"border-primary bg-primary/5":"border-gray-200 hover:border-primary/50"}`,onClick:()=>cm(V.id),children:[i.jsxs(ye,{className:"text-center pb-3",children:[i.jsx("div",{className:"flex flex-col items-center mb-2",children:i.jsx("img",{src:V.image,alt:V.name,className:"w-16 h-16 mb-2 pixel-art",style:{imageRendering:"pixelated"}})}),i.jsx(he,{className:"text-xl",children:V.name})]}),i.jsxs(ae,{className:"space-y-3",children:[i.jsx("p",{className:"text-sm text-gray-600 text-center",children:V.description}),i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"HP:"}),i.jsx("span",{className:"font-bold text-red-600",children:V.baseStats.hp})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Attack:"}),i.jsx("span",{className:"font-bold text-orange-600",children:V.baseStats.attack})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Defense:"}),i.jsx("span",{className:"font-bold text-blue-600",children:V.baseStats.defense})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Speed:"}),i.jsx("span",{className:"font-bold text-green-600",children:V.baseStats.speed})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Type:"}),i.jsx("span",{className:"font-bold text-purple-600",children:V.type})]})]})]})]},V.id))}),i.jsx("div",{className:"text-center mt-8",children:i.jsx("p",{className:"text-sm text-gray-500",children:"Select a character to continue to the lobby"})})]})});if(c==="waiting-for-start"&&m)return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-500/5 to-blue-500/5 p-6",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-4xl font-bold mb-4 text-green-600",children:"⚔️ Battle Starting!"}),i.jsx("p",{className:"text-lg text-gray-600",children:"Both players are ready. Initializing battle..."})]}),i.jsx(re,{className:"mb-6",children:i.jsxs(ae,{className:"text-center p-8",children:[i.jsx("div",{className:"animate-spin w-16 h-16 border-4 border-green-500 border-t-transparent rounded-full mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading battle arena..."})]})})]})});if(c==="lobby"&&m&&m.participants){m.hostUserId,t!=null&&t.id;const V=(ec=m.participants)==null?void 0:ec.find(J=>J.userId===((t==null?void 0:t.id)||1)),z=((Ct=m.participants)==null?void 0:Ct.every(J=>J.isReady))||!1;return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 to-secondary/5 p-6",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Game Lobby"}),i.jsxs("div",{className:"text-2xl font-mono bg-primary/10 inline-block px-4 py-2 rounded-lg",children:["Code: ",m.sessionCode]})]}),i.jsxs(re,{className:"mb-6",children:[i.jsx(ye,{children:i.jsxs(he,{className:"flex items-center justify-between",children:[i.jsxs("span",{children:["Players (",((za=m.participants)==null?void 0:za.length)||0,"/",m.maxPlayers,")"]}),i.jsx(Fe,{variant:z?"default":"secondary",children:z?"All Ready!":"Waiting..."})]})}),i.jsx(ae,{children:i.jsx("div",{className:"space-y-3",children:(mo=m.participants)==null?void 0:mo.map(J=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-secondary/10 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-8 h-8 bg-primary/20 rounded-full flex items-center justify-center",children:J.user.username[0].toUpperCase()}),i.jsx("span",{className:"font-medium",children:J.user.username}),J.userId===m.hostUserId&&i.jsx(Fe,{variant:"outline",children:"Host"})]}),i.jsx(Fe,{variant:J.isReady?"default":"secondary",children:J.isReady?"Ready":"Not Ready"})]},J.id))})})]}),i.jsx("div",{className:"text-center",children:V!=null&&V.isReady?i.jsx("p",{className:"text-muted-foreground",children:z?"Starting game...":"Waiting for other players..."}):i.jsx(ee,{onClick:Ci,className:"px-8",children:"Mark Ready"})})]})})}if(c==="playing"&&_){const V=(Fa==null?void 0:Fa.session)||m,z=(po=V==null?void 0:V.participants)==null?void 0:po.find(Xe=>Xe.userId===((t==null?void 0:t.id)||1)),J=(pm=V==null?void 0:V.participants)==null?void 0:pm.find(Xe=>Xe.userId!==((t==null?void 0:t.id)||1));console.log("Current player from session:",z),console.log("Sprite type:",z==null?void 0:z.characterType,"HP:",z==null?void 0:z.hp,"Max HP:",z==null?void 0:z.maxHp);const oe=ds.find(Xe=>Xe.id===(z==null?void 0:z.characterType))||ds[0],be=ds.find(Xe=>Xe.id===(J==null?void 0:J.characterType))||ds[0];return console.log("Calculated character:",oe.name,"for character type:",z==null?void 0:z.characterType),i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-500/10 to-blue-500/10 p-6",children:i.jsxs("div",{className:"max-w-4xl mx-auto",children:[i.jsx("div",{className:"text-center mb-6",children:i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs(Fe,{variant:"outline",className:"text-lg py-2 px-4",children:["Question ",x+1]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Li,{className:"w-5 h-5 text-primary"}),i.jsxs("span",{className:`font-mono text-2xl font-bold ${w<=5?"text-red-500 animate-pulse":"text-primary"}`,children:[w,"s"]})]})]})}),i.jsxs("div",{className:"relative h-72 mb-6 bg-gradient-to-br from-green-200 via-green-300 to-green-400 border-4 border-black rounded-none overflow-hidden",style:{imageRendering:"pixelated"},children:[i.jsx("div",{className:"absolute top-8 right-16",children:i.jsx("img",{src:be.image,alt:be.name,className:"w-32 h-32 transform scale-x-[-1] pixel-art drop-shadow-lg",style:{imageRendering:"pixelated"}})}),i.jsxs("div",{className:"absolute top-4 left-4 bg-white border-4 border-black p-3 font-mono text-sm",style:{borderRadius:"8px",boxShadow:"inset -2px -2px 0px #d1d5db, inset 2px 2px 0px #ffffff"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"font-bold text-black uppercase tracking-wide",children:((hd=J==null?void 0:J.user)==null?void 0:hd.username)||"OPPONENT"}),i.jsxs("span",{className:"text-black",children:[":L",((J==null?void 0:J.userId)||1)%30+15]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs font-bold",children:[i.jsx("span",{children:"HP"}),i.jsxs("span",{children:[(J==null?void 0:J.hp)||50,"/",(J==null?void 0:J.maxHp)||50,((J==null?void 0:J.maxHp)||50)-((J==null?void 0:J.hp)||50)>0&&i.jsxs("span",{className:"text-red-600 ml-1",children:["(-",((J==null?void 0:J.maxHp)||50)-((J==null?void 0:J.hp)||50),")"]})]})]}),i.jsx("div",{className:"relative bg-black border-2 border-black h-3",children:i.jsx("div",{className:"absolute inset-0.5 bg-white",children:i.jsx("div",{className:`h-full transition-all duration-500 ${((J==null?void 0:J.hp)||50)/((J==null?void 0:J.maxHp)||50)>.5?"bg-green-500":((J==null?void 0:J.hp)||50)/((J==null?void 0:J.maxHp)||50)>.25?"bg-yellow-500":"bg-red-500"}`,style:{width:`${((J==null?void 0:J.hp)||50)/((J==null?void 0:J.maxHp)||50)*100}%`}})})}),i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsxs("span",{className:"text-purple-700 font-bold",children:["⚡",(J==null?void 0:J.energy)||0]}),i.jsx("span",{className:"text-gray-700 font-bold",children:be.name.toUpperCase()})]})]})]}),i.jsx("div",{className:"absolute bottom-8 left-16",children:i.jsx("img",{src:oe.image,alt:oe.name,className:"w-32 h-32 pixel-art drop-shadow-lg",style:{imageRendering:"pixelated"}})}),i.jsxs("div",{className:"absolute bottom-4 right-4 bg-white border-4 border-black p-3 font-mono text-sm",style:{borderRadius:"8px",boxShadow:"inset -2px -2px 0px #d1d5db, inset 2px 2px 0px #ffffff"},children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"font-bold text-black uppercase tracking-wide",children:((gm=z==null?void 0:z.user)==null?void 0:gm.username)||"YOU"}),i.jsxs("span",{className:"text-black",children:[":L",((z==null?void 0:z.userId)||1)%25+20]})]}),i.jsxs("div",{className:"space-y-1",children:[i.jsxs("div",{className:"flex items-center justify-between text-xs font-bold",children:[i.jsx("span",{children:"HP"}),i.jsxs("span",{children:[(z==null?void 0:z.hp)||50,"/",(z==null?void 0:z.maxHp)||50,((z==null?void 0:z.maxHp)||50)-((z==null?void 0:z.hp)||50)>0&&i.jsxs("span",{className:"text-red-600 ml-1",children:["(-",((z==null?void 0:z.maxHp)||50)-((z==null?void 0:z.hp)||50),")"]})]})]}),i.jsx("div",{className:"relative bg-black border-2 border-black h-3",children:i.jsx("div",{className:"absolute inset-0.5 bg-white",children:i.jsx("div",{className:`h-full transition-all duration-500 ${((z==null?void 0:z.hp)||50)/((z==null?void 0:z.maxHp)||50)>.5?"bg-green-500":((z==null?void 0:z.hp)||50)/((z==null?void 0:z.maxHp)||50)>.25?"bg-yellow-500":"bg-red-500"}`,style:{width:`${((z==null?void 0:z.hp)||50)/((z==null?void 0:z.maxHp)||50)*100}%`}})})}),i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsxs("span",{className:"text-purple-700 font-bold",children:["⚡",(z==null?void 0:z.energy)||0]}),i.jsx("span",{className:"text-gray-700 font-bold",children:oe.name.toUpperCase()})]})]})]}),i.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2",children:i.jsx("div",{className:"text-4xl animate-bounce",children:"⚡"})})]}),_.hint&&i.jsxs(re,{id:"battle-hint",className:"border-orange-200 bg-orange-50 mb-4",children:[i.jsx(ye,{children:i.jsxs(he,{className:"text-sm text-orange-700 flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center",children:["💡 ",i.jsx("span",{className:"ml-2",children:"Battle Hint"})]}),i.jsxs(ee,{size:"sm",variant:"ghost",className:"h-6 px-2 animate-pulse hover:animate-none",onClick:()=>co("general","Study the hint carefully! Look for keywords, patterns, or hidden meanings. In battle, correct answers give you energy while wrong ones cost HP. Use strategic thinking!"),children:[i.jsx(GI,{className:"w-3 h-3 mr-1"}),"Tips"]})]})}),i.jsx(ae,{children:i.jsx("p",{className:"text-sm text-orange-800",children:_.hint})})]}),i.jsxs("div",{className:"bg-white border-4 border-black p-6 mb-6 font-mono",style:{borderRadius:"12px",boxShadow:"inset -3px -3px 0px #d1d5db, inset 3px 3px 0px #ffffff"},children:[i.jsxs("div",{className:"text-center mb-4",children:[i.jsxs("h2",{className:"text-xl font-bold text-black uppercase tracking-wide mb-2",children:["BATTLE QUESTION #",x+1]}),i.jsx("div",{className:"inline-block bg-gray-200 border-2 border-black px-3 py-1 font-bold text-sm",children:_.difficulty.toUpperCase()})]}),i.jsx("div",{className:"bg-gray-100 border-2 border-black p-4 mb-4",style:{borderRadius:"8px"},children:i.jsx("p",{className:"text-lg font-bold text-black text-center leading-relaxed",children:_.question})}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"bg-white border-2 border-black",style:{borderRadius:"8px"},children:i.jsx("input",{value:E,onChange:Xe=>P(Xe.target.value),placeholder:"Enter your answer...",className:"w-full p-3 text-lg font-bold text-black bg-transparent border-none outline-none",onKeyDown:Xe=>{Xe.key==="Enter"&&E.trim()&&uo()}})}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsx("button",{onClick:uo,disabled:!E.trim(),className:`bg-blue-200 border-3 border-black p-3 font-bold text-black uppercase tracking-wide hover:bg-blue-300 transition-colors ${E.trim()?"":"opacity-50 cursor-not-allowed"}`,style:{borderRadius:"8px",boxShadow:"2px 2px 0px #666666"},children:"SUBMIT"}),i.jsx("button",{onClick:()=>{uo()},className:"bg-red-200 border-3 border-black p-3 font-bold text-black uppercase tracking-wide hover:bg-red-300 transition-colors",style:{borderRadius:"8px",boxShadow:"2px 2px 0px #666666"},children:"SKIP"}),i.jsx("button",{onClick:()=>{const Xe=document.getElementById("battle-hint");Xe&&Xe.scrollIntoView({behavior:"smooth"})},className:"bg-green-200 border-3 border-black p-3 font-bold text-black uppercase tracking-wide hover:bg-green-300 transition-colors",style:{borderRadius:"8px",boxShadow:"2px 2px 0px #666666"},children:"HINT"}),i.jsx("button",{className:"bg-yellow-200 border-3 border-black p-3 font-bold text-black uppercase tracking-wide hover:bg-yellow-300 transition-colors",style:{borderRadius:"8px",boxShadow:"2px 2px 0px #666666"},children:"STATS"})]})]})]}),i.jsx(GY,{moves:R,isVisible:k}),i.jsx(AE,{isVisible:G,type:B,message:O,onDismiss:Ua})]})})}if(c==="finished")return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 to-secondary/5 p-6",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Game Complete!"}),i.jsx(si,{className:"w-16 h-16 text-yellow-500 mx-auto"})]}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsx(he,{children:"Final Leaderboard"})}),i.jsx(ae,{children:i.jsx("div",{className:"space-y-3",children:(U||[]).map((V,z)=>i.jsxs("div",{className:"flex items-center justify-between p-4 bg-secondary/10 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-bold
                        ${z===0?"bg-yellow-100 text-yellow-800 border-2 border-yellow-500":z===1?"bg-gray-100 text-gray-800 border-2 border-gray-500":z===2?"bg-amber-100 text-amber-800 border-2 border-amber-500":"bg-secondary text-secondary-foreground"}`,children:z+1}),i.jsx("span",{className:"font-medium",children:V.username})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-bold",children:[V.score," pts"]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[V.correctAnswers,"/",V.totalAnswered," correct"]})]})]},V.userId))})})]}),i.jsx("div",{className:"text-center mt-8",children:i.jsx(ee,{onClick:()=>{var V;u("menu"),g(null),T([]),(V=a.current)==null||V.close()},className:"px-8",children:"Play Again"})})]})});if(p.useEffect(()=>{c==="action-select"&&pe(15)},[c]),p.useEffect(()=>{if(c==="action-select"&&ve>0){const V=setTimeout(()=>{pe(ve-1)},1e3);return()=>clearTimeout(V)}else ve===0&&c==="action-select"&&$a("charge")},[ve,c]),c==="action-select")return console.log("🚀 Rendering action-select screen!"),i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-500/10 to-blue-500/10 p-6",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold mb-2 text-green-600",children:"Correct Answer!"}),i.jsx("p",{className:"text-lg text-gray-600",children:"Choose your battle action:"}),i.jsxs("div",{className:"mt-4",children:[i.jsxs("div",{className:`text-2xl font-bold ${ve<=5?"text-red-500 animate-pulse":"text-blue-600"}`,children:["⏰ ",ve,"s remaining"]}),i.jsx("p",{className:"text-sm text-gray-500",children:"Auto-charges if time runs out"})]}),i.jsxs(ee,{size:"sm",variant:"outline",className:"mt-2 animate-pulse hover:animate-none",onClick:()=>{var J;const V=(J=m==null?void 0:m.participants)==null?void 0:J.find(oe=>oe.userId===((t==null?void 0:t.id)||1)),z=(V==null?void 0:V.energy)||0;co("energy",`Energy Management Tip: You have ${z} energy. Attack costs 5, Shield costs 3, Charge costs 2. Plan your moves strategically - save energy for powerful attacks or defensive shields!`)},children:[i.jsx(gu,{className:"w-3 h-3 mr-1"}),"Strategy Tips"]})]}),m&&m.participants&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:(ym=m.participants)==null?void 0:ym.map(V=>i.jsx(Jl,{participant:V,isCurrentUser:V.userId===((t==null?void 0:t.id)||1)},V.id))}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:m&&m.participants&&(()=>{var J;const V=(J=m.participants)==null?void 0:J.find(oe=>oe.userId===((t==null?void 0:t.id)||1)),z=(V==null?void 0:V.energy)||0;return i.jsxs(i.Fragment,{children:[i.jsx(re,{className:`cursor-pointer transition-all border-2 ${z>=5?"hover:shadow-lg hover:border-red-500":"opacity-50 cursor-not-allowed border-gray-300"}`,onClick:()=>z>=5&&$a("attack"),children:i.jsxs(ae,{className:"p-6 text-center",children:[i.jsx(pl,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Attack"}),i.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Deal 10 damage to opponent (+",(V==null?void 0:V.chargePower)||0," if charged)"]}),i.jsx("div",{className:"text-xs",children:i.jsxs("span",{className:`font-bold ${z>=5?"text-purple-600":"text-red-600"}`,children:["Costs 5 energy ",z>=5?"✓":"✗"]})})]})}),(Ad.find(Xe=>Xe.id===(V==null?void 0:V.characterType))||Ad[4]).abilities.some(Xe=>Xe.special==="reflect_damage")?i.jsx(re,{className:`cursor-pointer transition-all border-2 ${z>=5?"hover:shadow-lg hover:border-purple-500":"opacity-50 cursor-not-allowed border-gray-300"}`,onClick:()=>z>=5&&$a("reflect"),children:i.jsxs(ae,{className:"p-6 text-center",children:[i.jsx("div",{className:"w-12 h-12 text-purple-500 mx-auto mb-4 text-2xl flex items-center justify-center",children:"🪞"}),i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Reflect"}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Reflect the next attack back to your opponent"}),i.jsx("div",{className:"text-xs",children:i.jsxs("span",{className:`font-bold ${z>=5?"text-purple-600":"text-red-600"}`,children:["Costs 5 energy ",z>=5?"✓":"✗"]})})]})}):i.jsx(re,{className:`cursor-pointer transition-all border-2 ${z>=3?"hover:shadow-lg hover:border-blue-500":"opacity-50 cursor-not-allowed border-gray-300"}`,onClick:()=>z>=3&&$a("shield"),children:i.jsxs(ae,{className:"p-6 text-center",children:[i.jsx(Fc,{className:"w-12 h-12 text-blue-500 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Shield"}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Block the next attack from your opponent"}),i.jsx("div",{className:"text-xs",children:i.jsxs("span",{className:`font-bold ${z>=3?"text-purple-600":"text-red-600"}`,children:["Costs 3 energy ",z>=3?"✓":"✗"]})})]})}),i.jsx(re,{className:`cursor-pointer transition-all border-2 ${z>=2?"hover:shadow-lg hover:border-orange-500":"opacity-50 cursor-not-allowed border-gray-300"}`,onClick:()=>z>=2&&$a("charge"),children:i.jsxs(ae,{className:"p-6 text-center",children:[i.jsx(wT,{className:"w-12 h-12 text-orange-500 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-bold mb-2",children:"Charge"}),i.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Add +5 damage to your next attack"}),i.jsx("div",{className:"text-xs",children:i.jsxs("span",{className:`font-bold ${z>=2?"text-purple-600":"text-red-600"}`,children:["Costs 2 energy ",z>=2?"✓":"✗"]})})]})})]})})()}),i.jsx(AE,{isVisible:G,type:B,message:O,onDismiss:Ua})]})});if(c==="battle-result")return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-500/10 to-red-500/10 p-6",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Battle Results"}),K&&i.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-lg",children:[i.jsxs("h3",{className:"text-xl font-bold mb-2",children:["You used: ",i.jsx("span",{className:"capitalize text-primary",children:X})]}),K.damage>0&&i.jsxs("p",{className:"text-lg text-red-600",children:["Dealt ",K.damage," damage to opponent!"]}),K.shieldBroken&&i.jsx("p",{className:"text-lg text-blue-600",children:"Enemy shield was broken!"}),K.targetHP<=0&&i.jsx("p",{className:"text-xl font-bold text-green-600",children:"Victory! Enemy defeated!"})]})]}),m&&m.participants&&i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:(xm=m.participants)==null?void 0:xm.map(V=>i.jsx(Jl,{participant:V,isCurrentUser:V.userId===((t==null?void 0:t.id)||1)},V.id))}),i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-gray-600 mb-4",children:"Waiting for next question..."})})]})});const fm=i.jsx(E5,{isOpen:Ee,onClose:()=>et(!1),userAnswer:At,onShowAnswer:lm,onTryAgain:cd,onNextQuestion:Ba,hint:(_==null?void 0:_.hint)||"Try thinking about this differently!",isAttemptsExhausted:Si>=us});return i.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary/5 to-secondary/5 p-6",children:[i.jsx("div",{className:"max-w-lg mx-auto",children:i.jsx(re,{children:i.jsxs(ae,{className:"p-8 text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Loading Game..."}),i.jsxs("p",{className:"text-muted-foreground",children:["Current mode: ",c||"unknown"]}),i.jsx(ee,{variant:"outline",onClick:()=>u("menu"),className:"mt-4",children:"Return to Menu"})]})})}),fm]})}const QY=()=>{};var PE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},YY=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],a=t[n++],l=t[n++],c=((s&7)<<18|(o&63)<<12|(a&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],a=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|a&63)}}return e.join("")},nL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],a=s+1<t.length,l=a?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,d=o>>2,h=(o&3)<<4|l>>4;let m=(l&15)<<2|u>>6,g=u&63;c||(g=64,a||(m=64)),r.push(n[d],n[h],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(tL(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YY(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||l==null||u==null||h==null)throw new ZY;const m=o<<2|l>>4;if(r.push(m),u!==64){const g=l<<4&240|u>>2;if(r.push(g),h!==64){const _=u<<6&192|h;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class ZY extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const XY=function(t){const e=tL(t);return nL.encodeByteArray(e,!0)},ny=function(t){return XY(t).replace(/\./g,"")},rL=function(t){try{return nL.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JY(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eZ=()=>JY().__FIREBASE_DEFAULTS__,tZ=()=>{if(typeof process>"u"||typeof PE>"u")return;const t=PE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nZ=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&rL(t[1]);return e&&JSON.parse(e)},bx=()=>{try{return QY()||eZ()||tZ()||nZ()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},sL=t=>{var e,n;return(n=(e=bx())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},rZ=t=>{const e=sL(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},iL=()=>{var t;return(t=bx())==null?void 0:t.config},oL=t=>{var e;return(e=bx())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sZ{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xu(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function aL(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iZ(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}},...t};return[ny(JSON.stringify(n)),ny(JSON.stringify(a)),""].join(".")}const ch={};function oZ(){const t={prod:[],emulator:[]};for(const e of Object.keys(ch))ch[e]?t.emulator.push(e):t.prod.push(e);return t}function aZ(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let IE=!1;function lL(t,e){if(typeof window>"u"||typeof document>"u"||!Xu(window.location.host)||ch[t]===e||ch[t]||IE)return;ch[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",o=oZ().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function u(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{IE=!0,a()},m}function d(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function h(){const m=aZ(r),g=n("text"),_=document.getElementById(g)||document.createElement("span"),v=n("learnmore"),x=document.getElementById(v)||document.createElement("a"),y=n("preprendIcon"),w=document.getElementById(y)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const j=m.element;l(j),d(x,v);const E=u();c(w,y),j.append(w,_,x,E),document.body.appendChild(j)}o?(_.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lZ(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sr())}function cZ(){var e;const t=(e=bx())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function uZ(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function dZ(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hZ(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fZ(){const t=sr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mZ(){return!cZ()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function pZ(){try{return typeof indexedDB=="object"}catch{return!1}}function gZ(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)==null?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yZ="FirebaseError";class lo extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=yZ,Object.setPrototypeOf(this,lo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hf.prototype.create)}}class Hf{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],a=o?xZ(o,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new lo(s,l,r)}}function xZ(t,e){return t.replace(vZ,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const vZ=/\{\$([^}]+)}/g;function wZ(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ml(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],a=e[s];if(RE(o)&&RE(a)){if(!Ml(o,a))return!1}else if(o!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function RE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qf(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function bZ(t,e){const n=new _Z(t,e);return n.subscribe.bind(n)}class _Z{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jZ(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=av),s.error===void 0&&(s.error=av),s.complete===void 0&&(s.complete=av);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jZ(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function av(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t){return t&&t._delegate?t._delegate:t}class Dl{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Za="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SZ{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new sZ;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TZ(e))try{this.getOrInitializeService({instanceIdentifier:Za})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=Za){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Za){return this.instances.has(e)}getOptions(e=Za){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&a.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:NZ(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Za){return this.component?this.component.multipleInstances?e:Za:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function NZ(t){return t===Za?void 0:t}function TZ(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CZ{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new SZ(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ct;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ct||(ct={}));const EZ={debug:ct.DEBUG,verbose:ct.VERBOSE,info:ct.INFO,warn:ct.WARN,error:ct.ERROR,silent:ct.SILENT},kZ=ct.INFO,AZ={[ct.DEBUG]:"log",[ct.VERBOSE]:"log",[ct.INFO]:"info",[ct.WARN]:"warn",[ct.ERROR]:"error"},PZ=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=AZ[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class vj{constructor(e){this.name=e,this._logLevel=kZ,this._logHandler=PZ,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ct))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?EZ[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ct.DEBUG,...e),this._logHandler(this,ct.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ct.VERBOSE,...e),this._logHandler(this,ct.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ct.INFO,...e),this._logHandler(this,ct.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ct.WARN,...e),this._logHandler(this,ct.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ct.ERROR,...e),this._logHandler(this,ct.ERROR,...e)}}const IZ=(t,e)=>e.some(n=>t instanceof n);let ME,DE;function RZ(){return ME||(ME=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function MZ(){return DE||(DE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cL=new WeakMap,pb=new WeakMap,uL=new WeakMap,lv=new WeakMap,wj=new WeakMap;function DZ(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",a)},o=()=>{n(oa(t.result)),s()},a=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",a)});return e.then(n=>{n instanceof IDBCursor&&cL.set(n,t)}).catch(()=>{}),wj.set(e,t),e}function LZ(t){if(pb.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",a),t.removeEventListener("abort",a)},o=()=>{n(),s()},a=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",a),t.addEventListener("abort",a)});pb.set(t,e)}let gb={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pb.get(t);if(e==="objectStoreNames")return t.objectStoreNames||uL.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return oa(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OZ(t){gb=t(gb)}function VZ(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cv(this),e,...n);return uL.set(r,e.sort?e.sort():[e]),oa(r)}:MZ().includes(t)?function(...e){return t.apply(cv(this),e),oa(cL.get(this))}:function(...e){return oa(t.apply(cv(this),e))}}function FZ(t){return typeof t=="function"?VZ(t):(t instanceof IDBTransaction&&LZ(t),IZ(t,RZ())?new Proxy(t,gb):t)}function oa(t){if(t instanceof IDBRequest)return DZ(t);if(lv.has(t))return lv.get(t);const e=FZ(t);return e!==t&&(lv.set(t,e),wj.set(e,t)),e}const cv=t=>wj.get(t);function UZ(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const a=indexedDB.open(t,e),l=oa(a);return r&&a.addEventListener("upgradeneeded",c=>{r(oa(a.result),c.oldVersion,c.newVersion,oa(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const BZ=["get","getKey","getAll","getAllKeys","count"],$Z=["put","add","delete","clear"],uv=new Map;function LE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(uv.get(e))return uv.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=$Z.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BZ.includes(n)))return;const o=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return uv.set(e,o),o}OZ(t=>({...t,get:(e,n,r)=>LE(e,n)||t.get(e,n,r),has:(e,n)=>!!LE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zZ{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WZ(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WZ(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const yb="@firebase/app",OE="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro=new vj("@firebase/app"),HZ="@firebase/app-compat",qZ="@firebase/analytics-compat",GZ="@firebase/analytics",KZ="@firebase/app-check-compat",QZ="@firebase/app-check",YZ="@firebase/auth",ZZ="@firebase/auth-compat",XZ="@firebase/database",JZ="@firebase/data-connect",eX="@firebase/database-compat",tX="@firebase/functions",nX="@firebase/functions-compat",rX="@firebase/installations",sX="@firebase/installations-compat",iX="@firebase/messaging",oX="@firebase/messaging-compat",aX="@firebase/performance",lX="@firebase/performance-compat",cX="@firebase/remote-config",uX="@firebase/remote-config-compat",dX="@firebase/storage",hX="@firebase/storage-compat",fX="@firebase/firestore",mX="@firebase/ai",pX="@firebase/firestore-compat",gX="firebase",yX="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb="[DEFAULT]",xX={[yb]:"fire-core",[HZ]:"fire-core-compat",[GZ]:"fire-analytics",[qZ]:"fire-analytics-compat",[QZ]:"fire-app-check",[KZ]:"fire-app-check-compat",[YZ]:"fire-auth",[ZZ]:"fire-auth-compat",[XZ]:"fire-rtdb",[JZ]:"fire-data-connect",[eX]:"fire-rtdb-compat",[tX]:"fire-fn",[nX]:"fire-fn-compat",[rX]:"fire-iid",[sX]:"fire-iid-compat",[iX]:"fire-fcm",[oX]:"fire-fcm-compat",[aX]:"fire-perf",[lX]:"fire-perf-compat",[cX]:"fire-rc",[uX]:"fire-rc-compat",[dX]:"fire-gcs",[hX]:"fire-gcs-compat",[fX]:"fire-fst",[pX]:"fire-fst-compat",[mX]:"fire-vertex","fire-js":"fire-js",[gX]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=new Map,vX=new Map,vb=new Map;function VE(t,e){try{t.container.addComponent(e)}catch(n){ro.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ku(t){const e=t.name;if(vb.has(e))return ro.debug(`There were multiple attempts to register component ${e}.`),!1;vb.set(e,t);for(const n of ry.values())VE(n,t);for(const n of vX.values())VE(n,t);return!0}function bj(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ns(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wX={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},aa=new Hf("app","Firebase",wX);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bX{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Dl("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw aa.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ju=yX;function dL(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:xb,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw aa.create("bad-app-name",{appName:String(s)});if(n||(n=iL()),!n)throw aa.create("no-options");const o=ry.get(s);if(o){if(Ml(n,o.options)&&Ml(r,o.config))return o;throw aa.create("duplicate-app",{appName:s})}const a=new CZ(s);for(const c of vb.values())a.addComponent(c);const l=new bX(n,r,a);return ry.set(s,l),l}function hL(t=xb){const e=ry.get(t);if(!e&&t===xb&&iL())return dL();if(!e)throw aa.create("no-app",{appName:t});return e}function la(t,e,n){let r=xX[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ro.warn(a.join(" "));return}ku(new Dl(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _X="firebase-heartbeat-database",jX=1,uf="firebase-heartbeat-store";let dv=null;function fL(){return dv||(dv=UZ(_X,jX,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(uf)}catch(n){console.warn(n)}}}}).catch(t=>{throw aa.create("idb-open",{originalErrorMessage:t.message})})),dv}async function SX(t){try{const n=(await fL()).transaction(uf),r=await n.objectStore(uf).get(mL(t));return await n.done,r}catch(e){if(e instanceof lo)ro.warn(e.message);else{const n=aa.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ro.warn(n.message)}}}async function FE(t,e){try{const r=(await fL()).transaction(uf,"readwrite");await r.objectStore(uf).put(e,mL(t)),await r.done}catch(n){if(n instanceof lo)ro.warn(n.message);else{const r=aa.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ro.warn(r.message)}}}function mL(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NX=1024,TX=30;class CX{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kX(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=UE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>TX){const a=AX(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ro.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=UE(),{heartbeatsToSend:r,unsentEntries:s}=EX(this._heartbeatsCache.heartbeats),o=ny(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ro.warn(n),""}}}function UE(){return new Date().toISOString().substring(0,10)}function EX(t,e=NX){const n=[];let r=t.slice();for(const s of t){const o=n.find(a=>a.agent===s.agent);if(o){if(o.dates.push(s.date),BE(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),BE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class kX{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return pZ()?gZ().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await SX(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return FE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return FE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function BE(t){return ny(JSON.stringify({version:2,heartbeats:t})).length}function AX(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PX(t){ku(new Dl("platform-logger",e=>new zZ(e),"PRIVATE")),ku(new Dl("heartbeat",e=>new CX(e),"PRIVATE")),la(yb,OE,t),la(yb,OE,"esm2020"),la("fire-js","")}PX("");var IX="firebase",RX="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */la(IX,RX,"app");function pL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const MX=pL,gL=new Hf("auth","Firebase",pL());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=new vj("@firebase/auth");function DX(t,...e){sy.logLevel<=ct.WARN&&sy.warn(`Auth (${Ju}): ${t}`,...e)}function Vp(t,...e){sy.logLevel<=ct.ERROR&&sy.error(`Auth (${Ju}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vi(t,...e){throw jj(t,...e)}function Ms(t,...e){return jj(t,...e)}function _j(t,e,n){const r={...MX(),[e]:n};return new Hf("auth","Firebase",r).create(e,{appName:t.name})}function xl(t){return _j(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function LX(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&vi(t,"argument-error"),_j(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jj(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return gL.create(t,...e)}function Ge(t,e,...n){if(!t)throw jj(e,...n)}function Bi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Vp(e),new Error(e)}function so(t,e){t||Bi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wb(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function OX(){return $E()==="http:"||$E()==="https:"}function $E(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VX(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(OX()||dZ()||"connection"in navigator)?navigator.onLine:!0}function FX(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gf{constructor(e,n){this.shortDelay=e,this.longDelay=n,so(n>e,"Short delay should be less than long delay!"),this.isMobile=lZ()||hZ()}get(){return VX()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sj(t,e){so(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yL{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Bi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Bi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Bi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UX={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BX=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],$X=new Gf(3e4,6e4);function Nj(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function ed(t,e,n,r,s={}){return xL(t,s,async()=>{let o={},a={};r&&(e==="GET"?a=r:o={body:JSON.stringify(r)});const l=qf({key:t.config.apiKey,...a}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u={method:e,headers:c,...o};return uZ()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&Xu(t.emulatorConfig.host)&&(u.credentials="include"),yL.fetch()(await vL(t,t.config.apiHost,n,l),u)})}async function xL(t,e,n){t._canInitEmulator=!1;const r={...UX,...e};try{const s=new WX(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const a=await o.json();if("needConfirmation"in a)throw ip(t,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{const l=o.ok?a.errorMessage:a.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw ip(t,"credential-already-in-use",a);if(c==="EMAIL_EXISTS")throw ip(t,"email-already-in-use",a);if(c==="USER_DISABLED")throw ip(t,"user-disabled",a);const d=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw _j(t,d,u);vi(t,d)}}catch(s){if(s instanceof lo)throw s;vi(t,"network-request-failed",{message:String(s)})}}async function zX(t,e,n,r,s={}){const o=await ed(t,e,n,r,s);return"mfaPendingCredential"in o&&vi(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function vL(t,e,n,r){const s=`${e}${n}?${r}`,o=t,a=o.config.emulator?Sj(t.config,s):`${t.config.apiScheme}://${s}`;return BX.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(a).toString():a}class WX{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Ms(this.auth,"network-request-failed")),$X.get())})}}function ip(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Ms(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HX(t,e){return ed(t,"POST","/v1/accounts:delete",e)}async function iy(t,e){return ed(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qX(t,e=!1){const n=fr(t),r=await n.getIdToken(e),s=Tj(r);Ge(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,a=o==null?void 0:o.sign_in_provider;return{claims:s,token:r,authTime:uh(hv(s.auth_time)),issuedAtTime:uh(hv(s.iat)),expirationTime:uh(hv(s.exp)),signInProvider:a||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function hv(t){return Number(t)*1e3}function Tj(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Vp("JWT malformed, contained fewer than 3 sections"),null;try{const s=rL(n);return s?JSON.parse(s):(Vp("Failed to decode base64 JWT payload"),null)}catch(s){return Vp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function zE(t){const e=Tj(t);return Ge(e,"internal-error"),Ge(typeof e.exp<"u","internal-error"),Ge(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function df(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof lo&&GX(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function GX({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KX{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bb{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uh(this.lastLoginAt),this.creationTime=uh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oy(t){var h;const e=t.auth,n=await t.getIdToken(),r=await df(t,iy(e,{idToken:n}));Ge(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(h=s.providerUserInfo)!=null&&h.length?wL(s.providerUserInfo):[],a=YX(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),u=l?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new bb(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function QX(t){const e=fr(t);await oy(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function YX(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function wL(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZX(t,e){const n=await xL(t,{},async()=>{const r=qf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,a=await vL(t,s,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&Xu(t.emulatorConfig.host)&&(c.credentials="include"),yL.fetch()(a,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function XX(t,e){return ed(t,"POST","/v2/accounts:revokeToken",Nj(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ge(e.idToken,"internal-error"),Ge(typeof e.idToken<"u","internal-error"),Ge(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Ge(e.length!==0,"internal-error");const n=zE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Ge(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await ZX(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,a=new Wc;return r&&(Ge(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),s&&(Ge(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),o&&(Ge(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wc,this.toJSON())}_performRefresh(){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(t,e){Ge(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class As{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new KX(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new bb(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await df(this,this.stsTokenManager.getToken(this.auth,e));return Ge(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qX(this,e)}reload(){return QX(this)}_assign(e){this!==e&&(Ge(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new As({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Ge(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await oy(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ns(this.auth.app))return Promise.reject(xl(this.auth));const e=await this.getIdToken();return await df(this,HX(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,o=n.phoneNumber??void 0,a=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,u=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:h,emailVerified:m,isAnonymous:g,providerData:_,stsTokenManager:v}=n;Ge(h&&v,e,"internal-error");const x=Wc.fromJSON(this.name,v);Ge(typeof h=="string",e,"internal-error"),No(r,e.name),No(s,e.name),Ge(typeof m=="boolean",e,"internal-error"),Ge(typeof g=="boolean",e,"internal-error"),No(o,e.name),No(a,e.name),No(l,e.name),No(c,e.name),No(u,e.name),No(d,e.name);const y=new As({uid:h,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:g,photoURL:a,phoneNumber:o,tenantId:l,stsTokenManager:x,createdAt:u,lastLoginAt:d});return _&&Array.isArray(_)&&(y.providerData=_.map(w=>({...w}))),c&&(y._redirectEventId=c),y}static async _fromIdTokenResponse(e,n,r=!1){const s=new Wc;s.updateFromServerResponse(n);const o=new As({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await oy(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Ge(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?wL(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(o!=null&&o.length),l=new Wc;l.updateFromIdToken(r);const c=new As({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new bb(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(o!=null&&o.length)};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WE=new Map;function $i(t){so(t instanceof Function,"Expected a class definition");let e=WE.get(t);return e?(so(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,WE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bL{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}bL.type="NONE";const HE=bL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(t,e,n){return`firebase:${t}:${e}:${n}`}class Hc{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Fp(this.userKey,s.apiKey,o),this.fullPersistenceKey=Fp("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await iy(this.auth,{idToken:e}).catch(()=>{});return n?As._fromGetAccountInfoResponse(this.auth,n,e):null}return As._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Hc($i(HE),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=s[0]||$i(HE);const a=Fp(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const d=await u._get(a);if(d){let h;if(typeof d=="string"){const m=await iy(e,{idToken:d}).catch(()=>{});if(!m)break;h=await As._fromGetAccountInfoResponse(e,m,d)}else h=As._fromJSON(e,d);u!==o&&(l=h),o=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new Hc(o,e,r):(o=c[0],l&&await o._set(a,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(a)}catch{}})),new Hc(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NL(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_L(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(CL(e))return"Blackberry";if(EL(e))return"Webos";if(jL(e))return"Safari";if((e.includes("chrome/")||SL(e))&&!e.includes("edge/"))return"Chrome";if(TL(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function _L(t=sr()){return/firefox\//i.test(t)}function jL(t=sr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function SL(t=sr()){return/crios\//i.test(t)}function NL(t=sr()){return/iemobile/i.test(t)}function TL(t=sr()){return/android/i.test(t)}function CL(t=sr()){return/blackberry/i.test(t)}function EL(t=sr()){return/webos/i.test(t)}function Cj(t=sr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function JX(t=sr()){var e;return Cj(t)&&!!((e=window.navigator)!=null&&e.standalone)}function eJ(){return fZ()&&document.documentMode===10}function kL(t=sr()){return Cj(t)||TL(t)||EL(t)||CL(t)||/windows phone/i.test(t)||NL(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(t,e=[]){let n;switch(t){case"Browser":n=qE(sr());break;case"Worker":n=`${qE(sr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ju}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tJ{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((a,l)=>{try{const c=e(o);a(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nJ(t,e={}){return ed(t,"GET","/v2/passwordPolicy",Nj(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rJ=6;class sJ{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??rJ,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iJ{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new GE(this),this.idTokenSubscription=new GE(this),this.beforeStateQueue=new tJ(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=gL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=$i(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await Hc.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)==null?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await iy(this,{idToken:e}),r=await As._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var o;if(Ns(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(o=this.redirectUser)==null?void 0:o._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!a||a===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(a){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ge(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await oy(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=FX()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ns(this.app))return Promise.reject(xl(this));const n=e?fr(e):null;return n&&Ge(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Ge(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ns(this.app)?Promise.reject(xl(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ns(this.app)?Promise.reject(xl(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence($i(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await nJ(this),n=new sJ(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Hf("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await XX(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&$i(e)||this._popupRedirectResolver;Ge(n,this,"argument-error"),this.redirectPersistenceManager=await Hc.create(this,[$i(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ge(l,this,"internal-error"),l.then(()=>{a||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{a=!0,c()}}else{const c=e.addObserver(n);return()=>{a=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ge(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=AL(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Ns(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&DX(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function _x(t){return fr(t)}class GE{constructor(e){this.auth=e,this.observer=null,this.addObserver=bZ(n=>this.observer=n)}get next(){return Ge(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ej={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function oJ(t){Ej=t}function aJ(t){return Ej.loadJS(t)}function lJ(){return Ej.gapiScript}function cJ(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uJ(t,e){const n=bj(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(Ml(o,e??{}))return s;vi(s,"already-initialized")}return n.initialize({options:e})}function dJ(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map($i);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function hJ(t,e,n){const r=_x(t);Ge(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),o=PL(e),{host:a,port:l}=fJ(e),c=l===null?"":`:${l}`,u={url:`${o}//${a}${c}/`},d=Object.freeze({host:a,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Ge(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Ge(Ml(u,r.config.emulator)&&Ml(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Xu(a)?(aL(`${o}//${a}${c}`),lL("Auth",!0)):mJ()}function PL(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function fJ(t){const e=PL(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:KE(r.substr(o.length+1))}}else{const[o,a]=r.split(":");return{host:o,port:KE(a)}}}function KE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function mJ(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IL{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Bi("not implemented")}_getIdTokenResponse(e){return Bi("not implemented")}_linkToIdToken(e,n){return Bi("not implemented")}_getReauthenticationResolver(e){return Bi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qc(t,e){return zX(t,"POST","/v1/accounts:signInWithIdp",Nj(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pJ="http://localhost";class Ll extends IL{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ll(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):vi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...o}=n;if(!r||!s)return null;const a=new Ll(r,s);return a.idToken=o.idToken||void 0,a.accessToken=o.accessToken||void 0,a.secret=o.secret,a.nonce=o.nonce,a.pendingToken=o.pendingToken||null,a}_getIdTokenResponse(e){const n=this.buildRequest();return qc(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,qc(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,qc(e,n)}buildRequest(){const e={requestUri:pJ,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=qf(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf extends kj{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends Kf{constructor(){super("facebook.com")}static credential(e){return Ll._fromParams({providerId:Mo.PROVIDER_ID,signInMethod:Mo.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mo.credentialFromTaggedObject(e)}static credentialFromError(e){return Mo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mo.credential(e.oauthAccessToken)}catch{return null}}}Mo.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mo.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi extends Kf{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ll._fromParams({providerId:Oi.PROVIDER_ID,signInMethod:Oi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Oi.credentialFromTaggedObject(e)}static credentialFromError(e){return Oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Oi.credential(n,r)}catch{return null}}}Oi.GOOGLE_SIGN_IN_METHOD="google.com";Oi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do extends Kf{constructor(){super("github.com")}static credential(e){return Ll._fromParams({providerId:Do.PROVIDER_ID,signInMethod:Do.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Do.credentialFromTaggedObject(e)}static credentialFromError(e){return Do.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Do.credential(e.oauthAccessToken)}catch{return null}}}Do.GITHUB_SIGN_IN_METHOD="github.com";Do.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo extends Kf{constructor(){super("twitter.com")}static credential(e,n){return Ll._fromParams({providerId:Lo.PROVIDER_ID,signInMethod:Lo.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Lo.credentialFromTaggedObject(e)}static credentialFromError(e){return Lo.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Lo.credential(n,r)}catch{return null}}}Lo.TWITTER_SIGN_IN_METHOD="twitter.com";Lo.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await As._fromIdTokenResponse(e,r,s),a=QE(r);return new Au({user:o,providerId:a,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=QE(r);return new Au({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function QE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay extends lo{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,ay.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new ay(e,n,r,s)}}function RL(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?ay._fromErrorAndOperation(t,o,e,r):o})}async function gJ(t,e,n=!1){const r=await df(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Au._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yJ(t,e,n=!1){const{auth:r}=t;if(Ns(r.app))return Promise.reject(xl(r));const s="reauthenticate";try{const o=await df(t,RL(r,s,e,t),n);Ge(o.idToken,r,"internal-error");const a=Tj(o.idToken);Ge(a,r,"internal-error");const{sub:l}=a;return Ge(t.uid===l,r,"user-mismatch"),Au._forOperation(t,s,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&vi(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xJ(t,e,n=!1){if(Ns(t.app))return Promise.reject(xl(t));const r="signIn",s=await RL(t,r,e),o=await Au._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}function vJ(t,e,n,r){return fr(t).onIdTokenChanged(e,n,r)}function wJ(t,e,n){return fr(t).beforeAuthStateChanged(e,n)}function bJ(t,e,n,r){return fr(t).onAuthStateChanged(e,n,r)}function _J(t){return fr(t).signOut()}const ly="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ML{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ly,"1"),this.storage.removeItem(ly),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jJ=1e3,SJ=10;class DL extends ML{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=kL(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((a,l,c)=>{this.notifyListeners(a,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(r);!n&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);eJ()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,SJ):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},jJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}DL.type="LOCAL";const NJ=DL;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LL extends ML{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}LL.type="SESSION";const OL=LL;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TJ(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new jx(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(a).map(async u=>u(n.origin,o)),c=await TJ(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}jx.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Aj(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CJ{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,a;return new Promise((l,c)=>{const u=Aj("",20);s.port1.start();const d=setTimeout(()=>{c(new Error("unsupported_event"))},r);a={messageChannel:s,onMessage(h){const m=h;if(m.data.eventId===u)switch(m.data.status){case"ack":clearTimeout(d),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(m.data.response);break;default:clearTimeout(d),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(){return window}function EJ(t){ui().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(){return typeof ui().WorkerGlobalScope<"u"&&typeof ui().importScripts=="function"}async function kJ(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function AJ(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function PJ(){return VL()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FL="firebaseLocalStorageDb",IJ=1,cy="firebaseLocalStorage",UL="fbase_key";class Qf{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sx(t,e){return t.transaction([cy],e?"readwrite":"readonly").objectStore(cy)}function RJ(){const t=indexedDB.deleteDatabase(FL);return new Qf(t).toPromise()}function _b(){const t=indexedDB.open(FL,IJ);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(cy,{keyPath:UL})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(cy)?e(r):(r.close(),await RJ(),e(await _b()))})})}async function YE(t,e,n){const r=Sx(t,!0).put({[UL]:e,value:n});return new Qf(r).toPromise()}async function MJ(t,e){const n=Sx(t,!1).get(e),r=await new Qf(n).toPromise();return r===void 0?null:r.value}function ZE(t,e){const n=Sx(t,!0).delete(e);return new Qf(n).toPromise()}const DJ=800,LJ=3;class BL{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _b(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>LJ)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return VL()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=jx._getInstance(PJ()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await kJ(),!this.activeServiceWorker)return;this.sender=new CJ(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||AJ()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _b();return await YE(e,ly,"1"),await ZE(e,ly),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>YE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>MJ(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ZE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Sx(s,!1).getAll();return new Qf(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DJ)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}BL.type="LOCAL";const OJ=BL;new Gf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $L(t,e){return e?$i(e):(Ge(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj extends IL{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qc(e,this._buildIdpRequest())}_linkToIdToken(e,n){return qc(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return qc(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VJ(t){return xJ(t.auth,new Pj(t),t.bypassAuthState)}function FJ(t){const{auth:e,user:n}=t;return Ge(n,e,"internal-error"),yJ(n,new Pj(t),t.bypassAuthState)}async function UJ(t){const{auth:e,user:n}=t;return Ge(n,e,"internal-error"),gJ(n,new Pj(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zL{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:a,type:l}=e;if(a){this.reject(a);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VJ;case"linkViaPopup":case"linkViaRedirect":return UJ;case"reauthViaPopup":case"reauthViaRedirect":return FJ;default:vi(this.auth,"internal-error")}}resolve(e){so(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){so(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BJ=new Gf(2e3,1e4);async function $J(t,e,n){if(Ns(t.app))return Promise.reject(Ms(t,"operation-not-supported-in-this-environment"));const r=_x(t);LX(t,e,kj);const s=$L(r,n);return new rl(r,"signInViaPopup",e,s).executeNotNull()}class rl extends zL{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,rl.currentPopupAction&&rl.currentPopupAction.cancel(),rl.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ge(e,this.auth,"internal-error"),e}async onExecution(){so(this.filter.length===1,"Popup operations only handle one event");const e=Aj();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Ms(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Ms(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,rl.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ms(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,BJ.get())};e()}}rl.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zJ="pendingRedirect",Up=new Map;class WJ extends zL{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Up.get(this.auth._key());if(!e){try{const r=await HJ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Up.set(this.auth._key(),e)}return this.bypassAuthState||Up.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function HJ(t,e){const n=KJ(e),r=GJ(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function qJ(t,e){Up.set(t._key(),e)}function GJ(t){return $i(t._redirectPersistence)}function KJ(t){return Fp(zJ,t.config.apiKey,t.name)}async function QJ(t,e,n=!1){if(Ns(t.app))return Promise.reject(xl(t));const r=_x(t),s=$L(r,e),a=await new WJ(r,s,n).execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YJ=10*60*1e3;class ZJ{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!XJ(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!WL(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Ms(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YJ&&this.cachedEventUids.clear(),this.cachedEventUids.has(XE(e))}saveEventToCache(e){this.cachedEventUids.add(XE(e)),this.lastProcessedEventTime=Date.now()}}function XE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function WL({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function XJ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WL(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JJ(t,e={}){return ed(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eee=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,tee=/^https?/;async function nee(t){if(t.config.emulator)return;const{authorizedDomains:e}=await JJ(t);for(const n of e)try{if(ree(n))return}catch{}vi(t,"unauthorized-domain")}function ree(t){const e=wb(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&a.hostname===r}if(!tee.test(n))return!1;if(eee.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const see=new Gf(3e4,6e4);function JE(){const t=ui().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function iee(t){return new Promise((e,n)=>{var s,o,a;function r(){JE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{JE(),n(Ms(t,"network-request-failed"))},timeout:see.get()})}if((o=(s=ui().gapi)==null?void 0:s.iframes)!=null&&o.Iframe)e(gapi.iframes.getContext());else if((a=ui().gapi)!=null&&a.load)r();else{const l=cJ("iframefcb");return ui()[l]=()=>{gapi.load?r():n(Ms(t,"network-request-failed"))},aJ(`${lJ()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Bp=null,e})}let Bp=null;function oee(t){return Bp=Bp||iee(t),Bp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aee=new Gf(5e3,15e3),lee="__/auth/iframe",cee="emulator/auth/iframe",uee={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dee=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function hee(t){const e=t.config;Ge(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Sj(e,cee):`https://${t.config.authDomain}/${lee}`,r={apiKey:e.apiKey,appName:t.name,v:Ju},s=dee.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${qf(r).slice(1)}`}async function fee(t){const e=await oee(t),n=ui().gapi;return Ge(n,t,"internal-error"),e.open({where:document.body,url:hee(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:uee,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const a=Ms(t,"network-request-failed"),l=ui().setTimeout(()=>{o(a)},aee.get());function c(){ui().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{o(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mee={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pee=500,gee=600,yee="_blank",xee="http://localhost";class e2{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vee(t,e,n,r=pee,s=gee){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...mee,width:r.toString(),height:s.toString(),top:o,left:a},u=sr().toLowerCase();n&&(l=SL(u)?yee:n),_L(u)&&(e=e||xee,c.scrollbars="yes");const d=Object.entries(c).reduce((m,[g,_])=>`${m}${g}=${_},`,"");if(JX(u)&&l!=="_self")return wee(e||"",l),new e2(null);const h=window.open(e||"",l,d);Ge(h,t,"popup-blocked");try{h.focus()}catch{}return new e2(h)}function wee(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bee="__/auth/handler",_ee="emulator/auth/handler",jee=encodeURIComponent("fac");async function t2(t,e,n,r,s,o){Ge(t.config.authDomain,t,"auth-domain-config-required"),Ge(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ju,eventId:s};if(e instanceof kj){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",wZ(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,h]of Object.entries({}))a[d]=h}if(e instanceof Kf){const d=e.getScopes().filter(h=>h!=="");d.length>0&&(a.scopes=d.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const d of Object.keys(l))l[d]===void 0&&delete l[d];const c=await t._getAppCheckToken(),u=c?`#${jee}=${encodeURIComponent(c)}`:"";return`${See(t)}?${qf(l).slice(1)}${u}`}function See({config:t}){return t.emulator?Sj(t,_ee):`https://${t.authDomain}/${bee}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv="webStorageSupport";class Nee{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=OL,this._completeRedirectFn=QJ,this._overrideRedirectResult=qJ}async _openPopup(e,n,r,s){var a;so((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const o=await t2(e,n,r,wb(),s);return vee(e,o,Aj())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await t2(e,n,r,wb(),s);return EJ(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(so(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await fee(e),r=new ZJ(e);return n.register("authEvent",s=>(Ge(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(fv,{type:fv},s=>{var a;const o=(a=s==null?void 0:s[0])==null?void 0:a[fv];o!==void 0&&n(!!o),vi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=nee(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return kL()||jL()||Cj()}}const Tee=Nee;var n2="@firebase/auth",r2="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cee{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Ge(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eee(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function kee(t){ku(new Dl("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=r.options;Ge(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:AL(t)},u=new iJ(r,s,o,c);return dJ(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ku(new Dl("auth-internal",e=>{const n=_x(e.getProvider("auth").getImmediate());return(r=>new Cee(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),la(n2,r2,Eee(t)),la(n2,r2,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aee=5*60,Pee=oL("authIdTokenMaxAge")||Aee;let s2=null;const Iee=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Pee)return;const s=n==null?void 0:n.token;s2!==s&&(s2=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ree(t=hL()){const e=bj(t,"auth");if(e.isInitialized())return e.getImmediate();const n=uJ(t,{popupRedirectResolver:Tee,persistence:[OJ,NJ,OL]}),r=oL("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const a=Iee(o.toString());wJ(n,a,()=>a(n.currentUser)),vJ(n,l=>a(l))}}const s=sL("auth");return s&&hJ(n,`http://${s}`),n}function Mee(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}oJ({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=Ms("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",Mee().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});kee("Browser");var i2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ca,HL;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,S){function C(){}C.prototype=S.prototype,T.F=S.prototype,T.prototype=new C,T.prototype.constructor=T,T.D=function(k,I,R){for(var A=Array(arguments.length-2),G=2;G<arguments.length;G++)A[G-2]=arguments[G];return S.prototype[I].apply(k,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,S,C){C||(C=0);const k=Array(16);if(typeof S=="string")for(var I=0;I<16;++I)k[I]=S.charCodeAt(C++)|S.charCodeAt(C++)<<8|S.charCodeAt(C++)<<16|S.charCodeAt(C++)<<24;else for(I=0;I<16;++I)k[I]=S[C++]|S[C++]<<8|S[C++]<<16|S[C++]<<24;S=T.g[0],C=T.g[1],I=T.g[2];let R=T.g[3],A;A=S+(R^C&(I^R))+k[0]+3614090360&4294967295,S=C+(A<<7&4294967295|A>>>25),A=R+(I^S&(C^I))+k[1]+3905402710&4294967295,R=S+(A<<12&4294967295|A>>>20),A=I+(C^R&(S^C))+k[2]+606105819&4294967295,I=R+(A<<17&4294967295|A>>>15),A=C+(S^I&(R^S))+k[3]+3250441966&4294967295,C=I+(A<<22&4294967295|A>>>10),A=S+(R^C&(I^R))+k[4]+4118548399&4294967295,S=C+(A<<7&4294967295|A>>>25),A=R+(I^S&(C^I))+k[5]+1200080426&4294967295,R=S+(A<<12&4294967295|A>>>20),A=I+(C^R&(S^C))+k[6]+2821735955&4294967295,I=R+(A<<17&4294967295|A>>>15),A=C+(S^I&(R^S))+k[7]+4249261313&4294967295,C=I+(A<<22&4294967295|A>>>10),A=S+(R^C&(I^R))+k[8]+1770035416&4294967295,S=C+(A<<7&4294967295|A>>>25),A=R+(I^S&(C^I))+k[9]+2336552879&4294967295,R=S+(A<<12&4294967295|A>>>20),A=I+(C^R&(S^C))+k[10]+4294925233&4294967295,I=R+(A<<17&4294967295|A>>>15),A=C+(S^I&(R^S))+k[11]+2304563134&4294967295,C=I+(A<<22&4294967295|A>>>10),A=S+(R^C&(I^R))+k[12]+1804603682&4294967295,S=C+(A<<7&4294967295|A>>>25),A=R+(I^S&(C^I))+k[13]+4254626195&4294967295,R=S+(A<<12&4294967295|A>>>20),A=I+(C^R&(S^C))+k[14]+2792965006&4294967295,I=R+(A<<17&4294967295|A>>>15),A=C+(S^I&(R^S))+k[15]+1236535329&4294967295,C=I+(A<<22&4294967295|A>>>10),A=S+(I^R&(C^I))+k[1]+4129170786&4294967295,S=C+(A<<5&4294967295|A>>>27),A=R+(C^I&(S^C))+k[6]+3225465664&4294967295,R=S+(A<<9&4294967295|A>>>23),A=I+(S^C&(R^S))+k[11]+643717713&4294967295,I=R+(A<<14&4294967295|A>>>18),A=C+(R^S&(I^R))+k[0]+3921069994&4294967295,C=I+(A<<20&4294967295|A>>>12),A=S+(I^R&(C^I))+k[5]+3593408605&4294967295,S=C+(A<<5&4294967295|A>>>27),A=R+(C^I&(S^C))+k[10]+38016083&4294967295,R=S+(A<<9&4294967295|A>>>23),A=I+(S^C&(R^S))+k[15]+3634488961&4294967295,I=R+(A<<14&4294967295|A>>>18),A=C+(R^S&(I^R))+k[4]+3889429448&4294967295,C=I+(A<<20&4294967295|A>>>12),A=S+(I^R&(C^I))+k[9]+568446438&4294967295,S=C+(A<<5&4294967295|A>>>27),A=R+(C^I&(S^C))+k[14]+3275163606&4294967295,R=S+(A<<9&4294967295|A>>>23),A=I+(S^C&(R^S))+k[3]+4107603335&4294967295,I=R+(A<<14&4294967295|A>>>18),A=C+(R^S&(I^R))+k[8]+1163531501&4294967295,C=I+(A<<20&4294967295|A>>>12),A=S+(I^R&(C^I))+k[13]+2850285829&4294967295,S=C+(A<<5&4294967295|A>>>27),A=R+(C^I&(S^C))+k[2]+4243563512&4294967295,R=S+(A<<9&4294967295|A>>>23),A=I+(S^C&(R^S))+k[7]+1735328473&4294967295,I=R+(A<<14&4294967295|A>>>18),A=C+(R^S&(I^R))+k[12]+2368359562&4294967295,C=I+(A<<20&4294967295|A>>>12),A=S+(C^I^R)+k[5]+4294588738&4294967295,S=C+(A<<4&4294967295|A>>>28),A=R+(S^C^I)+k[8]+2272392833&4294967295,R=S+(A<<11&4294967295|A>>>21),A=I+(R^S^C)+k[11]+1839030562&4294967295,I=R+(A<<16&4294967295|A>>>16),A=C+(I^R^S)+k[14]+4259657740&4294967295,C=I+(A<<23&4294967295|A>>>9),A=S+(C^I^R)+k[1]+2763975236&4294967295,S=C+(A<<4&4294967295|A>>>28),A=R+(S^C^I)+k[4]+1272893353&4294967295,R=S+(A<<11&4294967295|A>>>21),A=I+(R^S^C)+k[7]+4139469664&4294967295,I=R+(A<<16&4294967295|A>>>16),A=C+(I^R^S)+k[10]+3200236656&4294967295,C=I+(A<<23&4294967295|A>>>9),A=S+(C^I^R)+k[13]+681279174&4294967295,S=C+(A<<4&4294967295|A>>>28),A=R+(S^C^I)+k[0]+3936430074&4294967295,R=S+(A<<11&4294967295|A>>>21),A=I+(R^S^C)+k[3]+3572445317&4294967295,I=R+(A<<16&4294967295|A>>>16),A=C+(I^R^S)+k[6]+76029189&4294967295,C=I+(A<<23&4294967295|A>>>9),A=S+(C^I^R)+k[9]+3654602809&4294967295,S=C+(A<<4&4294967295|A>>>28),A=R+(S^C^I)+k[12]+3873151461&4294967295,R=S+(A<<11&4294967295|A>>>21),A=I+(R^S^C)+k[15]+530742520&4294967295,I=R+(A<<16&4294967295|A>>>16),A=C+(I^R^S)+k[2]+3299628645&4294967295,C=I+(A<<23&4294967295|A>>>9),A=S+(I^(C|~R))+k[0]+4096336452&4294967295,S=C+(A<<6&4294967295|A>>>26),A=R+(C^(S|~I))+k[7]+1126891415&4294967295,R=S+(A<<10&4294967295|A>>>22),A=I+(S^(R|~C))+k[14]+2878612391&4294967295,I=R+(A<<15&4294967295|A>>>17),A=C+(R^(I|~S))+k[5]+4237533241&4294967295,C=I+(A<<21&4294967295|A>>>11),A=S+(I^(C|~R))+k[12]+1700485571&4294967295,S=C+(A<<6&4294967295|A>>>26),A=R+(C^(S|~I))+k[3]+2399980690&4294967295,R=S+(A<<10&4294967295|A>>>22),A=I+(S^(R|~C))+k[10]+4293915773&4294967295,I=R+(A<<15&4294967295|A>>>17),A=C+(R^(I|~S))+k[1]+2240044497&4294967295,C=I+(A<<21&4294967295|A>>>11),A=S+(I^(C|~R))+k[8]+1873313359&4294967295,S=C+(A<<6&4294967295|A>>>26),A=R+(C^(S|~I))+k[15]+4264355552&4294967295,R=S+(A<<10&4294967295|A>>>22),A=I+(S^(R|~C))+k[6]+2734768916&4294967295,I=R+(A<<15&4294967295|A>>>17),A=C+(R^(I|~S))+k[13]+1309151649&4294967295,C=I+(A<<21&4294967295|A>>>11),A=S+(I^(C|~R))+k[4]+4149444226&4294967295,S=C+(A<<6&4294967295|A>>>26),A=R+(C^(S|~I))+k[11]+3174756917&4294967295,R=S+(A<<10&4294967295|A>>>22),A=I+(S^(R|~C))+k[2]+718787259&4294967295,I=R+(A<<15&4294967295|A>>>17),A=C+(R^(I|~S))+k[9]+3951481745&4294967295,T.g[0]=T.g[0]+S&4294967295,T.g[1]=T.g[1]+(I+(A<<21&4294967295|A>>>11))&4294967295,T.g[2]=T.g[2]+I&4294967295,T.g[3]=T.g[3]+R&4294967295}r.prototype.v=function(T,S){S===void 0&&(S=T.length);const C=S-this.blockSize,k=this.C;let I=this.h,R=0;for(;R<S;){if(I==0)for(;R<=C;)s(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<S;)if(k[I++]=T.charCodeAt(R++),I==this.blockSize){s(this,k),I=0;break}}else for(;R<S;)if(k[I++]=T[R++],I==this.blockSize){s(this,k),I=0;break}}this.h=I,this.o+=S},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var S=1;S<T.length-8;++S)T[S]=0;S=this.o*8;for(var C=T.length-8;C<T.length;++C)T[C]=S&255,S/=256;for(this.v(T),T=Array(16),S=0,C=0;C<4;++C)for(let k=0;k<32;k+=8)T[S++]=this.g[C]>>>k&255;return T};function o(T,S){var C=l;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=S(T)}function a(T,S){this.h=S;const C=[];let k=!0;for(let I=T.length-1;I>=0;I--){const R=T[I]|0;k&&R==S||(C[I]=R,k=!1)}this.g=C}var l={};function c(T){return-128<=T&&T<128?o(T,function(S){return new a([S|0],S<0?-1:0)}):new a([T|0],T<0?-1:0)}function u(T){if(isNaN(T)||!isFinite(T))return h;if(T<0)return x(u(-T));const S=[];let C=1;for(let k=0;T>=C;k++)S[k]=T/C|0,C*=4294967296;return new a(S,0)}function d(T,S){if(T.length==0)throw Error("number format error: empty string");if(S=S||10,S<2||36<S)throw Error("radix out of range: "+S);if(T.charAt(0)=="-")return x(d(T.substring(1),S));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=u(Math.pow(S,8));let k=h;for(let R=0;R<T.length;R+=8){var I=Math.min(8,T.length-R);const A=parseInt(T.substring(R,R+I),S);I<8?(I=u(Math.pow(S,I)),k=k.j(I).add(u(A))):(k=k.j(C),k=k.add(u(A)))}return k}var h=c(0),m=c(1),g=c(16777216);t=a.prototype,t.m=function(){if(v(this))return-x(this).m();let T=0,S=1;for(let C=0;C<this.g.length;C++){const k=this.i(C);T+=(k>=0?k:4294967296+k)*S,S*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(_(this))return"0";if(v(this))return"-"+x(this).toString(T);const S=u(Math.pow(T,6));var C=this;let k="";for(;;){const I=E(C,S).g;C=y(C,I.j(S));let R=((C.g.length>0?C.g[0]:C.h)>>>0).toString(T);if(C=I,_(C))return R+k;for(;R.length<6;)R="0"+R;k=R+k}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function _(T){if(T.h!=0)return!1;for(let S=0;S<T.g.length;S++)if(T.g[S]!=0)return!1;return!0}function v(T){return T.h==-1}t.l=function(T){return T=y(this,T),v(T)?-1:_(T)?0:1};function x(T){const S=T.g.length,C=[];for(let k=0;k<S;k++)C[k]=~T.g[k];return new a(C,~T.h).add(m)}t.abs=function(){return v(this)?x(this):this},t.add=function(T){const S=Math.max(this.g.length,T.g.length),C=[];let k=0;for(let I=0;I<=S;I++){let R=k+(this.i(I)&65535)+(T.i(I)&65535),A=(R>>>16)+(this.i(I)>>>16)+(T.i(I)>>>16);k=A>>>16,R&=65535,A&=65535,C[I]=A<<16|R}return new a(C,C[C.length-1]&-2147483648?-1:0)};function y(T,S){return T.add(x(S))}t.j=function(T){if(_(this)||_(T))return h;if(v(this))return v(T)?x(this).j(x(T)):x(x(this).j(T));if(v(T))return x(this.j(x(T)));if(this.l(g)<0&&T.l(g)<0)return u(this.m()*T.m());const S=this.g.length+T.g.length,C=[];for(var k=0;k<2*S;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(let I=0;I<T.g.length;I++){const R=this.i(k)>>>16,A=this.i(k)&65535,G=T.i(I)>>>16,ue=T.i(I)&65535;C[2*k+2*I]+=A*ue,w(C,2*k+2*I),C[2*k+2*I+1]+=R*ue,w(C,2*k+2*I+1),C[2*k+2*I+1]+=A*G,w(C,2*k+2*I+1),C[2*k+2*I+2]+=R*G,w(C,2*k+2*I+2)}for(T=0;T<S;T++)C[T]=C[2*T+1]<<16|C[2*T];for(T=S;T<2*S;T++)C[T]=0;return new a(C,0)};function w(T,S){for(;(T[S]&65535)!=T[S];)T[S+1]+=T[S]>>>16,T[S]&=65535,S++}function j(T,S){this.g=T,this.h=S}function E(T,S){if(_(S))throw Error("division by zero");if(_(T))return new j(h,h);if(v(T))return S=E(x(T),S),new j(x(S.g),x(S.h));if(v(S))return S=E(T,x(S)),new j(x(S.g),S.h);if(T.g.length>30){if(v(T)||v(S))throw Error("slowDivide_ only works with positive integers.");for(var C=m,k=S;k.l(T)<=0;)C=P(C),k=P(k);var I=U(C,1),R=U(k,1);for(k=U(k,2),C=U(C,2);!_(k);){var A=R.add(k);A.l(T)<=0&&(I=I.add(C),R=A),k=U(k,1),C=U(C,1)}return S=y(T,I.j(S)),new j(I,S)}for(I=h;T.l(S)>=0;){for(C=Math.max(1,Math.floor(T.m()/S.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=k<=48?1:Math.pow(2,k-48),R=u(C),A=R.j(S);v(A)||A.l(T)>0;)C-=k,R=u(C),A=R.j(S);_(R)&&(R=m),I=I.add(R),T=y(T,A)}return new j(I,T)}t.B=function(T){return E(this,T).h},t.and=function(T){const S=Math.max(this.g.length,T.g.length),C=[];for(let k=0;k<S;k++)C[k]=this.i(k)&T.i(k);return new a(C,this.h&T.h)},t.or=function(T){const S=Math.max(this.g.length,T.g.length),C=[];for(let k=0;k<S;k++)C[k]=this.i(k)|T.i(k);return new a(C,this.h|T.h)},t.xor=function(T){const S=Math.max(this.g.length,T.g.length),C=[];for(let k=0;k<S;k++)C[k]=this.i(k)^T.i(k);return new a(C,this.h^T.h)};function P(T){const S=T.g.length+1,C=[];for(let k=0;k<S;k++)C[k]=T.i(k)<<1|T.i(k-1)>>>31;return new a(C,T.h)}function U(T,S){const C=S>>5;S%=32;const k=T.g.length-C,I=[];for(let R=0;R<k;R++)I[R]=S>0?T.i(R+C)>>>S|T.i(R+C+1)<<32-S:T.i(R+C);return new a(I,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,HL=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=u,a.fromString=d,ca=a}).apply(typeof i2<"u"?i2:typeof self<"u"?self:typeof window<"u"?window:{});var op=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var qL,zd,GL,$p,jb,KL,QL,YL;(function(){var t,e=Object.defineProperty;function n(f){f=[typeof globalThis=="object"&&globalThis,f,typeof window=="object"&&window,typeof self=="object"&&self,typeof op=="object"&&op];for(var b=0;b<f.length;++b){var N=f[b];if(N&&N.Math==Math)return N}throw Error("Cannot find global object")}var r=n(this);function s(f,b){if(b)e:{var N=r;f=f.split(".");for(var M=0;M<f.length-1;M++){var Q=f[M];if(!(Q in N))break e;N=N[Q]}f=f[f.length-1],M=N[f],b=b(M),b!=M&&b!=null&&e(N,f,{configurable:!0,writable:!0,value:b})}}s("Symbol.dispose",function(f){return f||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(f){return f||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(f){return f||function(b){var N=[],M;for(M in b)Object.prototype.hasOwnProperty.call(b,M)&&N.push([M,b[M]]);return N}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(f){var b=typeof f;return b=="object"&&f!=null||b=="function"}function c(f,b,N){return f.call.apply(f.bind,arguments)}function u(f,b,N){return u=c,u.apply(null,arguments)}function d(f,b){var N=Array.prototype.slice.call(arguments,1);return function(){var M=N.slice();return M.push.apply(M,arguments),f.apply(this,M)}}function h(f,b){function N(){}N.prototype=b.prototype,f.Z=b.prototype,f.prototype=new N,f.prototype.constructor=f,f.Ob=function(M,Q,ne){for(var je=Array(arguments.length-2),st=2;st<arguments.length;st++)je[st-2]=arguments[st];return b.prototype[Q].apply(M,je)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?f=>f&&AsyncContext.Snapshot.wrap(f):f=>f;function g(f){const b=f.length;if(b>0){const N=Array(b);for(let M=0;M<b;M++)N[M]=f[M];return N}return[]}function _(f,b){for(let M=1;M<arguments.length;M++){const Q=arguments[M];var N=typeof Q;if(N=N!="object"?N:Q?Array.isArray(Q)?"array":N:"null",N=="array"||N=="object"&&typeof Q.length=="number"){N=f.length||0;const ne=Q.length||0;f.length=N+ne;for(let je=0;je<ne;je++)f[N+je]=Q[je]}else f.push(Q)}}class v{constructor(b,N){this.i=b,this.j=N,this.h=0,this.g=null}get(){let b;return this.h>0?(this.h--,b=this.g,this.g=b.next,b.next=null):b=this.i(),b}}function x(f){a.setTimeout(()=>{throw f},0)}function y(){var f=T;let b=null;return f.g&&(b=f.g,f.g=f.g.next,f.g||(f.h=null),b.next=null),b}class w{constructor(){this.h=this.g=null}add(b,N){const M=j.get();M.set(b,N),this.h?this.h.next=M:this.g=M,this.h=M}}var j=new v(()=>new E,f=>f.reset());class E{constructor(){this.next=this.g=this.h=null}set(b,N){this.h=b,this.g=N,this.next=null}reset(){this.next=this.g=this.h=null}}let P,U=!1,T=new w,S=()=>{const f=Promise.resolve(void 0);P=()=>{f.then(C)}};function C(){for(var f;f=y();){try{f.h.call(f.g)}catch(N){x(N)}var b=j;b.j(f),b.h<100&&(b.h++,f.next=b.g,b.g=f)}U=!1}function k(){this.u=this.u,this.C=this.C}k.prototype.u=!1,k.prototype.dispose=function(){this.u||(this.u=!0,this.N())},k.prototype[Symbol.dispose]=function(){this.dispose()},k.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(f,b){this.type=f,this.g=this.target=b,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var f=!1,b=Object.defineProperty({},"passive",{get:function(){f=!0}});try{const N=()=>{};a.addEventListener("test",N,b),a.removeEventListener("test",N,b)}catch{}return f}();function A(f){return/^[\s\xa0]*$/.test(f)}function G(f,b){I.call(this,f?f.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,f&&this.init(f,b)}h(G,I),G.prototype.init=function(f,b){const N=this.type=f.type,M=f.changedTouches&&f.changedTouches.length?f.changedTouches[0]:null;this.target=f.target||f.srcElement,this.g=b,b=f.relatedTarget,b||(N=="mouseover"?b=f.fromElement:N=="mouseout"&&(b=f.toElement)),this.relatedTarget=b,M?(this.clientX=M.clientX!==void 0?M.clientX:M.pageX,this.clientY=M.clientY!==void 0?M.clientY:M.pageY,this.screenX=M.screenX||0,this.screenY=M.screenY||0):(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0),this.button=f.button,this.key=f.key||"",this.ctrlKey=f.ctrlKey,this.altKey=f.altKey,this.shiftKey=f.shiftKey,this.metaKey=f.metaKey,this.pointerId=f.pointerId||0,this.pointerType=f.pointerType,this.state=f.state,this.i=f,f.defaultPrevented&&G.Z.h.call(this)},G.prototype.h=function(){G.Z.h.call(this);const f=this.i;f.preventDefault?f.preventDefault():f.returnValue=!1};var ue="closure_listenable_"+(Math.random()*1e6|0),B=0;function q(f,b,N,M,Q){this.listener=f,this.proxy=null,this.src=b,this.type=N,this.capture=!!M,this.ha=Q,this.key=++B,this.da=this.fa=!1}function O(f){f.da=!0,f.listener=null,f.proxy=null,f.src=null,f.ha=null}function F(f,b,N){for(const M in f)b.call(N,f[M],M,f)}function D(f,b){for(const N in f)b.call(void 0,f[N],N,f)}function L(f){const b={};for(const N in f)b[N]=f[N];return b}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(f,b){let N,M;for(let Q=1;Q<arguments.length;Q++){M=arguments[Q];for(N in M)f[N]=M[N];for(let ne=0;ne<X.length;ne++)N=X[ne],Object.prototype.hasOwnProperty.call(M,N)&&(f[N]=M[N])}}function K(f){this.src=f,this.g={},this.h=0}K.prototype.add=function(f,b,N,M,Q){const ne=f.toString();f=this.g[ne],f||(f=this.g[ne]=[],this.h++);const je=ie(f,b,M,Q);return je>-1?(b=f[je],N||(b.fa=!1)):(b=new q(b,this.src,ne,!!M,Q),b.fa=N,f.push(b)),b};function Y(f,b){const N=b.type;if(N in f.g){var M=f.g[N],Q=Array.prototype.indexOf.call(M,b,void 0),ne;(ne=Q>=0)&&Array.prototype.splice.call(M,Q,1),ne&&(O(b),f.g[N].length==0&&(delete f.g[N],f.h--))}}function ie(f,b,N,M){for(let Q=0;Q<f.length;++Q){const ne=f[Q];if(!ne.da&&ne.listener==b&&ne.capture==!!N&&ne.ha==M)return Q}return-1}var te="closure_lm_"+(Math.random()*1e6|0),le={};function xe(f,b,N,M,Q){if(Array.isArray(b)){for(let ne=0;ne<b.length;ne++)xe(f,b[ne],N,M,Q);return null}return N=Bt(N),f&&f[ue]?f.J(b,N,l(M)?!!M.capture:!!M,Q):_e(f,b,N,!1,M,Q)}function _e(f,b,N,M,Q,ne){if(!b)throw Error("Invalid event type");const je=l(Q)?!!Q.capture:!!Q;let st=Ze(f);if(st||(f[te]=st=new K(f)),N=st.add(b,N,M,je,ne),N.proxy)return N;if(M=Pe(),N.proxy=M,M.src=f,M.listener=N,f.addEventListener)R||(Q=je),Q===void 0&&(Q=!1),f.addEventListener(b.toString(),M,Q);else if(f.attachEvent)f.attachEvent(Ve(b.toString()),M);else if(f.addListener&&f.removeListener)f.addListener(M);else throw Error("addEventListener and attachEvent are unavailable.");return N}function Pe(){function f(N){return b.call(f.src,f.listener,N)}const b=bt;return f}function de(f,b,N,M,Q){if(Array.isArray(b))for(var ne=0;ne<b.length;ne++)de(f,b[ne],N,M,Q);else M=l(M)?!!M.capture:!!M,N=Bt(N),f&&f[ue]?(f=f.i,ne=String(b).toString(),ne in f.g&&(b=f.g[ne],N=ie(b,N,M,Q),N>-1&&(O(b[N]),Array.prototype.splice.call(b,N,1),b.length==0&&(delete f.g[ne],f.h--)))):f&&(f=Ze(f))&&(b=f.g[b.toString()],f=-1,b&&(f=ie(b,N,M,Q)),(N=f>-1?b[f]:null)&&Ke(N))}function Ke(f){if(typeof f!="number"&&f&&!f.da){var b=f.src;if(b&&b[ue])Y(b.i,f);else{var N=f.type,M=f.proxy;b.removeEventListener?b.removeEventListener(N,M,f.capture):b.detachEvent?b.detachEvent(Ve(N),M):b.addListener&&b.removeListener&&b.removeListener(M),(N=Ze(b))?(Y(N,f),N.h==0&&(N.src=null,b[te]=null)):O(f)}}}function Ve(f){return f in le?le[f]:le[f]="on"+f}function bt(f,b){if(f.da)f=!0;else{b=new G(b,this);const N=f.listener,M=f.ha||f.src;f.fa&&Ke(f),f=N.call(M,b)}return f}function Ze(f){return f=f[te],f instanceof K?f:null}var xt="__closure_events_fn_"+(Math.random()*1e9>>>0);function Bt(f){return typeof f=="function"?f:(f[xt]||(f[xt]=function(b){return f.handleEvent(b)}),f[xt])}function lt(){k.call(this),this.i=new K(this),this.M=this,this.G=null}h(lt,k),lt.prototype[ue]=!0,lt.prototype.removeEventListener=function(f,b,N,M){de(this,f,b,N,M)};function mt(f,b){var N,M=f.G;if(M)for(N=[];M;M=M.G)N.push(M);if(f=f.M,M=b.type||b,typeof b=="string")b=new I(b,f);else if(b instanceof I)b.target=b.target||f;else{var Q=b;b=new I(M,f),$(b,Q)}Q=!0;let ne,je;if(N)for(je=N.length-1;je>=0;je--)ne=b.g=N[je],Q=vn(ne,M,!0,b)&&Q;if(ne=b.g=f,Q=vn(ne,M,!0,b)&&Q,Q=vn(ne,M,!1,b)&&Q,N)for(je=0;je<N.length;je++)ne=b.g=N[je],Q=vn(ne,M,!1,b)&&Q}lt.prototype.N=function(){if(lt.Z.N.call(this),this.i){var f=this.i;for(const b in f.g){const N=f.g[b];for(let M=0;M<N.length;M++)O(N[M]);delete f.g[b],f.h--}}this.G=null},lt.prototype.J=function(f,b,N,M){return this.i.add(String(f),b,!1,N,M)},lt.prototype.K=function(f,b,N,M){return this.i.add(String(f),b,!0,N,M)};function vn(f,b,N,M){if(b=f.i.g[String(b)],!b)return!0;b=b.concat();let Q=!0;for(let ne=0;ne<b.length;++ne){const je=b[ne];if(je&&!je.da&&je.capture==N){const st=je.listener,wn=je.ha||je.src;je.fa&&Y(f.i,je),Q=st.call(wn,M)!==!1&&Q}}return Q&&!M.defaultPrevented}function W(f,b){if(typeof f!="function")if(f&&typeof f.handleEvent=="function")f=u(f.handleEvent,f);else throw Error("Invalid listener argument");return Number(b)>2147483647?-1:a.setTimeout(f,b||0)}function Z(f){f.g=W(()=>{f.g=null,f.i&&(f.i=!1,Z(f))},f.l);const b=f.h;f.h=null,f.m.apply(null,b)}class se extends k{constructor(b,N){super(),this.m=b,this.l=N,this.h=null,this.i=!1,this.g=null}j(b){this.h=arguments,this.g?this.i=!0:Z(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Se(f){k.call(this),this.h=f,this.g={}}h(Se,k);var ve=[];function pe(f){F(f.g,function(b,N){this.g.hasOwnProperty(N)&&Ke(b)},f),f.g={}}Se.prototype.N=function(){Se.Z.N.call(this),pe(this)},Se.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ee=a.JSON.stringify,et=a.JSON.parse,At=class{stringify(f){return a.JSON.stringify(f,void 0)}parse(f){return a.JSON.parse(f,void 0)}};function Lt(){}function Si(){}var vr={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function us(){I.call(this,"d")}h(us,I);function La(){I.call(this,"c")}h(La,I);var ir={},Ql=null;function Us(){return Ql=Ql||new lt}ir.Ia="serverreachability";function od(f){I.call(this,ir.Ia,f)}h(od,I);function Bs(f){const b=Us();mt(b,new od(b))}ir.STAT_EVENT="statevent";function ht(f,b){I.call(this,ir.STAT_EVENT,f),this.stat=b}h(ht,I);function Pt(f){const b=Us();mt(b,new ht(b,f))}ir.Ja="timingevent";function Oa(f,b){I.call(this,ir.Ja,f),this.size=b}h(Oa,I);function zn(f,b){if(typeof f!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){f()},b)}function Rt(){this.g=!0}Rt.prototype.ua=function(){this.g=!1};function ad(f,b,N,M,Q,ne){f.info(function(){if(f.g)if(ne){var je="",st=ne.split("&");for(let It=0;It<st.length;It++){var wn=st[It].split("=");if(wn.length>1){const kn=wn[0];wn=wn[1];const zs=kn.split("_");je=zs.length>=2&&zs[1]=="type"?je+(kn+"="+wn+"&"):je+(kn+"=redacted&")}}}else je=null;else je=ne;return"XMLHTTP REQ ("+M+") [attempt "+Q+"]: "+b+`
`+N+`
`+je})}function Kx(f,b,N,M,Q,ne,je){f.info(function(){return"XMLHTTP RESP ("+M+") [ attempt "+Q+"]: "+b+`
`+N+`
`+ne+" "+je})}function Ni(f,b,N,M){f.info(function(){return"XMLHTTP TEXT ("+b+"): "+Yx(f,N)+(M?" "+M:"")})}function Qx(f,b){f.info(function(){return"TIMEOUT: "+b})}Rt.prototype.info=function(){};function Yx(f,b){if(!f.g)return b;if(!b)return null;try{const ne=JSON.parse(b);if(ne){for(f=0;f<ne.length;f++)if(Array.isArray(ne[f])){var N=ne[f];if(!(N.length<2)){var M=N[1];if(Array.isArray(M)&&!(M.length<1)){var Q=M[0];if(Q!="noop"&&Q!="stop"&&Q!="close")for(let je=1;je<M.length;je++)M[je]=""}}}}return Ee(ne)}catch{return b}}var Yl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},sm={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},ld;function Zl(){}h(Zl,Lt),Zl.prototype.g=function(){return new XMLHttpRequest},ld=new Zl;function $s(f){return encodeURIComponent(String(f))}function Va(f){var b=1;f=f.split(":");const N=[];for(;b>0&&f.length;)N.push(f.shift()),b--;return f.length&&N.push(f.join(":")),N}function qr(f,b,N,M){this.j=f,this.i=b,this.l=N,this.S=M||1,this.V=new Se(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new im}function im(){this.i=null,this.g="",this.h=!1}var ds={},Fa={};function Ti(f,b,N){f.M=1,f.A=za(Ar(b)),f.u=N,f.R=!0,Xl(f,null)}function Xl(f,b){f.F=Date.now(),Ua(f),f.B=Ar(f.A);var N=f.B,M=f.S;Array.isArray(M)||(M=[String(M)]),tc(N.i,"t",M),f.C=0,N=f.j.L,f.h=new im,f.g=FS(f.j,N?b:null,!f.u),f.P>0&&(f.O=new se(u(f.Y,f,f.g),f.P)),b=f.V,N=f.g,M=f.ba;var Q="readystatechange";Array.isArray(Q)||(Q&&(ve[0]=Q.toString()),Q=ve);for(let ne=0;ne<Q.length;ne++){const je=xe(N,Q[ne],M||b.handleEvent,!1,b.h||b);if(!je)break;b.g[je.key]=je}b=f.J?L(f.J):{},f.u?(f.v||(f.v="POST"),b["Content-Type"]="application/x-www-form-urlencoded",f.g.ea(f.B,f.v,f.u,b)):(f.v="GET",f.g.ea(f.B,f.v,null,b)),Bs(),ad(f.i,f.v,f.B,f.l,f.S,f.u)}qr.prototype.ba=function(f){f=f.target;const b=this.O;b&&xo(f)==3?b.j():this.Y(f)},qr.prototype.Y=function(f){try{if(f==this.g)e:{const st=xo(this.g),wn=this.g.ya(),It=this.g.ca();if(!(st<3)&&(st!=3||this.g&&(this.h.h||this.g.la()||ES(this.g)))){this.K||st!=4||wn==7||(wn==8||It<=0?Bs(3):Bs(2)),cd(this);var b=this.g.ca();this.X=b;var N=om(this);if(this.o=b==200,Kx(this.i,this.v,this.B,this.l,this.S,st,b),this.o){if(this.U&&!this.L){t:{if(this.g){var M,Q=this.g;if((M=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(M)){var ne=M;break t}}ne=null}if(f=ne)Ni(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,uo(this,f);else{this.o=!1,this.m=3,Pt(12),Ci(this),Ba(this);break e}}if(this.R){f=!0;let kn;for(;!this.K&&this.C<N.length;)if(kn=co(this,N),kn==Fa){st==4&&(this.m=4,Pt(14),f=!1),Ni(this.i,this.l,null,"[Incomplete Response]");break}else if(kn==ds){this.m=4,Pt(15),Ni(this.i,this.l,N,"[Invalid Chunk]"),f=!1;break}else Ni(this.i,this.l,kn,null),uo(this,kn);if(am(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||N.length!=0||this.h.h||(this.m=1,Pt(16),f=!1),this.o=this.o&&f,!f)Ni(this.i,this.l,N,"[Invalid Chunked Response]"),Ci(this),Ba(this);else if(N.length>0&&!this.W){this.W=!0;var je=this.j;je.g==this&&je.aa&&!je.P&&(je.j.info("Great, no buffering proxy detected. Bytes received: "+N.length),t0(je),je.P=!0,Pt(11))}}else Ni(this.i,this.l,N,null),uo(this,N);st==4&&Ci(this),this.o&&!this.K&&(st==4?DS(this.j,this):(this.o=!1,Ua(this)))}else Y6(this.g),b==400&&N.indexOf("Unknown SID")>0?(this.m=3,Pt(12)):(this.m=0,Pt(13)),Ci(this),Ba(this)}}}catch{}finally{}};function om(f){if(!am(f))return f.g.la();const b=ES(f.g);if(b==="")return"";let N="";const M=b.length,Q=xo(f.g)==4;if(!f.h.i){if(typeof TextDecoder>"u")return Ci(f),Ba(f),"";f.h.i=new a.TextDecoder}for(let ne=0;ne<M;ne++)f.h.h=!0,N+=f.h.i.decode(b[ne],{stream:!(Q&&ne==M-1)});return b.length=0,f.h.g+=N,f.C=0,f.h.g}function am(f){return f.g?f.v=="GET"&&f.M!=2&&f.j.Aa:!1}function co(f,b){var N=f.C,M=b.indexOf(`
`,N);return M==-1?Fa:(N=Number(b.substring(N,M)),isNaN(N)?ds:(M+=1,M+N>b.length?Fa:(b=b.slice(M,M+N),f.C=M+N,b)))}qr.prototype.cancel=function(){this.K=!0,Ci(this)};function Ua(f){f.T=Date.now()+f.H,lm(f,f.H)}function lm(f,b){if(f.D!=null)throw Error("WatchDog timer not null");f.D=zn(u(f.aa,f),b)}function cd(f){f.D&&(a.clearTimeout(f.D),f.D=null)}qr.prototype.aa=function(){this.D=null;const f=Date.now();f-this.T>=0?(Qx(this.i,this.B),this.M!=2&&(Bs(),Pt(17)),Ci(this),this.m=2,Ba(this)):lm(this,this.T-f)};function Ba(f){f.j.I==0||f.K||DS(f.j,f)}function Ci(f){cd(f);var b=f.O;b&&typeof b.dispose=="function"&&b.dispose(),f.O=null,pe(f.V),f.g&&(b=f.g,f.g=null,b.abort(),b.dispose())}function uo(f,b){try{var N=f.j;if(N.I!=0&&(N.g==f||Jl(N.h,f))){if(!f.L&&Jl(N.h,f)&&N.I==3){try{var M=N.Ba.g.parse(b)}catch{M=null}if(Array.isArray(M)&&M.length==3){var Q=M;if(Q[0]==0){e:if(!N.v){if(N.g)if(N.g.F+3e3<f.F)jm(N),bm(N);else break e;e0(N),Pt(18)}}else N.xa=Q[1],0<N.xa-N.K&&Q[2]<37500&&N.F&&N.A==0&&!N.C&&(N.C=zn(u(N.Va,N),6e3));dm(N.h)<=1&&N.ta&&(N.ta=void 0)}else Wa(N,11)}else if((f.L||N.g==f)&&jm(N),!A(b))for(Q=N.Ba.g.parse(b),b=0;b<Q.length;b++){let It=Q[b];const kn=It[0];if(!(kn<=N.K))if(N.K=kn,It=It[1],N.I==2)if(It[0]=="c"){N.M=It[1],N.ba=It[2];const zs=It[3];zs!=null&&(N.ka=zs,N.j.info("VER="+N.ka));const Ha=It[4];Ha!=null&&(N.za=Ha,N.j.info("SVER="+N.za));const vo=It[5];vo!=null&&typeof vo=="number"&&vo>0&&(M=1.5*vo,N.O=M,N.j.info("backChannelRequestTimeoutMs_="+M)),M=N;const wo=f.g;if(wo){const Nm=wo.g?wo.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nm){var ne=M.h;ne.g||Nm.indexOf("spdy")==-1&&Nm.indexOf("quic")==-1&&Nm.indexOf("h2")==-1||(ne.j=ne.l,ne.g=new Set,ne.h&&(ud(ne,ne.h),ne.h=null))}if(M.G){const n0=wo.g?wo.g.getResponseHeader("X-HTTP-Session-Id"):null;n0&&(M.wa=n0,Ct(M.J,M.G,n0))}}N.I=3,N.l&&N.l.ra(),N.aa&&(N.T=Date.now()-f.F,N.j.info("Handshake RTT: "+N.T+"ms")),M=N;var je=f;if(M.na=VS(M,M.L?M.ba:null,M.W),je.L){hm(M.h,je);var st=je,wn=M.O;wn&&(st.H=wn),st.D&&(cd(st),Ua(st)),M.g=je}else RS(M);N.i.length>0&&_m(N)}else It[0]!="stop"&&It[0]!="close"||Wa(N,7);else N.I==3&&(It[0]=="stop"||It[0]=="close"?It[0]=="stop"?Wa(N,7):Jx(N):It[0]!="noop"&&N.l&&N.l.qa(It),N.A=0)}}Bs(4)}catch{}}var $a=class{constructor(f,b){this.g=f,this.map=b}};function cm(f){this.l=f||10,a.PerformanceNavigationTiming?(f=a.performance.getEntriesByType("navigation"),f=f.length>0&&(f[0].nextHopProtocol=="hq"||f[0].nextHopProtocol=="h2")):f=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=f?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function um(f){return f.h?!0:f.g?f.g.size>=f.j:!1}function dm(f){return f.h?1:f.g?f.g.size:0}function Jl(f,b){return f.h?f.h==b:f.g?f.g.has(b):!1}function ud(f,b){f.g?f.g.add(b):f.h=b}function hm(f,b){f.h&&f.h==b?f.h=null:f.g&&f.g.has(b)&&f.g.delete(b)}cm.prototype.cancel=function(){if(this.i=fm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const f of this.g.values())f.cancel();this.g.clear()}};function fm(f){if(f.h!=null)return f.i.concat(f.h.G);if(f.g!=null&&f.g.size!==0){let b=f.i;for(const N of f.g.values())b=b.concat(N.G);return b}return g(f.i)}var dd=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function mm(f,b){if(f){f=f.split("&");for(let N=0;N<f.length;N++){const M=f[N].indexOf("=");let Q,ne=null;M>=0?(Q=f[N].substring(0,M),ne=f[N].substring(M+1)):Q=f[N],b(Q,ne?decodeURIComponent(ne.replace(/\+/g," ")):"")}}}function hs(f){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let b;f instanceof hs?(this.l=f.l,ho(this,f.j),this.o=f.o,this.g=f.g,fo(this,f.u),this.h=f.h,ec(this,Pr(f.i)),this.m=f.m):f&&(b=String(f).match(dd))?(this.l=!1,ho(this,b[1]||"",!0),this.o=mo(b[2]||""),this.g=mo(b[3]||"",!0),fo(this,b[4]),this.h=mo(b[5]||"",!0),ec(this,b[6]||"",!0),this.m=mo(b[7]||"")):(this.l=!1,this.i=new z(null,this.l))}hs.prototype.toString=function(){const f=[];var b=this.j;b&&f.push(po(b,hd,!0),":");var N=this.g;return(N||b=="file")&&(f.push("//"),(b=this.o)&&f.push(po(b,hd,!0),"@"),f.push($s(N).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),N=this.u,N!=null&&f.push(":",String(N))),(N=this.h)&&(this.g&&N.charAt(0)!="/"&&f.push("/"),f.push(po(N,N.charAt(0)=="/"?ym:gm,!0))),(N=this.i.toString())&&f.push("?",N),(N=this.m)&&f.push("#",po(N,V)),f.join("")},hs.prototype.resolve=function(f){const b=Ar(this);let N=!!f.j;N?ho(b,f.j):N=!!f.o,N?b.o=f.o:N=!!f.g,N?b.g=f.g:N=f.u!=null;var M=f.h;if(N)fo(b,f.u);else if(N=!!f.h){if(M.charAt(0)!="/")if(this.g&&!this.h)M="/"+M;else{var Q=b.h.lastIndexOf("/");Q!=-1&&(M=b.h.slice(0,Q+1)+M)}if(Q=M,Q==".."||Q==".")M="";else if(Q.indexOf("./")!=-1||Q.indexOf("/.")!=-1){M=Q.lastIndexOf("/",0)==0,Q=Q.split("/");const ne=[];for(let je=0;je<Q.length;){const st=Q[je++];st=="."?M&&je==Q.length&&ne.push(""):st==".."?((ne.length>1||ne.length==1&&ne[0]!="")&&ne.pop(),M&&je==Q.length&&ne.push("")):(ne.push(st),M=!0)}M=ne.join("/")}else M=Q}return N?b.h=M:N=f.i.toString()!=="",N?ec(b,Pr(f.i)):N=!!f.m,N&&(b.m=f.m),b};function Ar(f){return new hs(f)}function ho(f,b,N){f.j=N?mo(b,!0):b,f.j&&(f.j=f.j.replace(/:$/,""))}function fo(f,b){if(b){if(b=Number(b),isNaN(b)||b<0)throw Error("Bad port number "+b);f.u=b}else f.u=null}function ec(f,b,N){b instanceof z?(f.i=b,W6(f.i,f.l)):(N||(b=po(b,xm)),f.i=new z(b,f.l))}function Ct(f,b,N){f.i.set(b,N)}function za(f){return Ct(f,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),f}function mo(f,b){return f?b?decodeURI(f.replace(/%25/g,"%2525")):decodeURIComponent(f):""}function po(f,b,N){return typeof f=="string"?(f=encodeURI(f).replace(b,pm),N&&(f=f.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f):null}function pm(f){return f=f.charCodeAt(0),"%"+(f>>4&15).toString(16)+(f&15).toString(16)}var hd=/[#\/\?@]/g,gm=/[#\?:]/g,ym=/[#\?]/g,xm=/[#\?@]/g,V=/#/g;function z(f,b){this.h=this.g=null,this.i=f||null,this.j=!!b}function J(f){f.g||(f.g=new Map,f.h=0,f.i&&mm(f.i,function(b,N){f.add(decodeURIComponent(b.replace(/\+/g," ")),N)}))}t=z.prototype,t.add=function(f,b){J(this),this.i=null,f=go(this,f);let N=this.g.get(f);return N||this.g.set(f,N=[]),N.push(b),this.h+=1,this};function oe(f,b){J(f),b=go(f,b),f.g.has(b)&&(f.i=null,f.h-=f.g.get(b).length,f.g.delete(b))}function be(f,b){return J(f),b=go(f,b),f.g.has(b)}t.forEach=function(f,b){J(this),this.g.forEach(function(N,M){N.forEach(function(Q){f.call(b,Q,M,this)},this)},this)};function Xe(f,b){J(f);let N=[];if(typeof b=="string")be(f,b)&&(N=N.concat(f.g.get(go(f,b))));else for(f=Array.from(f.g.values()),b=0;b<f.length;b++)N=N.concat(f[b]);return N}t.set=function(f,b){return J(this),this.i=null,f=go(this,f),be(this,f)&&(this.h-=this.g.get(f).length),this.g.set(f,[b]),this.h+=1,this},t.get=function(f,b){return f?(f=Xe(this,f),f.length>0?String(f[0]):b):b};function tc(f,b,N){oe(f,b),N.length>0&&(f.i=null,f.g.set(go(f,b),g(N)),f.h+=N.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const f=[],b=Array.from(this.g.keys());for(let M=0;M<b.length;M++){var N=b[M];const Q=$s(N);N=Xe(this,N);for(let ne=0;ne<N.length;ne++){let je=Q;N[ne]!==""&&(je+="="+$s(N[ne])),f.push(je)}}return this.i=f.join("&")};function Pr(f){const b=new z;return b.i=f.i,f.g&&(b.g=new Map(f.g),b.h=f.h),b}function go(f,b){return b=String(b),f.j&&(b=b.toLowerCase()),b}function W6(f,b){b&&!f.j&&(J(f),f.i=null,f.g.forEach(function(N,M){const Q=M.toLowerCase();M!=Q&&(oe(this,M),tc(this,Q,N))},f)),f.j=b}function H6(f,b){const N=new Rt;if(a.Image){const M=new Image;M.onload=d(yo,N,"TestLoadImage: loaded",!0,b,M),M.onerror=d(yo,N,"TestLoadImage: error",!1,b,M),M.onabort=d(yo,N,"TestLoadImage: abort",!1,b,M),M.ontimeout=d(yo,N,"TestLoadImage: timeout",!1,b,M),a.setTimeout(function(){M.ontimeout&&M.ontimeout()},1e4),M.src=f}else b(!1)}function q6(f,b){const N=new Rt,M=new AbortController,Q=setTimeout(()=>{M.abort(),yo(N,"TestPingServer: timeout",!1,b)},1e4);fetch(f,{signal:M.signal}).then(ne=>{clearTimeout(Q),ne.ok?yo(N,"TestPingServer: ok",!0,b):yo(N,"TestPingServer: server error",!1,b)}).catch(()=>{clearTimeout(Q),yo(N,"TestPingServer: error",!1,b)})}function yo(f,b,N,M,Q){try{Q&&(Q.onload=null,Q.onerror=null,Q.onabort=null,Q.ontimeout=null),M(N)}catch{}}function G6(){this.g=new At}function Zx(f){this.i=f.Sb||null,this.h=f.ab||!1}h(Zx,Lt),Zx.prototype.g=function(){return new vm(this.i,this.h)};function vm(f,b){lt.call(this),this.H=f,this.o=b,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}h(vm,lt),t=vm.prototype,t.open=function(f,b){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=f,this.D=b,this.readyState=1,md(this)},t.send=function(f){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const b={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};f&&(b.body=f),(this.H||a).fetch(new Request(this.D,b)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,fd(this)),this.readyState=0},t.Pa=function(f){if(this.g&&(this.l=f,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=f.headers,this.readyState=2,md(this)),this.g&&(this.readyState=3,md(this),this.g)))if(this.responseType==="arraybuffer")f.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in f){if(this.j=f.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;jS(this)}else f.text().then(this.Oa.bind(this),this.ga.bind(this))};function jS(f){f.j.read().then(f.Ma.bind(f)).catch(f.ga.bind(f))}t.Ma=function(f){if(this.g){if(this.o&&f.value)this.response.push(f.value);else if(!this.o){var b=f.value?f.value:new Uint8Array(0);(b=this.B.decode(b,{stream:!f.done}))&&(this.response=this.responseText+=b)}f.done?fd(this):md(this),this.readyState==3&&jS(this)}},t.Oa=function(f){this.g&&(this.response=this.responseText=f,fd(this))},t.Na=function(f){this.g&&(this.response=f,fd(this))},t.ga=function(){this.g&&fd(this)};function fd(f){f.readyState=4,f.l=null,f.j=null,f.B=null,md(f)}t.setRequestHeader=function(f,b){this.A.append(f,b)},t.getResponseHeader=function(f){return this.h&&this.h.get(f.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const f=[],b=this.h.entries();for(var N=b.next();!N.done;)N=N.value,f.push(N[0]+": "+N[1]),N=b.next();return f.join(`\r
`)};function md(f){f.onreadystatechange&&f.onreadystatechange.call(f)}Object.defineProperty(vm.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(f){this.m=f?"include":"same-origin"}});function SS(f){let b="";return F(f,function(N,M){b+=M,b+=":",b+=N,b+=`\r
`}),b}function Xx(f,b,N){e:{for(M in N){var M=!1;break e}M=!0}M||(N=SS(N),typeof f=="string"?N!=null&&$s(N):Ct(f,b,N))}function nn(f){lt.call(this),this.headers=new Map,this.L=f||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}h(nn,lt);var K6=/^https?$/i,Q6=["POST","PUT"];t=nn.prototype,t.Fa=function(f){this.H=f},t.ea=function(f,b,N,M){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+f);b=b?b.toUpperCase():"GET",this.D=f,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():ld.g(),this.g.onreadystatechange=m(u(this.Ca,this));try{this.B=!0,this.g.open(b,String(f),!0),this.B=!1}catch(ne){NS(this,ne);return}if(f=N||"",N=new Map(this.headers),M)if(Object.getPrototypeOf(M)===Object.prototype)for(var Q in M)N.set(Q,M[Q]);else if(typeof M.keys=="function"&&typeof M.get=="function")for(const ne of M.keys())N.set(ne,M.get(ne));else throw Error("Unknown input type for opt_headers: "+String(M));M=Array.from(N.keys()).find(ne=>ne.toLowerCase()=="content-type"),Q=a.FormData&&f instanceof a.FormData,!(Array.prototype.indexOf.call(Q6,b,void 0)>=0)||M||Q||N.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ne,je]of N)this.g.setRequestHeader(ne,je);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(f),this.v=!1}catch(ne){NS(this,ne)}};function NS(f,b){f.h=!1,f.g&&(f.j=!0,f.g.abort(),f.j=!1),f.l=b,f.o=5,TS(f),wm(f)}function TS(f){f.A||(f.A=!0,mt(f,"complete"),mt(f,"error"))}t.abort=function(f){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=f||7,mt(this,"complete"),mt(this,"abort"),wm(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wm(this,!0)),nn.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?CS(this):this.Xa())},t.Xa=function(){CS(this)};function CS(f){if(f.h&&typeof o<"u"){if(f.v&&xo(f)==4)setTimeout(f.Ca.bind(f),0);else if(mt(f,"readystatechange"),xo(f)==4){f.h=!1;try{const ne=f.ca();e:switch(ne){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var b=!0;break e;default:b=!1}var N;if(!(N=b)){var M;if(M=ne===0){let je=String(f.D).match(dd)[1]||null;!je&&a.self&&a.self.location&&(je=a.self.location.protocol.slice(0,-1)),M=!K6.test(je?je.toLowerCase():"")}N=M}if(N)mt(f,"complete"),mt(f,"success");else{f.o=6;try{var Q=xo(f)>2?f.g.statusText:""}catch{Q=""}f.l=Q+" ["+f.ca()+"]",TS(f)}}finally{wm(f)}}}}function wm(f,b){if(f.g){f.m&&(clearTimeout(f.m),f.m=null);const N=f.g;f.g=null,b||mt(f,"ready");try{N.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function xo(f){return f.g?f.g.readyState:0}t.ca=function(){try{return xo(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(f){if(this.g){var b=this.g.responseText;return f&&b.indexOf(f)==0&&(b=b.substring(f.length)),et(b)}};function ES(f){try{if(!f.g)return null;if("response"in f.g)return f.g.response;switch(f.F){case"":case"text":return f.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in f.g)return f.g.mozResponseArrayBuffer}return null}catch{return null}}function Y6(f){const b={};f=(f.g&&xo(f)>=2&&f.g.getAllResponseHeaders()||"").split(`\r
`);for(let M=0;M<f.length;M++){if(A(f[M]))continue;var N=Va(f[M]);const Q=N[0];if(N=N[1],typeof N!="string")continue;N=N.trim();const ne=b[Q]||[];b[Q]=ne,ne.push(N)}D(b,function(M){return M.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function pd(f,b,N){return N&&N.internalChannelParams&&N.internalChannelParams[f]||b}function kS(f){this.za=0,this.i=[],this.j=new Rt,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=pd("failFast",!1,f),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=pd("baseRetryDelayMs",5e3,f),this.Za=pd("retryDelaySeedMs",1e4,f),this.Ta=pd("forwardChannelMaxRetries",2,f),this.va=pd("forwardChannelRequestTimeoutMs",2e4,f),this.ma=f&&f.xmlHttpFactory||void 0,this.Ua=f&&f.Rb||void 0,this.Aa=f&&f.useFetchStreams||!1,this.O=void 0,this.L=f&&f.supportsCrossDomainXhr||!1,this.M="",this.h=new cm(f&&f.concurrentRequestLimit),this.Ba=new G6,this.S=f&&f.fastHandshake||!1,this.R=f&&f.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=f&&f.Pb||!1,f&&f.ua&&this.j.ua(),f&&f.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&f&&f.detectBufferingProxy||!1,this.ia=void 0,f&&f.longPollingTimeout&&f.longPollingTimeout>0&&(this.ia=f.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=kS.prototype,t.ka=8,t.I=1,t.connect=function(f,b,N,M){Pt(0),this.W=f,this.H=b||{},N&&M!==void 0&&(this.H.OSID=N,this.H.OAID=M),this.F=this.X,this.J=VS(this,null,this.W),_m(this)};function Jx(f){if(AS(f),f.I==3){var b=f.V++,N=Ar(f.J);if(Ct(N,"SID",f.M),Ct(N,"RID",b),Ct(N,"TYPE","terminate"),gd(f,N),b=new qr(f,f.j,b),b.M=2,b.A=za(Ar(N)),N=!1,a.navigator&&a.navigator.sendBeacon)try{N=a.navigator.sendBeacon(b.A.toString(),"")}catch{}!N&&a.Image&&(new Image().src=b.A,N=!0),N||(b.g=FS(b.j,null),b.g.ea(b.A)),b.F=Date.now(),Ua(b)}OS(f)}function bm(f){f.g&&(t0(f),f.g.cancel(),f.g=null)}function AS(f){bm(f),f.v&&(a.clearTimeout(f.v),f.v=null),jm(f),f.h.cancel(),f.m&&(typeof f.m=="number"&&a.clearTimeout(f.m),f.m=null)}function _m(f){if(!um(f.h)&&!f.m){f.m=!0;var b=f.Ea;P||S(),U||(P(),U=!0),T.add(b,f),f.D=0}}function Z6(f,b){return dm(f.h)>=f.h.j-(f.m?1:0)?!1:f.m?(f.i=b.G.concat(f.i),!0):f.I==1||f.I==2||f.D>=(f.Sa?0:f.Ta)?!1:(f.m=zn(u(f.Ea,f,b),LS(f,f.D)),f.D++,!0)}t.Ea=function(f){if(this.m)if(this.m=null,this.I==1){if(!f){this.V=Math.floor(Math.random()*1e5),f=this.V++;const Q=new qr(this,this.j,f);let ne=this.o;if(this.U&&(ne?(ne=L(ne),$(ne,this.U)):ne=this.U),this.u!==null||this.R||(Q.J=ne,ne=null),this.S)e:{for(var b=0,N=0;N<this.i.length;N++){t:{var M=this.i[N];if("__data__"in M.map&&(M=M.map.__data__,typeof M=="string")){M=M.length;break t}M=void 0}if(M===void 0)break;if(b+=M,b>4096){b=N;break e}if(b===4096||N===this.i.length-1){b=N+1;break e}}b=1e3}else b=1e3;b=IS(this,Q,b),N=Ar(this.J),Ct(N,"RID",f),Ct(N,"CVER",22),this.G&&Ct(N,"X-HTTP-Session-Id",this.G),gd(this,N),ne&&(this.R?b="headers="+$s(SS(ne))+"&"+b:this.u&&Xx(N,this.u,ne)),ud(this.h,Q),this.Ra&&Ct(N,"TYPE","init"),this.S?(Ct(N,"$req",b),Ct(N,"SID","null"),Q.U=!0,Ti(Q,N,null)):Ti(Q,N,b),this.I=2}}else this.I==3&&(f?PS(this,f):this.i.length==0||um(this.h)||PS(this))};function PS(f,b){var N;b?N=b.l:N=f.V++;const M=Ar(f.J);Ct(M,"SID",f.M),Ct(M,"RID",N),Ct(M,"AID",f.K),gd(f,M),f.u&&f.o&&Xx(M,f.u,f.o),N=new qr(f,f.j,N,f.D+1),f.u===null&&(N.J=f.o),b&&(f.i=b.G.concat(f.i)),b=IS(f,N,1e3),N.H=Math.round(f.va*.5)+Math.round(f.va*.5*Math.random()),ud(f.h,N),Ti(N,M,b)}function gd(f,b){f.H&&F(f.H,function(N,M){Ct(b,M,N)}),f.l&&F({},function(N,M){Ct(b,M,N)})}function IS(f,b,N){N=Math.min(f.i.length,N);const M=f.l?u(f.l.Ka,f.l,f):null;e:{var Q=f.i;let st=-1;for(;;){const wn=["count="+N];st==-1?N>0?(st=Q[0].g,wn.push("ofs="+st)):st=0:wn.push("ofs="+st);let It=!0;for(let kn=0;kn<N;kn++){var ne=Q[kn].g;const zs=Q[kn].map;if(ne-=st,ne<0)st=Math.max(0,Q[kn].g-100),It=!1;else try{ne="req"+ne+"_"||"";try{var je=zs instanceof Map?zs:Object.entries(zs);for(const[Ha,vo]of je){let wo=vo;l(vo)&&(wo=Ee(vo)),wn.push(ne+Ha+"="+encodeURIComponent(wo))}}catch(Ha){throw wn.push(ne+"type="+encodeURIComponent("_badmap")),Ha}}catch{M&&M(zs)}}if(It){je=wn.join("&");break e}}je=void 0}return f=f.i.splice(0,N),b.G=f,je}function RS(f){if(!f.g&&!f.v){f.Y=1;var b=f.Da;P||S(),U||(P(),U=!0),T.add(b,f),f.A=0}}function e0(f){return f.g||f.v||f.A>=3?!1:(f.Y++,f.v=zn(u(f.Da,f),LS(f,f.A)),f.A++,!0)}t.Da=function(){if(this.v=null,MS(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var f=4*this.T;this.j.info("BP detection timer enabled: "+f),this.B=zn(u(this.Wa,this),f)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Pt(10),bm(this),MS(this))};function t0(f){f.B!=null&&(a.clearTimeout(f.B),f.B=null)}function MS(f){f.g=new qr(f,f.j,"rpc",f.Y),f.u===null&&(f.g.J=f.o),f.g.P=0;var b=Ar(f.na);Ct(b,"RID","rpc"),Ct(b,"SID",f.M),Ct(b,"AID",f.K),Ct(b,"CI",f.F?"0":"1"),!f.F&&f.ia&&Ct(b,"TO",f.ia),Ct(b,"TYPE","xmlhttp"),gd(f,b),f.u&&f.o&&Xx(b,f.u,f.o),f.O&&(f.g.H=f.O);var N=f.g;f=f.ba,N.M=1,N.A=za(Ar(b)),N.u=null,N.R=!0,Xl(N,f)}t.Va=function(){this.C!=null&&(this.C=null,bm(this),e0(this),Pt(19))};function jm(f){f.C!=null&&(a.clearTimeout(f.C),f.C=null)}function DS(f,b){var N=null;if(f.g==b){jm(f),t0(f),f.g=null;var M=2}else if(Jl(f.h,b))N=b.G,hm(f.h,b),M=1;else return;if(f.I!=0){if(b.o)if(M==1){N=b.u?b.u.length:0,b=Date.now()-b.F;var Q=f.D;M=Us(),mt(M,new Oa(M,N)),_m(f)}else RS(f);else if(Q=b.m,Q==3||Q==0&&b.X>0||!(M==1&&Z6(f,b)||M==2&&e0(f)))switch(N&&N.length>0&&(b=f.h,b.i=b.i.concat(N)),Q){case 1:Wa(f,5);break;case 4:Wa(f,10);break;case 3:Wa(f,6);break;default:Wa(f,2)}}}function LS(f,b){let N=f.Qa+Math.floor(Math.random()*f.Za);return f.isActive()||(N*=2),N*b}function Wa(f,b){if(f.j.info("Error code "+b),b==2){var N=u(f.bb,f),M=f.Ua;const Q=!M;M=new hs(M||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ho(M,"https"),za(M),Q?H6(M.toString(),N):q6(M.toString(),N)}else Pt(2);f.I=0,f.l&&f.l.pa(b),OS(f),AS(f)}t.bb=function(f){f?(this.j.info("Successfully pinged google.com"),Pt(2)):(this.j.info("Failed to ping google.com"),Pt(1))};function OS(f){if(f.I=0,f.ja=[],f.l){const b=fm(f.h);(b.length!=0||f.i.length!=0)&&(_(f.ja,b),_(f.ja,f.i),f.h.i.length=0,g(f.i),f.i.length=0),f.l.oa()}}function VS(f,b,N){var M=N instanceof hs?Ar(N):new hs(N);if(M.g!="")b&&(M.g=b+"."+M.g),fo(M,M.u);else{var Q=a.location;M=Q.protocol,b=b?b+"."+Q.hostname:Q.hostname,Q=+Q.port;const ne=new hs(null);M&&ho(ne,M),b&&(ne.g=b),Q&&fo(ne,Q),N&&(ne.h=N),M=ne}return N=f.G,b=f.wa,N&&b&&Ct(M,N,b),Ct(M,"VER",f.ka),gd(f,M),M}function FS(f,b,N){if(b&&!f.L)throw Error("Can't create secondary domain capable XhrIo object.");return b=f.Aa&&!f.ma?new nn(new Zx({ab:N})):new nn(f.ma),b.Fa(f.L),b}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function US(){}t=US.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Sm(){}Sm.prototype.g=function(f,b){return new Ir(f,b)};function Ir(f,b){lt.call(this),this.g=new kS(b),this.l=f,this.h=b&&b.messageUrlParams||null,f=b&&b.messageHeaders||null,b&&b.clientProtocolHeaderRequired&&(f?f["X-Client-Protocol"]="webchannel":f={"X-Client-Protocol":"webchannel"}),this.g.o=f,f=b&&b.initMessageHeaders||null,b&&b.messageContentType&&(f?f["X-WebChannel-Content-Type"]=b.messageContentType:f={"X-WebChannel-Content-Type":b.messageContentType}),b&&b.sa&&(f?f["X-WebChannel-Client-Profile"]=b.sa:f={"X-WebChannel-Client-Profile":b.sa}),this.g.U=f,(f=b&&b.Qb)&&!A(f)&&(this.g.u=f),this.A=b&&b.supportsCrossDomainXhr||!1,this.v=b&&b.sendRawJson||!1,(b=b&&b.httpSessionIdParam)&&!A(b)&&(this.g.G=b,f=this.h,f!==null&&b in f&&(f=this.h,b in f&&delete f[b])),this.j=new nc(this)}h(Ir,lt),Ir.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Ir.prototype.close=function(){Jx(this.g)},Ir.prototype.o=function(f){var b=this.g;if(typeof f=="string"){var N={};N.__data__=f,f=N}else this.v&&(N={},N.__data__=Ee(f),f=N);b.i.push(new $a(b.Ya++,f)),b.I==3&&_m(b)},Ir.prototype.N=function(){this.g.l=null,delete this.j,Jx(this.g),delete this.g,Ir.Z.N.call(this)};function BS(f){us.call(this),f.__headers__&&(this.headers=f.__headers__,this.statusCode=f.__status__,delete f.__headers__,delete f.__status__);var b=f.__sm__;if(b){e:{for(const N in b){f=N;break e}f=void 0}(this.i=f)&&(f=this.i,b=b!==null&&f in b?b[f]:void 0),this.data=b}else this.data=f}h(BS,us);function $S(){La.call(this),this.status=1}h($S,La);function nc(f){this.g=f}h(nc,US),nc.prototype.ra=function(){mt(this.g,"a")},nc.prototype.qa=function(f){mt(this.g,new BS(f))},nc.prototype.pa=function(f){mt(this.g,new $S)},nc.prototype.oa=function(){mt(this.g,"b")},Sm.prototype.createWebChannel=Sm.prototype.g,Ir.prototype.send=Ir.prototype.o,Ir.prototype.open=Ir.prototype.m,Ir.prototype.close=Ir.prototype.close,YL=function(){return new Sm},QL=function(){return Us()},KL=ir,jb={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Yl.NO_ERROR=0,Yl.TIMEOUT=8,Yl.HTTP_ERROR=6,$p=Yl,sm.COMPLETE="complete",GL=sm,Si.EventType=vr,vr.OPEN="a",vr.CLOSE="b",vr.ERROR="c",vr.MESSAGE="d",lt.prototype.listen=lt.prototype.J,zd=Si,nn.prototype.listenOnce=nn.prototype.K,nn.prototype.getLastError=nn.prototype.Ha,nn.prototype.getLastErrorCode=nn.prototype.ya,nn.prototype.getStatus=nn.prototype.ca,nn.prototype.getResponseJson=nn.prototype.La,nn.prototype.getResponseText=nn.prototype.la,nn.prototype.send=nn.prototype.ea,nn.prototype.setWithCredentials=nn.prototype.Fa,qL=nn}).apply(typeof op<"u"?op:typeof self<"u"?self:typeof window<"u"?window:{});const o2="@firebase/firestore",a2="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Yn.UNAUTHENTICATED=new Yn(null),Yn.GOOGLE_CREDENTIALS=new Yn("google-credentials-uid"),Yn.FIRST_PARTY=new Yn("first-party-uid"),Yn.MOCK_USER=new Yn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let td="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ol=new vj("@firebase/firestore");function cc(){return Ol.logLevel}function Ie(t,...e){if(Ol.logLevel<=ct.DEBUG){const n=e.map(Ij);Ol.debug(`Firestore (${td}): ${t}`,...n)}}function io(t,...e){if(Ol.logLevel<=ct.ERROR){const n=e.map(Ij);Ol.error(`Firestore (${td}): ${t}`,...n)}}function Pu(t,...e){if(Ol.logLevel<=ct.WARN){const n=e.map(Ij);Ol.warn(`Firestore (${td}): ${t}`,...n)}}function Ij(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function We(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,ZL(t,r,n)}function ZL(t,e,n){let r=`FIRESTORE (${td}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw io(r),new Error(r)}function St(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||ZL(e,s,r)}function Ye(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Oe extends lo{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XL{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Dee{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Yn.UNAUTHENTICATED))}shutdown(){}}class Lee{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Oee{constructor(e){this.t=e,this.currentUser=Yn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){St(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let o=new ua;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new ua,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=o;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{Ie("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(Ie("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new ua)}},0),a()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Ie("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(St(typeof r.accessToken=="string",31837,{l:r}),new XL(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return St(e===null||typeof e=="string",2055,{h:e}),new Yn(e)}}class Vee{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Yn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Fee{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Vee(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Yn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class l2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Uee{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ns(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){St(this.o===void 0,3512);const r=o=>{o.error!=null&&Ie("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const a=o.token!==this.m;return this.m=o.token,Ie("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const s=o=>{Ie("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>s(o)),setTimeout(()=>{if(!this.appCheck){const o=this.V.getImmediate({optional:!0});o?s(o):Ie("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new l2(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(St(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new l2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bee(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=Bee(40);for(let o=0;o<s.length;++o)r.length<20&&s[o]<n&&(r+=e.charAt(s[o]%62))}return r}}function ut(t,e){return t<e?-1:t>e?1:0}function Sb(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),o=e.charAt(r);if(s!==o)return mv(s)===mv(o)?ut(s,o):mv(s)?1:-1}return ut(t.length,e.length)}const $ee=55296,zee=57343;function mv(t){const e=t.charCodeAt(0);return e>=$ee&&e<=zee}function Iu(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="__name__";class Ks{constructor(e,n,r){n===void 0?n=0:n>e.length&&We(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&We(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ks.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ks?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const o=Ks.compareSegments(e.get(s),n.get(s));if(o!==0)return o}return ut(e.length,n.length)}static compareSegments(e,n){const r=Ks.isNumericId(e),s=Ks.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Ks.extractNumericId(e).compare(Ks.extractNumericId(n)):Sb(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ca.fromString(e.substring(4,e.length-2))}}class Qt extends Ks{construct(e,n,r){return new Qt(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Oe(fe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Qt(n)}static emptyPath(){return new Qt([])}}const Wee=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Vn extends Ks{construct(e,n,r){return new Vn(e,n,r)}static isValidIdentifier(e){return Wee.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Vn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===c2}static keyField(){return new Vn([c2])}static fromServerFormat(e){const n=[];let r="",s=0;const o=()=>{if(r.length===0)throw new Oe(fe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Oe(fe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Oe(fe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(o(),s++)}if(o(),a)throw new Oe(fe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Vn(n)}static emptyPath(){return new Vn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(e){this.path=e}static fromPath(e){return new Be(Qt.fromString(e))}static fromName(e){return new Be(Qt.fromString(e).popFirst(5))}static empty(){return new Be(Qt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Qt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Qt.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Be(new Qt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hee(t,e,n){if(!n)throw new Oe(fe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function qee(t,e,n,r){if(e===!0&&r===!0)throw new Oe(fe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function u2(t){if(!Be.isDocumentKey(t))throw new Oe(fe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function JL(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Mj(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":We(12329,{type:typeof t})}function Vl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Oe(fe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Mj(t);throw new Oe(fe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yn(t,e){const n={typeString:t};return e&&(n.value=e),n}function Yf(t,e){if(!JL(t))throw new Oe(fe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const a=t[r];if(s&&typeof a!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(o!==void 0&&a!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new Oe(fe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d2=-62135596800,h2=1e6;class Ft{static now(){return Ft.fromMillis(Date.now())}static fromDate(e){return Ft.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*h2);return new Ft(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<d2)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Oe(fe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/h2}_compareTo(e){return this.seconds===e.seconds?ut(this.nanoseconds,e.nanoseconds):ut(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ft._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Yf(e,Ft._jsonSchema))return new Ft(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-d2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ft._jsonSchemaVersion="firestore/timestamp/1.0",Ft._jsonSchema={type:yn("string",Ft._jsonSchemaVersion),seconds:yn("number"),nanoseconds:yn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{static fromTimestamp(e){return new Qe(e)}static min(){return new Qe(new Ft(0,0))}static max(){return new Qe(new Ft(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hf=-1;function Gee(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Qe.fromTimestamp(r===1e9?new Ft(n+1,0):new Ft(n,r));return new _a(s,Be.empty(),e)}function Kee(t){return new _a(t.readTime,t.key,hf)}class _a{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new _a(Qe.min(),Be.empty(),hf)}static max(){return new _a(Qe.max(),Be.empty(),hf)}}function Qee(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Be.comparator(t.documentKey,e.documentKey),n!==0?n:ut(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yee="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Zee{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nd(t){if(t.code!==fe.FAILED_PRECONDITION||t.message!==Yee)throw t;Ie("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&We(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new ce((r,s)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,s)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof ce?n:ce.resolve(n)}catch(n){return ce.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):ce.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):ce.reject(n)}static resolve(e){return new ce((n,r)=>{n(e)})}static reject(e){return new ce((n,r)=>{r(e)})}static waitFor(e){return new ce((n,r)=>{let s=0,o=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++o,a&&o===s&&n()},c=>r(c))}),a=!0,o===s&&n()})}static or(e){let n=ce.resolve(!1);for(const r of e)n=n.next(s=>s?ce.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,o)=>{r.push(n.call(this,s,o))}),this.waitFor(r)}static mapArray(e,n){return new ce((r,s)=>{const o=e.length,a=new Array(o);let l=0;for(let c=0;c<o;c++){const u=c;n(e[u]).next(d=>{a[u]=d,++l,l===o&&r(a)},d=>s(d))}})}static doWhile(e,n){return new ce((r,s)=>{const o=()=>{e()===!0?n().next(()=>{o()},s):r()};o()})}}function Xee(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function rd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nx{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Nx.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dj=-1;function Tx(t){return t==null}function uy(t){return t===0&&1/t==-1/0}function Jee(t){return typeof t=="number"&&Number.isInteger(t)&&!uy(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="";function ete(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=f2(e)),e=tte(t.get(n),e);return f2(e)}function tte(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const o=t.charAt(s);switch(o){case"\0":n+="";break;case e3:n+="";break;default:n+=o}}return n}function f2(t){return t+e3+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m2(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ma(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function t3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,n){this.comparator=e,this.root=n||On.EMPTY}insert(e,n){return new en(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,On.BLACK,null,null))}remove(e){return new en(this.comparator,this.root.remove(e,this.comparator).copy(null,null,On.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ap(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ap(this.root,e,this.comparator,!1)}getReverseIterator(){return new ap(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ap(this.root,e,this.comparator,!0)}}class ap{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&s&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class On{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??On.RED,this.left=s??On.EMPTY,this.right=o??On.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new On(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const o=r(e,s.key);return s=o<0?s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return On.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return On.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,On.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,On.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw We(43730,{key:this.key,value:this.value});if(this.right.isRed())throw We(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw We(27949);return e+(this.isRed()?0:1)}}On.EMPTY=null,On.RED=!0,On.BLACK=!1;On.EMPTY=new class{constructor(){this.size=0}get key(){throw We(57766)}get value(){throw We(16141)}get color(){throw We(16727)}get left(){throw We(29726)}get right(){throw We(36894)}copy(e,n,r,s,o){return this}insert(e,n,r){return new On(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class En{constructor(e){this.comparator=e,this.data=new en(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new p2(this.data.getIterator())}getIteratorFrom(e){return new p2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof En)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(this.comparator(s,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new En(this.comparator);return n.data=e,n}}class p2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e){this.fields=e,e.sort(Vn.comparator)}static empty(){return new Vr([])}unionWith(e){let n=new En(Vn.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Iu(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new n3("Invalid base64 string: "+o):o}}(e);return new $n(n)}static fromUint8Array(e){const n=function(s){let o="";for(let a=0;a<s.length;++a)o+=String.fromCharCode(s[a]);return o}(e);return new $n(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ut(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$n.EMPTY_BYTE_STRING=new $n("");const nte=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ja(t){if(St(!!t,39018),typeof t=="string"){let e=0;const n=nte.exec(t);if(St(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:dn(t.seconds),nanos:dn(t.nanos)}}function dn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Sa(t){return typeof t=="string"?$n.fromBase64String(t):$n.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3="server_timestamp",s3="__type__",i3="__previous_value__",o3="__local_write_time__";function Lj(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[s3])==null?void 0:r.stringValue)===r3}function Cx(t){const e=t.mapValue.fields[i3];return Lj(e)?Cx(e):e}function ff(t){const e=ja(t.mapValue.fields[o3].timestampValue);return new Ft(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rte{constructor(e,n,r,s,o,a,l,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=u,this.isUsingEmulator=d}}const dy="(default)";class mf{constructor(e,n){this.projectId=e,this.database=n||dy}static empty(){return new mf("","")}get isDefaultDatabase(){return this.database===dy}isEqual(e){return e instanceof mf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3="__type__",l3="__max__",lp={mapValue:{fields:{__type__:{stringValue:l3}}}},c3="__vector__",hy="value";function Na(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lj(t)?4:ite(t)?9007199254740991:ste(t)?10:11:We(28295,{value:t})}function wi(t,e){if(t===e)return!0;const n=Na(t);if(n!==Na(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ff(t).isEqual(ff(e));case 3:return function(s,o){if(typeof s.timestampValue=="string"&&typeof o.timestampValue=="string"&&s.timestampValue.length===o.timestampValue.length)return s.timestampValue===o.timestampValue;const a=ja(s.timestampValue),l=ja(o.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,o){return Sa(s.bytesValue).isEqual(Sa(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,o){return dn(s.geoPointValue.latitude)===dn(o.geoPointValue.latitude)&&dn(s.geoPointValue.longitude)===dn(o.geoPointValue.longitude)}(t,e);case 2:return function(s,o){if("integerValue"in s&&"integerValue"in o)return dn(s.integerValue)===dn(o.integerValue);if("doubleValue"in s&&"doubleValue"in o){const a=dn(s.doubleValue),l=dn(o.doubleValue);return a===l?uy(a)===uy(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return Iu(t.arrayValue.values||[],e.arrayValue.values||[],wi);case 10:case 11:return function(s,o){const a=s.mapValue.fields||{},l=o.mapValue.fields||{};if(m2(a)!==m2(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!wi(a[c],l[c])))return!1;return!0}(t,e);default:return We(52216,{left:t})}}function pf(t,e){return(t.values||[]).find(n=>wi(n,e))!==void 0}function Ru(t,e){if(t===e)return 0;const n=Na(t),r=Na(e);if(n!==r)return ut(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ut(t.booleanValue,e.booleanValue);case 2:return function(o,a){const l=dn(o.integerValue||o.doubleValue),c=dn(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return g2(t.timestampValue,e.timestampValue);case 4:return g2(ff(t),ff(e));case 5:return Sb(t.stringValue,e.stringValue);case 6:return function(o,a){const l=Sa(o),c=Sa(a);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(o,a){const l=o.split("/"),c=a.split("/");for(let u=0;u<l.length&&u<c.length;u++){const d=ut(l[u],c[u]);if(d!==0)return d}return ut(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,a){const l=ut(dn(o.latitude),dn(a.latitude));return l!==0?l:ut(dn(o.longitude),dn(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return y2(t.arrayValue,e.arrayValue);case 10:return function(o,a){var m,g,_,v;const l=o.fields||{},c=a.fields||{},u=(m=l[hy])==null?void 0:m.arrayValue,d=(g=c[hy])==null?void 0:g.arrayValue,h=ut(((_=u==null?void 0:u.values)==null?void 0:_.length)||0,((v=d==null?void 0:d.values)==null?void 0:v.length)||0);return h!==0?h:y2(u,d)}(t.mapValue,e.mapValue);case 11:return function(o,a){if(o===lp.mapValue&&a===lp.mapValue)return 0;if(o===lp.mapValue)return 1;if(a===lp.mapValue)return-1;const l=o.fields||{},c=Object.keys(l),u=a.fields||{},d=Object.keys(u);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){const m=Sb(c[h],d[h]);if(m!==0)return m;const g=Ru(l[c[h]],u[d[h]]);if(g!==0)return g}return ut(c.length,d.length)}(t.mapValue,e.mapValue);default:throw We(23264,{he:n})}}function g2(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ut(t,e);const n=ja(t),r=ja(e),s=ut(n.seconds,r.seconds);return s!==0?s:ut(n.nanos,r.nanos)}function y2(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const o=Ru(n[s],r[s]);if(o)return o}return ut(n.length,r.length)}function Mu(t){return Nb(t)}function Nb(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ja(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Sa(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Be.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const o of n.values||[])s?s=!1:r+=",",r+=Nb(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",o=!0;for(const a of r)o?o=!1:s+=",",s+=`${a}:${Nb(n.fields[a])}`;return s+"}"}(t.mapValue):We(61005,{value:t})}function zp(t){switch(Na(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Cx(t);return e?16+zp(e):16;case 5:return 2*t.stringValue.length;case 6:return Sa(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,o)=>s+zp(o),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ma(r.fields,(o,a)=>{s+=o.length+zp(a)}),s}(t.mapValue);default:throw We(13486,{value:t})}}function Tb(t){return!!t&&"integerValue"in t}function Oj(t){return!!t&&"arrayValue"in t}function x2(t){return!!t&&"nullValue"in t}function v2(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wp(t){return!!t&&"mapValue"in t}function ste(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[a3])==null?void 0:r.stringValue)===c3}function dh(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ma(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=dh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dh(t.arrayValue.values[n]);return e}return{...t}}function ite(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===l3}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this.value=e}static empty(){return new Sr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wp(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dh(n)}setAll(e){let n=Vn.emptyPath(),r={},s=[];e.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=dh(a):s.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,s)}delete(e){const n=this.field(e.popLast());Wp(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return wi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Wp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ma(n,(s,o)=>e[s]=o);for(const s of r)delete e[s]}clone(){return new Sr(dh(this.value))}}function u3(t){const e=[];return Ma(t.fields,(n,r)=>{const s=new Vn([n]);if(Wp(r)){const o=u3(r.mapValue).fields;if(o.length===0)e.push(s);else for(const a of o)e.push(s.child(a))}else e.push(s)}),new Vr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xn{constructor(e,n,r,s,o,a,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=o,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Xn(e,0,Qe.min(),Qe.min(),Qe.min(),Sr.empty(),0)}static newFoundDocument(e,n,r,s){return new Xn(e,1,n,Qe.min(),r,s,0)}static newNoDocument(e,n){return new Xn(e,2,n,Qe.min(),Qe.min(),Sr.empty(),0)}static newUnknownDocument(e,n){return new Xn(e,3,n,Qe.min(),Qe.min(),Sr.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Qe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Sr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Sr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Qe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fy{constructor(e,n){this.position=e,this.inclusive=n}}function w2(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const o=e[s],a=t.position[s];if(o.field.isKeyField()?r=Be.comparator(Be.fromName(a.referenceValue),n.key):r=Ru(a,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function b2(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!wi(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class my{constructor(e,n="asc"){this.field=e,this.dir=n}}function ote(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d3{}class Sn extends d3{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lte(e,n,r):n==="array-contains"?new dte(e,r):n==="in"?new hte(e,r):n==="not-in"?new fte(e,r):n==="array-contains-any"?new mte(e,r):new Sn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cte(e,r):new ute(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ru(n,this.value)):n!==null&&Na(this.value)===Na(n)&&this.matchesComparison(Ru(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return We(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class bi extends d3{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new bi(e,n)}matches(e){return h3(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function h3(t){return t.op==="and"}function f3(t){return ate(t)&&h3(t)}function ate(t){for(const e of t.filters)if(e instanceof bi)return!1;return!0}function Cb(t){if(t instanceof Sn)return t.field.canonicalString()+t.op.toString()+Mu(t.value);if(f3(t))return t.filters.map(e=>Cb(e)).join(",");{const e=t.filters.map(n=>Cb(n)).join(",");return`${t.op}(${e})`}}function m3(t,e){return t instanceof Sn?function(r,s){return s instanceof Sn&&r.op===s.op&&r.field.isEqual(s.field)&&wi(r.value,s.value)}(t,e):t instanceof bi?function(r,s){return s instanceof bi&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((o,a,l)=>o&&m3(a,s.filters[l]),!0):!1}(t,e):void We(19439)}function p3(t){return t instanceof Sn?function(n){return`${n.field.canonicalString()} ${n.op} ${Mu(n.value)}`}(t):t instanceof bi?function(n){return n.op.toString()+" {"+n.getFilters().map(p3).join(" ,")+"}"}(t):"Filter"}class lte extends Sn{constructor(e,n,r){super(e,n,r),this.key=Be.fromName(r.referenceValue)}matches(e){const n=Be.comparator(e.key,this.key);return this.matchesComparison(n)}}class cte extends Sn{constructor(e,n){super(e,"in",n),this.keys=g3("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class ute extends Sn{constructor(e,n){super(e,"not-in",n),this.keys=g3("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function g3(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>Be.fromName(r.referenceValue))}class dte extends Sn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Oj(n)&&pf(n.arrayValue,this.value)}}class hte extends Sn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&pf(this.value.arrayValue,n)}}class fte extends Sn{constructor(e,n){super(e,"not-in",n)}matches(e){if(pf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!pf(this.value.arrayValue,n)}}class mte extends Sn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Oj(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>pf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pte{constructor(e,n=null,r=[],s=[],o=null,a=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=o,this.startAt=a,this.endAt=l,this.Te=null}}function _2(t,e=null,n=[],r=[],s=null,o=null,a=null){return new pte(t,e,n,r,s,o,a)}function Vj(t){const e=Ye(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Cb(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Tx(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Mu(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Mu(r)).join(",")),e.Te=n}return e.Te}function Fj(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ote(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!m3(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!b2(t.startAt,e.startAt)&&b2(t.endAt,e.endAt)}function Eb(t){return Be.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ex{constructor(e,n=null,r=[],s=[],o=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=o,this.limitType=a,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function gte(t,e,n,r,s,o,a,l){return new Ex(t,e,n,r,s,o,a,l)}function Uj(t){return new Ex(t)}function j2(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yte(t){return t.collectionGroup!==null}function hh(t){const e=Ye(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new En(Vn.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(l=l.add(u.field))})}),l})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new my(o,r))}),n.has(Vn.keyField().canonicalString())||e.Ie.push(new my(Vn.keyField(),r))}return e.Ie}function di(t){const e=Ye(t);return e.Ee||(e.Ee=xte(e,hh(t))),e.Ee}function xte(t,e){if(t.limitType==="F")return _2(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const o=s.dir==="desc"?"asc":"desc";return new my(s.field,o)});const n=t.endAt?new fy(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new fy(t.startAt.position,t.startAt.inclusive):null;return _2(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function kb(t,e,n){return new Ex(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function kx(t,e){return Fj(di(t),di(e))&&t.limitType===e.limitType}function y3(t){return`${Vj(di(t))}|lt:${t.limitType}`}function uc(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>p3(s)).join(", ")}]`),Tx(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Mu(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Mu(s)).join(",")),`Target(${r})`}(di(t))}; limitType=${t.limitType})`}function Ax(t,e){return e.isFoundDocument()&&function(r,s){const o=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):Be.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,s){for(const o of hh(r))if(!o.field.isKeyField()&&s.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const o of r.filters)if(!o.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(a,l,c){const u=w2(a,l,c);return a.inclusive?u<=0:u<0}(r.startAt,hh(r),s)||r.endAt&&!function(a,l,c){const u=w2(a,l,c);return a.inclusive?u>=0:u>0}(r.endAt,hh(r),s))}(t,e)}function vte(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function x3(t){return(e,n)=>{let r=!1;for(const s of hh(t)){const o=wte(s,e,n);if(o!==0)return o;r=r||s.field.isKeyField()}return 0}}function wte(t,e,n){const r=t.field.isKeyField()?Be.comparator(e.key,n.key):function(o,a,l){const c=a.data.field(o),u=l.data.field(o);return c!==null&&u!==null?Ru(c,u):We(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return We(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,o]of r)if(this.equalsFn(s,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return void(s[o]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ma(this.inner,(n,r)=>{for(const[s,o]of r)e(s,o)})}isEmpty(){return t3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bte=new en(Be.comparator);function oo(){return bte}const v3=new en(Be.comparator);function Wd(...t){let e=v3;for(const n of t)e=e.insert(n.key,n);return e}function w3(t){let e=v3;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function sl(){return fh()}function b3(){return fh()}function fh(){return new Hl(t=>t.toString(),(t,e)=>t.isEqual(e))}const _te=new en(Be.comparator),jte=new En(Be.comparator);function dt(...t){let e=jte;for(const n of t)e=e.add(n);return e}const Ste=new En(ut);function Nte(){return Ste}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uy(e)?"-0":e}}function _3(t){return{integerValue:""+t}}function Tte(t,e){return Jee(e)?_3(e):Bj(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(){this._=void 0}}function Cte(t,e,n){return t instanceof gf?function(s,o){const a={fields:{[s3]:{stringValue:r3},[o3]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return o&&Lj(o)&&(o=Cx(o)),o&&(a.fields[i3]=o),{mapValue:a}}(n,e):t instanceof yf?S3(t,e):t instanceof xf?N3(t,e):function(s,o){const a=j3(s,o),l=S2(a)+S2(s.Ae);return Tb(a)&&Tb(s.Ae)?_3(l):Bj(s.serializer,l)}(t,e)}function Ete(t,e,n){return t instanceof yf?S3(t,e):t instanceof xf?N3(t,e):n}function j3(t,e){return t instanceof py?function(r){return Tb(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class gf extends Px{}class yf extends Px{constructor(e){super(),this.elements=e}}function S3(t,e){const n=T3(e);for(const r of t.elements)n.some(s=>wi(s,r))||n.push(r);return{arrayValue:{values:n}}}class xf extends Px{constructor(e){super(),this.elements=e}}function N3(t,e){let n=T3(e);for(const r of t.elements)n=n.filter(s=>!wi(s,r));return{arrayValue:{values:n}}}class py extends Px{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function S2(t){return dn(t.integerValue||t.doubleValue)}function T3(t){return Oj(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kte{constructor(e,n){this.field=e,this.transform=n}}function Ate(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof yf&&s instanceof yf||r instanceof xf&&s instanceof xf?Iu(r.elements,s.elements,wi):r instanceof py&&s instanceof py?wi(r.Ae,s.Ae):r instanceof gf&&s instanceof gf}(t.transform,e.transform)}class Pte{constructor(e,n){this.version=e,this.transformResults=n}}class hi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new hi}static exists(e){return new hi(void 0,e)}static updateTime(e){return new hi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Hp(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ix{}function C3(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new k3(t.key,hi.none()):new Zf(t.key,t.data,hi.none());{const n=t.data,r=Sr.empty();let s=new En(Vn.comparator);for(let o of e.fields)if(!s.has(o)){let a=n.field(o);a===null&&o.length>1&&(o=o.popLast(),a=n.field(o)),a===null?r.delete(o):r.set(o,a),s=s.add(o)}return new Da(t.key,r,new Vr(s.toArray()),hi.none())}}function Ite(t,e,n){t instanceof Zf?function(s,o,a){const l=s.value.clone(),c=T2(s.fieldTransforms,o,a.transformResults);l.setAll(c),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Da?function(s,o,a){if(!Hp(s.precondition,o))return void o.convertToUnknownDocument(a.version);const l=T2(s.fieldTransforms,o,a.transformResults),c=o.data;c.setAll(E3(s)),c.setAll(l),o.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(t,e,n):function(s,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,n)}function mh(t,e,n,r){return t instanceof Zf?function(o,a,l,c){if(!Hp(o.precondition,a))return l;const u=o.value.clone(),d=C2(o.fieldTransforms,c,a);return u.setAll(d),a.convertToFoundDocument(a.version,u).setHasLocalMutations(),null}(t,e,n,r):t instanceof Da?function(o,a,l,c){if(!Hp(o.precondition,a))return l;const u=C2(o.fieldTransforms,c,a),d=a.data;return d.setAll(E3(o)),d.setAll(u),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(h=>h.field))}(t,e,n,r):function(o,a,l){return Hp(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,n)}function Rte(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),o=j3(r.transform,s||null);o!=null&&(n===null&&(n=Sr.empty()),n.set(r.field,o))}return n||null}function N2(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Iu(r,s,(o,a)=>Ate(o,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Zf extends Ix{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Da extends Ix{constructor(e,n,r,s,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function E3(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function T2(t,e,n){const r=new Map;St(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const o=t[s],a=o.transform,l=e.data.field(o.field);r.set(o.field,Ete(a,l,n[s]))}return r}function C2(t,e,n){const r=new Map;for(const s of t){const o=s.transform,a=n.data.field(s.field);r.set(s.field,Cte(o,a,e))}return r}class k3 extends Ix{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Mte extends Ix{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dte{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const o=this.mutations[s];o.key.isEqual(e.key)&&Ite(o,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=mh(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=mh(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=b3();return this.mutations.forEach(s=>{const o=e.get(s.key),a=o.overlayedDocument;let l=this.applyToLocalView(a,o.mutatedFields);l=n.has(s.key)?null:l;const c=C3(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(Qe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),dt())}isEqual(e){return this.batchId===e.batchId&&Iu(this.mutations,e.mutations,(n,r)=>N2(n,r))&&Iu(this.baseMutations,e.baseMutations,(n,r)=>N2(n,r))}}class $j{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){St(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return _te}();const o=e.mutations;for(let a=0;a<o.length;a++)s=s.insert(o[a].key,r[a].version);return new $j(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lte{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ote{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn,pt;function Vte(t){switch(t){case fe.OK:return We(64938);case fe.CANCELLED:case fe.UNKNOWN:case fe.DEADLINE_EXCEEDED:case fe.RESOURCE_EXHAUSTED:case fe.INTERNAL:case fe.UNAVAILABLE:case fe.UNAUTHENTICATED:return!1;case fe.INVALID_ARGUMENT:case fe.NOT_FOUND:case fe.ALREADY_EXISTS:case fe.PERMISSION_DENIED:case fe.FAILED_PRECONDITION:case fe.ABORTED:case fe.OUT_OF_RANGE:case fe.UNIMPLEMENTED:case fe.DATA_LOSS:return!0;default:return We(15467,{code:t})}}function A3(t){if(t===void 0)return io("GRPC error has no .code"),fe.UNKNOWN;switch(t){case mn.OK:return fe.OK;case mn.CANCELLED:return fe.CANCELLED;case mn.UNKNOWN:return fe.UNKNOWN;case mn.DEADLINE_EXCEEDED:return fe.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return fe.RESOURCE_EXHAUSTED;case mn.INTERNAL:return fe.INTERNAL;case mn.UNAVAILABLE:return fe.UNAVAILABLE;case mn.UNAUTHENTICATED:return fe.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return fe.INVALID_ARGUMENT;case mn.NOT_FOUND:return fe.NOT_FOUND;case mn.ALREADY_EXISTS:return fe.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return fe.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return fe.FAILED_PRECONDITION;case mn.ABORTED:return fe.ABORTED;case mn.OUT_OF_RANGE:return fe.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return fe.UNIMPLEMENTED;case mn.DATA_LOSS:return fe.DATA_LOSS;default:return We(39323,{code:t})}}(pt=mn||(mn={}))[pt.OK=0]="OK",pt[pt.CANCELLED=1]="CANCELLED",pt[pt.UNKNOWN=2]="UNKNOWN",pt[pt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",pt[pt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",pt[pt.NOT_FOUND=5]="NOT_FOUND",pt[pt.ALREADY_EXISTS=6]="ALREADY_EXISTS",pt[pt.PERMISSION_DENIED=7]="PERMISSION_DENIED",pt[pt.UNAUTHENTICATED=16]="UNAUTHENTICATED",pt[pt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",pt[pt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",pt[pt.ABORTED=10]="ABORTED",pt[pt.OUT_OF_RANGE=11]="OUT_OF_RANGE",pt[pt.UNIMPLEMENTED=12]="UNIMPLEMENTED",pt[pt.INTERNAL=13]="INTERNAL",pt[pt.UNAVAILABLE=14]="UNAVAILABLE",pt[pt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fte(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ute=new ca([4294967295,4294967295],0);function E2(t){const e=Fte().encode(t),n=new HL;return n.update(e),new Uint8Array(n.digest())}function k2(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new ca([n,r],0),new ca([s,o],0)]}class zj{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Hd(`Invalid padding: ${n}`);if(r<0)throw new Hd(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Hd(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Hd(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ca.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ca.fromNumber(r)));return s.compare(Ute)===1&&(s=new ca([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=E2(e),[r,s]=k2(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(r,s,o);if(!this.we(a))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),a=new zj(o,s,n);return r.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const n=E2(e),[r,s]=k2(n);for(let o=0;o<this.hashCount;o++){const a=this.ye(r,s,o);this.Se(a)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Hd extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(e,n,r,s,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Xf.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Rx(Qe.min(),s,new en(ut),oo(),dt())}}class Xf{constructor(e,n,r,s,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Xf(r,n,dt(),dt(),dt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class P3{constructor(e,n){this.targetId=e,this.Ce=n}}class I3{constructor(e,n,r=$n.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class A2{constructor(){this.ve=0,this.Fe=P2(),this.Me=$n.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=dt(),n=dt(),r=dt();return this.Fe.forEach((s,o)=>{switch(o){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:We(38017,{changeType:o})}}),new Xf(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=P2()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,St(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class Bte{constructor(e){this.Ge=e,this.ze=new Map,this.je=oo(),this.Je=cp(),this.He=cp(),this.Ye=new en(ut)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:We(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const o=s.target;if(Eb(o))if(r===0){const a=new Be(o.path);this.et(n,a,Xn.newNoDocument(a,Qe.min()))}else St(r===1,20013,{expectedCount:r});else{const a=this._t(n);if(a!==r){const l=this.ut(e),c=l?this.ct(l,e,a):1;if(c!==0){this.it(n);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,u)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:o=0}=n;let a,l;try{a=Sa(r).toUint8Array()}catch(c){if(c instanceof n3)return Pu("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new zj(a,s,o)}catch(c){return Pu(c instanceof Hd?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(o=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.et(n,o,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((o,a)=>{const l=this.ot(a);if(l){if(o.current&&Eb(l.target)){const c=new Be(l.target.path);this.It(c).has(a)||this.Et(a,c)||this.et(a,c,Xn.newNoDocument(c,e))}o.Be&&(n.set(a,o.ke()),o.qe())}});let r=dt();this.He.forEach((o,a)=>{let l=!0;a.forEachWhile(c=>{const u=this.ot(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.je.forEach((o,a)=>a.setReadTime(e));const s=new Rx(e,n,this.Ye,this.je,r);return this.je=oo(),this.Je=cp(),this.He=cp(),this.Ye=new en(ut),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new A2,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new En(ut),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new En(ut),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Ie("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new A2),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function cp(){return new en(Be.comparator)}function P2(){return new en(Be.comparator)}const $te={asc:"ASCENDING",desc:"DESCENDING"},zte={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wte={and:"AND",or:"OR"};class Hte{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ab(t,e){return t.useProto3Json||Tx(e)?e:{value:e}}function gy(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function R3(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function qte(t,e){return gy(t,e.toTimestamp())}function fi(t){return St(!!t,49232),Qe.fromTimestamp(function(n){const r=ja(n);return new Ft(r.seconds,r.nanos)}(t))}function Wj(t,e){return Pb(t,e).canonicalString()}function Pb(t,e){const n=function(s){return new Qt(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function M3(t){const e=Qt.fromString(t);return St(F3(e),10190,{key:e.toString()}),e}function Ib(t,e){return Wj(t.databaseId,e.path)}function pv(t,e){const n=M3(e);if(n.get(1)!==t.databaseId.projectId)throw new Oe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Oe(fe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Be(L3(n))}function D3(t,e){return Wj(t.databaseId,e)}function Gte(t){const e=M3(t);return e.length===4?Qt.emptyPath():L3(e)}function Rb(t){return new Qt(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function L3(t){return St(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function I2(t,e,n){return{name:Ib(t,e),fields:n.value.mapValue.fields}}function Kte(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:We(39313,{state:u})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],o=function(u,d){return u.useProto3Json?(St(d===void 0||typeof d=="string",58123),$n.fromBase64String(d||"")):(St(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),$n.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(u){const d=u.code===void 0?fe.UNKNOWN:A3(u.code);return new Oe(d,u.message||"")}(a);n=new I3(r,s,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=pv(t,r.document.name),o=fi(r.document.updateTime),a=r.document.createTime?fi(r.document.createTime):Qe.min(),l=new Sr({mapValue:{fields:r.document.fields}}),c=Xn.newFoundDocument(s,o,a,l),u=r.targetIds||[],d=r.removedTargetIds||[];n=new qp(u,d,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=pv(t,r.document),o=r.readTime?fi(r.readTime):Qe.min(),a=Xn.newNoDocument(s,o),l=r.removedTargetIds||[];n=new qp([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=pv(t,r.document),o=r.removedTargetIds||[];n=new qp([],o,s,null)}else{if(!("filter"in e))return We(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:o}=r,a=new Ote(s,o),l=r.targetId;n=new P3(l,a)}}return n}function Qte(t,e){let n;if(e instanceof Zf)n={update:I2(t,e.key,e.value)};else if(e instanceof k3)n={delete:Ib(t,e.key)};else if(e instanceof Da)n={update:I2(t,e.key,e.data),updateMask:sne(e.fieldMask)};else{if(!(e instanceof Mte))return We(16599,{Vt:e.type});n={verify:Ib(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,a){const l=a.transform;if(l instanceof gf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof yf)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof xf)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof py)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw We(20930,{transform:a.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,o){return o.updateTime!==void 0?{updateTime:qte(s,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:We(27497)}(t,e.precondition)),n}function Yte(t,e){return t&&t.length>0?(St(e!==void 0,14353),t.map(n=>function(s,o){let a=s.updateTime?fi(s.updateTime):fi(o);return a.isEqual(Qe.min())&&(a=fi(o)),new Pte(a,s.transformResults||[])}(n,e))):[]}function Zte(t,e){return{documents:[D3(t,e.path)]}}function Xte(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=D3(t,s);const o=function(u){if(u.length!==0)return V3(bi.create(u,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const a=function(u){if(u.length!==0)return u.map(d=>function(m){return{field:dc(m.field),direction:tne(m.dir)}}(d))}(e.orderBy);a&&(n.structuredQuery.orderBy=a);const l=Ab(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{ft:n,parent:s}}function Jte(t){let e=Gte(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){St(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let o=[];n.where&&(o=function(h){const m=O3(h);return m instanceof bi&&f3(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(h){return h.map(m=>function(_){return new my(hc(_.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(h){let m;return m=typeof h=="object"?h.value:h,Tx(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(h){const m=!!h.before,g=h.values||[];return new fy(g,m)}(n.startAt));let u=null;return n.endAt&&(u=function(h){const m=!h.before,g=h.values||[];return new fy(g,m)}(n.endAt)),gte(e,s,a,o,l,"F",c,u)}function ene(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return We(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function O3(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=hc(n.unaryFilter.field);return Sn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=hc(n.unaryFilter.field);return Sn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=hc(n.unaryFilter.field);return Sn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=hc(n.unaryFilter.field);return Sn.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return We(61313);default:return We(60726)}}(t):t.fieldFilter!==void 0?function(n){return Sn.create(hc(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return We(58110);default:return We(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return bi.create(n.compositeFilter.filters.map(r=>O3(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return We(1026)}}(n.compositeFilter.op))}(t):We(30097,{filter:t})}function tne(t){return $te[t]}function nne(t){return zte[t]}function rne(t){return Wte[t]}function dc(t){return{fieldPath:t.canonicalString()}}function hc(t){return Vn.fromServerFormat(t.fieldPath)}function V3(t){return t instanceof Sn?function(n){if(n.op==="=="){if(v2(n.value))return{unaryFilter:{field:dc(n.field),op:"IS_NAN"}};if(x2(n.value))return{unaryFilter:{field:dc(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(v2(n.value))return{unaryFilter:{field:dc(n.field),op:"IS_NOT_NAN"}};if(x2(n.value))return{unaryFilter:{field:dc(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dc(n.field),op:nne(n.op),value:n.value}}}(t):t instanceof bi?function(n){const r=n.getFilters().map(s=>V3(s));return r.length===1?r[0]:{compositeFilter:{op:rne(n.op),filters:r}}}(t):We(54877,{filter:t})}function sne(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function F3(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n,r,s,o=Qe.min(),a=Qe.min(),l=$n.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Qo(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Qo(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ine{constructor(e){this.yt=e}}function one(t){const e=Jte({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?kb(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ane{constructor(){this.Cn=new lne}addToCollectionParentIndex(e,n){return this.Cn.add(n),ce.resolve()}getCollectionParents(e,n){return ce.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return ce.resolve()}deleteFieldIndex(e,n){return ce.resolve()}deleteAllFieldIndexes(e){return ce.resolve()}createTargetIndexes(e,n){return ce.resolve()}getDocumentsMatchingTarget(e,n){return ce.resolve(null)}getIndexType(e,n){return ce.resolve(0)}getFieldIndexes(e,n){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,n){return ce.resolve(_a.min())}getMinOffsetFromCollectionGroup(e,n){return ce.resolve(_a.min())}updateCollectionGroup(e,n,r){return ce.resolve()}updateIndexEntries(e,n){return ce.resolve()}}class lne{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new En(Qt.comparator),o=!s.has(r);return this.index[n]=s.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new En(Qt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},U3=41943040;class _r{static withCacheSize(e){return new _r(e,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r.DEFAULT_COLLECTION_PERCENTILE=10,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,_r.DEFAULT=new _r(U3,_r.DEFAULT_COLLECTION_PERCENTILE,_r.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),_r.DISABLED=new _r(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Du(0)}static cr(){return new Du(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="LruGarbageCollector",cne=1048576;function D2([t,e],[n,r]){const s=ut(t,n);return s===0?ut(e,r):s}class une{constructor(e){this.Ir=e,this.buffer=new En(D2),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();D2(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class dne{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){Ie(M2,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){rd(n)?Ie(M2,"Ignoring IndexedDB error during garbage collection: ",n):await nd(n)}await this.Vr(3e5)})}}class hne{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return ce.resolve(Nx.ce);const r=new une(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Ie("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(R2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ie("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),R2):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,o,a,l,c,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(h=>(h>this.params.maximumSequenceNumbersToCollect?(Ie("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${h}`),s=this.params.maximumSequenceNumbersToCollect):s=h,a=Date.now(),this.nthSequenceNumber(e,s))).next(h=>(r=h,l=Date.now(),this.removeTargets(e,r,n))).next(h=>(o=h,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(h=>(u=Date.now(),cc()<=ct.DEBUG&&Ie("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${o} targets in `+(c-l)+`ms
	Removed ${h} documents in `+(u-c)+`ms
Total Duration: ${u-d}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:o,documentsRemoved:h})))}}function fne(t,e){return new hne(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mne{constructor(){this.changes=new Hl(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?ce.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pne{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gne{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&mh(r.mutation,s,Vr.empty(),Ft.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,dt()).next(()=>r))}getLocalViewOfDocuments(e,n,r=dt()){const s=sl();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(o=>{let a=Wd();return o.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,n){const r=sl();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,dt()))}populateOverlays(e,n,r){const s=[];return r.forEach(o=>{n.has(o)||s.push(o)}),this.documentOverlayCache.getOverlays(e,s).next(o=>{o.forEach((a,l)=>{n.set(a,l)})})}computeViews(e,n,r,s){let o=oo();const a=fh(),l=function(){return fh()}();return n.forEach((c,u)=>{const d=r.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof Da)?o=o.insert(u.key,u):d!==void 0?(a.set(u.key,d.mutation.getFieldMask()),mh(d.mutation,u,d.mutation.getFieldMask(),Ft.now())):a.set(u.key,Vr.empty())}),this.recalculateAndSaveOverlays(e,o).next(c=>(c.forEach((u,d)=>a.set(u,d)),n.forEach((u,d)=>l.set(u,new pne(d,a.get(u)??null))),l))}recalculateAndSaveOverlays(e,n){const r=fh();let s=new en((a,l)=>a-l),o=dt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=n.get(c);if(u===null)return;let d=r.get(c)||Vr.empty();d=l.applyToLocalView(u,d),r.set(c,d);const h=(s.get(l.batchId)||dt()).add(c);s=s.insert(l.batchId,h)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,d=c.value,h=b3();d.forEach(m=>{if(!o.has(m)){const g=C3(n.get(m),r.get(m));g!==null&&h.set(m,g),o=o.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,h))}return ce.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(a){return Be.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yte(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(o=>{const a=s-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-o.size):ce.resolve(sl());let l=hf,c=o;return a.next(u=>ce.forEach(u,(d,h)=>(l<h.largestBatchId&&(l=h.largestBatchId),o.get(d)?ce.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(e,u,o)).next(()=>this.computeViews(e,c,u,dt())).next(d=>({batchId:l,changes:w3(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Be(n)).next(r=>{let s=Wd();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const o=n.collectionGroup;let a=Wd();return this.indexManager.getCollectionParents(e,o).next(l=>ce.forEach(l,c=>{const u=function(h,m){return new Ex(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(n,c.child(o));return this.getDocumentsMatchingCollectionQuery(e,u,r,s).next(d=>{d.forEach((h,m)=>{a=a.insert(h,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,n,r,s){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,s))).next(a=>{o.forEach((c,u)=>{const d=u.getKey();a.get(d)===null&&(a=a.insert(d,Xn.newInvalidDocument(d)))});let l=Wd();return a.forEach((c,u)=>{const d=o.get(c);d!==void 0&&mh(d.mutation,u,Vr.empty(),Ft.now()),Ax(n,u)&&(l=l.insert(c,u))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yne{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return ce.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:fi(s.createTime)}}(n)),ce.resolve()}getNamedQuery(e,n){return ce.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:one(s.bundledQuery),readTime:fi(s.readTime)}}(n)),ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xne{constructor(){this.overlays=new en(Be.comparator),this.qr=new Map}getOverlay(e,n){return ce.resolve(this.overlays.get(n))}getOverlays(e,n){const r=sl();return ce.forEach(n,s=>this.getOverlay(e,s).next(o=>{o!==null&&r.set(s,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,o)=>{this.St(e,n,o)}),ce.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),ce.resolve()}getOverlaysForCollection(e,n,r){const s=sl(),o=n.length+1,a=new Be(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!n.isPrefixOf(u.path))break;u.path.length===o&&c.largestBatchId>r&&s.set(c.getKey(),c)}return ce.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let o=new en((u,d)=>u-d);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===n&&u.largestBatchId>r){let d=o.get(u.largestBatchId);d===null&&(d=sl(),o=o.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const l=sl(),c=o.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,d)=>l.set(u,d)),!(l.size()>=s)););return ce.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new Lte(n,r));let o=this.qr.get(n);o===void 0&&(o=dt(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vne{constructor(){this.sessionToken=$n.EMPTY_BYTE_STRING}getSessionToken(e){return ce.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(){this.Qr=new En(An.$r),this.Ur=new En(An.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new An(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new An(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new Be(new Qt([])),r=new An(n,e),s=new An(n,e+1),o=[];return this.Ur.forEachInRange([r,s],a=>{this.Gr(a),o.push(a.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new Be(new Qt([])),r=new An(n,e),s=new An(n,e+1);let o=dt();return this.Ur.forEachInRange([r,s],a=>{o=o.add(a.key)}),o}containsKey(e){const n=new An(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class An{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return Be.comparator(e.key,n.key)||ut(e.Yr,n.Yr)}static Kr(e,n){return ut(e.Yr,n.Yr)||Be.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wne{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new En(An.$r)}checkEmpty(e){return ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new Dte(o,n,r,s);this.mutationQueue.push(a);for(const l of s)this.Zr=this.Zr.add(new An(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return ce.resolve(a)}lookupMutationBatch(e,n){return ce.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),o=s<0?0:s;return ce.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(this.mutationQueue.length===0?Dj:this.tr-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new An(n,0),s=new An(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,s],a=>{const l=this.Xr(a.Yr);o.push(l)}),ce.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new En(ut);return n.forEach(s=>{const o=new An(s,0),a=new An(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,a],l=>{r=r.add(l.Yr)})}),ce.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let o=r;Be.isDocumentKey(o)||(o=o.child(""));const a=new An(new Be(o),0);let l=new En(ut);return this.Zr.forEachWhile(c=>{const u=c.key.path;return!!r.isPrefixOf(u)&&(u.length===s&&(l=l.add(c.Yr)),!0)},a),ce.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){St(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return ce.forEach(n.mutations,s=>{const o=new An(s.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new An(n,0),s=this.Zr.firstAfterOrEqual(r);return ce.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ce.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bne{constructor(e){this.ri=e,this.docs=function(){return new en(Be.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),o=s?s.size:0,a=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return ce.resolve(r?r.document.mutableCopy():Xn.newInvalidDocument(n))}getEntries(e,n){let r=oo();return n.forEach(s=>{const o=this.docs.get(s);r=r.insert(s,o?o.document.mutableCopy():Xn.newInvalidDocument(s))}),ce.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let o=oo();const a=n.path,l=new Be(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:u,value:{document:d}}=c.getNext();if(!a.isPrefixOf(u.path))break;u.path.length>a.length+1||Qee(Kee(d),r)<=0||(s.has(d.key)||Ax(n,d))&&(o=o.insert(d.key,d.mutableCopy()))}return ce.resolve(o)}getAllFromCollectionGroup(e,n,r,s){We(9500)}ii(e,n){return ce.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new _ne(this)}getSize(e){return ce.resolve(this.size)}}class _ne extends mne{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),ce.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jne{constructor(e){this.persistence=e,this.si=new Hl(n=>Vj(n),Fj),this.lastRemoteSnapshotVersion=Qe.min(),this.highestTargetId=0,this.oi=0,this._i=new Hj,this.targetCount=0,this.ai=Du.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),ce.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Du(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,ce.resolve()}updateTargetData(e,n){return this.Pr(n),ce.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,n,r){let s=0;const o=[];return this.si.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(a),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),ce.waitFor(o).next(()=>s)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return ce.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),ce.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,o=[];return s&&n.forEach(a=>{o.push(s.markPotentiallyOrphaned(e,a))}),ce.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),ce.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return ce.resolve(r)}containsKey(e,n){return ce.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B3{constructor(e,n){this.ui={},this.overlays={},this.ci=new Nx(0),this.li=!1,this.li=!0,this.hi=new vne,this.referenceDelegate=e(this),this.Pi=new jne(this),this.indexManager=new ane,this.remoteDocumentCache=function(s){return new bne(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new ine(n),this.Ii=new yne(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new xne,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new wne(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){Ie("MemoryPersistence","Starting transaction:",e);const s=new Sne(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(o=>this.referenceDelegate.di(s).next(()=>o)).toPromise().then(o=>(s.raiseOnCommittedEvent(),o))}Ai(e,n){return ce.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class Sne extends Zee{constructor(e){super(),this.currentSequenceNumber=e}}class qj{constructor(e){this.persistence=e,this.Ri=new Hj,this.Vi=null}static mi(e){return new qj(e)}get fi(){if(this.Vi)return this.Vi;throw We(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),ce.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),ce.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.fi,r=>{const s=Be.fromPath(r);return this.gi(e,s).next(o=>{o||n.removeEntry(s,Qe.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return ce.or([()=>ce.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class yy{constructor(e,n){this.persistence=e,this.pi=new Hl(r=>ete(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=fne(this,n)}static mi(e,n){return new yy(e,n)}Ei(){}di(e){return ce.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return ce.forEach(this.pi,(r,s)=>this.br(e,r,s).next(o=>o?ce.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),o=s.newChangeBuffer();return s.ii(e,a=>this.br(e,a,n).next(l=>{l||(r++,o.removeEntry(a,Qe.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ce.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),ce.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),ce.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zp(e.data.value)),n}br(e,n,r){return ce.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return ce.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=dt(),s=dt();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:s=s.add(o.doc.key)}return new Gj(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nne{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tne{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return mZ()?8:Xee(sr())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const o={result:null};return this.ys(e,n).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.ws(e,n,s,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;const a=new Nne;return this.Ss(e,n,a).next(l=>{if(o.result=l,this.Vs)return this.bs(e,n,a,l.size)})}).next(()=>o.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(cc()<=ct.DEBUG&&Ie("QueryEngine","SDK will not create cache indexes for query:",uc(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ce.resolve()):(cc()<=ct.DEBUG&&Ie("QueryEngine","Query:",uc(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(cc()<=ct.DEBUG&&Ie("QueryEngine","The SDK decides to create cache indexes for query:",uc(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,di(n))):ce.resolve())}ys(e,n){if(j2(n))return ce.resolve(null);let r=di(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=kb(n,null,"F"),r=di(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const a=dt(...o);return this.ps.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const u=this.Ds(n,l);return this.Cs(n,u,a,c.readTime)?this.ys(e,kb(n,null,"F")):this.vs(e,u,n,c)}))})))}ws(e,n,r,s){return j2(n)||s.isEqual(Qe.min())?ce.resolve(null):this.ps.getDocuments(e,r).next(o=>{const a=this.Ds(n,o);return this.Cs(n,a,r,s)?ce.resolve(null):(cc()<=ct.DEBUG&&Ie("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),uc(n)),this.vs(e,a,n,Gee(s,hf)).next(l=>l))})}Ds(e,n){let r=new En(x3(e));return n.forEach((s,o)=>{Ax(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(s)>0)}Ss(e,n,r){return cc()<=ct.DEBUG&&Ie("QueryEngine","Using full collection scan to execute query:",uc(n)),this.ps.getDocumentsMatchingQuery(e,n,_a.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(o=>(n.forEach(a=>{o=o.insert(a.key,a)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kj="LocalStore",Cne=3e8;class Ene{constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new en(ut),this.xs=new Hl(o=>Vj(o),Fj),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gne(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function kne(t,e,n,r){return new Ene(t,e,n,r)}async function $3(t,e){const n=Ye(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const a=[],l=[];let c=dt();for(const u of s){a.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}for(const u of o){l.push(u.batchId);for(const d of u.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(u=>({Ls:u,removedBatchIds:a,addedBatchIds:l}))})})}function Ane(t,e){const n=Ye(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,u,d){const h=u.batch,m=h.keys();let g=ce.resolve();return m.forEach(_=>{g=g.next(()=>d.getEntry(c,_)).next(v=>{const x=u.docVersions.get(_);St(x!==null,48541),v.version.compareTo(x)<0&&(h.applyToRemoteDocument(v,u),v.isValidDocument()&&(v.setReadTime(u.commitVersion),d.addEntry(v)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(c,h))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=dt();for(let u=0;u<l.mutationResults.length;++u)l.mutationResults[u].transformResults.length>0&&(c=c.add(l.batch.mutations[u].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function z3(t){const e=Ye(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Pne(t,e){const n=Ye(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const a=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((d,h)=>{const m=s.get(h);if(!m)return;l.push(n.Pi.removeMatchingKeys(o,d.removedDocuments,h).next(()=>n.Pi.addMatchingKeys(o,d.addedDocuments,h)));let g=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(h)!==null?g=g.withResumeToken($n.EMPTY_BYTE_STRING,Qe.min()).withLastLimboFreeSnapshotVersion(Qe.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),s=s.insert(h,g),function(v,x,y){return v.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=Cne?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(m,g,d)&&l.push(n.Pi.updateTargetData(o,g))});let c=oo(),u=dt();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,d))}),l.push(Ine(o,a,e.documentUpdates).next(d=>{c=d.ks,u=d.qs})),!r.isEqual(Qe.min())){const d=n.Pi.getLastRemoteSnapshotVersion(o).next(h=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(d)}return ce.waitFor(l).next(()=>a.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,c,u)).next(()=>c)}).then(o=>(n.Ms=s,o))}function Ine(t,e,n){let r=dt(),s=dt();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let a=oo();return n.forEach((l,c)=>{const u=o.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Qe.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):Ie(Kj,"Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{ks:a,qs:s}})}function Rne(t,e){const n=Ye(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Dj),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Mne(t,e){const n=Ye(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(o=>o?(s=o,ce.resolve(s)):n.Pi.allocateTargetId(r).next(a=>(s=new Qo(e,a,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function Mb(t,e,n){const r=Ye(t),s=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!rd(a))throw a;Ie(Kj,`Failed to update sequence numbers for target ${e}: ${a}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function L2(t,e,n){const r=Ye(t);let s=Qe.min(),o=dt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,u,d){const h=Ye(c),m=h.xs.get(d);return m!==void 0?ce.resolve(h.Ms.get(m)):h.Pi.getTargetData(u,d)}(r,a,di(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(a,l.targetId).next(c=>{o=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(a,e,n?s:Qe.min(),n?o:dt())).next(l=>(Dne(r,vte(e),l),{documents:l,Qs:o})))}function Dne(t,e,n){let r=t.Os.get(e)||Qe.min();n.forEach((s,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}class O2{constructor(){this.activeTargetIds=Nte()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lne{constructor(){this.Mo=new O2,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new O2,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class One{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="ConnectivityMonitor";class F2{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){Ie(V2,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){Ie(V2,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let up=null;function Db(){return up===null?up=function(){return 268435456+Math.round(2147483648*Math.random())}():up++,"0x"+up.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="RestConnection",Vne={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Fne{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===dy?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,o){const a=Db(),l=this.zo(e,n.toUriEncodedString());Ie(gv,`Sending RPC '${e}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,o);const{host:u}=new URL(l),d=Xu(u);return this.Jo(e,l,c,r,d).then(h=>(Ie(gv,`Received RPC '${e}' ${a}: `,h),h),h=>{throw Pu(gv,`RPC '${e}' ${a} failed with error: `,h,"url: ",l,"request:",r),h})}Ho(e,n,r,s,o,a){return this.Go(e,n,r,s,o)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+td}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}zo(e,n){const r=Vne[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Une{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn="WebChannelConnection";class Bne extends Fne{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,o){const a=Db();return new Promise((l,c)=>{const u=new qL;u.setWithCredentials(!0),u.listenOnce(GL.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case $p.NO_ERROR:const h=u.getResponseJson();Ie(qn,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(h)),l(h);break;case $p.TIMEOUT:Ie(qn,`RPC '${e}' ${a} timed out`),c(new Oe(fe.DEADLINE_EXCEEDED,"Request time out"));break;case $p.HTTP_ERROR:const m=u.getStatus();if(Ie(qn,`RPC '${e}' ${a} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const v=function(y){const w=y.toLowerCase().replace(/_/g,"-");return Object.values(fe).indexOf(w)>=0?w:fe.UNKNOWN}(_.status);c(new Oe(v,_.message))}else c(new Oe(fe.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new Oe(fe.UNAVAILABLE,"Connection failed."));break;default:We(9055,{l_:e,streamId:a,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{Ie(qn,`RPC '${e}' ${a} completed.`)}});const d=JSON.stringify(s);Ie(qn,`RPC '${e}' ${a} sending request:`,s),u.send(n,"POST",d,r,15)})}T_(e,n,r){const s=Db(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=YL(),l=QL(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=o.join("");Ie(qn,`Creating RPC '${e}' stream ${s}: ${d}`,c);const h=a.createWebChannel(d,c);this.I_(h);let m=!1,g=!1;const _=new Une({Yo:x=>{g?Ie(qn,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(m||(Ie(qn,`Opening RPC '${e}' stream ${s} transport.`),h.open(),m=!0),Ie(qn,`RPC '${e}' stream ${s} sending:`,x),h.send(x))},Zo:()=>h.close()}),v=(x,y,w)=>{x.listen(y,j=>{try{w(j)}catch(E){setTimeout(()=>{throw E},0)}})};return v(h,zd.EventType.OPEN,()=>{g||(Ie(qn,`RPC '${e}' stream ${s} transport opened.`),_.o_())}),v(h,zd.EventType.CLOSE,()=>{g||(g=!0,Ie(qn,`RPC '${e}' stream ${s} transport closed`),_.a_(),this.E_(h))}),v(h,zd.EventType.ERROR,x=>{g||(g=!0,Pu(qn,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),_.a_(new Oe(fe.UNAVAILABLE,"The operation could not be completed")))}),v(h,zd.EventType.MESSAGE,x=>{var y;if(!g){const w=x.data[0];St(!!w,16349);const j=w,E=(j==null?void 0:j.error)||((y=j[0])==null?void 0:y.error);if(E){Ie(qn,`RPC '${e}' stream ${s} received error:`,E);const P=E.status;let U=function(C){const k=mn[C];if(k!==void 0)return A3(k)}(P),T=E.message;U===void 0&&(U=fe.INTERNAL,T="Unknown error status: "+P+" with message "+E.message),g=!0,_.a_(new Oe(U,T)),h.close()}else Ie(qn,`RPC '${e}' stream ${s} received:`,w),_.u_(w)}}),v(l,KL.STAT_EVENT,x=>{x.stat===jb.PROXY?Ie(qn,`RPC '${e}' stream ${s} detected buffering proxy`):x.stat===jb.NOPROXY&&Ie(qn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function yv(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t){return new Hte(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W3{constructor(e,n,r=1e3,s=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&Ie("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U2="PersistentStream";class H3{constructor(e,n,r,s,o,a,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new W3(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===fe.RESOURCE_EXHAUSTED?(io(n.toString()),io("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===fe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new Oe(fe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Ie(U2,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(Ie(U2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $ne extends H3{constructor(e,n,r,s,o,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=Kte(this.serializer,e),r=function(o){if(!("targetChange"in o))return Qe.min();const a=o.targetChange;return a.targetIds&&a.targetIds.length?Qe.min():a.readTime?fi(a.readTime):Qe.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=Rb(this.serializer),n.addTarget=function(o,a){let l;const c=a.target;if(l=Eb(c)?{documents:Zte(o,c)}:{query:Xte(o,c).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=R3(o,a.resumeToken);const u=Ab(o,a.expectedCount);u!==null&&(l.expectedCount=u)}else if(a.snapshotVersion.compareTo(Qe.min())>0){l.readTime=gy(o,a.snapshotVersion.toTimestamp());const u=Ab(o,a.expectedCount);u!==null&&(l.expectedCount=u)}return l}(this.serializer,e);const r=ene(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=Rb(this.serializer),n.removeTarget=e,this.q_(n)}}class zne extends H3{constructor(e,n,r,s,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,a),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return St(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,St(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){St(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Yte(e.writeResults,e.commitTime),r=fi(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Rb(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Qte(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wne{}class Hne extends Wne{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Oe(fe.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Go(e,Pb(n,r),s,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Oe(fe.UNKNOWN,o.toString())})}Ho(e,n,r,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Ho(e,Pb(n,r),s,a,l,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===fe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Oe(fe.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class qne{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(io(n),this.aa=!1):Ie("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl="RemoteStore";class Gne{constructor(e,n,r,s,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(a=>{r.enqueueAndForget(async()=>{ql(this)&&(Ie(Fl,"Restarting streams for network reachability change."),await async function(c){const u=Ye(c);u.Ea.add(4),await Jf(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Dx(u)}(this))})}),this.Ra=new qne(r,s)}}async function Dx(t){if(ql(t))for(const e of t.da)await e(!0)}async function Jf(t){for(const e of t.da)await e(!1)}function q3(t,e){const n=Ye(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xj(n)?Zj(n):sd(n).O_()&&Yj(n,e))}function Qj(t,e){const n=Ye(t),r=sd(n);n.Ia.delete(e),r.O_()&&G3(n,e),n.Ia.size===0&&(r.O_()?r.L_():ql(n)&&n.Ra.set("Unknown"))}function Yj(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Qe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}sd(t).Y_(e)}function G3(t,e){t.Va.Ue(e),sd(t).Z_(e)}function Zj(t){t.Va=new Bte({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),sd(t).start(),t.Ra.ua()}function Xj(t){return ql(t)&&!sd(t).x_()&&t.Ia.size>0}function ql(t){return Ye(t).Ea.size===0}function K3(t){t.Va=void 0}async function Kne(t){t.Ra.set("Online")}async function Qne(t){t.Ia.forEach((e,n)=>{Yj(t,e)})}async function Yne(t,e){K3(t),Xj(t)?(t.Ra.ha(e),Zj(t)):t.Ra.set("Unknown")}async function Zne(t,e,n){if(t.Ra.set("Online"),e instanceof I3&&e.state===2&&e.cause)try{await async function(s,o){const a=o.cause;for(const l of o.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){Ie(Fl,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xy(t,r)}else if(e instanceof qp?t.Va.Ze(e):e instanceof P3?t.Va.st(e):t.Va.tt(e),!n.isEqual(Qe.min()))try{const r=await z3(t.localStore);n.compareTo(r)>=0&&await function(o,a){const l=o.Va.Tt(a);return l.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){const d=o.Ia.get(u);d&&o.Ia.set(u,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,u)=>{const d=o.Ia.get(c);if(!d)return;o.Ia.set(c,d.withResumeToken($n.EMPTY_BYTE_STRING,d.snapshotVersion)),G3(o,c);const h=new Qo(d.target,c,u,d.sequenceNumber);Yj(o,h)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){Ie(Fl,"Failed to raise snapshot:",r),await xy(t,r)}}async function xy(t,e,n){if(!rd(e))throw e;t.Ea.add(1),await Jf(t),t.Ra.set("Offline"),n||(n=()=>z3(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ie(Fl,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Dx(t)})}function Q3(t,e){return e().catch(n=>xy(t,n,e))}async function Lx(t){const e=Ye(t),n=Ta(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dj;for(;Xne(e);)try{const s=await Rne(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Jne(e,s)}catch(s){await xy(e,s)}Y3(e)&&Z3(e)}function Xne(t){return ql(t)&&t.Ta.length<10}function Jne(t,e){t.Ta.push(e);const n=Ta(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Y3(t){return ql(t)&&!Ta(t).x_()&&t.Ta.length>0}function Z3(t){Ta(t).start()}async function ere(t){Ta(t).ra()}async function tre(t){const e=Ta(t);for(const n of t.Ta)e.ea(n.mutations)}async function nre(t,e,n){const r=t.Ta.shift(),s=$j.from(r,e,n);await Q3(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Lx(t)}async function rre(t,e){e&&Ta(t).X_&&await async function(r,s){if(function(a){return Vte(a)&&a!==fe.ABORTED}(s.code)){const o=r.Ta.shift();Ta(r).B_(),await Q3(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,s)),await Lx(r)}}(t,e),Y3(t)&&Z3(t)}async function B2(t,e){const n=Ye(t);n.asyncQueue.verifyOperationInProgress(),Ie(Fl,"RemoteStore received new credentials");const r=ql(n);n.Ea.add(3),await Jf(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Dx(n)}async function sre(t,e){const n=Ye(t);e?(n.Ea.delete(2),await Dx(n)):e||(n.Ea.add(2),await Jf(n),n.Ra.set("Unknown"))}function sd(t){return t.ma||(t.ma=function(n,r,s){const o=Ye(n);return o.sa(),new $ne(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:Kne.bind(null,t),t_:Qne.bind(null,t),r_:Yne.bind(null,t),H_:Zne.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Xj(t)?Zj(t):t.Ra.set("Unknown")):(await t.ma.stop(),K3(t))})),t.ma}function Ta(t){return t.fa||(t.fa=function(n,r,s){const o=Ye(n);return o.sa(),new zne(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:ere.bind(null,t),r_:rre.bind(null,t),ta:tre.bind(null,t),na:nre.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Lx(t)):(await t.fa.stop(),t.Ta.length>0&&(Ie(Fl,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(e,n,r,s,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=o,this.deferred=new ua,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,o){const a=Date.now()+r,l=new Jj(e,n,a,s,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Oe(fe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eS(t,e){if(io("AsyncQueue",`${e}: ${t}`),rd(t))return new Oe(fe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{static emptySet(e){return new Gc(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Be.comparator(n.key,r.key):(n,r)=>Be.comparator(n.key,r.key),this.keyedMap=Wd(),this.sortedSet=new en(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Gc)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,o=r.getNext().key;if(!s.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Gc;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.ga=new en(Be.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):We(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Lu{constructor(e,n,r,s,o,a,l,c,u){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=o,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,n,r,s,o){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Lu(e,n,Gc.emptySet(n),a,r,s,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&kx(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ire{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class ore{constructor(){this.queries=z2(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=Ye(n),o=s.queries;s.queries=z2(),o.forEach((a,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new Oe(fe.ABORTED,"Firestore shutting down"))}}function z2(){return new Hl(t=>y3(t),kx)}async function are(t,e){const n=Ye(t);let r=3;const s=e.query;let o=n.queries.get(s);o?!o.ba()&&e.Da()&&(r=2):(o=new ire,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(s,!0);break;case 1:o.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=eS(a,`Initialization of query '${uc(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&tS(n)}async function lre(t,e){const n=Ye(t),r=e.query;let s=3;const o=n.queries.get(r);if(o){const a=o.Sa.indexOf(e);a>=0&&(o.Sa.splice(a,1),o.Sa.length===0?s=e.Da()?0:1:!o.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function cre(t,e){const n=Ye(t);let r=!1;for(const s of e){const o=s.query,a=n.queries.get(o);if(a){for(const l of a.Sa)l.Fa(s)&&(r=!0);a.wa=s}}r&&tS(n)}function ure(t,e,n){const r=Ye(t),s=r.queries.get(e);if(s)for(const o of s.Sa)o.onError(n);r.queries.delete(e)}function tS(t){t.Ca.forEach(e=>{e.next()})}var Lb,W2;(W2=Lb||(Lb={})).Ma="default",W2.Cache="cache";class dre{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Lu(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Lu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Lb.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.key=e}}class J3{constructor(e){this.key=e}}class hre{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=dt(),this.mutatedKeys=dt(),this.eu=x3(e),this.tu=new Gc(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new $2,s=n?n.tu:this.tu;let o=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((d,h)=>{const m=s.get(d),g=Ax(this.query,h)?h:null,_=!!m&&this.mutatedKeys.has(m.key),v=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let x=!1;m&&g?m.data.isEqual(g.data)?_!==v&&(r.track({type:3,doc:g}),x=!0):this.su(m,g)||(r.track({type:2,doc:g}),x=!0,(c&&this.eu(g,c)>0||u&&this.eu(g,u)<0)&&(l=!0)):!m&&g?(r.track({type:0,doc:g}),x=!0):m&&!g&&(r.track({type:1,doc:m}),x=!0,(c||u)&&(l=!0)),x&&(g?(a=a.add(g),o=v?o.add(d):o.delete(d)):(a=a.delete(d),o=o.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),o=o.delete(d.key),r.track({type:1,doc:d})}return{tu:a,iu:r,Cs:l,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((d,h)=>function(g,_){const v=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return We(20277,{Rt:x})}};return v(g)-v(_)}(d.type,h.type)||this.eu(d.doc,h.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,u=c!==this.Za;return this.Za=c,a.length!==0||u?{snapshot:new Lu(this.query,e.tu,o,a,e.mutatedKeys,c===0,u,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new $2,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=dt(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new J3(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new X3(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=dt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Lu.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const nS="SyncEngine";class fre{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class mre{constructor(e){this.key=e,this.hu=!1}}class pre{constructor(e,n,r,s,o,a){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new Hl(l=>y3(l),kx),this.Iu=new Map,this.Eu=new Set,this.du=new en(Be.comparator),this.Au=new Map,this.Ru=new Hj,this.Vu={},this.mu=new Map,this.fu=Du.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function gre(t,e,n=!0){const r=iO(t);let s;const o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),s=o.view.lu()):s=await eO(r,e,n,!0),s}async function yre(t,e){const n=iO(t);await eO(n,e,!0,!1)}async function eO(t,e,n,r){const s=await Mne(t.localStore,di(e)),o=s.targetId,a=t.sharedClientState.addLocalQueryTarget(o,n);let l;return r&&(l=await xre(t,e,o,a==="current",s.resumeToken)),t.isPrimaryClient&&n&&q3(t.remoteStore,s),l}async function xre(t,e,n,r,s){t.pu=(h,m,g)=>async function(v,x,y,w){let j=x.view.ru(y);j.Cs&&(j=await L2(v.localStore,x.query,!1).then(({documents:T})=>x.view.ru(T,j)));const E=w&&w.targetChanges.get(x.targetId),P=w&&w.targetMismatches.get(x.targetId)!=null,U=x.view.applyChanges(j,v.isPrimaryClient,E,P);return q2(v,x.targetId,U.au),U.snapshot}(t,h,m,g);const o=await L2(t.localStore,e,!0),a=new hre(e,o.Qs),l=a.ru(o.documents),c=Xf.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),u=a.applyChanges(l,t.isPrimaryClient,c);q2(t,n,u.au);const d=new fre(e,n,a);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),u.snapshot}async function vre(t,e,n){const r=Ye(t),s=r.Tu.get(e),o=r.Iu.get(s.targetId);if(o.length>1)return r.Iu.set(s.targetId,o.filter(a=>!kx(a,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Mb(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Qj(r.remoteStore,s.targetId),Ob(r,s.targetId)}).catch(nd)):(Ob(r,s.targetId),await Mb(r.localStore,s.targetId,!0))}async function wre(t,e){const n=Ye(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qj(n.remoteStore,r.targetId))}async function bre(t,e,n){const r=Ere(t);try{const s=await function(a,l){const c=Ye(a),u=Ft.now(),d=l.reduce((g,_)=>g.add(_.key),dt());let h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=oo(),v=dt();return c.Ns.getEntries(g,d).next(x=>{_=x,_.forEach((y,w)=>{w.isValidDocument()||(v=v.add(y))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,_)).next(x=>{h=x;const y=[];for(const w of l){const j=Rte(w,h.get(w.key).overlayedDocument);j!=null&&y.push(new Da(w.key,j,u3(j.value.mapValue),hi.exists(!0)))}return c.mutationQueue.addMutationBatch(g,u,y,l)}).next(x=>{m=x;const y=x.applyToLocalDocumentSet(h,v);return c.documentOverlayCache.saveOverlays(g,x.batchId,y)})}).then(()=>({batchId:m.batchId,changes:w3(h)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(a,l,c){let u=a.Vu[a.currentUser.toKey()];u||(u=new en(ut)),u=u.insert(l,c),a.Vu[a.currentUser.toKey()]=u}(r,s.batchId,n),await em(r,s.changes),await Lx(r.remoteStore)}catch(s){const o=eS(s,"Failed to persist write");n.reject(o)}}async function tO(t,e){const n=Ye(t);try{const r=await Pne(n.localStore,e);e.targetChanges.forEach((s,o)=>{const a=n.Au.get(o);a&&(St(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?St(a.hu,14607):s.removedDocuments.size>0&&(St(a.hu,42227),a.hu=!1))}),await em(n,r,e)}catch(r){await nd(r)}}function H2(t,e,n){const r=Ye(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((o,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=Ye(a);c.onlineState=l;let u=!1;c.queries.forEach((d,h)=>{for(const m of h.Sa)m.va(l)&&(u=!0)}),u&&tS(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _re(t,e,n){const r=Ye(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),o=s&&s.key;if(o){let a=new en(Be.comparator);a=a.insert(o,Xn.newNoDocument(o,Qe.min()));const l=dt().add(o),c=new Rx(Qe.min(),new Map,new en(ut),a,l);await tO(r,c),r.du=r.du.remove(o),r.Au.delete(e),rS(r)}else await Mb(r.localStore,e,!1).then(()=>Ob(r,e,n)).catch(nd)}async function jre(t,e){const n=Ye(t),r=e.batch.batchId;try{const s=await Ane(n.localStore,e);rO(n,r,null),nO(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await em(n,s)}catch(s){await nd(s)}}async function Sre(t,e,n){const r=Ye(t);try{const s=await function(a,l){const c=Ye(a);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let d;return c.mutationQueue.lookupMutationBatch(u,l).next(h=>(St(h!==null,37113),d=h.keys(),c.mutationQueue.removeMutationBatch(u,h))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,d,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d)).next(()=>c.localDocuments.getDocuments(u,d))})}(r.localStore,e);rO(r,e,n),nO(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await em(r,s)}catch(s){await nd(s)}}function nO(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function rO(t,e,n){const r=Ye(t);let s=r.Vu[r.currentUser.toKey()];if(s){const o=s.get(e);o&&(n?o.reject(n):o.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Ob(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||sO(t,r)})}function sO(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Qj(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),rS(t))}function q2(t,e,n){for(const r of n)r instanceof X3?(t.Ru.addReference(r.key,e),Nre(t,r)):r instanceof J3?(Ie(nS,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||sO(t,r.key)):We(19791,{wu:r})}function Nre(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(Ie(nS,"New document in limbo: "+n),t.Eu.add(r),rS(t))}function rS(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Be(Qt.fromString(e)),r=t.fu.next();t.Au.set(r,new mre(n)),t.du=t.du.insert(n,r),q3(t.remoteStore,new Qo(di(Uj(n.path)),r,"TargetPurposeLimboResolution",Nx.ce))}}async function em(t,e,n){const r=Ye(t),s=[],o=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{a.push(r.pu(c,e,n).then(u=>{var d;if((u||n)&&r.isPrimaryClient){const h=u?!u.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(u){s.push(u);const h=Gj.As(c.targetId,u);o.push(h)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(c,u){const d=Ye(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>ce.forEach(u,m=>ce.forEach(m.Es,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>ce.forEach(m.ds,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!rd(h))throw h;Ie(Kj,"Failed to update sequence numbers: "+h)}for(const h of u){const m=h.targetId;if(!h.fromCache){const g=d.Ms.get(m),_=g.snapshotVersion,v=g.withLastLimboFreeSnapshotVersion(_);d.Ms=d.Ms.insert(m,v)}}}(r.localStore,o))}async function Tre(t,e){const n=Ye(t);if(!n.currentUser.isEqual(e)){Ie(nS,"User change. New user:",e.toKey());const r=await $3(n.localStore,e);n.currentUser=e,function(o,a){o.mu.forEach(l=>{l.forEach(c=>{c.reject(new Oe(fe.CANCELLED,a))})}),o.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await em(n,r.Ls)}}function Cre(t,e){const n=Ye(t),r=n.Au.get(e);if(r&&r.hu)return dt().add(r.key);{let s=dt();const o=n.Iu.get(e);if(!o)return s;for(const a of o){const l=n.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function iO(t){const e=Ye(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tO.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Cre.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_re.bind(null,e),e.Pu.H_=cre.bind(null,e.eventManager),e.Pu.yu=ure.bind(null,e.eventManager),e}function Ere(t){const e=Ye(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jre.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Sre.bind(null,e),e}class vy{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Mx(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return kne(this.persistence,new Tne,e.initialUser,this.serializer)}Cu(e){return new B3(qj.mi,this.serializer)}Du(e){return new Lne}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vy.provider={build:()=>new vy};class kre extends vy{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){St(this.persistence.referenceDelegate instanceof yy,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new dne(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?_r.withCacheSize(this.cacheSizeBytes):_r.DEFAULT;return new B3(r=>yy.mi(r,n),this.serializer)}}class Vb{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>H2(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Tre.bind(null,this.syncEngine),await sre(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ore}()}createDatastore(e){const n=Mx(e.databaseInfo.databaseId),r=function(o){return new Bne(o)}(e.databaseInfo);return function(o,a,l,c){return new Hne(o,a,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,o,a,l){return new Gne(r,s,o,a,l)}(this.localStore,this.datastore,e.asyncQueue,n=>H2(this.syncEngine,n,0),function(){return F2.v()?new F2:new One}())}createSyncEngine(e,n){return function(s,o,a,l,c,u,d){const h=new pre(s,o,a,l,c,u);return d&&(h.gu=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const o=Ye(s);Ie(Fl,"RemoteStore shutting down."),o.Ea.add(5),await Jf(o),o.Aa.shutdown(),o.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Vb.provider={build:()=>new Vb};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Are{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):io("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ca="FirestoreClient";class Pre{constructor(e,n,r,s,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Yn.UNAUTHENTICATED,this.clientId=Rj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async a=>{Ie(Ca,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(Ie(Ca,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ua;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=eS(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function xv(t,e){t.asyncQueue.verifyOperationInProgress(),Ie(Ca,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $3(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function G2(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Ire(t);Ie(Ca,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>B2(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>B2(e.remoteStore,s)),t._onlineComponents=e}async function Ire(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ie(Ca,"Using user provided OfflineComponentProvider");try{await xv(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===fe.FAILED_PRECONDITION||s.code===fe.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Pu("Error using user provided cache. Falling back to memory cache: "+n),await xv(t,new vy)}}else Ie(Ca,"Using default OfflineComponentProvider"),await xv(t,new kre(void 0));return t._offlineComponents}async function oO(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ie(Ca,"Using user provided OnlineComponentProvider"),await G2(t,t._uninitializedComponentsProvider._online)):(Ie(Ca,"Using default OnlineComponentProvider"),await G2(t,new Vb))),t._onlineComponents}function Rre(t){return oO(t).then(e=>e.syncEngine)}async function Mre(t){const e=await oO(t),n=e.eventManager;return n.onListen=gre.bind(null,e.syncEngine),n.onUnlisten=vre.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=yre.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=wre.bind(null,e.syncEngine),n}function Dre(t,e,n={}){const r=new ua;return t.asyncQueue.enqueueAndForget(async()=>function(o,a,l,c,u){const d=new Are({next:m=>{d.Nu(),a.enqueueAndForget(()=>lre(o,h));const g=m.docs.has(l);!g&&m.fromCache?u.reject(new Oe(fe.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&c&&c.source==="server"?u.reject(new Oe(fe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(m)},error:m=>u.reject(m)}),h=new dre(Uj(l.path),d,{includeMetadataChanges:!0,qa:!0});return are(o,h)}(await Mre(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K2=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lO="firestore.googleapis.com",Q2=!0;class Y2{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Oe(fe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=lO,this.ssl=Q2}else this.host=e.host,this.ssl=e.ssl??Q2;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=U3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cne)throw new Oe(fe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}qee("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aO(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Oe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Oe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Oe(fe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sS{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Y2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Oe(fe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Oe(fe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Y2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Dee;switch(r.type){case"firstParty":return new Fee(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Oe(fe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=K2.get(n);r&&(Ie("ComponentProvider","Removing Datastore"),K2.delete(n),r.terminate())}(this),Promise.resolve()}}function Lre(t,e,n,r={}){var u;t=Vl(t,sS);const s=Xu(e),o=t._getSettings(),a={...o,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(aL(`https://${l}`),lL("Firestore",!0)),o.host!==lO&&o.host!==l&&Pu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...o,host:l,ssl:s,emulatorOptions:r};if(!Ml(c,a)&&(t._setSettings(c),r.mockUserToken)){let d,h;if(typeof r.mockUserToken=="string")d=r.mockUserToken,h=Yn.MOCK_USER;else{d=iZ(r.mockUserToken,(u=t._app)==null?void 0:u.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Oe(fe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Yn(m)}t._authCredentials=new Lee(new XL(d,h))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new iS(this.firestore,e,this._query)}}class Cn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new vf(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Cn(this.firestore,e,this._key)}toJSON(){return{type:Cn._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Yf(n,Cn._jsonSchema))return new Cn(e,r||null,new Be(Qt.fromString(n.referencePath)))}}Cn._jsonSchemaVersion="firestore/documentReference/1.0",Cn._jsonSchema={type:yn("string",Cn._jsonSchemaVersion),referencePath:yn("string")};class vf extends iS{constructor(e,n,r){super(e,n,Uj(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Cn(this.firestore,null,new Be(e))}withConverter(e){return new vf(this.firestore,e,this._path)}}function Ox(t,e,...n){if(t=fr(t),arguments.length===1&&(e=Rj.newId()),Hee("doc","path",e),t instanceof sS){const r=Qt.fromString(e,...n);return u2(r),new Cn(t,null,new Be(r))}{if(!(t instanceof Cn||t instanceof vf))throw new Oe(fe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Qt.fromString(e,...n));return u2(r),new Cn(t.firestore,t instanceof vf?t.converter:null,new Be(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z2="AsyncQueue";class X2{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new W3(this,"async_queue_retry"),this._c=()=>{const r=yv();r&&Ie(Z2,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=yv();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=yv();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new ua;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!rd(e))throw e;Ie(Z2,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,io("INTERNAL UNHANDLED ERROR: ",J2(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Jj.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(s),s}uc(){this.nc&&We(47125,{Pc:J2(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function J2(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Vx extends sS{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new X2,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new X2(e),this._firestoreClient=void 0,await e}}}function Ore(t,e){const n=typeof t=="object"?t:hL(),r=typeof t=="string"?t:dy,s=bj(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const o=rZ("firestore");o&&Lre(s,...o)}return s}function cO(t){if(t._terminated)throw new Oe(fe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Vre(t),t._firestoreClient}function Vre(t){var r,s,o;const e=t._freezeSettings(),n=function(l,c,u,d){return new rte(l,c,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,aO(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Pre(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ts($n.fromBase64String(e))}catch(n){throw new Oe(fe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ts($n.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:ts._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Yf(e,ts._jsonSchema))return ts.fromBase64String(e.bytes)}}ts._jsonSchemaVersion="firestore/bytes/1.0",ts._jsonSchema={type:yn("string",ts._jsonSchemaVersion),bytes:yn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fx{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Oe(fe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ux{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Oe(fe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Oe(fe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ut(this._lat,e._lat)||ut(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:mi._jsonSchemaVersion}}static fromJSON(e){if(Yf(e,mi._jsonSchema))return new mi(e.latitude,e.longitude)}}mi._jsonSchemaVersion="firestore/geoPoint/1.0",mi._jsonSchema={type:yn("string",mi._jsonSchemaVersion),latitude:yn("number"),longitude:yn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==s[o])return!1;return!0}(this._values,e._values)}toJSON(){return{type:pi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Yf(e,pi._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new pi(e.vectorValues);throw new Oe(fe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}pi._jsonSchemaVersion="firestore/vectorValue/1.0",pi._jsonSchema={type:yn("string",pi._jsonSchemaVersion),vectorValues:yn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fre=/^__.*__$/;class Ure{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Da(e,this.data,this.fieldMask,n,this.fieldTransforms):new Zf(e,this.data,n,this.fieldTransforms)}}class uO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Da(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function dO(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw We(40011,{Ac:t})}}class oS{constructor(e,n,r,s,o,a){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new oS({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return wy(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(dO(this.Ac)&&Fre.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Bre{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Mx(e)}Cc(e,n,r,s=!1){return new oS({Ac:e,methodName:n,Dc:r,path:Vn.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hO(t){const e=t._freezeSettings(),n=Mx(t._databaseId);return new Bre(t._databaseId,!!e.ignoreUndefinedProperties,n)}function $re(t,e,n,r,s,o={}){const a=t.Cc(o.merge||o.mergeFields?2:0,e,n,s);lS("Data must be an object, but it was:",a,r);const l=fO(r,a);let c,u;if(o.merge)c=new Vr(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){const d=[];for(const h of o.mergeFields){const m=Fb(e,h,n);if(!a.contains(m))throw new Oe(fe.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);pO(d,m)||d.push(m)}c=new Vr(d),u=a.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,u=a.fieldTransforms;return new Ure(new Sr(l),c,u)}class Bx extends Ux{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Bx}}class aS extends Ux{_toFieldTransform(e){return new kte(e.path,new gf)}isEqual(e){return e instanceof aS}}function zre(t,e,n,r){const s=t.Cc(1,e,n);lS("Data must be an object, but it was:",s,r);const o=[],a=Sr.empty();Ma(r,(c,u)=>{const d=cS(e,c,n);u=fr(u);const h=s.yc(d);if(u instanceof Bx)o.push(d);else{const m=$x(u,h);m!=null&&(o.push(d),a.set(d,m))}});const l=new Vr(o);return new uO(a,l,s.fieldTransforms)}function Wre(t,e,n,r,s,o){const a=t.Cc(1,e,n),l=[Fb(e,r,n)],c=[s];if(o.length%2!=0)throw new Oe(fe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<o.length;m+=2)l.push(Fb(e,o[m])),c.push(o[m+1]);const u=[],d=Sr.empty();for(let m=l.length-1;m>=0;--m)if(!pO(u,l[m])){const g=l[m];let _=c[m];_=fr(_);const v=a.yc(g);if(_ instanceof Bx)u.push(g);else{const x=$x(_,v);x!=null&&(u.push(g),d.set(g,x))}}const h=new Vr(u);return new uO(d,h,a.fieldTransforms)}function $x(t,e){if(mO(t=fr(t)))return lS("Unsupported field value:",e,t),fO(t,e);if(t instanceof Ux)return function(r,s){if(!dO(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(s);o&&s.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const o=[];let a=0;for(const l of r){let c=$x(l,s.wc(a));c==null&&(c={nullValue:"NULL_VALUE"}),o.push(c),a++}return{arrayValue:{values:o}}}(t,e)}return function(r,s){if((r=fr(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Tte(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ft.fromDate(r);return{timestampValue:gy(s.serializer,o)}}if(r instanceof Ft){const o=new Ft(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:gy(s.serializer,o)}}if(r instanceof mi)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ts)return{bytesValue:R3(s.serializer,r._byteString)};if(r instanceof Cn){const o=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw s.Sc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Wj(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof pi)return function(a,l){return{mapValue:{fields:{[a3]:{stringValue:c3},[hy]:{arrayValue:{values:a.toArray().map(u=>{if(typeof u!="number")throw l.Sc("VectorValues must only contain numeric values.");return Bj(l.serializer,u)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Mj(r)}`)}(t,e)}function fO(t,e){const n={};return t3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ma(t,(r,s)=>{const o=$x(s,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function mO(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ft||t instanceof mi||t instanceof ts||t instanceof Cn||t instanceof Ux||t instanceof pi)}function lS(t,e,n){if(!mO(n)||!JL(n)){const r=Mj(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Fb(t,e,n){if((e=fr(e))instanceof Fx)return e._internalPath;if(typeof e=="string")return cS(t,e);throw wy("Field path arguments must be of type string or ",t,!1,void 0,n)}const Hre=new RegExp("[~\\*/\\[\\]]");function cS(t,e,n){if(e.search(Hre)>=0)throw wy(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Fx(...e.split("."))._internalPath}catch{throw wy(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function wy(t,e,n,r,s){const o=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(o||a)&&(c+=" (found",o&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new Oe(fe.INVALID_ARGUMENT,l+t+c)}function pO(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gO{constructor(e,n,r,s,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qre(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(yO("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class qre extends gO{data(){return super.data()}}function yO(t,e){return typeof e=="string"?cS(t,e):e instanceof Fx?e._internalPath:e._delegate._internalPath}class Gre{convertValue(e,n="none"){switch(Na(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Sa(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw We(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ma(e,(s,o)=>{r[s]=this.convertValue(o,n)}),r}convertVectorValue(e){var r,s,o;const n=(o=(s=(r=e.fields)==null?void 0:r[hy].arrayValue)==null?void 0:s.values)==null?void 0:o.map(a=>dn(a.doubleValue));return new pi(n)}convertGeoPoint(e){return new mi(dn(e.latitude),dn(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Cx(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ff(e));default:return null}}convertTimestamp(e){const n=ja(e);return new Ft(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Qt.fromString(e);St(F3(r),9688,{name:e});const s=new mf(r.get(1),r.get(3)),o=new Be(r.popFirst(5));return s.isEqual(n)||io(`Document ${o} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kre(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class qd{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vl extends gO{constructor(e,n,r,s,o,a){super(e,n,r,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Gp(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yO("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(fe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=vl._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}vl._jsonSchemaVersion="firestore/documentSnapshot/1.0",vl._jsonSchema={type:yn("string",vl._jsonSchemaVersion),bundleSource:yn("string","DocumentSnapshot"),bundleName:yn("string"),bundle:yn("string")};class Gp extends vl{data(e={}){return super.data(e)}}class ph{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new qd(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Gp(this._firestore,this._userDataWriter,r.key,r,new qd(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Oe(fe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,o){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new Gp(s._firestore,s._userDataWriter,l.doc.key,l.doc,new qd(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>o||l.type!==3).map(l=>{const c=new Gp(s._firestore,s._userDataWriter,l.doc.key,l.doc,new qd(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return l.type!==0&&(u=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:Qre(l.type),doc:c,oldIndex:u,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Oe(fe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ph._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rj.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),s.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function Qre(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return We(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xO(t){t=Vl(t,Cn);const e=Vl(t.firestore,Vx);return Dre(cO(e),t._key).then(n=>Xre(e,t,n))}ph._jsonSchemaVersion="firestore/querySnapshot/1.0",ph._jsonSchema={type:yn("string",ph._jsonSchemaVersion),bundleSource:yn("string","QuerySnapshot"),bundleName:yn("string"),bundle:yn("string")};class Yre extends Gre{constructor(e){super(),this.firestore=e}convertBytes(e){return new ts(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Cn(this.firestore,null,n)}}function Zre(t,e,n){t=Vl(t,Cn);const r=Vl(t.firestore,Vx),s=Kre(t.converter,e);return vO(r,[$re(hO(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,hi.none())])}function uS(t,e,n,...r){t=Vl(t,Cn);const s=Vl(t.firestore,Vx),o=hO(s);let a;return a=typeof(e=fr(e))=="string"||e instanceof Fx?Wre(o,"updateDoc",t._key,e,n,r):zre(o,"updateDoc",t._key,e),vO(s,[a.toMutation(t._key,hi.exists(!0))])}function vO(t,e){return function(r,s){const o=new ua;return r.asyncQueue.enqueueAndForget(async()=>bre(await Rre(r),s,o)),o.promise}(cO(t),e)}function Xre(t,e,n){const r=n.docs.get(e._key),s=new Yre(t);return new vl(t,s,e._key,r,new qd(n.hasPendingWrites,n.fromCache),e.converter)}function gh(){return new aS("serverTimestamp")}(function(e,n=!0){(function(s){td=s})(Ju),ku(new Dl("firestore",(r,{instanceIdentifier:s,options:o})=>{const a=r.getProvider("app").getImmediate(),l=new Vx(new Oee(r.getProvider("auth-internal")),new Uee(a,r.getProvider("app-check-internal")),function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Oe(fe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new mf(u.options.projectId,d)}(a,s),a);return o={useFetchStreams:n,...o},l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),la(o2,a2,e),la(o2,a2,"esm2020")})();const Jre={apiKey:void 0,authDomain:"undefined.firebaseapp.com",projectId:void 0,storageBucket:"undefined.firebasestorage.app",appId:void 0},wO=dL(Jre),dS=Ree(wO),zx=Ore(wO),ese=new Oi;async function tse(t){const e=Ox(zx,"users",t.uid),n=await xO(e);if(n.exists())return await uS(e,{lastSignedIn:gh()}),n.data();{const r={uid:t.uid,email:t.email||"",displayName:t.displayName||"",photoURL:t.photoURL||"",lastSignedIn:gh(),createdAt:gh(),gameStats:{totalScore:0,gamesPlayed:0,gamesWon:0,riddlesSolved:0,triviaCorrect:0,burbleWins:0,emojiGuesses:0,geoGuesses:0,schoolTriviaScore:0},preferences:{favoriteGameMode:"",difficulty:"medium",audioFiles:[]}};return await Zre(e,r),r}}async function vv(t){const e=Ox(zx,"users",t),n=await xO(e);return n.exists()?n.data():null}async function nse(t,e){const n=Ox(zx,"users",t);await uS(n,{[`gameStats.${Object.keys(e)[0]}`]:Object.values(e)[0],lastSignedIn:gh()})}async function rse(t,e){const n=Ox(zx,"users",t);await uS(n,{preferences:e,lastSignedIn:gh()})}async function sse(){try{const t=await $J(dS,ese);return await tse(t.user),t.user}catch(t){throw console.error("Error signing in with Google:",t),t}}async function ise(){try{await _J(dS)}catch(t){throw console.error("Error signing out:",t),t}}function ose(t){return bJ(dS,t)}const bO=p.createContext(void 0);function ase({children:t}){const[e,n]=p.useState(null),[r,s]=p.useState(null),[o,a]=p.useState(!0),[l,c]=p.useState(null);p.useEffect(()=>{const g=ose(async _=>{if(n(_),_)try{const v=await vv(_.uid);s(v)}catch(v){console.error("Error loading user profile:",v),c(v.message)}else s(null);a(!1)});return()=>g()},[]);const u=async()=>{c(null);try{await sse()}catch(g){throw c(g.message),g}},d=async()=>{c(null);try{await ise()}catch(g){throw c(g.message),g}},h=async g=>{if(e)try{await nse(e.uid,g);const _=await vv(e.uid);s(_)}catch(_){c(_.message)}},m=async g=>{if(e)try{await rse(e.uid,g);const _=await vv(e.uid);s(_)}catch(_){c(_.message)}};return i.jsx(bO.Provider,{value:{firebaseUser:e,userProfile:r,signInWithGoogle:u,signOut:d,updateGameStats:h,updatePreferences:m,isLoading:o,error:l},children:t})}function _O(){const t=p.useContext(bO);if(t===void 0)throw new Error("useFirebase must be used within a FirebaseProvider");return t}const lse=Nt.object({username:Nt.string().min(3,"Username must be at least 3 characters"),password:Nt.string().min(6,"Password must be at least 6 characters")}),cse=Nt.object({username:Nt.string().min(3,"Username must be at least 3 characters"),email:Nt.string().email("Please enter a valid email address").optional(),password:Nt.string().min(6,"Password must be at least 6 characters"),confirmPassword:Nt.string()}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});function use(){const{user:t,isGuest:e,loginMutation:n,registerMutation:r,playAsGuest:s}=Rn(),{firebaseUser:o,userProfile:a,signInWithGoogle:l}=_O(),{toast:c}=tn(),[u,d]=p.useState("login"),h=Bg({resolver:$g(lse),defaultValues:{username:"",password:""}}),m=Bg({resolver:$g(cse),defaultValues:{username:"",email:"",password:"",confirmPassword:""}}),g=x=>{n.mutate(x)},_=x=>{const{confirmPassword:y,...w}=x;r.mutate(w)},v=async()=>{try{await l(),c({title:"Welcome!",description:"You've successfully signed in with Google. Your progress will be saved to the cloud!"})}catch{c({title:"Sign in failed",description:"There was an error signing in with Google. Please try again.",variant:"destructive"})}};return t||e||o?i.jsx(WP,{to:"/"}):i.jsxs("div",{className:"flex flex-col md:flex-row min-h-screen bg-gradient-to-br from-pink-50 via-purple-50 to-cyan-50",children:[i.jsxs("div",{className:"w-full md:w-1/2 bg-gradient-to-br from-violet-500 via-purple-500 to-fuchsia-500 p-6 md:p-8 flex items-center justify-center relative overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-600/20 via-purple-600/20 to-pink-600/20"}),i.jsxs("div",{className:"max-w-lg text-white relative",children:[i.jsxs("div",{className:"mb-6 md:mb-8 flex items-center justify-center md:justify-start",children:[i.jsx("div",{className:"bg-white/20 p-3 rounded-full mr-4",children:i.jsx(t_,{size:40,className:"text-yellow-200"})}),i.jsx("h1",{className:"text-4xl md:text-5xl font-extrabold bg-gradient-to-r from-yellow-200 to-pink-200 bg-clip-text text-transparent",children:"Burble"})]}),i.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4 md:mb-6 text-center md:text-left",children:"🧠 Train Your Brain with Challenging Puzzles! 🚀"}),i.jsx("p",{className:"text-base md:text-lg mb-6 md:mb-8 text-center md:text-left text-white/95",children:"🎯 Join thousands of users who are improving their cognitive skills with our collection of brain teasers, riddles, and word games."}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 md:gap-6",children:[i.jsxs("div",{className:"bg-white/30 backdrop-blur-sm p-6 rounded-3xl border-2 border-white/20 hover:bg-white/40 transition-all duration-300 transform hover:scale-105 min-h-[160px] flex flex-col justify-center",children:[i.jsx("h3",{className:"font-bold text-lg md:text-xl mb-3 text-center",children:"🎮 Multiple Game Modes"}),i.jsx("p",{className:"text-sm md:text-base text-center text-white/95",children:"From word puzzles to logic challenges, we have games for every type of thinker."})]}),i.jsxs("div",{className:"bg-white/30 backdrop-blur-sm p-6 rounded-3xl border-2 border-white/20 hover:bg-white/40 transition-all duration-300 transform hover:scale-105 min-h-[160px] flex flex-col justify-center",children:[i.jsx("h3",{className:"font-bold text-lg md:text-xl mb-3 text-center",children:"📊 Track Progress"}),i.jsx("p",{className:"text-sm md:text-base text-center text-white/95",children:"See your improvement over time with detailed statistics and achievements."})]})]})]}),i.jsx("div",{className:"absolute top-4 left-4 text-2xl opacity-20 animate-bounce",children:"⭐"}),i.jsx("div",{className:"absolute top-4 right-4 text-2xl opacity-20 animate-bounce delay-500",children:"💫"}),i.jsx("div",{className:"absolute bottom-4 left-1/4 text-xl opacity-20 animate-bounce delay-1000",children:"✨"})]}),i.jsx("div",{className:"w-full md:w-1/2 p-6 md:p-8 flex items-center justify-center",children:i.jsxs(re,{className:"w-full max-w-md bg-white/90 backdrop-blur-sm shadow-2xl border-2 border-purple-200 rounded-3xl",children:[i.jsxs(ye,{className:"space-y-3 text-center",children:[i.jsx("div",{className:"mx-auto bg-gradient-to-r from-purple-500 to-pink-500 p-3 rounded-full w-fit",children:i.jsx("span",{className:"text-2xl",children:"🎮"})}),i.jsx(he,{className:"text-2xl md:text-3xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent",children:"Welcome to Burble! 🎯"}),i.jsx(Ue,{className:"text-center text-gray-600 text-base md:text-lg",children:"🚀 Sign in to your account or create a new one to start your brain training journey!"})]}),i.jsxs(ae,{children:[i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs(ee,{onClick:v,className:"w-full bg-white text-gray-700 border border-gray-300 hover:bg-gray-50",variant:"outline",children:[i.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google (Cloud Save)"]}),i.jsxs("div",{className:"relative",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("span",{className:"w-full border-t"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or use local account"})})]})]}),i.jsxs(Yu,{defaultValue:"login",value:u,onValueChange:d,className:"w-full",children:[i.jsxs(zl,{className:"grid w-full grid-cols-2",children:[i.jsx(gn,{value:"login",children:"Login"}),i.jsx(gn,{value:"register",children:"Register"})]}),i.jsx(Jn,{value:"login",children:i.jsx(zg,{...h,children:i.jsxs("form",{onSubmit:h.handleSubmit(g),className:"space-y-4",children:[i.jsx(an,{control:h.control,name:"username",render:({field:x})=>i.jsxs(qt,{children:[i.jsx(Gt,{children:"Username"}),i.jsx(Kt,{children:i.jsx(Mt,{placeholder:"Username",...x})}),i.jsx(ln,{})]})}),i.jsx(an,{control:h.control,name:"password",render:({field:x})=>i.jsxs(qt,{children:[i.jsx(Gt,{children:"Password"}),i.jsx(Kt,{children:i.jsx(Mt,{type:"password",placeholder:"Password",...x})}),i.jsx(ln,{})]})}),i.jsx(ee,{type:"submit",className:"w-full",disabled:n.isPending,children:n.isPending?"Logging in...":"Login"})]})})}),i.jsx(Jn,{value:"register",children:i.jsx(zg,{...m,children:i.jsxs("form",{onSubmit:m.handleSubmit(_),className:"space-y-4",children:[i.jsx(an,{control:m.control,name:"username",render:({field:x})=>i.jsxs(qt,{children:[i.jsx(Gt,{children:"Username"}),i.jsx(Kt,{children:i.jsx(Mt,{placeholder:"Username",...x})}),i.jsx(ln,{})]})}),i.jsx(an,{control:m.control,name:"email",render:({field:x})=>i.jsxs(qt,{children:[i.jsx(Gt,{children:"Email"}),i.jsx(Kt,{children:i.jsx(Mt,{type:"email",placeholder:"Email address",...x})}),i.jsx(ln,{})]})}),i.jsx(an,{control:m.control,name:"password",render:({field:x})=>i.jsxs(qt,{children:[i.jsx(Gt,{children:"Password"}),i.jsx(Kt,{children:i.jsx(Mt,{type:"password",placeholder:"Password",...x})}),i.jsx(ln,{})]})}),i.jsx(an,{control:m.control,name:"confirmPassword",render:({field:x})=>i.jsxs(qt,{children:[i.jsx(Gt,{children:"Confirm Password"}),i.jsx(Kt,{children:i.jsx(Mt,{type:"password",placeholder:"Confirm password",...x})}),i.jsx(ln,{})]})}),i.jsx(ee,{type:"submit",className:"w-full",disabled:r.isPending,children:r.isPending?"Registering...":"Register"})]})})})]})]}),i.jsxs(Of,{className:"flex flex-col space-y-4",children:[i.jsxs("div",{className:"relative w-full",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("span",{className:"w-full border-t"})}),i.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:i.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),i.jsx(ee,{variant:"outline",className:"w-full",onClick:s,children:"Play as Guest"}),i.jsx("p",{className:"text-center text-sm text-muted-foreground",children:u==="login"?"Don't have an account? Click Register above.":"Already have an account? Click Login above."})]})]})})]})}function dse(){const{user:t}=Rn(),{data:e=[],isLoading:n,error:r}=Et({queryKey:["/api/user",t==null?void 0:t.id,"progress"],enabled:!!t}),{data:s=[],isLoading:o}=Et({queryKey:["/api/riddles/with-categories"],enabled:!!t&&e.length>0}),a=Array.isArray(e)?e.map(u=>{const d=s.find(h=>h.id===u.riddleId);return d?{...u,riddle:d}:{...u,riddle:{id:u.riddleId,question:"Unknown Riddle",answer:"",hint:null,explanation:null,imageUrl:null,categoryId:0,difficulty:"medium",avgSolveTimeSeconds:null,creatorName:null,isFanMade:null,category:{name:"Unknown",colorClass:"gray"}}}}):[],l=a.filter(u=>u.solved),c=a.filter(u=>!u.solved&&(u.hintsUsed&&u.hintsUsed>0||u.timeToSolveSeconds));return{allProgress:a,solvedRiddles:l,attemptedRiddles:c,isLoading:n||o,error:r}}function Fn(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function hse(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}const dp=43200,ek=1440;let fse={};function mse(){return fse}function tk(t){const e=Fn(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Kp(t,e){const n=Fn(t),r=Fn(e),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}function pse(t){return hse(t,Date.now())}function gse(t,e){const n=Fn(t),r=Fn(e),s=n.getFullYear()-r.getFullYear(),o=n.getMonth()-r.getMonth();return s*12+o}function yse(t){return e=>{const r=(t?Math[t]:Math.trunc)(e);return r===0?0:r}}function xse(t,e){return+Fn(t)-+Fn(e)}function vse(t){const e=Fn(t);return e.setHours(23,59,59,999),e}function wse(t){const e=Fn(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function bse(t){const e=Fn(t);return+vse(e)==+wse(e)}function _se(t,e){const n=Fn(t),r=Fn(e),s=Kp(n,r),o=Math.abs(gse(n,r));let a;if(o<1)a=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*o);let l=Kp(n,r)===-s;bse(Fn(t))&&o===1&&Kp(t,r)===1&&(l=!1),a=s*(o-Number(l))}return a===0?0:a}function jse(t,e,n){const r=xse(t,e)/1e3;return yse(n==null?void 0:n.roundingMethod)(r)}const Sse={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Nse=(t,e,n)=>{let r;const s=Sse[t];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};function wv(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Tse={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Cse={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ese={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},kse={date:wv({formats:Tse,defaultWidth:"full"}),time:wv({formats:Cse,defaultWidth:"full"}),dateTime:wv({formats:Ese,defaultWidth:"full"})},Ase={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Pse=(t,e,n,r)=>Ase[t];function Pd(t){return(e,n)=>{const r=n!=null&&n.context?String(n.context):"standalone";let s;if(r==="formatting"&&t.formattingValues){const a=t.defaultFormattingWidth||t.defaultWidth,l=n!=null&&n.width?String(n.width):a;s=t.formattingValues[l]||t.formattingValues[a]}else{const a=t.defaultWidth,l=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[l]||t.values[a]}const o=t.argumentCallback?t.argumentCallback(e):e;return s[o]}}const Ise={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Rse={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Mse={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Dse={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Lse={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Ose={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Vse=(t,e)=>{const n=Number(t),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Fse={ordinalNumber:Vse,era:Pd({values:Ise,defaultWidth:"wide"}),quarter:Pd({values:Rse,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Pd({values:Mse,defaultWidth:"wide"}),day:Pd({values:Dse,defaultWidth:"wide"}),dayPeriod:Pd({values:Lse,defaultWidth:"wide",formattingValues:Ose,defaultFormattingWidth:"wide"})};function Id(t){return(e,n={})=>{const r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],o=e.match(s);if(!o)return null;const a=o[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],c=Array.isArray(l)?Bse(l,h=>h.test(a)):Use(l,h=>h.test(a));let u;u=t.valueCallback?t.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;const d=e.slice(a.length);return{value:u,rest:d}}}function Use(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function Bse(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function $se(t){return(e,n={})=>{const r=e.match(t.matchPattern);if(!r)return null;const s=r[0],o=e.match(t.parsePattern);if(!o)return null;let a=t.valueCallback?t.valueCallback(o[0]):o[0];a=n.valueCallback?n.valueCallback(a):a;const l=e.slice(s.length);return{value:a,rest:l}}}const zse=/^(\d+)(th|st|nd|rd)?/i,Wse=/\d+/i,Hse={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qse={any:[/^b/i,/^(a|c)/i]},Gse={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Kse={any:[/1/i,/2/i,/3/i,/4/i]},Qse={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Yse={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Zse={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Xse={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Jse={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},eie={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},tie={ordinalNumber:$se({matchPattern:zse,parsePattern:Wse,valueCallback:t=>parseInt(t,10)}),era:Id({matchPatterns:Hse,defaultMatchWidth:"wide",parsePatterns:qse,defaultParseWidth:"any"}),quarter:Id({matchPatterns:Gse,defaultMatchWidth:"wide",parsePatterns:Kse,defaultParseWidth:"any",valueCallback:t=>t+1}),month:Id({matchPatterns:Qse,defaultMatchWidth:"wide",parsePatterns:Yse,defaultParseWidth:"any"}),day:Id({matchPatterns:Zse,defaultMatchWidth:"wide",parsePatterns:Xse,defaultParseWidth:"any"}),dayPeriod:Id({matchPatterns:Jse,defaultMatchWidth:"any",parsePatterns:eie,defaultParseWidth:"any"})},nie={code:"en-US",formatDistance:Nse,formatLong:kse,formatRelative:Pse,localize:Fse,match:tie,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rie(t,e,n){const r=mse(),s=(n==null?void 0:n.locale)??r.locale??nie,o=2520,a=Kp(t,e);if(isNaN(a))throw new RangeError("Invalid time value");const l=Object.assign({},n,{addSuffix:n==null?void 0:n.addSuffix,comparison:a});let c,u;a>0?(c=Fn(e),u=Fn(t)):(c=Fn(t),u=Fn(e));const d=jse(u,c),h=(tk(u)-tk(c))/1e3,m=Math.round((d-h)/60);let g;if(m<2)return n!=null&&n.includeSeconds?d<5?s.formatDistance("lessThanXSeconds",5,l):d<10?s.formatDistance("lessThanXSeconds",10,l):d<20?s.formatDistance("lessThanXSeconds",20,l):d<40?s.formatDistance("halfAMinute",0,l):d<60?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",1,l):m===0?s.formatDistance("lessThanXMinutes",1,l):s.formatDistance("xMinutes",m,l);if(m<45)return s.formatDistance("xMinutes",m,l);if(m<90)return s.formatDistance("aboutXHours",1,l);if(m<ek){const _=Math.round(m/60);return s.formatDistance("aboutXHours",_,l)}else{if(m<o)return s.formatDistance("xDays",1,l);if(m<dp){const _=Math.round(m/ek);return s.formatDistance("xDays",_,l)}else if(m<dp*2)return g=Math.round(m/dp),s.formatDistance("aboutXMonths",g,l)}if(g=_se(u,c),g<12){const _=Math.round(m/dp);return s.formatDistance("xMonths",_,l)}else{const _=g%12,v=Math.trunc(g/12);return _<3?s.formatDistance("aboutXYears",v,l):_<9?s.formatDistance("overXYears",v,l):s.formatDistance("almostXYears",v+1,l)}}function nk(t,e){return rie(t,pse(t),e)}var hS="Switch",[sie,nle]=gr(hS),[iie,oie]=sie(hS),jO=p.forwardRef((t,e)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:o,required:a,disabled:l,value:c="on",onCheckedChange:u,form:d,...h}=t,[m,g]=p.useState(null),_=Je(e,j=>g(j)),v=p.useRef(!1),x=m?d||!!m.closest("form"):!0,[y=!1,w]=Zi({prop:s,defaultProp:o,onChange:u});return i.jsxs(iie,{scope:n,checked:y,disabled:l,children:[i.jsx(De.button,{type:"button",role:"switch","aria-checked":y,"aria-required":a,"data-state":TO(y),"data-disabled":l?"":void 0,disabled:l,value:c,...h,ref:_,onClick:we(t.onClick,j=>{w(E=>!E),x&&(v.current=j.isPropagationStopped(),v.current||j.stopPropagation())})}),x&&i.jsx(aie,{control:m,bubbles:!v.current,name:r,value:c,checked:y,required:a,disabled:l,form:d,style:{transform:"translateX(-100%)"}})]})});jO.displayName=hS;var SO="SwitchThumb",NO=p.forwardRef((t,e)=>{const{__scopeSwitch:n,...r}=t,s=oie(SO,n);return i.jsx(De.span,{"data-state":TO(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:e})});NO.displayName=SO;var aie=t=>{const{control:e,checked:n,bubbles:r=!0,...s}=t,o=p.useRef(null),a=A_(n),l=u_(e);return p.useEffect(()=>{const c=o.current,u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"checked").set;if(a!==n&&h){const m=new Event("click",{bubbles:r});h.call(c,n),c.dispatchEvent(m)}},[a,n,r]),i.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...t.style,...l,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function TO(t){return t?"checked":"unchecked"}var CO=jO,lie=NO;const EO=p.forwardRef(({className:t,...e},n)=>i.jsx(CO,{className:Ce("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...e,ref:n,children:i.jsx(lie,{className:Ce("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));EO.displayName=CO.displayName;function cie({currentImageUrl:t,username:e,onUploadComplete:n}){const[r,s]=p.useState(t||null),[o,a]=p.useState(!1),l=p.useRef(null),{toast:c}=tn(),u=$u(),d=v=>v.substring(0,2).toUpperCase(),h=Tn({mutationFn:async v=>Zt("PUT","/api/user/profile-picture",{imageUrl:v}),onSuccess:(v,x)=>{c({title:"Profile picture updated!",description:"Your profile picture has been successfully updated."}),n==null||n(x),u.invalidateQueries({queryKey:["/api/user"]})},onError:v=>{c({title:"Update failed",description:"Failed to update profile picture. Please try again.",variant:"destructive"}),console.error("Profile picture update error:",v)}}),m=async v=>{var y;const x=(y=v.target.files)==null?void 0:y[0];if(x){if(!x.type.startsWith("image/")){c({title:"Invalid file type",description:"Please select an image file (JPEG, PNG, GIF, etc.)",variant:"destructive"});return}if(x.size>5*1024*1024){c({title:"File too large",description:"Please select an image smaller than 5MB",variant:"destructive"});return}try{a(!0);const j=await(await Zt("POST","/api/profile-pictures/upload",{})).json(),{uploadURL:E}=j,P=new FileReader;if(P.onload=S=>{var C;s((C=S.target)==null?void 0:C.result)},P.readAsDataURL(x),!(await fetch(E,{method:"PUT",body:x,headers:{"Content-Type":x.type}})).ok)throw new Error("Upload failed");const T=E.split("?")[0];h.mutate(T)}catch{c({title:"Upload failed",description:"Failed to upload image. Please try again.",variant:"destructive"}),s(t||null)}finally{a(!1)}}},g=async()=>{try{h.mutate(""),s(null)}catch{c({title:"Remove failed",description:"Failed to remove profile picture. Please try again.",variant:"destructive"})}},_=()=>{var v;(v=l.current)==null||v.click()};return i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsx(he,{children:"Profile Picture"}),i.jsx(Ue,{children:"Upload a profile picture to personalize your account. Supports JPEG, PNG, GIF up to 5MB."})]}),i.jsx(ae,{className:"space-y-4",children:i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx(Eg,{className:"w-24 h-24",children:r?i.jsx(S_,{src:r,alt:e}):i.jsx(kg,{className:"bg-gradient-to-br from-purple-500 to-pink-500 text-white text-2xl",children:d(e)})}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ee,{onClick:_,disabled:o||h.isPending,className:"flex items-center gap-2",children:[o||h.isPending?i.jsx(Ko,{className:"h-4 w-4 animate-spin"}):i.jsx(QI,{className:"h-4 w-4"}),r?"Change Picture":"Upload Picture"]}),r&&i.jsxs(ee,{variant:"outline",onClick:g,disabled:o||h.isPending,className:"flex items-center gap-2",children:[i.jsx(KI,{className:"h-4 w-4"}),"Remove"]})]}),i.jsx("input",{ref:l,type:"file",accept:"image/*",onChange:m,className:"hidden"})]})})]})}const uie=Nt.object({username:Nt.string().min(3,{message:"Username must be at least 3 characters long"}).max(20,{message:"Username cannot be longer than 20 characters"}),currentPassword:Nt.string().optional(),newPassword:Nt.string().optional(),confirmPassword:Nt.string().optional(),email:Nt.string().email({message:"Please enter a valid email address"}).optional(),theme:Nt.enum(["light","dark","system"]),notificationsEnabled:Nt.boolean(),difficulty:Nt.enum(["easy","medium","hard"])}).refine(t=>t.newPassword?t.newPassword===t.confirmPassword:!0,{message:"Passwords do not match",path:["confirmPassword"]});function die(){const{user:t,isLoading:e}=Rn(),{favorites:n,isLoadingFavorites:r}=n5(),{solvedRiddles:s,attemptedRiddles:o,isLoading:a}=dse(),[l,c]=Pf(),{toast:u}=tn(),d=()=>{const w=new URLSearchParams(window.location.search).get("tab");return["favorites","history","picture","settings"].includes(w||"")&&w||"favorites"},[h,m]=p.useState(d()),g=Bg({resolver:$g(uie),defaultValues:{username:(t==null?void 0:t.username)||"",currentPassword:"",newPassword:"",confirmPassword:"",email:"",theme:"light",notificationsEnabled:!0,difficulty:"medium"}}),_=y=>{console.log("Settings form submitted",y),u({title:"Settings updated",description:"Your account settings have been saved successfully."})};if(p.useEffect(()=>{const y=d();y!==h&&m(y)},[l]),e)return i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx(Ko,{className:"h-8 w-8 animate-spin text-primary"})});if(!t)return c("/auth"),i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx(Ko,{className:"h-8 w-8 animate-spin text-primary"})});const v=y=>{c("/")},x=y=>{switch(y){case"blue":return"bg-blue-100 text-blue-700";case"green":return"bg-green-100 text-green-700";case"purple":return"bg-purple-100 text-purple-700";case"orange":return"bg-orange-100 text-orange-700";case"red":return"bg-red-100 text-red-700";case"yellow":return"bg-yellow-100 text-yellow-700";case"indigo":return"bg-indigo-100 text-indigo-700";default:return"bg-gray-100 text-gray-700"}};return i.jsxs("div",{className:"container max-w-5xl px-4 md:px-6 py-6 md:py-12",children:[i.jsx("div",{className:"mb-8",children:i.jsxs("h1",{className:"text-3xl font-bold tracking-tight",children:[t.username,"'s Profile"]})}),i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx(zh,{config:t.avatarConfig?JSON.parse(t.avatarConfig):null,username:t.username,profileImageUrl:t.profileImageUrl,size:120,className:"shadow-lg"})}),i.jsxs(Yu,{value:h,onValueChange:y=>{m(y);const w=new URL(window.location.href);y==="favorites"?w.searchParams.delete("tab"):w.searchParams.set("tab",y),window.history.pushState({},"",w.toString())},className:"w-full",children:[i.jsxs(zl,{className:"grid w-full grid-cols-4 mb-6",children:[i.jsx(gn,{value:"favorites",children:"Favorites"}),i.jsx(gn,{value:"history",children:"History"}),i.jsx(gn,{value:"picture",children:"Picture"}),i.jsx(gn,{value:"settings",children:"Settings"})]}),i.jsxs(Jn,{value:"favorites",children:[i.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-3 mb-8",children:[i.jsxs(re,{children:[i.jsx(ye,{className:"pb-2",children:i.jsxs(he,{className:"text-lg",children:[i.jsx(Gm,{className:"h-5 w-5 inline-block mr-2 text-yellow-500"}),"Score"]})}),i.jsxs(ae,{children:[i.jsx("p",{className:"text-3xl font-bold",children:t.score}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Points earned"})]})]}),i.jsxs(re,{children:[i.jsx(ye,{className:"pb-2",children:i.jsxs(he,{className:"text-lg",children:[i.jsx(Ts,{className:"h-5 w-5 inline-block mr-2 text-blue-500"}),"Solved"]})}),i.jsxs(ae,{children:[i.jsx("p",{className:"text-3xl font-bold",children:t.solvedCount}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Riddles completed"})]})]}),i.jsxs(re,{children:[i.jsx(ye,{className:"pb-2",children:i.jsxs(he,{className:"text-lg",children:[i.jsx(Li,{className:"h-5 w-5 inline-block mr-2 text-green-500"}),"Avg. Time"]})}),i.jsxs(ae,{children:[i.jsxs("p",{className:"text-3xl font-bold",children:[t.avgTimeSeconds,"s"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Average solve time"})]})]})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Your Favorites"}),r?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Ko,{className:"h-8 w-8 animate-spin text-primary"})}):!n||n.length===0?i.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[i.jsx("p",{children:"You haven't favorited any riddles yet!"}),i.jsx("p",{className:"mt-2",children:"Browse riddles and click the heart icon to add them here."})]}):i.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:Array.isArray(n)&&n.map(y=>i.jsx(re,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>v(y.riddle.id),children:i.jsxs(ye,{className:"p-4 pb-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(Fe,{className:x(y.riddle.category.colorClass),children:y.riddle.category.name}),i.jsx(Fe,{variant:"outline",children:y.riddle.difficulty.charAt(0).toUpperCase()+y.riddle.difficulty.slice(1)})]}),i.jsx(he,{className:"text-md mt-2 line-clamp-1",children:y.riddle.question}),i.jsxs(Ue,{className:"text-xs",children:["Added ",nk(new Date(y.addedAt||Date.now()),{addSuffix:!0})]})]})},y.id))})]})]}),i.jsxs(Jn,{value:"history",children:[i.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-3 mb-8",children:[i.jsxs(re,{children:[i.jsx(ye,{className:"pb-2",children:i.jsxs(he,{className:"text-lg",children:[i.jsx(Gm,{className:"h-5 w-5 inline-block mr-2 text-yellow-500"}),"Score"]})}),i.jsxs(ae,{children:[i.jsx("p",{className:"text-3xl font-bold",children:t.score}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Points earned"})]})]}),i.jsxs(re,{children:[i.jsx(ye,{className:"pb-2",children:i.jsxs(he,{className:"text-lg",children:[i.jsx(Ts,{className:"h-5 w-5 inline-block mr-2 text-blue-500"}),"Solved"]})}),i.jsxs(ae,{children:[i.jsx("p",{className:"text-3xl font-bold",children:t.solvedCount}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Riddles completed"})]})]}),i.jsxs(re,{children:[i.jsx(ye,{className:"pb-2",children:i.jsxs(he,{className:"text-lg",children:[i.jsx(Li,{className:"h-5 w-5 inline-block mr-2 text-green-500"}),"Avg. Time"]})}),i.jsxs(ae,{children:[i.jsxs("p",{className:"text-3xl font-bold",children:[t.avgTimeSeconds,"s"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Average solve time"})]})]})]}),i.jsxs("div",{className:"border rounded-lg p-4",children:[i.jsx("h2",{className:"text-xl font-bold mb-4",children:"Your Activity History"}),a?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx(Ko,{className:"h-8 w-8 animate-spin text-primary"})}):!s.length&&!o.length?i.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[i.jsx("p",{children:"You haven't solved or attempted any riddles yet!"}),i.jsx("p",{className:"mt-2",children:"Start playing to see your activity here."})]}):i.jsxs("div",{className:"space-y-8",children:[s.length>0&&i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[i.jsx(Oh,{className:"h-5 w-5 mr-2 text-green-500"}),"Solved Riddles"]}),i.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:s.map(y=>i.jsxs(re,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>v(y.riddleId),children:[i.jsxs(ye,{className:"p-4 pb-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(Fe,{className:x(y.riddle.category.colorClass),children:y.riddle.category.name}),i.jsx(Fe,{variant:"outline",children:y.riddle.difficulty.charAt(0).toUpperCase()+y.riddle.difficulty.slice(1)})]}),i.jsx(he,{className:"text-md mt-2 line-clamp-1",children:y.riddle.question}),i.jsxs(Ue,{className:"text-xs flex justify-between items-center",children:[i.jsxs("span",{children:["Solved ",y.solvedAt?nk(new Date(y.solvedAt),{addSuffix:!0}):"recently"]}),i.jsxs("span",{className:"flex items-center",children:[i.jsx(Li,{className:"h-3 w-3 mr-1"}),y.timeToSolveSeconds?`${y.timeToSolveSeconds}s`:"N/A"]})]})]}),i.jsx(ae,{className:"pt-0 pb-4 px-4",children:y.hintsUsed&&y.hintsUsed>0&&i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Used ",y.hintsUsed," hint",y.hintsUsed>1?"s":""]})})]},y.id))})]}),o.length>0&&i.jsxs("div",{children:[i.jsxs("h3",{className:"text-lg font-semibold mb-4 flex items-center",children:[i.jsx(Vh,{className:"h-5 w-5 mr-2 text-amber-500"}),"Attempted Riddles"]}),i.jsx("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-2 lg:grid-cols-3",children:o.map(y=>i.jsxs(re,{className:"cursor-pointer hover:shadow-md transition-shadow",onClick:()=>v(y.riddleId),children:[i.jsxs(ye,{className:"p-4 pb-2",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx(Fe,{className:x(y.riddle.category.colorClass),children:y.riddle.category.name}),i.jsx(Fe,{variant:"outline",children:y.riddle.difficulty.charAt(0).toUpperCase()+y.riddle.difficulty.slice(1)})]}),i.jsx(he,{className:"text-md mt-2 line-clamp-1",children:y.riddle.question})]}),i.jsxs(ae,{className:"pt-0 pb-4 px-4",children:[y.hintsUsed&&y.hintsUsed>0&&i.jsxs("div",{className:"text-xs text-muted-foreground",children:["Used ",y.hintsUsed," hint",y.hintsUsed>1?"s":""]}),i.jsx("div",{className:"mt-2",children:i.jsx(ee,{size:"sm",variant:"outline",className:"w-full",onClick:w=>{w.stopPropagation(),v(y.riddleId)},children:"Continue Solving"})})]})]},y.id))})]})]})]})]}),i.jsxs(Jn,{value:"picture",children:[i.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-3 mb-8",children:[i.jsxs(re,{children:[i.jsx(ye,{className:"pb-2",children:i.jsxs(he,{className:"text-lg",children:[i.jsx(Gm,{className:"h-5 w-5 inline-block mr-2 text-yellow-500"}),"Score"]})}),i.jsxs(ae,{children:[i.jsx("p",{className:"text-3xl font-bold",children:t.score}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Points earned"})]})]}),i.jsxs(re,{children:[i.jsx(ye,{className:"pb-2",children:i.jsxs(he,{className:"text-lg",children:[i.jsx(Ts,{className:"h-5 w-5 inline-block mr-2 text-blue-500"}),"Solved"]})}),i.jsxs(ae,{children:[i.jsx("p",{className:"text-3xl font-bold",children:t.solvedCount}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Riddles completed"})]})]}),i.jsxs(re,{children:[i.jsx(ye,{className:"pb-2",children:i.jsxs(he,{className:"text-lg",children:[i.jsx(Li,{className:"h-5 w-5 inline-block mr-2 text-green-500"}),"Avg. Time"]})}),i.jsxs(ae,{children:[i.jsxs("p",{className:"text-3xl font-bold",children:[t.avgTimeSeconds,"s"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Average solve time"})]})]})]}),i.jsxs("div",{className:"border rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-6",children:"Change Profile Picture"}),i.jsx(cie,{currentImageUrl:t.profileImageUrl,username:t.username,onUploadComplete:y=>{console.log("Profile picture uploaded:",y)}})]})]}),i.jsxs(Jn,{value:"settings",children:[i.jsxs("div",{className:"grid gap-4 grid-cols-1 md:grid-cols-3 mb-8",children:[i.jsxs(re,{children:[i.jsx(ye,{className:"pb-2",children:i.jsxs(he,{className:"text-lg",children:[i.jsx(Gm,{className:"h-5 w-5 inline-block mr-2 text-yellow-500"}),"Score"]})}),i.jsxs(ae,{children:[i.jsx("p",{className:"text-3xl font-bold",children:t.score}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Points earned"})]})]}),i.jsxs(re,{children:[i.jsx(ye,{className:"pb-2",children:i.jsxs(he,{className:"text-lg",children:[i.jsx(Ts,{className:"h-5 w-5 inline-block mr-2 text-blue-500"}),"Solved"]})}),i.jsxs(ae,{children:[i.jsx("p",{className:"text-3xl font-bold",children:t.solvedCount}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Riddles completed"})]})]}),i.jsxs(re,{children:[i.jsx(ye,{className:"pb-2",children:i.jsxs(he,{className:"text-lg",children:[i.jsx(Li,{className:"h-5 w-5 inline-block mr-2 text-green-500"}),"Avg. Time"]})}),i.jsxs(ae,{children:[i.jsxs("p",{className:"text-3xl font-bold",children:[t.avgTimeSeconds,"s"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Average solve time"})]})]})]}),i.jsxs("div",{className:"border rounded-lg p-6",children:[i.jsx("h2",{className:"text-xl font-bold mb-6",children:"Account Settings"}),i.jsx(zg,{...g,children:i.jsxs("form",{onSubmit:g.handleSubmit(_),className:"space-y-6",children:[i.jsxs("div",{className:"grid gap-6 grid-cols-1 md:grid-cols-2",children:[i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsx(he,{children:"Profile Information"}),i.jsx(Ue,{children:"Update your account profile details"})]}),i.jsxs(ae,{className:"space-y-4",children:[i.jsx(an,{control:g.control,name:"username",render:({field:y})=>i.jsxs(qt,{children:[i.jsx(Gt,{children:"Username"}),i.jsx(Kt,{children:i.jsx(Mt,{placeholder:"Your username",...y})}),i.jsx(es,{children:"This is your public display name"}),i.jsx(ln,{})]})}),i.jsx(an,{control:g.control,name:"email",render:({field:y})=>i.jsxs(qt,{children:[i.jsx(Gt,{children:"Email"}),i.jsx(Kt,{children:i.jsx(Mt,{placeholder:"Your email",...y})}),i.jsx(es,{children:"We'll use this for notifications"}),i.jsx(ln,{})]})})]})]}),i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsx(he,{children:"Change Password"}),i.jsx(Ue,{children:"Update your password to keep your account secure"})]}),i.jsxs(ae,{className:"space-y-4",children:[i.jsx(an,{control:g.control,name:"currentPassword",render:({field:y})=>i.jsxs(qt,{children:[i.jsx(Gt,{children:"Current Password"}),i.jsx(Kt,{children:i.jsx(Mt,{type:"password",placeholder:"••••••••",...y})}),i.jsx(ln,{})]})}),i.jsx(an,{control:g.control,name:"newPassword",render:({field:y})=>i.jsxs(qt,{children:[i.jsx(Gt,{children:"New Password"}),i.jsx(Kt,{children:i.jsx(Mt,{type:"password",placeholder:"••••••••",...y})}),i.jsx(ln,{})]})}),i.jsx(an,{control:g.control,name:"confirmPassword",render:({field:y})=>i.jsxs(qt,{children:[i.jsx(Gt,{children:"Confirm New Password"}),i.jsx(Kt,{children:i.jsx(Mt,{type:"password",placeholder:"••••••••",...y})}),i.jsx(ln,{})]})})]})]})]}),i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsx(he,{children:"Game Preferences"}),i.jsx(Ue,{children:"Customize your gaming experience"})]}),i.jsxs(ae,{className:"space-y-6",children:[i.jsxs("div",{className:"grid gap-6 grid-cols-1 md:grid-cols-2",children:[i.jsx(an,{control:g.control,name:"theme",render:({field:y})=>i.jsxs(qt,{children:[i.jsx(Gt,{children:"Theme"}),i.jsxs(Es,{onValueChange:y.onChange,defaultValue:y.value,children:[i.jsx(Kt,{children:i.jsx(rs,{children:i.jsx(ks,{placeholder:"Select a theme"})})}),i.jsxs(ss,{children:[i.jsx(gt,{value:"light",children:"Light"}),i.jsx(gt,{value:"dark",children:"Dark"}),i.jsx(gt,{value:"system",children:"System"})]})]}),i.jsx(es,{children:"Choose how Burble looks for you"}),i.jsx(ln,{})]})}),i.jsx(an,{control:g.control,name:"difficulty",render:({field:y})=>i.jsxs(qt,{children:[i.jsx(Gt,{children:"Default Difficulty"}),i.jsxs(Es,{onValueChange:y.onChange,defaultValue:y.value,children:[i.jsx(Kt,{children:i.jsx(rs,{children:i.jsx(ks,{placeholder:"Select a difficulty"})})}),i.jsxs(ss,{children:[i.jsx(gt,{value:"easy",children:"Easy"}),i.jsx(gt,{value:"medium",children:"Medium"}),i.jsx(gt,{value:"hard",children:"Hard"})]})]}),i.jsx(es,{children:"Set your preferred challenge level"}),i.jsx(ln,{})]})})]}),i.jsx(an,{control:g.control,name:"notificationsEnabled",render:({field:y})=>i.jsxs(qt,{className:"flex flex-row items-center justify-between space-y-0 rounded-md border p-4",children:[i.jsxs("div",{className:"space-y-0.5",children:[i.jsx(Gt,{className:"text-base",children:"Notifications"}),i.jsx(es,{children:"Receive updates about new riddles and features"})]}),i.jsx(Kt,{children:i.jsx(EO,{checked:y.value,onCheckedChange:y.onChange})})]})})]}),i.jsx(Of,{children:i.jsxs(ee,{type:"submit",className:"w-full md:w-auto",children:[i.jsx($U,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})})]})]})]})]})}function hie(){const{data:t=[],isLoading:e,error:n}=Et({queryKey:["/api/leaderboard"]});return{leaderboard:t,isLoading:e,error:n}}const kO=p.forwardRef(({className:t,...e},n)=>i.jsx("div",{className:"relative w-full overflow-auto",children:i.jsx("table",{ref:n,className:Ce("w-full caption-bottom text-sm",t),...e})}));kO.displayName="Table";const AO=p.forwardRef(({className:t,...e},n)=>i.jsx("thead",{ref:n,className:Ce("[&_tr]:border-b",t),...e}));AO.displayName="TableHeader";const PO=p.forwardRef(({className:t,...e},n)=>i.jsx("tbody",{ref:n,className:Ce("[&_tr:last-child]:border-0",t),...e}));PO.displayName="TableBody";const fie=p.forwardRef(({className:t,...e},n)=>i.jsx("tfoot",{ref:n,className:Ce("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...e}));fie.displayName="TableFooter";const Qp=p.forwardRef(({className:t,...e},n)=>i.jsx("tr",{ref:n,className:Ce("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...e}));Qp.displayName="TableRow";const ms=p.forwardRef(({className:t,...e},n)=>i.jsx("th",{ref:n,className:Ce("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...e}));ms.displayName="TableHead";const Kr=p.forwardRef(({className:t,...e},n)=>i.jsx("td",{ref:n,className:Ce("p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...e}));Kr.displayName="TableCell";const mie=p.forwardRef(({className:t,...e},n)=>i.jsx("caption",{ref:n,className:Ce("mt-4 text-sm text-muted-foreground",t),...e}));mie.displayName="TableCaption";function pie(t){if(!t)return"0s";if(t<60)return`${Math.round(t)}s`;const e=Math.floor(t/60),n=Math.round(t%60);return`${e}m ${n}s`}function gie(){const{leaderboard:t,isLoading:e}=hie(),{user:n}=Rn(),s=(()=>{if(!n)return null;const a=t.findIndex(l=>l.id===n.id);return a>=0?a+1:null})(),o=({rank:a})=>a===1?i.jsx(si,{className:"h-5 w-5 text-yellow-500"}):a===2?i.jsx(si,{className:"h-5 w-5 text-gray-400"}):a===3?i.jsx(si,{className:"h-5 w-5 text-amber-700"}):i.jsx("span",{children:a});return e?i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx(Ko,{className:"h-8 w-8 animate-spin text-primary"})}):i.jsxs("div",{className:"container max-w-5xl px-4 md:px-6 py-6 md:py-12",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Leaderboard"}),i.jsx("p",{className:"text-muted-foreground mt-2",children:"See how you stack up against other players!"})]}),n&&s&&i.jsxs(re,{className:"mb-8 border-2 border-primary/20 bg-primary/5",children:[i.jsxs(ye,{className:"pb-2",children:[i.jsx(he,{children:"Your Ranking"}),i.jsx(Ue,{children:"Here's where you stand on the leaderboard"})]}),i.jsx(ae,{children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"relative",children:[i.jsx(zh,{config:n.avatarConfig?JSON.parse(n.avatarConfig):null,username:n.username,profileImageUrl:n.profileImageUrl,size:48}),i.jsx("div",{className:"absolute -bottom-1 -right-1 bg-primary text-primary-foreground text-xs font-bold rounded-full w-6 h-6 flex items-center justify-center",children:s})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-xl font-bold",children:n.username}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[n.solvedCount," puzzles solved"]}),i.jsxs("div",{className:"flex gap-2 mt-1 text-xs text-muted-foreground flex-wrap",children:[i.jsxs("span",{children:["Burble: ",n.burbleCount||0]}),i.jsxs("span",{children:["Valentine: ",n.valentineCount||0]}),i.jsxs("span",{children:["Emoji: ",n.emojiCount||0]}),i.jsxs("span",{children:["Trivia: ",n.triviaCount||0]}),i.jsxs("span",{children:["Animals: ",n.animalTriviaCount||0]})]})]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-3xl font-bold",children:n.score}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"points"})]})]})})]}),i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsx(he,{children:"Top Players"}),i.jsx(Ue,{children:"Based on total score"})]}),i.jsx(ae,{children:i.jsxs(kO,{children:[i.jsx(AO,{children:i.jsxs(Qp,{children:[i.jsx(ms,{className:"w-[80px]",children:"Rank"}),i.jsx(ms,{children:"Player"}),i.jsx(ms,{className:"text-center",children:"Burble"}),i.jsx(ms,{className:"text-center",children:"Valentine"}),i.jsx(ms,{className:"text-center",children:"Emoji"}),i.jsx(ms,{className:"text-center",children:"Trivia"}),i.jsx(ms,{className:"text-center",children:"Animals"}),i.jsx(ms,{className:"text-center",children:"Total Solved"}),i.jsx(ms,{className:"text-center",children:"Avg. Time"}),i.jsx(ms,{className:"text-right",children:"Score"})]})}),i.jsx(PO,{children:t.length>0?t.map((a,l)=>i.jsxs(Qp,{className:a.id===(n==null?void 0:n.id)?"bg-primary/5 font-medium":"",children:[i.jsx(Kr,{className:"font-medium",children:i.jsx("div",{className:"flex items-center justify-center",children:i.jsx(o,{rank:l+1})})}),i.jsx(Kr,{children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(zh,{config:a.avatarConfig?JSON.parse(a.avatarConfig):null,username:a.username,profileImageUrl:a.profileImageUrl,size:32}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"font-medium",children:a.username}),a.id===(n==null?void 0:n.id)&&i.jsx(Fe,{variant:"outline",className:"w-fit text-xs",children:"You"})]})]})}),i.jsx(Kr,{className:"text-center",children:a.burbleCount||0}),i.jsx(Kr,{className:"text-center",children:a.valentineCount||0}),i.jsx(Kr,{className:"text-center",children:a.emojiCount||0}),i.jsx(Kr,{className:"text-center",children:a.triviaCount||0}),i.jsx(Kr,{className:"text-center",children:a.animalTriviaCount||0}),i.jsx(Kr,{className:"text-center",children:a.solvedCount}),i.jsx(Kr,{className:"text-center",children:pie(a.avgTimeSeconds)}),i.jsx(Kr,{className:"text-right font-bold",children:a.score})]},a.id)):i.jsx(Qp,{children:i.jsx(Kr,{colSpan:10,className:"text-center py-6 text-muted-foreground",children:"Start solving puzzles to appear on the leaderboard!"})})})]})})]})]})}function yie({riddle:t,userAnswer:e,setUserAnswer:n,onCheckAnswer:r,onGetHint:s,onNextRiddle:o,onPreviousRiddle:a,timeLeft:l,hintsUsed:c,isCheckingAnswer:u,isPaused:d,riddlesCount:h,currentRiddleIndex:m,onShowAnswer:g}){const[_,v]=p.useState(!1);p.useEffect(()=>{v(!1)},[t.id]);const x=w=>{switch(w){case"primary":return"bg-primary/20 text-primary-foreground dark:bg-primary/30 dark:text-primary font-semibold";case"secondary":return"bg-secondary/20 text-secondary-foreground dark:bg-secondary/30 dark:text-secondary font-semibold";case"accent":return"bg-accent/20 text-accent-foreground dark:bg-accent/30 dark:text-accent font-semibold";case"warning":return"bg-orange-500/20 text-orange-700 dark:bg-orange-500/30 dark:text-orange-400 font-semibold";case"dark":return"bg-gray-800/20 text-gray-800 dark:bg-gray-300/20 dark:text-gray-300 font-semibold";default:return"bg-primary/20 text-primary-foreground dark:bg-primary/30 dark:text-primary font-semibold"}},y=w=>{w.preventDefault(),r()};return i.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-4 md:p-6 mb-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:`${x(t.category.colorClass)} text-sm font-medium px-3 py-1 rounded-full`,children:t.category.name}),i.jsxs("span",{className:"ml-3 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 text-sm font-medium px-2.5 py-0.5 rounded-full flex items-center",children:[i.jsx("i",{className:"ri-star-line mr-1"}),t.difficulty.charAt(0).toUpperCase()+t.difficulty.slice(1)]}),i.jsx("div",{className:"ml-2",children:i.jsx(s5,{riddleId:t.id,size:"sm"})})]}),i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-dark-light text-sm mr-2",children:"Hints Used:"}),i.jsxs("div",{className:"flex items-center",children:[Array.from({length:5}).map((w,j)=>i.jsx("div",{className:`w-3 h-3 mx-0.5 rounded-full ${j<c?"bg-accent":"bg-light-gray"}`},j)),i.jsxs("span",{className:"ml-2 text-dark font-medium",children:[c,"/5"]})]})]})]}),i.jsxs("div",{className:"mb-6 text-center py-6",children:[t.imageUrl&&i.jsx("div",{className:"mb-6 flex justify-center",children:i.jsxs("div",{className:"relative",children:[i.jsx("img",{src:t.imageUrl,alt:"Visual riddle",className:"max-w-full max-h-64 object-contain rounded-xl shadow-lg border-4 border-primary/20 transition-all duration-300 hover:scale-102"}),i.jsx("div",{className:"absolute top-3 right-3",children:i.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-white text-primary border-2 border-primary shadow-md",children:[i.jsx("i",{className:"ri-image-line mr-1.5"}),"Visual Riddle"]})})]})}),t.answer===""?i.jsx(i.Fragment,{children:i.jsxs("div",{className:"my-8 p-8 bg-gradient-to-br from-green-50 to-teal-50 border-2 border-green-200 rounded-2xl shadow-lg",children:[i.jsx("div",{className:"animate-bounce mb-4",children:i.jsx("i",{className:"ri-trophy-fill text-5xl text-yellow-500"})}),i.jsx("div",{className:"celebrate",children:i.jsx("h3",{className:"text-3xl font-bold font-poppins bg-gradient-to-r from-green-600 to-teal-500 bg-clip-text text-transparent mb-4",children:t.question})}),i.jsx("div",{className:"mb-4 text-green-700",children:"You've solved all the riddles in this category! Great job!"}),i.jsxs("button",{onClick:o,className:"fun-button mt-4 px-8 py-3 bg-white text-green-700 border-2 border-green-500 rounded-full font-bold transition-all shadow-lg hover:shadow-xl hover:bg-green-50",children:["Try Another Category",i.jsx("i",{className:"ri-rocket-2-line ml-2"})]})]})}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"mb-6 mx-auto max-w-xl",children:[i.jsxs("div",{className:"relative mb-6",children:[i.jsx("div",{className:"absolute -top-12 -left-12 w-20 h-20 rounded-full bg-primary/5 z-0"}),i.jsx("div",{className:"absolute -bottom-8 -right-8 w-16 h-16 rounded-full bg-secondary/5 z-0"}),i.jsx("h3",{className:"text-2xl font-bold font-poppins text-dark relative z-10 p-4 rounded-xl bg-white/70 shadow-sm border border-gray-100",children:t.question})]}),i.jsx("div",{className:"inline-block px-4 py-2 rounded-full bg-light-gray/50 mb-2",children:i.jsxs("p",{className:"text-dark-light text-sm font-medium",children:["Riddle #",m," of ",h]})})]}),t.imageUrl&&i.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-full inline-block px-4 py-1 mx-auto",children:i.jsxs("p",{className:"text-xs text-yellow-700 font-medium",children:[i.jsx("i",{className:"ri-lightbulb-line mr-1"}),"Look carefully at the visual elements in the image to solve this puzzle"]})})]})]}),t.answer!==""&&i.jsxs(i.Fragment,{children:[_&&i.jsxs("div",{className:"mb-8 p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl border-2 border-primary/20 shadow-lg text-center relative overflow-hidden",children:[i.jsx("div",{className:"absolute -top-4 -right-4 w-20 h-20 rotate-12 bg-primary opacity-5 rounded-lg"}),i.jsx("div",{className:"absolute -bottom-4 -left-4 w-16 h-16 -rotate-12 bg-secondary opacity-5 rounded-lg"}),i.jsxs("div",{className:"relative z-10",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-primary/10 mb-3",children:i.jsx("i",{className:"ri-magic-line text-xl text-primary"})}),i.jsx("h4",{className:"text-xl font-bold mb-3 text-primary",children:"The Answer Is:"}),i.jsx("p",{className:"font-bold text-2xl mb-4 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent",children:t.answer}),t.explanation&&i.jsxs("div",{className:"mt-4 pt-4 border-t border-primary/10",children:[i.jsxs("h5",{className:"text-sm font-bold text-dark-light mb-2",children:[i.jsx("i",{className:"ri-lightbulb-flash-line mr-1"}),"Explanation:"]}),i.jsx("p",{className:"text-dark-light text-sm bg-white/50 p-3 rounded-xl",children:t.explanation})]}),i.jsxs("div",{className:"mt-6 pt-4 border-t border-primary/10",children:[i.jsxs("button",{className:"bg-gradient-to-r from-green-500 to-teal-600 hover:from-green-600 hover:to-teal-700 text-white flex items-center px-6 py-3 rounded-full font-bold shadow-lg transition transform duration-200 hover:scale-105 mx-auto",onClick:o,children:[i.jsx("i",{className:"ri-arrow-right-circle-line mr-2 text-lg"}),"Next Question",i.jsx("i",{className:"ri-sparkle-line ml-2 text-lg"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Try another riddle from this category"})]})]})]}),i.jsxs("form",{onSubmit:y,className:"mb-8 max-w-xl mx-auto",children:[i.jsx("div",{className:"text-center mb-2",children:i.jsxs("span",{className:"inline-block text-sm font-medium text-primary mb-2",children:[i.jsx("i",{className:"ri-mental-health-line mr-1"}),"What's your answer?"]})}),i.jsxs("div",{className:"flex shadow-lg rounded-full overflow-hidden border-2 border-primary/30 bg-white",children:[i.jsx(Mt,{type:"text",placeholder:"Type your answer here...",className:"flex-1 border-0 focus:ring-2 focus:ring-primary focus:ring-opacity-30 rounded-l-full px-6 py-4 text-base font-medium outline-none transition-all duration-300",value:e,onChange:w=>n(w.target.value),disabled:u||d}),i.jsx(ee,{className:"fun-button px-8 py-4 rounded-r-full font-bold transition-all",type:"submit",disabled:u||!e.trim()||d,children:u?i.jsxs("div",{className:"flex items-center",children:[i.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v2a6 6 0 00-6 6H4z"})]}),"Checking..."]}):i.jsxs(i.Fragment,{children:[i.jsx("i",{className:"ri-send-plane-fill mr-1"}),"Submit"]})})]}),i.jsx("div",{className:"text-center mt-2",children:i.jsx("span",{className:"text-xs text-gray-500",children:"Tip: Answers can be a single word or short phrase"})})]}),i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsx("div",{className:"flex flex-wrap justify-center gap-4 mb-6",children:i.jsxs("div",{className:"flex flex-wrap gap-3 justify-center",children:[i.jsxs("div",{className:"relative group",children:[i.jsxs("button",{className:`bg-gradient-to-br ${c>=5?"from-gray-300 to-gray-400 opacity-70":"from-yellow-400 to-amber-500 hover:from-yellow-500 hover:to-amber-600"} text-white flex items-center px-4 py-2 rounded-xl font-bold shadow-md transition transform duration-200 ${c<5?"hover:scale-105":""}`,onClick:s,disabled:d||c>=5,children:[i.jsx("div",{className:"bg-white/20 rounded-full p-1 mr-2",children:i.jsx("i",{className:"ri-lightbulb-flash-fill text-lg"})}),c>=5?"Out of Hints!":"Get Next Hint",i.jsx("span",{className:"ml-2 text-xs bg-white/30 px-2 py-0.5 rounded-full font-bold",children:"-5 pts"})]}),i.jsxs("div",{className:"absolute -top-10 left-1/2 transform -translate-x-1/2 bg-black/80 text-white text-xs px-3 py-1.5 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:[c,"/5 hints used"]})]}),i.jsx(_5,{riddle:t.question}),i.jsxs("button",{className:`bg-gradient-to-br ${_?"from-gray-300 to-gray-400 opacity-70":"from-purple-500 to-indigo-600 hover:from-purple-600 hover:to-indigo-700"} text-white flex items-center px-4 py-2 rounded-xl font-bold shadow-md transition transform duration-200 ${_?"":"hover:scale-105"}`,onClick:()=>{window.confirm("Want to see the answer? No points will be awarded.")&&(v(!0),g&&g())},disabled:d||_,children:[i.jsx("div",{className:"bg-white/20 rounded-full p-1 mr-2",children:i.jsx("i",{className:"ri-eye-line text-lg"})}),"Show Answer",i.jsx("span",{className:"ml-2 text-xs bg-white/30 px-2 py-0.5 rounded-full font-bold",children:"0 pts"})]})]})}),i.jsxs("div",{className:"flex justify-center gap-4 mb-4",children:[i.jsxs("button",{className:"bg-gradient-to-r from-blue-400 to-cyan-500 hover:from-blue-500 hover:to-cyan-600 text-white flex items-center px-5 py-2 rounded-full font-bold shadow-md transition transform duration-200 hover:scale-105",onClick:a,disabled:d,children:[i.jsx("i",{className:"ri-arrow-left-line mr-1.5 text-lg"}),"Previous"]}),i.jsxs("button",{className:"bg-gradient-to-r from-teal-400 to-green-500 hover:from-teal-500 hover:to-green-600 text-white flex items-center px-5 py-2 rounded-full font-bold shadow-md transition transform duration-200 hover:scale-105",onClick:o,disabled:d,children:["Next",i.jsx("i",{className:"ri-arrow-right-line ml-1.5 text-lg"})]})]})]})]}),t.answer===""&&i.jsx("div",{className:"flex justify-center mt-6 mb-4",children:i.jsxs("button",{className:"bg-gradient-to-r from-blue-400 to-cyan-500 hover:from-blue-500 hover:to-cyan-600 text-white flex items-center px-5 py-2 rounded-full font-bold shadow-md transition transform duration-200 hover:scale-105",onClick:a,children:[i.jsx("i",{className:"ri-arrow-left-line mr-1.5 text-lg"}),"Previous Puzzle"]})})]})}const xie="modulepreload",vie=function(t){return"/"+t},rk={},wie=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=vie(c),c in rk)return;rk[c]=!0;const u=c.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${d}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":xie,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((m,g)=>{h.addEventListener("load",m),h.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},bie=({isOpen:t,onClose:e,riddleAnswer:n,explanation:r,timeToSolve:s,pointsEarned:o,onNextRiddle:a,onBackToMenu:l})=>(p.useEffect(()=>{t&&(async()=>{try{const u=(await wie(async()=>{const{default:d}=await Promise.resolve().then(()=>Oie);return{default:d}},void 0)).default;u({particleCount:100,spread:70,origin:{y:.6}})}catch(u){console.error("Could not load confetti",u)}})()},[t]),i.jsx(sf,{open:t,onOpenChange:e,modal:!1,children:i.jsx(ju,{className:"sm:max-w-md mx-4 rounded-xl shadow-xl p-6 fade-in",onPointerDownOutside:c=>c.preventDefault(),children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-20 h-20 mx-auto bg-success bg-opacity-10 rounded-full flex items-center justify-center text-success mb-4 celebrate",children:i.jsx("i",{className:"ri-check-line text-4xl"})}),i.jsx(Su,{className:"text-2xl font-bold font-poppins text-dark mb-2",children:"Correct!"}),i.jsxs(hx,{className:"text-dark-light mb-4",children:['The answer is "',n,'"']}),i.jsx("div",{className:"bg-light-gray p-3 rounded-lg mb-4",children:i.jsx("p",{className:"text-dark-light text-sm",children:r})}),i.jsxs("div",{className:"flex justify-between items-center bg-light p-3 rounded-lg mb-6",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-dark-light text-sm",children:"Time taken"}),i.jsxs("p",{className:"font-bold text-dark",children:[s," seconds"]})]}),i.jsxs("div",{children:[i.jsx("p",{className:"text-dark-light text-sm",children:"Points earned"}),i.jsxs("p",{className:"font-bold text-success",children:["+",o," pts"]})]})]}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx(ee,{onClick:l,variant:"outline",className:"flex-1 bg-light-gray hover:bg-light-gray/80 text-dark font-medium py-3 rounded-lg transition duration-200",children:"Back to Menu"}),i.jsx(ee,{onClick:a,className:"flex-1 bg-primary hover:bg-primary/90 text-white font-medium py-3 rounded-lg transition duration-200",children:"Next Riddle"})]}),i.jsx("p",{className:"text-xs text-gray-500 mt-4",children:"You can continue to browse while this dialog is open"})]})})}));function _ie(){const{toast:t}=tn(),[e,n]=X8("/category/:id"),r=n!=null&&n.id?parseInt(n.id):null,{riddlesWithCategories:s,categories:o,getRandomUnsolvedRiddle:a,getRiddlesByCategory:l,getUnsolvedRiddlesByCategory:c,isLoadingRiddles:u,isLoadingCategories:d}=LR(),{currentRiddle:h,setCurrentRiddle:m,userAnswer:g,setUserAnswer:_,isCorrectModalOpen:v,setIsCorrectModalOpen:x,isWrongModalOpen:y,setIsWrongModalOpen:w,timeLeft:j,hintsUsed:E,pointsEarned:P,timeToSolve:U,checkAnswer:T,getHint:S,resetGame:C,userStats:k,isCheckingAnswer:I,isPaused:R,currentHint:A,showAnswer:G,attemptCount:ue,MAX_ATTEMPTS:B}=OR(),q=o.find($=>$.id===r),O=l(r),F=c(r);p.useEffect(()=>{if(r&&O.length>0&&!h){const $=a(r);$&&(m($),C())}},[r,O,h,m,a,C]);const D=()=>{if(O.length>0){const K=(O.findIndex(Y=>Y.id===(h==null?void 0:h.id))+1)%O.length;m(O[K]),C()}},L=()=>{if(O.length>0){const K=(O.findIndex(Y=>Y.id===(h==null?void 0:h.id))-1+O.length)%O.length;m(O[K]),C()}},X=()=>{const $=a(r);$&&(m($),C())};return d||u?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-purple-600 mx-auto mb-4"}),i.jsx("p",{className:"text-gray-600",children:"Loading category..."})]})}):q?O.length===0?i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"No Riddles Available"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"This category doesn't have any riddles yet."}),i.jsx(vt,{href:"/",children:i.jsxs(ee,{children:[i.jsx(ml,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})]})}):i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-gradient-to-br from-purple-600 via-blue-600 to-indigo-700 text-white",children:i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx(vt,{href:"/",children:i.jsxs(ee,{variant:"outline",className:"text-white border-white hover:bg-white hover:text-purple-600",children:[i.jsx(ml,{className:"h-4 w-4 mr-2"}),"Back to Categories"]})}),i.jsxs(ee,{variant:"outline",className:"text-white border-white hover:bg-white hover:text-purple-600",onClick:X,children:[i.jsx(qI,{className:"h-4 w-4 mr-2"}),"Random Riddle"]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-3xl md:text-4xl font-bold mb-2",children:q.name}),i.jsx("p",{className:"text-lg opacity-90 mb-4",children:q.description}),i.jsxs("div",{className:"flex items-center justify-center gap-6 text-sm",children:[i.jsxs("span",{children:["Total Riddles: ",O.length]}),i.jsx("span",{children:"•"}),i.jsxs("span",{children:["Unsolved: ",F.length]}),h&&i.jsxs(i.Fragment,{children:[i.jsx("span",{children:"•"}),i.jsxs("span",{children:["Current: ",O.findIndex($=>$.id===h.id)+1," of ",O.length]})]})]})]})]})}),i.jsx("div",{className:"container mx-auto px-4 py-8",children:h?i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsx(yie,{riddle:h,userAnswer:g,setUserAnswer:_,onCheckAnswer:T,onGetHint:S,onNextRiddle:D,onPreviousRiddle:L,timeLeft:j,hintsUsed:E,isCheckingAnswer:I,isPaused:R,riddlesCount:O.length,currentRiddleIndex:O.findIndex($=>$.id===h.id)+1,onShowAnswer:G})}):i.jsx("div",{className:"text-center",children:i.jsx("p",{className:"text-gray-600",children:"No riddle available. Try refreshing the page."})})}),i.jsx(bie,{isOpen:v,onClose:()=>x(!1),riddleAnswer:(h==null?void 0:h.answer)||"",explanation:(h==null?void 0:h.explanation)||"",timeToSolve:U,pointsEarned:P,onNextRiddle:()=>{x(!1),D()},onBackToMenu:()=>{x(!1),C()}}),i.jsx(E5,{isOpen:y,onClose:()=>w(!1),userAnswer:g,onShowAnswer:()=>{w(!1),t({title:"The answer is:",description:h==null?void 0:h.answer,duration:5e3})},onTryAgain:()=>{w(!1),_("")},onNextQuestion:()=>{w(!1),D(),t({title:"Next question loaded!",description:"Try this new riddle instead."})},hint:A||(h==null?void 0:h.hint)||"No hint available.",isAttemptsExhausted:ue>=B})]}):i.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Category Not Found"}),i.jsx("p",{className:"text-gray-600 mb-6",children:"The category you're looking for doesn't exist."}),i.jsx(vt,{href:"/",children:i.jsxs(ee,{children:[i.jsx(ml,{className:"h-4 w-4 mr-2"}),"Back to Home"]})})]})})}const hp=[{question:"What is the capital of France?",options:["Paris","London","Berlin","Madrid"],correct:0,difficulty:"easy"},{question:"What color do you get by mixing red and yellow?",options:["Orange","Purple","Green","Blue"],correct:0,difficulty:"easy"},{question:"Which planet is known as the Red Planet?",options:["Mars","Venus","Jupiter","Saturn"],correct:0,difficulty:"easy"},{question:'Who wrote "Romeo and Juliet"?',options:["William Shakespeare","Charles Dickens","Mark Twain","Jane Austen"],correct:0,difficulty:"easy"},{question:"How many continents are there?",options:["Seven","Six","Five","Eight"],correct:0,difficulty:"easy"},{question:"Which animal is known as man's best friend?",options:["Dog","Cat","Horse","Bird"],correct:0,difficulty:"easy"},{question:"What do bees produce?",options:["Honey","Silk","Milk","Oil"],correct:0,difficulty:"easy"},{question:'Which Disney movie features the song "Let It Go"?',options:["Frozen","Moana","Tangled","Pocahontas"],correct:0,difficulty:"easy"},{question:"What is the tallest mammal in the world?",options:["Giraffe","Elephant","Blue Whale","Horse"],correct:0,difficulty:"easy"},{question:"Who is the US president on the $1 bill?",options:["George Washington","Abraham Lincoln","Thomas Jefferson","Benjamin Franklin"],correct:0,difficulty:"easy"},{question:"What is H2O commonly known as?",options:["Water","Salt","Oil","Sugar"],correct:0,difficulty:"easy"},{question:"How many sides does a triangle have?",options:["Three","Four","Five","Six"],correct:0,difficulty:"easy"},{question:"What is the largest ocean in the world?",options:["Pacific Ocean","Atlantic Ocean","Indian Ocean","Arctic Ocean"],correct:0,difficulty:"easy"},{question:"What is the main ingredient in guacamole?",options:["Avocado","Tomato","Onion","Pepper"],correct:0,difficulty:"easy"},{question:"What color are school buses in the United States?",options:["Yellow","Orange","Red","Blue"],correct:0,difficulty:"easy"},{question:"Which continent is Egypt in?",options:["Africa","Asia","Europe","South America"],correct:0,difficulty:"easy"},{question:"How many players are there on a soccer team (on the field)?",options:["Eleven","Ten","Nine","Twelve"],correct:0,difficulty:"easy"},{question:"Which month has an extra day in a leap year?",options:["February","March","April","January"],correct:0,difficulty:"easy"},{question:"In which sport would you use a putter?",options:["Golf","Tennis","Baseball","Basketball"],correct:0,difficulty:"easy"},{question:"What is the capital of Japan?",options:["Tokyo","Osaka","Kyoto","Hiroshima"],correct:0,difficulty:"easy"},{question:"What fruit is known for keeping doctors away?",options:["Apple","Orange","Banana","Grape"],correct:0,difficulty:"easy"},{question:"Who was the first President of the United States?",options:["George Washington","Thomas Jefferson","John Adams","Benjamin Franklin"],correct:0,difficulty:"easy"},{question:"In what year did the Titanic sink?",options:["1912","1914","1910","1915"],correct:0,difficulty:"easy"},{question:"How many colors are there in a rainbow?",options:["Seven","Six","Eight","Five"],correct:0,difficulty:"easy"},{question:"What gas do plants take in from the air?",options:["Carbon dioxide","Oxygen","Nitrogen","Hydrogen"],correct:0,difficulty:"easy"},{question:"What's the smallest country in the world?",options:["Vatican City","Monaco","San Marino","Liechtenstein"],correct:0,difficulty:"easy"},{question:"How many legs does a spider have?",options:["Eight","Six","Ten","Twelve"],correct:0,difficulty:"easy"},{question:"Which composer wrote Beethoven's Fifth Symphony?",options:["Ludwig van Beethoven","Wolfgang Mozart","Johann Bach","Franz Schubert"],correct:0,difficulty:"easy"},{question:"What is the largest organ in the human body?",options:["Skin","Liver","Brain","Heart"],correct:0,difficulty:"easy"},{question:"What currency is used in Japan?",options:["Yen","Won","Yuan","Dollar"],correct:0,difficulty:"easy"},{question:"What was the first country to use postcards?",options:["Austria","Germany","France","England"],correct:0,difficulty:"medium"},{question:"Which vitamin is produced when a person is exposed to sunlight?",options:["Vitamin D","Vitamin C","Vitamin A","Vitamin B"],correct:0,difficulty:"medium"},{question:"What is the name for a group of lions?",options:["Pride","Pack","Herd","Flock"],correct:0,difficulty:"medium"},{question:"In which country would you find the ancient city of Petra?",options:["Jordan","Egypt","Syria","Lebanon"],correct:0,difficulty:"medium"},{question:"What is the world's longest river?",options:["Nile","Amazon","Mississippi","Yangtze"],correct:0,difficulty:"medium"},{question:"Which scientist formulated the laws of motion and gravity?",options:["Isaac Newton","Albert Einstein","Galileo Galilei","Charles Darwin"],correct:0,difficulty:"medium"},{question:"Who discovered penicillin?",options:["Alexander Fleming","Louis Pasteur","Marie Curie","Robert Koch"],correct:0,difficulty:"medium"},{question:"What is the currency of South Africa?",options:["Rand","Dollar","Pound","Euro"],correct:0,difficulty:"medium"},{question:"Which planet is closest to the sun?",options:["Mercury","Venus","Earth","Mars"],correct:0,difficulty:"medium"},{question:"What is the largest land animal?",options:["Elephant","Rhinoceros","Hippopotamus","Giraffe"],correct:0,difficulty:"medium"},{question:"What is the term for animals that eat both plants and meat?",options:["Omnivores","Herbivores","Carnivores","Insectivores"],correct:0,difficulty:"medium"},{question:'Which book begins with the line "Call me Ishmael"?',options:["Moby-Dick","The Great Gatsby","To Kill a Mockingbird","1984"],correct:0,difficulty:"medium"},{question:'Who wrote "To Kill a Mockingbird"?',options:["Harper Lee","Mark Twain","Ernest Hemingway","F. Scott Fitzgerald"],correct:0,difficulty:"medium"},{question:'Which president said, "Speak softly and carry a big stick"?',options:["Theodore Roosevelt","Franklin Roosevelt","Abraham Lincoln","Thomas Jefferson"],correct:0,difficulty:"medium"},{question:"How many strings are there on a standard violin?",options:["Four","Five","Six","Three"],correct:0,difficulty:"medium"},{question:"What is the capital of Iceland?",options:["Reykjavik","Oslo","Helsinki","Stockholm"],correct:0,difficulty:"medium"},{question:"What is the currency of Sweden?",options:["Krona","Euro","Pound","Dollar"],correct:0,difficulty:"medium"},{question:"Which element is a liquid at room temperature?",options:["Mercury","Lead","Aluminum","Copper"],correct:0,difficulty:"medium"},{question:"What is the largest moon of Jupiter?",options:["Ganymede","Europa","Io","Callisto"],correct:0,difficulty:"medium"},{question:"What is the chemical symbol for gold?",options:["Au","Ag","Cu","Fe"],correct:0,difficulty:"medium"},{question:"What is the specific term for fear of spiders?",options:["Arachnophobia","Acrophobia","Claustrophobia","Agoraphobia"],correct:0,difficulty:"hard"},{question:"Which country was formerly known as Ceylon?",options:["Sri Lanka","Myanmar","Thailand","Bangladesh"],correct:0,difficulty:"hard"},{question:"What is the term used for a number that is not prime and has more than two factors?",options:["Composite number","Complex number","Irrational number","Perfect number"],correct:0,difficulty:"hard"},{question:"In mathematics, what is the next prime number after 47?",options:["53","49","51","55"],correct:0,difficulty:"hard"},{question:'What is the scientific term for the "little brain" at the base of the brain?',options:["Cerebellum","Cerebrum","Brain stem","Hypothalamus"],correct:0,difficulty:"hard"},{question:"Which is the only country named after a woman?",options:["St. Lucia","Georgia","Virginia","Mariland"],correct:0,difficulty:"hard"},{question:"How many species of zebra are there?",options:["Three","Two","Four","Five"],correct:0,difficulty:"hard"},{question:"When were the first Dead Sea Scrolls discovered?",options:["1947","1945","1950","1943"],correct:0,difficulty:"hard"},{question:"What is the longest-running Broadway show in history?",options:["The Phantom of the Opera","Cats","Chicago","The Lion King"],correct:0,difficulty:"hard"},{question:"What color is an airplane's black box?",options:["Orange","Black","Red","Yellow"],correct:0,difficulty:"hard"},{question:"How many time zones are located in France?",options:["12","8","6","10"],correct:0,difficulty:"hard"},{question:"What is the world's oldest toy?",options:["Stick","Ball","Doll","Top"],correct:0,difficulty:"hard"},{question:"What is the term for a sandstorm with strong winds and dust?",options:["Haboob","Sirocco","Monsoon","Typhoon"],correct:0,difficulty:"hard"},{question:"In what year did Serena Williams win her first Grand Slam singles title?",options:["1999","1998","2000","2001"],correct:0,difficulty:"hard"}];function jie(){const{user:t}=Rn(),{toast:e}=tn(),[n,r]=p.useState("menu"),[s,o]=p.useState("easy"),[a,l]=p.useState(0),[c,u]=p.useState([]),[d,h]=p.useState(null),[m,g]=p.useState(0),[_,v]=p.useState(0),[x,y]=p.useState(30),[w,j]=p.useState(null),[E,P]=p.useState(!1),[U,T]=p.useState(null);p.useEffect(()=>{if(n==="playing"&&x>0&&!E){const O=setTimeout(()=>{y(x-1)},1e3);return()=>clearTimeout(O)}else x===0&&n==="playing"&&!E&&R()},[x,n,E]);const S=O=>{if(O==="mixed"){const F=hp.filter(X=>X.difficulty==="easy").slice(0,5),D=hp.filter(X=>X.difficulty==="medium").slice(0,5),L=hp.filter(X=>X.difficulty==="hard").slice(0,5);return[...F,...D,...L].sort(()=>Math.random()-.5)}return hp.filter(F=>F.difficulty===O)},C=()=>{const F=[...S(s)].sort(()=>Math.random()-.5).slice(0,10);u(F),l(0),g(0),v(0),y(30),j(Date.now()),P(!1),T(null),h(null),r("playing")},k=O=>{E||h(O)},I=()=>{if(d===null)return;const O=c[a],F=d===O.correct;if(T(F),P(!0),F){const D=Math.max(0,x*2),L=O.difficulty==="easy"?1:O.difficulty==="medium"?1.5:2,X=_+1,$=1+X*.2,K=(100+D)*L,Y=Math.round(K*$);g(ie=>ie+Y),v(ie=>ie+1),e({title:"Correct! 🎉",description:`+${Y} points ${X>1?`(${X}x streak bonus!)`:""}`,variant:"default"})}else e({title:"Incorrect",description:`The answer was: ${O.options[O.correct]}`,variant:"destructive"})},R=()=>{T(!1),P(!0),e({title:"Time's up!",description:`The answer was: ${c[a].options[c[a].correct]}`,variant:"destructive"})},A=async()=>{if(t)try{const O={userId:t.id,score:Math.max(0,m),correctAnswers:_,totalQuestions:c.length,timeToComplete:w?Math.round((Date.now()-w)/1e3):void 0};await Zt("POST","/api/trivia/complete",O),e({title:"Game Saved! 🎉",description:`Your score of ${Math.max(0,m)} points has been added to the leaderboard!`,variant:"default"})}catch(O){console.error("Error submitting trivia completion:",O),e({title:"Score not saved",description:"There was an issue saving your score, but you can still see your results!",variant:"destructive"})}},G=()=>{a<c.length-1?(l(O=>O+1),h(null),y(30),P(!1),T(null)):(r("finished"),A())},ue=()=>{r("menu"),l(0),h(null),g(0),v(0),y(30),P(!1),T(null)},B=c[a],q=(a+1)/c.length*100;return i.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4",children:i.jsxs("div",{className:"max-w-2xl mx-auto",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx(vt,{href:"/",children:i.jsxs(ee,{variant:"outline",size:"sm",children:[i.jsx(ml,{className:"w-4 h-4 mr-2"}),"Back to Home"]})}),i.jsx("h1",{className:"text-3xl font-bold text-indigo-800",children:"🧠 Trivia Challenge"})]}),n==="menu"&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs(re,{children:[i.jsx(ye,{children:i.jsx(he,{className:"text-center text-2xl",children:"Choose Your Difficulty"})}),i.jsxs(ae,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsx(ee,{variant:s==="easy"?"default":"outline",className:"p-6 h-auto",onClick:()=>o("easy"),children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl mb-2",children:"🟢"}),i.jsx("div",{className:"font-bold",children:"Easy"}),i.jsx("div",{className:"text-sm opacity-75",children:"Basic knowledge questions"})]})}),i.jsx(ee,{variant:s==="medium"?"default":"outline",className:"p-6 h-auto",onClick:()=>o("medium"),children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl mb-2",children:"🟡"}),i.jsx("div",{className:"font-bold",children:"Medium"}),i.jsx("div",{className:"text-sm opacity-75",children:"Intermediate challenges"})]})}),i.jsx(ee,{variant:s==="hard"?"default":"outline",className:"p-6 h-auto",onClick:()=>o("hard"),children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl mb-2",children:"🔴"}),i.jsx("div",{className:"font-bold",children:"Hard"}),i.jsx("div",{className:"text-sm opacity-75",children:"Expert level trivia"})]})}),i.jsx(ee,{variant:s==="mixed"?"default":"outline",className:"p-6 h-auto",onClick:()=>o("mixed"),children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl mb-2",children:"🎲"}),i.jsx("div",{className:"font-bold",children:"Mixed"}),i.jsx("div",{className:"text-sm opacity-75",children:"All difficulty levels"})]})})]}),i.jsxs(ee,{onClick:C,className:"w-full py-6 text-lg",size:"lg",children:[i.jsx(Ts,{className:"w-5 h-5 mr-2"}),"Start Trivia Game"]})]})]}),i.jsx(re,{children:i.jsxs(ae,{className:"pt-6",children:[i.jsx("h3",{className:"font-bold mb-4",children:"Game Rules:"}),i.jsxs("ul",{className:"space-y-2 text-sm",children:[i.jsx("li",{children:"• Answer 10 random questions from your chosen difficulty"}),i.jsx("li",{children:"• You have 30 seconds per question"}),i.jsx("li",{children:"• Faster answers earn more bonus points"}),i.jsx("li",{children:"• Harder questions are worth more points"}),i.jsx("li",{children:"• Mixed mode includes questions from all difficulties"})]})]})})]}),n==="playing"&&B&&i.jsxs("div",{className:"space-y-6",children:[i.jsx(re,{children:i.jsxs(ae,{className:"pt-6",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsxs(Fe,{variant:"outline",className:"text-lg px-3 py-1",children:["Question ",a+1," of ",c.length]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Li,{className:"w-4 h-4"}),i.jsxs("span",{className:`font-bold ${x<=10?"text-red-600":"text-gray-700"}`,children:[x,"s"]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(si,{className:"w-4 h-4"}),i.jsxs("span",{className:"font-bold text-indigo-600",children:[m," pts"]})]})]})]}),i.jsx(Tr,{value:q,className:"h-2"})]})}),i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsx("div",{className:"flex justify-between items-center",children:i.jsx(Fe,{className:`${B.difficulty==="easy"?"bg-green-100 text-green-800":B.difficulty==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:B.difficulty.toUpperCase()})}),i.jsx(he,{className:"text-xl",children:B.question})]}),i.jsx(ae,{className:"space-y-4",children:E?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"grid gap-3",children:B.options.map((O,F)=>i.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${F===B.correct?"bg-green-50 border-green-200":d===F?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-semibold ${F===B.correct?"bg-green-600 text-white":d===F?"bg-red-600 text-white":"bg-gray-400 text-white"}`,children:String.fromCharCode(65+F)}),i.jsx("div",{className:"flex-1 text-lg",children:O}),i.jsxs("div",{className:"flex items-center gap-1",children:[F===B.correct&&i.jsx(Oh,{className:"w-5 h-5 text-green-600"}),d===F&&F!==B.correct&&i.jsx(Vh,{className:"w-5 h-5 text-red-600"})]})]})},F))}),i.jsxs("div",{className:`p-4 rounded-lg border-2 ${U?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[U?i.jsx(Oh,{className:"w-5 h-5 text-green-600"}):i.jsx(Vh,{className:"w-5 h-5 text-red-600"}),i.jsx("span",{className:"font-bold text-lg",children:U?"Correct!":"Incorrect"})]}),i.jsxs("p",{className:"text-lg",children:[i.jsx("strong",{children:"Correct Answer:"})," ",B.options[B.correct]]}),d!==null&&i.jsxs("p",{className:"text-lg",children:[i.jsx("strong",{children:"Your Answer:"})," ",B.options[d]]})]}),i.jsx(ee,{onClick:G,className:"w-full py-3 text-lg","data-testid":"button-next",children:a<c.length-1?"Next Question":"Finish Game"})]}):i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{className:"grid gap-3",children:B.options.map((O,F)=>i.jsx(ee,{variant:d===F?"default":"outline",onClick:()=>k(F),disabled:x===0,className:`p-4 h-auto text-left justify-start transition-all ${d===F?"bg-indigo-600 text-white border-indigo-600":"hover:bg-indigo-50 hover:border-indigo-200"}`,"data-testid":`option-${F}`,children:i.jsxs("div",{className:"flex items-center gap-3 w-full",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-semibold ${d===F?"bg-white text-indigo-600":"bg-indigo-100 text-indigo-600"}`,children:String.fromCharCode(65+F)}),i.jsx("div",{className:"flex-1 text-lg",children:O})]})},F))}),i.jsx(ee,{onClick:I,disabled:d===null||x===0,className:"w-full py-3 text-lg","data-testid":"button-submit",children:"Submit Answer"})]})})]})]}),n==="finished"&&i.jsx("div",{className:"space-y-6",children:i.jsxs(re,{children:[i.jsx(ye,{children:i.jsx(he,{className:"text-center text-2xl",children:"🎉 Game Complete!"})}),i.jsxs(ae,{className:"text-center space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"p-4 bg-indigo-50 rounded-lg",children:[i.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:m}),i.jsx("div",{className:"text-sm text-gray-600",children:"Total Points"})]}),i.jsxs("div",{className:"p-4 bg-green-50 rounded-lg",children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[_,"/",c.length]}),i.jsx("div",{className:"text-sm text-gray-600",children:"Correct Answers"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-bold",children:"Performance Rating:"}),i.jsx("div",{className:"text-lg",children:_>=9?"🏆 Outstanding!":_>=7?"🥇 Excellent!":_>=5?"🥈 Good Job!":_>=3?"🥉 Not Bad!":"📚 Keep Learning!"})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(ee,{onClick:ue,variant:"outline",className:"flex-1",children:[i.jsx(WI,{className:"w-4 h-4 mr-2"}),"Play Again"]}),i.jsx(vt,{href:"/",className:"flex-1",children:i.jsxs(ee,{className:"w-full",children:[i.jsx(ml,{className:"w-4 h-4 mr-2"}),"Home"]})})]})]})]})})]})})}var Sie="Separator",sk="horizontal",Nie=["horizontal","vertical"],IO=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=sk,...s}=t,o=Tie(r)?r:sk,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return i.jsx(De.div,{"data-orientation":o,...l,...s,ref:e})});IO.displayName=Sie;function Tie(t){return Nie.includes(t)}var RO=IO;const Ub=p.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>i.jsx(RO,{ref:s,decorative:n,orientation:e,className:Ce("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Ub.displayName=RO.displayName;const fp=[{id:1,question:"What mammal has the most powerful bite in the world?",options:["Lion","Hippopotamus","Grizzly bear"],correct:1,difficulty:"easy"},{id:2,question:"What is a male swan called?",options:["Cob","Gander","Drake"],correct:0,difficulty:"easy"},{id:3,question:"What color is the polar bear's skin beneath its fur?",options:["Black","White","Pink"],correct:0,difficulty:"medium"},{id:4,question:"What bird has the largest wingspan?",options:["Andean condor","Wandering albatross","Bald eagle"],correct:1,difficulty:"medium"},{id:5,question:"How many eyes does a honeybee have?",options:["2","5","8"],correct:1,difficulty:"hard"},{id:6,question:"How many degrees can an owl rotate its head?",options:["180°","270°","360°"],correct:1,difficulty:"medium"},{id:7,question:"What is the fastest land mammal?",options:["Cheetah","Lion","Greyhound"],correct:0,difficulty:"easy"},{id:8,question:"Which animal's fingerprints are nearly identical to humans?",options:["Gorilla","Koala","Chimpanzee"],correct:1,difficulty:"medium"},{id:9,question:"What is the only mammal capable of true sustained flight?",options:["Bat","Flying squirrel","Hawk"],correct:0,difficulty:"easy"},{id:10,question:"How many legs do spiders have?",options:["6","8","10"],correct:1,difficulty:"easy"},{id:11,question:"Which animal breathes through its skin?",options:["Frog","Snake","Lizard"],correct:0,difficulty:"medium"},{id:12,question:"What do you call a group of crows?",options:["Pack","Murder","Flock"],correct:1,difficulty:"medium"},{id:13,question:"Which bird is famous for mimicking human speech?",options:["Parrot","Crow","Starling"],correct:0,difficulty:"easy"},{id:14,question:"How many stomachs does a cow have?",options:["1","2","4"],correct:2,difficulty:"medium"},{id:15,question:"What is a baby kangaroo called?",options:["Joey","Pup","Calf"],correct:0,difficulty:"easy"},{id:16,question:"Which animal is the biggest land carnivore?",options:["Lion","Polar bear","Tiger"],correct:1,difficulty:"medium"},{id:17,question:"What is the only marsupial native to North America?",options:["Kangaroo","Koala","Opossum"],correct:2,difficulty:"medium"},{id:18,question:"What is the largest species of penguin?",options:["King penguin","Emperor penguin","Gentoo penguin"],correct:1,difficulty:"medium"},{id:19,question:"Which sea creature is known for changing its color and texture to blend in?",options:["Jellyfish","Octopus","Seahorse"],correct:1,difficulty:"easy"},{id:20,question:"What animal uses echolocation for navigation?",options:["Dolphin","Otter","Manatee"],correct:0,difficulty:"medium"},{id:21,question:"What is a group of flamingos called?",options:["Flock","Pod","Flamboyance"],correct:2,difficulty:"hard"},{id:22,question:"What is the main diet of a panda?",options:["Bamboo","Meat","Fruits"],correct:0,difficulty:"easy"},{id:23,question:"How many hearts does an octopus have?",options:["One","Two","Three"],correct:2,difficulty:"hard"},{id:24,question:"What is the world's fastest bird in flight?",options:["Sparrow","Peregrine falcon","Eagle"],correct:1,difficulty:"medium"},{id:25,question:"What mammal lays eggs?",options:["Platypus","Rabbit","Otter"],correct:0,difficulty:"medium"},{id:26,question:"Which marine animal is the largest in the world?",options:["Whale shark","Blue whale","Giant squid"],correct:1,difficulty:"easy"},{id:27,question:"Which insect has organized farming habits?",options:["Termite","Ant","Bee"],correct:1,difficulty:"medium"},{id:28,question:"Which bird migrates the farthest distance?",options:["Arctic tern","Barn swallow","Stork"],correct:0,difficulty:"hard"},{id:29,question:"How do butterflies taste their food?",options:["Antennae","Feet","Mouth"],correct:1,difficulty:"hard"},{id:30,question:"Which fish is the fastest swimmer?",options:["Sailfish","Tuna","Marlin"],correct:0,difficulty:"medium"},{id:31,question:"What bird is the symbol of wisdom?",options:["Crow","Owl","Eagle"],correct:1,difficulty:"easy"},{id:32,question:"What's the smallest dog breed?",options:["Chihuahua","Pomeranian","Papillon"],correct:0,difficulty:"easy"},{id:33,question:"Which bird can swim but cannot fly?",options:["Penguin","Ostrich","Kiwi"],correct:0,difficulty:"easy"},{id:34,question:"What is the largest rodent in the world?",options:["Beaver","Capybara","Muskrat"],correct:1,difficulty:"medium"},{id:35,question:"Which animal has the thickest fur?",options:["Sea otter","Polar bear","Seal"],correct:0,difficulty:"medium"},{id:36,question:"Which insect produces light?",options:["Firefly","Butterfly","Cricket"],correct:0,difficulty:"easy"},{id:37,question:"Which mammal is the slowest?",options:["Sloth","Mole","Manatee"],correct:0,difficulty:"easy"},{id:38,question:"What bird can run the fastest?",options:["Ostrich","Chicken","Turkey"],correct:0,difficulty:"easy"},{id:39,question:"Which animal has the largest eyes?",options:["Horse","Squid","Giraffe"],correct:1,difficulty:"medium"},{id:40,question:"Which insect can carry multiples of its own body weight?",options:["Bee","Ant","Fly"],correct:1,difficulty:"medium"},{id:41,question:"Which spider is notorious for its red hourglass mark?",options:["Tarantula","Black widow","Brown recluse"],correct:1,difficulty:"medium"},{id:42,question:"Which animal has the loudest call?",options:["Lion","Howler monkey","Elephant"],correct:1,difficulty:"hard"},{id:43,question:"What color are giraffe tongues?",options:["Black","Purple-black","Pink"],correct:1,difficulty:"hard"},{id:44,question:"Which bird lays the largest eggs?",options:["Ostrich","Eagle","Swan"],correct:0,difficulty:"easy"},{id:45,question:"Which animal can see ultraviolet light?",options:["Dog","Bee","Snake"],correct:1,difficulty:"hard"},{id:46,question:"Which bird can hover like a helicopter?",options:["Hawk","Hummingbird","Kingfisher"],correct:1,difficulty:"easy"},{id:47,question:"Which animal can sleep with one eye open?",options:["Whale","Dolphin","Crocodile"],correct:1,difficulty:"medium"},{id:48,question:"What animal has the largest brain?",options:["Elephant","Whale","Gorilla"],correct:1,difficulty:"medium"},{id:49,question:"Which animal is famous for playing dead when threatened?",options:["Dog","Opossum","Otter"],correct:1,difficulty:"medium"},{id:50,question:"Which dog breed has a blue-black tongue?",options:["Husky","Bulldog","Chow Chow"],correct:2,difficulty:"hard"},{id:51,question:"Which shark is the biggest?",options:["Tiger shark","Whale shark","Great white shark"],correct:1,difficulty:"medium"},{id:52,question:"What is the only bird with nostrils at the end of its beak?",options:["Kiwi","Robin","Crane"],correct:0,difficulty:"hard"},{id:53,question:"Which bird can mimic chainsaws and car alarms?",options:["Parrot","Lyrebird","Mockingbird"],correct:1,difficulty:"hard"},{id:54,question:"Which mammal has the densest fur?",options:["Polar bear","Sea otter","Musk ox"],correct:1,difficulty:"hard"},{id:55,question:"Which animal walks sideways?",options:["Crab","Otter","Penguin"],correct:0,difficulty:"easy"},{id:56,question:"What reptile can run across water?",options:["Basilisk lizard","Snake","Chameleon"],correct:0,difficulty:"hard"},{id:57,question:"Which animal has blue blood?",options:["Crab","Lobster","Octopus"],correct:2,difficulty:"hard"},{id:58,question:"Which insect is the best-known pollinator of crops?",options:["Beetle","Mosquito","Honeybee"],correct:2,difficulty:"easy"},{id:59,question:"What is a group of frogs called?",options:["Army","Troop","Flock"],correct:0,difficulty:"medium"},{id:60,question:"Which animal can sleep for three years?",options:["Sloth","Snail","Bear"],correct:1,difficulty:"hard"}];function Cie(){const{user:t}=Rn(),{toast:e}=tn(),[n,r]=p.useState("menu"),[s,o]=p.useState("easy"),[a,l]=p.useState(0),[c,u]=p.useState([]),[d,h]=p.useState(null),[m,g]=p.useState(0),[_,v]=p.useState(0),[x,y]=p.useState(30),[w,j]=p.useState(null),[E,P]=p.useState(!1),[U,T]=p.useState(null);p.useEffect(()=>{if(n==="playing"&&x>0&&!E){const F=setTimeout(()=>{y(x-1)},1e3);return()=>clearTimeout(F)}else x===0&&n==="playing"&&!E&&R()},[x,n,E]);const S=F=>{if(F==="mixed"){const D=fp.filter($=>$.difficulty==="easy").slice(0,4),L=fp.filter($=>$.difficulty==="medium").slice(0,4),X=fp.filter($=>$.difficulty==="hard").slice(0,2);return[...D,...L,...X].sort(()=>Math.random()-.5)}return fp.filter(D=>D.difficulty===F)},C=()=>{const D=[...S(s)].sort(()=>Math.random()-.5).slice(0,10);u(D),l(0),g(0),v(0),y(30),j(Date.now()),P(!1),T(null),h(null),r("playing")},k=F=>{E||h(F)},I=()=>{if(d===null)return;const F=c[a],D=d===F.correct;if(T(D),P(!0),D){const L=Math.max(0,x*2),X=F.difficulty==="easy"?1:F.difficulty==="medium"?1.5:2,$=_+1,K=1+$*.2,Y=(100+L)*X,ie=Math.round(Y*K);g(te=>te+ie),v(te=>te+1),e({title:"Correct! 🎉",description:`+${ie} points ${$>1?`(${$}x streak bonus!)`:""}`,variant:"default"})}else e({title:"Incorrect",description:`The answer was: ${F.options[F.correct]}`,variant:"destructive"})},R=()=>{if(d!==null)I();else{T(!1),P(!0);const F=c[a];e({title:"Time's up!",description:`The answer was: ${F.options[F.correct]}`,variant:"destructive"})}},A=async()=>{if(t)try{const F={userId:t.id,score:Math.max(0,m),correctAnswers:_,totalQuestions:c.length,timeToComplete:w?Math.round((Date.now()-w)/1e3):void 0};await Zt("POST","/api/animal-trivia/complete",F),e({title:"Game Saved! 🎉",description:`Your score of ${Math.max(0,m)} points has been added to the leaderboard!`,variant:"default"})}catch(F){console.error("Error submitting animal trivia completion:",F),e({title:"Score not saved",description:"There was an issue saving your score, but you can still see your results!",variant:"destructive"})}},G=()=>{a<c.length-1?(l(F=>F+1),h(null),y(30),P(!1),T(null)):(r("results"),A())},ue=()=>{r("menu"),l(0),g(0),v(0),y(30),j(null),P(!1),T(null),h(null)},B=c[a],q=(a+1)/c.length*100,O=()=>{const F=_/c.length*100;return F>=90?{text:"Excellent!",color:"text-green-600"}:F>=70?{text:"Great job!",color:"text-blue-600"}:F>=50?{text:"Good effort!",color:"text-yellow-600"}:{text:"Keep practicing!",color:"text-gray-600"}};return i.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold mb-2 bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"🐾 Animal Trivia"}),i.jsx("p",{className:"text-lg text-muted-foreground",children:"Test your knowledge about the amazing animal kingdom!"})]}),n==="menu"&&i.jsx("div",{className:"max-w-2xl mx-auto",children:i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsxs(he,{className:"flex items-center gap-2",children:[i.jsx(t_,{className:"h-5 w-5"}),"Choose Your Difficulty"]}),i.jsx(Ue,{children:"Select how challenging you want your animal trivia questions to be"})]}),i.jsxs(ae,{className:"space-y-4",children:[i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:["easy","medium","hard","mixed"].map(F=>i.jsx(ee,{variant:s===F?"default":"outline",onClick:()=>o(F),className:"h-16 text-center",children:i.jsxs("div",{children:[i.jsx("div",{className:"font-semibold capitalize",children:F}),i.jsxs("div",{className:"text-xs opacity-75",children:[F==="easy"&&"1x points",F==="medium"&&"1.5x points",F==="hard"&&"2x points",F==="mixed"&&"Varied points"]})]})},F))}),i.jsx(Ub,{}),i.jsxs("div",{className:"text-center space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("h3",{className:"font-semibold",children:"Game Rules:"}),i.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[i.jsx("li",{children:"• 10 random questions from your chosen difficulty"}),i.jsx("li",{children:"• 30 seconds per question"}),i.jsx("li",{children:"• Bonus points for quick answers"}),i.jsx("li",{children:"• Streak multiplier increases your score!"})]})]}),i.jsx(ee,{onClick:C,size:"lg",className:"w-full",children:"Start Animal Trivia 🦁"})]})]})]})}),n==="playing"&&B&&i.jsxs("div",{className:"max-w-3xl mx-auto space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("span",{className:"text-sm font-medium",children:["Question ",a+1," of ",c.length]}),i.jsx(Fe,{variant:"outline",className:"capitalize",children:B.difficulty})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Li,{className:"h-4 w-4"}),i.jsxs("span",{className:`font-mono text-lg ${x<=5?"text-red-500":""}`,children:[x,"s"]})]})]}),i.jsx(Tr,{value:q,className:"h-2"}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold",children:["Score: ",Math.max(0,m)]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Correct: ",_," | Streak: ",_>0?`${_}x`:"0x"]})]}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsx(he,{className:"text-xl leading-relaxed",children:B.question})}),i.jsx(ae,{className:"space-y-4",children:E?i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"grid gap-3",children:B.options.map((F,D)=>i.jsx("div",{className:`p-4 rounded-lg border-2 transition-all ${D===B.correct?"bg-green-50 border-green-200":d===D?"bg-red-50 border-red-200":"bg-gray-50 border-gray-200"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-semibold ${D===B.correct?"bg-green-600 text-white":d===D?"bg-red-600 text-white":"bg-gray-400 text-white"}`,children:String.fromCharCode(65+D)}),i.jsx("div",{className:"flex-1 text-lg",children:F}),i.jsxs("div",{className:"flex items-center gap-1",children:[D===B.correct&&i.jsx(Oh,{className:"w-5 h-5 text-green-600"}),d===D&&D!==B.correct&&i.jsx(Vh,{className:"w-5 h-5 text-red-600"})]})]})},D))}),i.jsxs("div",{className:`p-4 rounded-lg border-2 ${U?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[U?i.jsx(Oh,{className:"w-5 h-5 text-green-600"}):i.jsx(Vh,{className:"w-5 h-5 text-red-600"}),i.jsx("span",{className:"font-bold text-lg",children:U?"Correct!":"Incorrect"})]}),i.jsxs("p",{className:"text-lg",children:[i.jsx("strong",{children:"Correct Answer:"})," ",B.options[B.correct]]}),d!==null&&i.jsxs("p",{className:"text-lg",children:[i.jsx("strong",{children:"Your Answer:"})," ",B.options[d]]})]})]}):i.jsx("div",{className:"space-y-3",children:i.jsx("div",{className:"grid gap-3",children:B.options.map((F,D)=>i.jsx(ee,{variant:d===D?"default":"outline",onClick:()=>k(D),disabled:x===0,className:`p-4 h-auto text-left justify-start transition-all ${d===D?"bg-green-600 text-white border-green-600":"hover:bg-green-50 hover:border-green-200"}`,"data-testid":`option-${D}`,children:i.jsxs("div",{className:"flex items-center gap-3 w-full",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center font-semibold ${d===D?"bg-white text-green-600":"bg-green-100 text-green-600"}`,children:String.fromCharCode(65+D)}),i.jsx("div",{className:"flex-1 text-lg",children:F})]})},D))})})})]}),!E&&i.jsx("div",{className:"flex gap-4",children:i.jsx(ee,{onClick:I,disabled:d===null,className:"w-full py-3 text-lg","data-testid":"button-submit",children:"Submit Answer"})}),E&&i.jsx("div",{className:"flex gap-4",children:i.jsx(ee,{onClick:G,className:"w-full py-3 text-lg","data-testid":"button-next",children:a<c.length-1?"Next Question":"View Results"})})]}),n==="results"&&i.jsx("div",{className:"max-w-2xl mx-auto",children:i.jsxs(re,{children:[i.jsxs(ye,{className:"text-center",children:[i.jsx(he,{className:"text-3xl mb-2",children:"Game Complete! 🎉"}),i.jsx(Ue,{children:"Here's how you performed"})]}),i.jsxs(ae,{className:"space-y-6",children:[i.jsxs("div",{className:"text-center space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx("div",{className:"text-4xl font-bold",children:Math.max(0,m)}),i.jsx("div",{className:"text-muted-foreground",children:"Final Score"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-semibold text-green-600",children:_}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Correct"})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"text-2xl font-semibold text-red-600",children:c.length-_}),i.jsx("div",{className:"text-sm text-muted-foreground",children:"Incorrect"})]})]}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:`text-xl font-semibold ${O().color}`,children:O().text}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:[Math.round(_/c.length*100),"% accuracy"]})]})]}),i.jsx(Ub,{}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(ee,{onClick:ue,variant:"outline",className:"flex-1",children:"Play Again"}),i.jsx(ee,{onClick:()=>window.location.href="/",className:"flex-1",children:"Back to Home"})]})]})]})})]})}const MO=p.createContext(null),Eie={currentTrack:null,isPlaying:!1,isPaused:!1,volume:.7,currentTime:0,duration:0,isPopupOpen:!1,isMinimized:!1,popupPosition:{x:window.innerWidth-420,y:100},playlist:[],currentIndex:-1,shuffle:!1,repeat:"none"};function kie({children:t}){const[e,n]=p.useState(Eie),r=p.useRef(new Audio);p.useEffect(()=>{const S=localStorage.getItem("audioPlayer:volume"),C=localStorage.getItem("audioPlayer:shuffle"),k=localStorage.getItem("audioPlayer:repeat"),I=localStorage.getItem("audioPlayer:popupPosition");n(R=>({...R,volume:S?parseFloat(S):.7,shuffle:C==="true",repeat:k||"none",popupPosition:I?JSON.parse(I):R.popupPosition}))},[]),p.useEffect(()=>{r.current.volume=e.volume,localStorage.setItem("audioPlayer:volume",e.volume.toString())},[e.volume]),p.useEffect(()=>{localStorage.setItem("audioPlayer:shuffle",e.shuffle.toString())},[e.shuffle]),p.useEffect(()=>{localStorage.setItem("audioPlayer:repeat",e.repeat)},[e.repeat]),p.useEffect(()=>{localStorage.setItem("audioPlayer:popupPosition",JSON.stringify(e.popupPosition))},[e.popupPosition]),p.useEffect(()=>{const S=r.current,C=()=>{n(A=>({...A,currentTime:S.currentTime}))},k=()=>{n(A=>({...A,duration:S.duration||0}))},I=()=>{n(A=>({...A,isPlaying:!1,isPaused:!1})),e.repeat==="one"?(S.currentTime=0,S.play(),n(A=>({...A,isPlaying:!0}))):h()},R=()=>{n(A=>({...A,duration:S.duration||0}))};return S.addEventListener("timeupdate",C),S.addEventListener("durationchange",k),S.addEventListener("ended",I),S.addEventListener("loadedmetadata",R),()=>{S.removeEventListener("timeupdate",C),S.removeEventListener("durationchange",k),S.removeEventListener("ended",I),S.removeEventListener("loadedmetadata",R)}},[e.repeat]);const s=async S=>{S&&S!==e.currentTrack&&(r.current.src=S.fileUrl,r.current.load(),n(C=>({...C,currentTrack:S,currentIndex:C.playlist.findIndex(k=>k.id===S.id)})));try{await r.current.play(),n(C=>({...C,isPlaying:!0,isPaused:!1}))}catch(C){console.error("Failed to play audio:",C)}},o=()=>{r.current.pause(),n(S=>({...S,isPlaying:!1,isPaused:!0}))},a=()=>{r.current.pause(),r.current.currentTime=0,n(S=>({...S,isPlaying:!1,isPaused:!1,currentTime:0}))},l=S=>{r.current.currentTime=S,n(C=>({...C,currentTime:S}))},c=S=>{const C=Math.max(0,Math.min(1,S));n(k=>({...k,volume:C}))},u=()=>{if(e.playlist.length===0)return-1;if(e.shuffle){let S;do S=Math.floor(Math.random()*e.playlist.length);while(S===e.currentIndex&&e.playlist.length>1);return S}else return(e.currentIndex+1)%e.playlist.length},d=()=>{if(e.playlist.length===0)return-1;if(e.shuffle){let S;do S=Math.floor(Math.random()*e.playlist.length);while(S===e.currentIndex&&e.playlist.length>1);return S}else return e.currentIndex<=0?e.playlist.length-1:e.currentIndex-1},h=()=>{if(e.playlist.length!==0)if(e.repeat==="all"||e.currentIndex<e.playlist.length-1||e.shuffle){const S=u();if(S>=0&&S<e.playlist.length){const C=e.playlist[S];n(k=>({...k,currentIndex:S})),s(C)}}else a()},T={...e,play:s,pause:o,stop:a,seek:l,setVolume:c,nextTrack:h,previousTrack:()=>{if(e.playlist.length===0)return;const S=d();if(S>=0&&S<e.playlist.length){const C=e.playlist[S];n(k=>({...k,currentIndex:S})),s(C)}},playTrackAt:S=>{if(S>=0&&S<e.playlist.length){const C=e.playlist[S];n(k=>({...k,currentIndex:S})),s(C)}},setPlaylist:S=>{n(C=>({...C,playlist:S,currentIndex:S.length>0?0:-1}))},addToPlaylist:S=>{n(C=>({...C,playlist:[...C.playlist,S]}))},removeFromPlaylist:S=>{n(C=>{const k=C.playlist.filter(A=>A.id!==S),I=C.currentTrack;let R=C.currentIndex;return I&&I.id===S?(R=-1,a()):C.currentIndex>=0&&(R=k.findIndex(A=>A.id===(I==null?void 0:I.id))),{...C,playlist:k,currentIndex:R}})},togglePopup:()=>{n(S=>({...S,isPopupOpen:!S.isPopupOpen,isMinimized:!1}))},minimizePopup:()=>{n(S=>({...S,isMinimized:!0}))},maximizePopup:()=>{n(S=>({...S,isMinimized:!1}))},setPopupPosition:S=>{n(C=>({...C,popupPosition:S}))},toggleShuffle:()=>{n(S=>({...S,shuffle:!S.shuffle}))},toggleRepeat:()=>{n(S=>({...S,repeat:S.repeat==="none"?"all":S.repeat==="all"?"one":"none"}))}};return i.jsx(MO.Provider,{value:T,children:t})}function Wx(){const t=p.useContext(MO);if(!t)throw new Error("useAudioPlayer must be used within an AudioPlayerProvider");return t}class Aie{constructor(){this.accessToken=null,this.tokenExpiry=null}async getAccessToken(){if(this.accessToken&&this.tokenExpiry&&Date.now()<this.tokenExpiry)return this.accessToken;try{const e=await fetch("/api/music/spotify-token",{method:"POST",headers:{"Content-Type":"application/json"}});if(!e.ok)throw new Error("Failed to get Spotify access token");const n=await e.json();return this.accessToken=n.access_token,this.tokenExpiry=Date.now()+n.expires_in*1e3,this.accessToken||""}catch(e){throw console.error("Spotify auth error:",e),e}}async searchTracks(e,n=20){try{const r=await this.getAccessToken(),s=await fetch(`https://api.spotify.com/v1/search?q=${encodeURIComponent(e)}&type=track&limit=${n}`,{headers:{Authorization:`Bearer ${r}`}});if(!s.ok)throw new Error("Spotify search failed");return{tracks:(await s.json()).tracks.items.map(l=>{var c;return{id:l.id,title:l.name,artist:l.artists.map(u=>u.name).join(", "),duration:Math.floor(l.duration_ms/1e3),previewUrl:l.preview_url,albumArt:(c=l.album.images[0])==null?void 0:c.url,platform:"spotify"}})}}catch(r){return console.error("Spotify search error:",r),{tracks:[]}}}async getTrack(e){var n;try{const r=await this.getAccessToken(),s=await fetch(`https://api.spotify.com/v1/tracks/${e}`,{headers:{Authorization:`Bearer ${r}`}});if(!s.ok)return null;const o=await s.json();return{id:o.id,title:o.name,artist:o.artists.map(a=>a.name).join(", "),duration:Math.floor(o.duration_ms/1e3),previewUrl:o.preview_url,albumArt:(n=o.album.images[0])==null?void 0:n.url,platform:"spotify"}}catch(r){return console.error("Spotify track fetch error:",r),null}}}class Pie{constructor(){this.apiKey=""}async searchTracks(e,n=20){try{const r=await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&type=video&videoCategoryId=10&maxResults=${n}&q=${encodeURIComponent(e+" music")}&key=${this.apiKey}`);if(!r.ok)throw new Error("YouTube search failed");const s=await r.json();return{tracks:s.items.map(a=>{var l;return{id:a.id.videoId,title:a.snippet.title,artist:a.snippet.channelTitle,duration:0,albumArt:(l=a.snippet.thumbnails.medium)==null?void 0:l.url,streamUrl:`https://www.youtube.com/watch?v=${a.id.videoId}`,platform:"youtube"}}),nextPageToken:s.nextPageToken}}catch(r){return console.error("YouTube search error:",r),{tracks:[]}}}async getTrack(e){var n;try{const r=await fetch(`https://www.googleapis.com/youtube/v3/videos?part=snippet,contentDetails&id=${e}&key=${this.apiKey}`);if(!r.ok)return null;const s=await r.json();if(!s.items.length)return null;const o=s.items[0],a=this.parseDuration(o.contentDetails.duration);return{id:o.id,title:o.snippet.title,artist:o.snippet.channelTitle,duration:a,albumArt:(n=o.snippet.thumbnails.medium)==null?void 0:n.url,streamUrl:`https://www.youtube.com/watch?v=${o.id}`,platform:"youtube"}}catch(r){return console.error("YouTube track fetch error:",r),null}}parseDuration(e){var a,l,c;const n=e.match(/PT(\d+H)?(\d+M)?(\d+S)?/);if(!n)return 0;const r=parseInt(((a=n[1])==null?void 0:a.replace("H",""))||"0"),s=parseInt(((l=n[2])==null?void 0:l.replace("M",""))||"0"),o=parseInt(((c=n[3])==null?void 0:c.replace("S",""))||"0");return r*3600+s*60+o}}class Iie{async searchTracks(e,n=20){return console.warn("Apple Music integration not yet implemented"),{tracks:[]}}async getTrack(e){return console.warn("Apple Music integration not yet implemented"),null}}class Rie{constructor(){this.spotify=new Aie,this.youtube=new Pie,this.appleMusic=new Iie}async searchAllPlatforms(e,n=20){const r=await Promise.allSettled([this.spotify.searchTracks(e,Math.ceil(n/2)),this.youtube.searchTracks(e,Math.ceil(n/2))]),s=[];return r.forEach(o=>{o.status==="fulfilled"&&s.push(...o.value.tracks)}),s.slice(0,n)}async getTrackById(e,n){switch(e){case"spotify":return this.spotify.getTrack(n);case"youtube":return this.youtube.getTrack(n);case"apple":return this.appleMusic.getTrack(n);default:return null}}convertToAudioTrack(e){return{id:parseInt(e.id.replace(/\D/g,"")||"0"),title:e.title,artist:e.artist,filename:`${e.platform}_${e.id}`,fileUrl:e.previewUrl||e.streamUrl||"",duration:e.duration,fileSize:null,mimeType:"audio/mpeg",uploadedBy:null,isPublic:!0,uploadedAt:new Date}}}const yh=new Rie;function Mie(){const[t,e]=p.useState(""),[n,r]=p.useState([]),[s,o]=p.useState(!1),{play:a,addToPlaylist:l,setPlaylist:c}=Wx(),{toast:u}=tn(),d=async()=>{if(t.trim()){o(!0);try{const x=await yh.searchAllPlatforms(t,20);r(x),x.length===0&&u({title:"No Results",description:"No tracks found. Try a different search term.",variant:"destructive"})}catch(x){u({title:"Search Error",description:"Failed to search music platforms. Please try again.",variant:"destructive"}),console.error("Music search error:",x)}finally{o(!1)}}},h=x=>{x.key==="Enter"&&d()},m=x=>{const y=yh.convertToAudioTrack(x);c([y]),a(y),u({title:"Now Playing",description:`${x.title} - ${x.artist}`})},g=x=>{const y=yh.convertToAudioTrack(x);l(y),u({title:"Added to Playlist",description:`${x.title} added to current playlist`})},_=x=>{switch(x){case"spotify":return i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Spotify"});case"youtube":return i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"YouTube"});case"apple":return i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:"Apple Music"});default:return null}},v=x=>{if(!x)return"Unknown";const y=Math.floor(x/60),w=x%60;return`${y}:${w.toString().padStart(2,"0")}`};return i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Mt,{placeholder:"Search songs, artists, albums...",value:t,onChange:x=>e(x.target.value),onKeyPress:h,className:"flex-1","data-testid":"input-music-search"}),i.jsx(ee,{onClick:d,disabled:s||!t.trim(),"data-testid":"button-search-music",children:s?i.jsx(Ko,{className:"h-4 w-4 animate-spin"}):i.jsx(CT,{className:"h-4 w-4"})})]}),n.length>0&&i.jsxs("div",{className:"space-y-2",children:[i.jsxs("h3",{className:"text-sm font-medium text-gray-700",children:["Found ",n.length," tracks"]}),i.jsx("div",{className:"grid gap-2 max-h-96 overflow-y-auto",children:n.map((x,y)=>i.jsx(re,{className:"hover:shadow-md transition-shadow",children:i.jsx(ae,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[x.albumArt?i.jsx("img",{src:x.albumArt,alt:x.title,className:"w-12 h-12 rounded object-cover flex-shrink-0"}):i.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded flex items-center justify-center flex-shrink-0",children:"🎵"}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-sm truncate",title:x.title,children:x.title}),i.jsx("p",{className:"text-xs text-gray-600 truncate",title:x.artist,children:x.artist}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[_(x.platform),i.jsx("span",{className:"text-xs text-gray-500",children:v(x.duration)})]})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ee,{variant:"default",size:"sm",onClick:()=>m(x),className:"h-8 w-8 p-0","data-testid":`button-play-${x.platform}-${x.id}`,title:"Play now",children:i.jsx(Fh,{className:"h-3 w-3"})}),i.jsx(ee,{variant:"outline",size:"sm",onClick:()=>g(x),className:"h-8 w-8 p-0","data-testid":`button-add-${x.platform}-${x.id}`,title:"Add to playlist",children:i.jsx(zI,{className:"h-3 w-3"})})]})]})})},`${x.platform}-${x.id}-${y}`))})]}),n.length===0&&!s&&i.jsxs("div",{className:"text-center py-8 text-gray-500",children:[i.jsx(CT,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),i.jsx("p",{children:"Search for music across Spotify and YouTube"}),i.jsx("p",{className:"text-sm mt-1",children:"Enter a song name, artist, or album"})]})]})}function Die(){const[t,e]=p.useState(()=>{const j=localStorage.getItem("burbleAudioFiles");return j?JSON.parse(j):[]}),{toast:n}=tn(),{firebaseUser:r,userProfile:s,updatePreferences:o}=_O(),{play:a,addToPlaylist:l,setPlaylist:c,currentTrack:u,isPlaying:d,togglePopup:h}=Wx(),m=["Jeopardy theme song","Price is Right theme song","Pokemon theme song"];p.useEffect(()=>{var j;(j=s==null?void 0:s.preferences)!=null&&j.audioFiles&&e(s.preferences.audioFiles)},[s]),p.useEffect(()=>{const j=async()=>{try{const E=[];for(const P of m)try{const U=await yh.searchAllPlatforms(P,1);if(U.length>0){const T=yh.convertToAudioTrack(U[0]);E.push(T)}}catch(U){console.log(`Could not load ${P}:`,U)}E.length>0&&(c(E),n({title:"🎵 Theme Songs Loaded!",description:`Added ${E.length} classic theme songs to your playlist`}))}catch(E){console.log("Error loading default theme songs:",E)}};t.length===0&&j()},[]);const g=j=>{const E=j.target.files;E&&Array.from(E).forEach(P=>{if(P.type.startsWith("audio/")){const U=new FileReader;U.onload=T=>{var C;const S={id:Date.now()+Math.random().toString(),name:P.name,size:P.size,type:P.type,data:(C=T.target)==null?void 0:C.result,uploadDate:new Date().toISOString()};e(k=>{const I=[...k,S];return localStorage.setItem("burbleAudioFiles",JSON.stringify(I)),r&&o({audioFiles:I}),I}),n({title:"File Uploaded",description:`${P.name} has been uploaded successfully.`})},U.readAsDataURL(P)}else n({title:"Invalid File Type",description:"Please upload only audio files.",variant:"destructive"})})},_=j=>{e(E=>{const P=E.filter(U=>U.id!==j);return localStorage.setItem("burbleAudioFiles",JSON.stringify(P)),r&&o({audioFiles:P}),P}),n({title:"File Deleted",description:"Audio file has been removed."})},v=j=>({title:j.name.replace(/\.[^/.]+$/,""),artist:"Unknown Artist",filename:j.name,fileUrl:j.data,duration:null,fileSize:j.size,mimeType:j.type,uploadedBy:r!=null&&r.uid?parseInt(r.uid.slice(-8),16):null,isPublic:!1}),x=j=>{const E=v(j),P={id:parseInt(j.id.replace(/\D/g,"")||"1"),...E,uploadedAt:new Date(j.uploadDate)};c([P]),a(P),h(),n({title:"Playing Track",description:`Now playing: ${P.title}`})},y=j=>{const E=v(j),P={id:parseInt(j.id.replace(/\D/g,"")||"1"),...E,uploadedAt:new Date(j.uploadDate)};l(P),n({title:"Added to Playlist",description:`${P.title} added to playlist`})},w=()=>{if(t.length===0)return;const j=t.map(E=>{const P=v(E);return{id:parseInt(E.id.replace(/\D/g,"")||"1"),...P,uploadedAt:new Date(E.uploadDate)}});c(j),a(j[0]),h(),n({title:"Playing All Files",description:`Playing ${j.length} tracks`})};return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-gradient-to-r from-pink-500 to-red-600 text-white",children:i.jsx("div",{className:"container mx-auto px-4 py-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Uh,{className:"h-16 w-16 mx-auto mb-4"}),i.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Audio Manager"}),i.jsx("p",{className:"text-xl md:text-2xl opacity-90",children:"Upload and manage your audio files"}),r&&i.jsxs("div",{className:"flex items-center justify-center mt-4 text-sm opacity-75",children:[i.jsx(MU,{className:"h-4 w-4 mr-2"}),i.jsxs("span",{children:["Files synced to cloud • Signed in as ",(s==null?void 0:s.displayName)||(s==null?void 0:s.email)]})]})]})})}),i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsxs(Yu,{defaultValue:"search",className:"space-y-8",children:[i.jsxs(zl,{className:"grid w-full grid-cols-3",children:[i.jsx(gn,{value:"search","data-testid":"tab-music-search",children:"🔍 Search Music"}),i.jsx(gn,{value:"upload","data-testid":"tab-upload",children:"📤 Upload Files"}),i.jsx(gn,{value:"library","data-testid":"tab-library",children:"📂 My Library"})]}),i.jsx(Jn,{value:"search",className:"space-y-6",children:i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsx(he,{className:"flex items-center gap-2",children:"🎵 Stream from Music Platforms"}),i.jsx(Ue,{children:"Search and play music from Spotify, YouTube, and more"})]}),i.jsx(ae,{children:i.jsx(Mie,{})})]})}),i.jsx(Jn,{value:"upload",className:"space-y-6",children:i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsxs(he,{className:"flex items-center gap-2",children:[i.jsx(QI,{className:"h-5 w-5"}),"Upload Audio Files"]}),i.jsx(Ue,{children:"Select audio files to upload and manage in your personal collection"})]}),i.jsx(ae,{children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ix,{htmlFor:"audio-upload",children:"Choose Audio Files"}),i.jsx(Mt,{id:"audio-upload",type:"file",accept:"audio/*",multiple:!0,onChange:g,className:"mt-1"})]}),i.jsx("p",{className:"text-sm text-gray-500",children:"Supported formats: MP3, WAV, OGG, M4A and other audio formats"})]})})]})}),i.jsx(Jn,{value:"library",className:"space-y-6",children:i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold",children:"Your Audio Files"}),t.length>0&&i.jsxs(ee,{onClick:w,className:"flex items-center gap-2","data-testid":"button-play-all",children:[i.jsx(Fh,{className:"h-4 w-4"}),"Play All (",t.length,")"]})]}),t.length===0?i.jsx(re,{children:i.jsxs(ae,{className:"p-12 text-center",children:[i.jsx(Uh,{className:"h-16 w-16 mx-auto mb-4 text-gray-400"}),i.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No audio files uploaded yet"}),i.jsx("p",{className:"text-gray-500",children:"Upload your first audio file to get started"})]})}):i.jsx("div",{className:"grid gap-4",children:t.map(j=>i.jsx(re,{children:i.jsx(ae,{className:"p-6",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"font-medium text-lg",children:j.name}),i.jsxs("p",{className:"text-sm text-gray-500",children:[(j.size/1024/1024).toFixed(2)," MB • ",new Date(j.uploadDate).toLocaleDateString()]}),i.jsx("div",{className:"mt-3",children:i.jsxs("audio",{controls:!0,className:"w-full max-w-md",children:[i.jsx("source",{src:j.data,type:j.type}),"Your browser does not support the audio element."]})})]}),i.jsxs("div",{className:"ml-4 flex items-center gap-2",children:[i.jsxs(ee,{variant:"default",size:"sm",onClick:()=>x(j),className:"flex items-center gap-1","data-testid":`button-play-${j.id}`,children:[i.jsx(Fh,{className:"h-3 w-3"}),"Play"]}),i.jsx(ee,{variant:"outline",size:"sm",onClick:()=>y(j),"data-testid":`button-add-playlist-${j.id}`,title:"Add to current playlist",children:i.jsx(zI,{className:"h-3 w-3"})}),i.jsx(ee,{variant:"destructive",size:"sm",onClick:()=>_(j.id),"data-testid":`button-delete-${j.id}`,children:i.jsx(KI,{className:"h-4 w-4"})})]})]})})},j.id))})]})})]})})]})}const ik={math:{elementary:[{question:"What is 5 + 3?",options:["7","8","9"],correct:1},{question:"How many sides does a triangle have?",options:["2","3","4"],correct:1},{question:"What is 10 - 4?",options:["5","6","7"],correct:1},{question:"How many minutes are in an hour?",options:["50","60","70"],correct:1},{question:"What is 6 × 2?",options:["10","12","14"],correct:1}],middle:[{question:"What is 12²?",options:["124","144","154"],correct:1},{question:"What is the area of a rectangle with length 8 and width 5?",options:["30","40","50"],correct:1},{question:"What is 25% of 80?",options:["15","20","25"],correct:1},{question:"What is the square root of 64?",options:["6","8","10"],correct:1},{question:"What is 3/4 as a decimal?",options:["0.75","0.25","0.5"],correct:0}],high:[{question:"What is the derivative of x²?",options:["x","2x","x²"],correct:1},{question:"What is sin(90°)?",options:["0","1","√2/2"],correct:1},{question:"What is log₁₀(100)?",options:["1","2","10"],correct:1},{question:"What is cos(60°)?",options:["1/2","√3/2","√2/2"],correct:0},{question:"What is the value of π (approximately)?",options:["3.14","3.15","3.16"],correct:0}]},science:{elementary:[{question:"How many legs does an insect have?",options:["4","6","8"],correct:1},{question:"What do plants need to make food?",options:["Water only","Sunlight and water","Soil only"],correct:1},{question:"Which planet is closest to the Sun?",options:["Venus","Mercury","Mars"],correct:1},{question:"What gas do plants give off?",options:["Carbon dioxide","Oxygen","Nitrogen"],correct:1},{question:"How many chambers does a human heart have?",options:["2","3","4"],correct:2}],middle:[{question:"What is the chemical symbol for water?",options:["H2O","CO2","O2"],correct:0},{question:"What is the powerhouse of the cell?",options:["Nucleus","Mitochondria","Ribosome"],correct:1},{question:"What is the atomic number of carbon?",options:["5","6","7"],correct:1},{question:"What force keeps planets in orbit?",options:["Magnetism","Gravity","Friction"],correct:1},{question:"What is the pH of pure water?",options:["6","7","8"],correct:1}],high:[{question:"What is Avogadro's number?",options:["6.02 × 10²³","6.02 × 10²²","6.02 × 10²⁴"],correct:0},{question:"What is DNA's complementary base to Adenine?",options:["Guanine","Thymine","Cytosine"],correct:1},{question:"What is the chemical formula for glucose?",options:["C6H12O6","C12H22O11","C2H6O"],correct:0},{question:"What organelle contains chlorophyll?",options:["Mitochondria","Chloroplast","Nucleus"],correct:1},{question:"What is the charge of a proton?",options:["Negative","Positive","Neutral"],correct:1}]},english:{elementary:[{question:"What is a noun?",options:["Action word","Person, place, or thing","Describing word"],correct:1},{question:"What is a verb?",options:["Action word","Person, place, or thing","Describing word"],correct:0},{question:"How many letters are in the alphabet?",options:["24","25","26"],correct:2},{question:"What is an adjective?",options:["Action word","Person, place, or thing","Describing word"],correct:2},{question:"What punctuation ends a question?",options:["Period","Question mark","Exclamation point"],correct:1}],middle:[{question:"What is a metaphor?",options:["Direct comparison using 'like' or 'as'","Indirect comparison","Exaggeration"],correct:1},{question:"What is alliteration?",options:["Repetition of vowel sounds","Repetition of consonant sounds","Rhyming words"],correct:1},{question:"What is the subject in 'The dog ran quickly'?",options:["dog","ran","quickly"],correct:0},{question:"What is personification?",options:["Giving human qualities to non-human things","Comparing two things","Exaggerating"],correct:0},{question:"What part of speech is 'quickly'?",options:["Noun","Verb","Adverb"],correct:2}],high:[{question:"What is iambic pentameter?",options:["5 feet of unstressed-stressed syllables","4 feet of stressed-unstressed syllables","6 feet of unstressed-stressed syllables"],correct:0},{question:"Who wrote 'Romeo and Juliet'?",options:["Charles Dickens","William Shakespeare","Mark Twain"],correct:1},{question:"What is a thesis statement?",options:["Concluding sentence","Main argument","Supporting detail"],correct:1},{question:"What is dramatic irony?",options:["Audience knows more than characters","Opposite of what's expected","Exaggeration"],correct:0},{question:"What is symbolism?",options:["Using objects to represent ideas","Repeating words","Comparing things"],correct:0}]},history:{elementary:[{question:"Who was the first President of the United States?",options:["Abraham Lincoln","George Washington","Thomas Jefferson"],correct:1},{question:"What holiday celebrates American independence?",options:["Memorial Day","4th of July","Labor Day"],correct:1},{question:"What ocean did Columbus cross to reach America?",options:["Pacific","Atlantic","Indian"],correct:1},{question:"Who was the 16th President?",options:["George Washington","Abraham Lincoln","Theodore Roosevelt"],correct:1},{question:"What war was fought between North and South?",options:["Revolutionary War","Civil War","World War I"],correct:1}],middle:[{question:"What year did World War II end?",options:["1944","1945","1946"],correct:1},{question:"Who wrote the Declaration of Independence?",options:["George Washington","Thomas Jefferson","Benjamin Franklin"],correct:1},{question:"What was the first permanent English settlement?",options:["Plymouth","Jamestown","Boston"],correct:1},{question:"What amendment gave women the right to vote?",options:["18th","19th","20th"],correct:1},{question:"What purchase doubled the size of the U.S.?",options:["Alaska Purchase","Louisiana Purchase","Gadsden Purchase"],correct:1}],high:[{question:"What treaty ended World War I?",options:["Treaty of Versailles","Treaty of Paris","Treaty of Ghent"],correct:0},{question:"Who was the first Secretary of the Treasury?",options:["Thomas Jefferson","Alexander Hamilton","John Adams"],correct:1},{question:"What doctrine warned European powers against colonizing the Americas?",options:["Truman Doctrine","Monroe Doctrine","Eisenhower Doctrine"],correct:1},{question:"What Supreme Court case established judicial review?",options:["Marbury v. Madison","Brown v. Board","Plessy v. Ferguson"],correct:0},{question:"What act led to the Boston Tea Party?",options:["Stamp Act","Tea Act","Sugar Act"],correct:1}]}};function Lie(){const[t,e]=p.useState("math"),[n,r]=p.useState("elementary"),[s,o]=p.useState(0),[a,l]=p.useState(0),[c,u]=p.useState(0),[d,h]=p.useState(!1),[m,g]=p.useState(null),[_,v]=p.useState(!1),[x,y]=p.useState(!1),{toast:w}=tn(),j=ik[t][n],E=Math.min(5,j.length),P=R=>{switch(R){case"math":return RI;case"science":return kU;case"english":return _g;case"history":return Vc;default:return _g}},U=R=>{switch(R){case"elementary":return"K-4th Grade";case"middle":return"5th-8th Grade";case"high":return"High School"}},T=()=>{o(0),l(0),u(0),h(!0),g(null),v(!1),y(!1)},S=R=>{!d||_||g(R)},C=()=>{if(m===null)return;const R=j[s];if(m===R.correct){const G=n==="high"?15:n==="middle"?10:5;l(a+G),u(c+1),w({title:"Correct!",description:`Great job! +${G} points`})}else w({title:"Incorrect",description:`The correct answer was: ${R.options[R.correct]}`,variant:"destructive"});v(!0)},k=()=>{s+1>=E?(y(!0),h(!1)):(o(s+1),g(null),v(!1))},I=()=>{h(!1),y(!1),o(0),l(0),u(0),g(null),v(!1)};return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-gradient-to-r from-indigo-500 to-purple-600 text-white",children:i.jsx("div",{className:"container mx-auto px-4 py-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx(UI,{className:"h-16 w-16 mx-auto mb-4"}),i.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"School Trivia"}),i.jsx("p",{className:"text-xl md:text-2xl opacity-90",children:"Test your knowledge across Math, Science, English & History"})]})})}),i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[!d&&!x&&i.jsxs(i.Fragment,{children:[i.jsxs(re,{className:"mb-8",children:[i.jsxs(ye,{children:[i.jsx(he,{children:"Choose Subject"}),i.jsx(Ue,{children:"Select the subject you want to be quizzed on"})]}),i.jsx(ae,{children:i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.keys(ik).map(R=>{const A=P(R);return i.jsxs(ee,{variant:t===R?"default":"outline",className:"h-20 flex flex-col gap-2",onClick:()=>e(R),children:[i.jsx(A,{className:"h-6 w-6"}),R.charAt(0).toUpperCase()+R.slice(1)]},R)})})})]}),i.jsxs(re,{className:"mb-8",children:[i.jsxs(ye,{children:[i.jsx(he,{children:"Choose Grade Level"}),i.jsx(Ue,{children:"Select your preferred difficulty level"})]}),i.jsx(ae,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:["elementary","middle","high"].map(R=>i.jsx(ee,{variant:n===R?"default":"outline",className:"h-16",onClick:()=>r(R),children:U(R)},R))})})]}),i.jsx("div",{className:"text-center",children:i.jsxs(ee,{size:"lg",onClick:T,children:["Start ",t.charAt(0).toUpperCase()+t.slice(1)," Quiz (",U(n),")"]})})]}),d&&!x&&i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs(he,{children:["Question ",s+1," of ",E]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-sm text-gray-500",children:["Score: ",a]}),i.jsxs("p",{className:"text-sm text-gray-500",children:[t.charAt(0).toUpperCase()+t.slice(1)," • ",U(n)]})]})]})}),i.jsx(ae,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsx("h3",{className:"text-xl font-medium",children:j[s].question}),i.jsx("div",{className:"space-y-3",children:j[s].options.map((R,A)=>{let G="w-full justify-start p-4 h-auto text-left transition-all duration-200 transform hover:scale-105";return _?A===j[s].correct?G+=" bg-green-100 border-green-500 text-green-800 hover:bg-green-100":A===m&&m!==j[s].correct?G+=" bg-red-100 border-red-500 text-red-800 hover:bg-red-100":G+=" opacity-50":m===A?G+=" bg-blue-100 border-blue-500 text-blue-800":G+=" border-gray-300 hover:border-blue-300 hover:bg-blue-50",i.jsx(ee,{variant:"outline",className:G,onClick:()=>S(A),disabled:_,children:i.jsxs("span",{className:"flex items-center",children:[i.jsx("span",{className:"bg-gray-200 rounded-full w-6 h-6 flex items-center justify-center mr-3 text-sm font-bold",children:String.fromCharCode(65+A)}),R,_&&A===j[s].correct&&i.jsx("span",{className:"ml-auto text-green-600",children:"✓"}),_&&A===m&&m!==j[s].correct&&i.jsx("span",{className:"ml-auto text-red-600",children:"✗"})]})},A)})}),i.jsx("div",{className:"flex gap-4",children:_?i.jsx(ee,{onClick:k,children:s+1>=E?"Finish Quiz":"Next Question"}):i.jsx(ee,{onClick:C,disabled:m===null,children:"Submit Answer"})})]})})]}),x&&i.jsx(re,{children:i.jsxs(ae,{className:"p-8 text-center",children:[i.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Quiz Complete!"}),i.jsxs("div",{className:"space-y-2 mb-6",children:[i.jsxs("p",{className:"text-lg",children:[i.jsx("strong",{children:"Subject:"})," ",t.charAt(0).toUpperCase()+t.slice(1)]}),i.jsxs("p",{className:"text-lg",children:[i.jsx("strong",{children:"Grade Level:"})," ",U(n)]}),i.jsxs("p",{className:"text-lg",children:[i.jsx("strong",{children:"Score:"})," ",a," points"]}),i.jsxs("p",{className:"text-lg",children:[i.jsx("strong",{children:"Correct:"})," ",c,"/",E," (",Math.round(c/E*100),"%)"]})]}),i.jsx("div",{className:"mb-6",children:c>=E*.8?i.jsxs("div",{className:"text-green-600",children:[i.jsx("h3",{className:"text-xl font-bold",children:"🎓 Excellent Work!"}),i.jsx("p",{children:"Outstanding academic performance!"})]}):c>=E*.6?i.jsxs("div",{className:"text-blue-600",children:[i.jsx("h3",{className:"text-xl font-bold",children:"📚 Good Job!"}),i.jsx("p",{children:"Keep up the great work!"})]}):i.jsxs("div",{className:"text-orange-600",children:[i.jsx("h3",{className:"text-xl font-bold",children:"📖 Keep Studying!"}),i.jsx("p",{children:"Try again to improve your score!"})]})}),i.jsx(ee,{onClick:I,children:"Play Again"})]})})]})]})}var tm={};(function t(e,n,r,s){var o=!!(e.Worker&&e.Blob&&e.Promise&&e.OffscreenCanvas&&e.OffscreenCanvasRenderingContext2D&&e.HTMLCanvasElement&&e.HTMLCanvasElement.prototype.transferControlToOffscreen&&e.URL&&e.URL.createObjectURL),a=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!e.OffscreenCanvas)return!1;var D=new OffscreenCanvas(1,1),L=D.getContext("2d");L.fillRect(0,0,1,1);var X=D.transferToImageBitmap();try{L.createPattern(X,"no-repeat")}catch{return!1}return!0}();function c(){}function u(D){var L=n.exports.Promise,X=L!==void 0?L:e.Promise;return typeof X=="function"?new X(D):(D(c,c),null)}var d=function(D,L){return{transform:function(X){if(D)return X;if(L.has(X))return L.get(X);var $=new OffscreenCanvas(X.width,X.height),K=$.getContext("2d");return K.drawImage(X,0,0),L.set(X,$),$},clear:function(){L.clear()}}}(l,new Map),h=function(){var D=Math.floor(16.666666666666668),L,X,$={},K=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(L=function(Y){var ie=Math.random();return $[ie]=requestAnimationFrame(function te(le){K===le||K+D-1<le?(K=le,delete $[ie],Y()):$[ie]=requestAnimationFrame(te)}),ie},X=function(Y){$[Y]&&cancelAnimationFrame($[Y])}):(L=function(Y){return setTimeout(Y,D)},X=function(Y){return clearTimeout(Y)}),{frame:L,cancel:X}}(),m=function(){var D,L,X={};function $(K){function Y(ie,te){K.postMessage({options:ie||{},callback:te})}K.init=function(te){var le=te.transferControlToOffscreen();K.postMessage({canvas:le},[le])},K.fire=function(te,le,xe){if(L)return Y(te,null),L;var _e=Math.random().toString(36).slice(2);return L=u(function(Pe){function de(Ke){Ke.data.callback===_e&&(delete X[_e],K.removeEventListener("message",de),L=null,d.clear(),xe(),Pe())}K.addEventListener("message",de),Y(te,_e),X[_e]=de.bind(null,{data:{callback:_e}})}),L},K.reset=function(){K.postMessage({reset:!0});for(var te in X)X[te](),delete X[te]}}return function(){if(D)return D;if(!r&&o){var K=["var CONFETTI, SIZE = {}, module = {};","("+t.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{D=new Worker(URL.createObjectURL(new Blob([K])))}catch(Y){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",Y),null}$(D)}return D}}(),g={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function _(D,L){return L?L(D):D}function v(D){return D!=null}function x(D,L,X){return _(D&&v(D[L])?D[L]:g[L],X)}function y(D){return D<0?0:Math.floor(D)}function w(D,L){return Math.floor(Math.random()*(L-D))+D}function j(D){return parseInt(D,16)}function E(D){return D.map(P)}function P(D){var L=String(D).replace(/[^0-9a-f]/gi,"");return L.length<6&&(L=L[0]+L[0]+L[1]+L[1]+L[2]+L[2]),{r:j(L.substring(0,2)),g:j(L.substring(2,4)),b:j(L.substring(4,6))}}function U(D){var L=x(D,"origin",Object);return L.x=x(L,"x",Number),L.y=x(L,"y",Number),L}function T(D){D.width=document.documentElement.clientWidth,D.height=document.documentElement.clientHeight}function S(D){var L=D.getBoundingClientRect();D.width=L.width,D.height=L.height}function C(D){var L=document.createElement("canvas");return L.style.position="fixed",L.style.top="0px",L.style.left="0px",L.style.pointerEvents="none",L.style.zIndex=D,L}function k(D,L,X,$,K,Y,ie,te,le){D.save(),D.translate(L,X),D.rotate(Y),D.scale($,K),D.arc(0,0,1,ie,te,le),D.restore()}function I(D){var L=D.angle*(Math.PI/180),X=D.spread*(Math.PI/180);return{x:D.x,y:D.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:D.startVelocity*.5+Math.random()*D.startVelocity,angle2D:-L+(.5*X-Math.random()*X),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:D.color,shape:D.shape,tick:0,totalTicks:D.ticks,decay:D.decay,drift:D.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:D.gravity*3,ovalScalar:.6,scalar:D.scalar,flat:D.flat}}function R(D,L){L.x+=Math.cos(L.angle2D)*L.velocity+L.drift,L.y+=Math.sin(L.angle2D)*L.velocity+L.gravity,L.velocity*=L.decay,L.flat?(L.wobble=0,L.wobbleX=L.x+10*L.scalar,L.wobbleY=L.y+10*L.scalar,L.tiltSin=0,L.tiltCos=0,L.random=1):(L.wobble+=L.wobbleSpeed,L.wobbleX=L.x+10*L.scalar*Math.cos(L.wobble),L.wobbleY=L.y+10*L.scalar*Math.sin(L.wobble),L.tiltAngle+=.1,L.tiltSin=Math.sin(L.tiltAngle),L.tiltCos=Math.cos(L.tiltAngle),L.random=Math.random()+2);var X=L.tick++/L.totalTicks,$=L.x+L.random*L.tiltCos,K=L.y+L.random*L.tiltSin,Y=L.wobbleX+L.random*L.tiltCos,ie=L.wobbleY+L.random*L.tiltSin;if(D.fillStyle="rgba("+L.color.r+", "+L.color.g+", "+L.color.b+", "+(1-X)+")",D.beginPath(),a&&L.shape.type==="path"&&typeof L.shape.path=="string"&&Array.isArray(L.shape.matrix))D.fill(q(L.shape.path,L.shape.matrix,L.x,L.y,Math.abs(Y-$)*.1,Math.abs(ie-K)*.1,Math.PI/10*L.wobble));else if(L.shape.type==="bitmap"){var te=Math.PI/10*L.wobble,le=Math.abs(Y-$)*.1,xe=Math.abs(ie-K)*.1,_e=L.shape.bitmap.width*L.scalar,Pe=L.shape.bitmap.height*L.scalar,de=new DOMMatrix([Math.cos(te)*le,Math.sin(te)*le,-Math.sin(te)*xe,Math.cos(te)*xe,L.x,L.y]);de.multiplySelf(new DOMMatrix(L.shape.matrix));var Ke=D.createPattern(d.transform(L.shape.bitmap),"no-repeat");Ke.setTransform(de),D.globalAlpha=1-X,D.fillStyle=Ke,D.fillRect(L.x-_e/2,L.y-Pe/2,_e,Pe),D.globalAlpha=1}else if(L.shape==="circle")D.ellipse?D.ellipse(L.x,L.y,Math.abs(Y-$)*L.ovalScalar,Math.abs(ie-K)*L.ovalScalar,Math.PI/10*L.wobble,0,2*Math.PI):k(D,L.x,L.y,Math.abs(Y-$)*L.ovalScalar,Math.abs(ie-K)*L.ovalScalar,Math.PI/10*L.wobble,0,2*Math.PI);else if(L.shape==="star")for(var Ve=Math.PI/2*3,bt=4*L.scalar,Ze=8*L.scalar,xt=L.x,Bt=L.y,lt=5,mt=Math.PI/lt;lt--;)xt=L.x+Math.cos(Ve)*Ze,Bt=L.y+Math.sin(Ve)*Ze,D.lineTo(xt,Bt),Ve+=mt,xt=L.x+Math.cos(Ve)*bt,Bt=L.y+Math.sin(Ve)*bt,D.lineTo(xt,Bt),Ve+=mt;else D.moveTo(Math.floor(L.x),Math.floor(L.y)),D.lineTo(Math.floor(L.wobbleX),Math.floor(K)),D.lineTo(Math.floor(Y),Math.floor(ie)),D.lineTo(Math.floor($),Math.floor(L.wobbleY));return D.closePath(),D.fill(),L.tick<L.totalTicks}function A(D,L,X,$,K){var Y=L.slice(),ie=D.getContext("2d"),te,le,xe=u(function(_e){function Pe(){te=le=null,ie.clearRect(0,0,$.width,$.height),d.clear(),K(),_e()}function de(){r&&!($.width===s.width&&$.height===s.height)&&($.width=D.width=s.width,$.height=D.height=s.height),!$.width&&!$.height&&(X(D),$.width=D.width,$.height=D.height),ie.clearRect(0,0,$.width,$.height),Y=Y.filter(function(Ke){return R(ie,Ke)}),Y.length?te=h.frame(de):Pe()}te=h.frame(de),le=Pe});return{addFettis:function(_e){return Y=Y.concat(_e),xe},canvas:D,promise:xe,reset:function(){te&&h.cancel(te),le&&le()}}}function G(D,L){var X=!D,$=!!x(L||{},"resize"),K=!1,Y=x(L,"disableForReducedMotion",Boolean),ie=o&&!!x(L||{},"useWorker"),te=ie?m():null,le=X?T:S,xe=D&&te?!!D.__confetti_initialized:!1,_e=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,Pe;function de(Ve,bt,Ze){for(var xt=x(Ve,"particleCount",y),Bt=x(Ve,"angle",Number),lt=x(Ve,"spread",Number),mt=x(Ve,"startVelocity",Number),vn=x(Ve,"decay",Number),W=x(Ve,"gravity",Number),Z=x(Ve,"drift",Number),se=x(Ve,"colors",E),Se=x(Ve,"ticks",Number),ve=x(Ve,"shapes"),pe=x(Ve,"scalar"),Ee=!!x(Ve,"flat"),et=U(Ve),At=xt,Lt=[],Si=D.width*et.x,vr=D.height*et.y;At--;)Lt.push(I({x:Si,y:vr,angle:Bt,spread:lt,startVelocity:mt,color:se[At%se.length],shape:ve[w(0,ve.length)],ticks:Se,decay:vn,gravity:W,drift:Z,scalar:pe,flat:Ee}));return Pe?Pe.addFettis(Lt):(Pe=A(D,Lt,le,bt,Ze),Pe.promise)}function Ke(Ve){var bt=Y||x(Ve,"disableForReducedMotion",Boolean),Ze=x(Ve,"zIndex",Number);if(bt&&_e)return u(function(mt){mt()});X&&Pe?D=Pe.canvas:X&&!D&&(D=C(Ze),document.body.appendChild(D)),$&&!xe&&le(D);var xt={width:D.width,height:D.height};te&&!xe&&te.init(D),xe=!0,te&&(D.__confetti_initialized=!0);function Bt(){if(te){var mt={getBoundingClientRect:function(){if(!X)return D.getBoundingClientRect()}};le(mt),te.postMessage({resize:{width:mt.width,height:mt.height}});return}xt.width=xt.height=null}function lt(){Pe=null,$&&(K=!1,e.removeEventListener("resize",Bt)),X&&D&&(document.body.contains(D)&&document.body.removeChild(D),D=null,xe=!1)}return $&&!K&&(K=!0,e.addEventListener("resize",Bt,!1)),te?te.fire(Ve,xt,lt):de(Ve,xt,lt)}return Ke.reset=function(){te&&te.reset(),Pe&&Pe.reset()},Ke}var ue;function B(){return ue||(ue=G(null,{useWorker:!0,resize:!0})),ue}function q(D,L,X,$,K,Y,ie){var te=new Path2D(D),le=new Path2D;le.addPath(te,new DOMMatrix(L));var xe=new Path2D;return xe.addPath(le,new DOMMatrix([Math.cos(ie)*K,Math.sin(ie)*K,-Math.sin(ie)*Y,Math.cos(ie)*Y,X,$])),xe}function O(D){if(!a)throw new Error("path confetti are not supported in this browser");var L,X;typeof D=="string"?L=D:(L=D.path,X=D.matrix);var $=new Path2D(L),K=document.createElement("canvas"),Y=K.getContext("2d");if(!X){for(var ie=1e3,te=ie,le=ie,xe=0,_e=0,Pe,de,Ke=0;Ke<ie;Ke+=2)for(var Ve=0;Ve<ie;Ve+=2)Y.isPointInPath($,Ke,Ve,"nonzero")&&(te=Math.min(te,Ke),le=Math.min(le,Ve),xe=Math.max(xe,Ke),_e=Math.max(_e,Ve));Pe=xe-te,de=_e-le;var bt=10,Ze=Math.min(bt/Pe,bt/de);X=[Ze,0,0,Ze,-Math.round(Pe/2+te)*Ze,-Math.round(de/2+le)*Ze]}return{type:"path",path:L,matrix:X}}function F(D){var L,X=1,$="#000000",K='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof D=="string"?L=D:(L=D.text,X="scalar"in D?D.scalar:X,K="fontFamily"in D?D.fontFamily:K,$="color"in D?D.color:$);var Y=10*X,ie=""+Y+"px "+K,te=new OffscreenCanvas(Y,Y),le=te.getContext("2d");le.font=ie;var xe=le.measureText(L),_e=Math.ceil(xe.actualBoundingBoxRight+xe.actualBoundingBoxLeft),Pe=Math.ceil(xe.actualBoundingBoxAscent+xe.actualBoundingBoxDescent),de=2,Ke=xe.actualBoundingBoxLeft+de,Ve=xe.actualBoundingBoxAscent+de;_e+=de+de,Pe+=de+de,te=new OffscreenCanvas(_e,Pe),le=te.getContext("2d"),le.font=ie,le.fillStyle=$,le.fillText(L,Ke,Ve);var bt=1/X;return{type:"bitmap",bitmap:te.transferToImageBitmap(),matrix:[bt,0,0,bt,-_e*bt/2,-Pe*bt/2]}}n.exports=function(){return B().apply(this,arguments)},n.exports.reset=function(){B().reset()},n.exports.create=G,n.exports.shapeFromPath=O,n.exports.shapeFromText=F})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),tm,!1);const Bb=tm.exports;tm.exports.create;const Oie=Object.freeze(Object.defineProperty({__proto__:null,default:Bb},Symbol.toStringTag,{value:"Module"})),mp=[{id:"CA",name:"California",path:"M 60 180 L 60 320 L 80 340 L 90 350 L 85 380 L 75 385 L 50 370 L 45 350 L 30 340 L 25 320 L 30 300 L 40 280 L 50 250 L 55 220 L 58 200 Z"},{id:"OR",name:"Oregon",path:"M 30 120 L 90 120 L 85 160 L 60 180 L 55 150 L 45 140 L 35 130 Z"},{id:"WA",name:"Washington",path:"M 25 60 L 90 60 L 95 80 L 90 100 L 30 120 L 25 100 L 20 80 Z"},{id:"AZ",name:"Arizona",path:"M 95 280 L 160 280 L 155 340 L 150 380 L 90 350 L 80 340 L 85 320 L 90 300 Z"},{id:"NV",name:"Nevada",path:"M 90 160 L 120 160 L 125 200 L 130 240 L 125 280 L 95 280 L 90 240 L 85 200 L 85 160 Z"},{id:"UT",name:"Utah",path:"M 125 160 L 160 160 L 160 280 L 125 280 L 125 240 L 130 200 Z"},{id:"NM",name:"New Mexico",path:"M 160 280 L 220 280 L 220 380 L 150 380 L 155 340 L 160 320 Z"},{id:"CO",name:"Colorado",path:"M 160 220 L 220 220 L 220 280 L 160 280 L 160 240 Z"},{id:"WY",name:"Wyoming",path:"M 160 160 L 220 160 L 220 220 L 160 220 Z"},{id:"MT",name:"Montana",path:"M 160 80 L 280 80 L 280 160 L 220 160 L 160 160 Z"},{id:"ID",name:"Idaho",path:"M 125 80 L 160 80 L 160 160 L 125 160 L 120 120 L 115 100 Z"},{id:"ND",name:"North Dakota",path:"M 280 80 L 360 80 L 360 140 L 280 140 Z"},{id:"SD",name:"South Dakota",path:"M 280 140 L 360 140 L 360 200 L 280 200 Z"},{id:"NE",name:"Nebraska",path:"M 220 220 L 360 220 L 360 260 L 280 260 L 220 240 Z"},{id:"KS",name:"Kansas",path:"M 220 260 L 360 260 L 360 320 L 280 320 L 220 300 Z"},{id:"OK",name:"Oklahoma",path:"M 280 320 L 400 320 L 410 340 L 400 380 L 280 380 L 220 360 L 220 340 Z"},{id:"TX",name:"Texas",path:"M 220 380 L 400 380 L 420 420 L 400 480 L 360 500 L 300 480 L 260 460 L 240 440 L 220 420 Z"},{id:"MN",name:"Minnesota",path:"M 360 80 L 440 80 L 445 140 L 440 180 L 420 200 L 360 200 L 360 140 Z"},{id:"IA",name:"Iowa",path:"M 360 200 L 440 200 L 440 260 L 360 260 L 360 220 Z"},{id:"MO",name:"Missouri",path:"M 360 260 L 440 260 L 450 300 L 440 340 L 420 360 L 400 380 L 360 360 L 360 320 Z"},{id:"AR",name:"Arkansas",path:"M 400 360 L 480 360 L 480 420 L 440 440 L 400 420 L 400 380 Z"},{id:"WI",name:"Wisconsin",path:"M 440 140 L 520 140 L 525 180 L 520 220 L 480 240 L 440 220 L 440 180 Z"},{id:"IL",name:"Illinois",path:"M 480 200 L 520 200 L 520 280 L 480 300 L 460 280 L 440 260 L 440 240 Z"},{id:"MI",name:"Michigan",path:"M 520 120 L 580 120 L 590 140 L 585 180 L 580 220 L 560 240 L 520 220 L 520 180 L 525 160 Z"},{id:"IN",name:"Indiana",path:"M 520 220 L 580 220 L 580 300 L 560 320 L 520 300 L 520 280 Z"},{id:"OH",name:"Ohio",path:"M 580 200 L 640 200 L 650 240 L 640 280 L 620 320 L 580 300 L 580 260 L 585 240 L 580 220 Z"},{id:"LA",name:"Louisiana",path:"M 400 420 L 480 420 L 500 460 L 480 480 L 440 480 L 400 460 Z"},{id:"MS",name:"Mississippi",path:"M 480 360 L 540 360 L 540 440 L 520 460 L 480 460 L 480 420 Z"},{id:"AL",name:"Alabama",path:"M 540 360 L 600 360 L 600 440 L 580 460 L 540 460 L 540 420 Z"},{id:"TN",name:"Tennessee",path:"M 440 320 L 600 320 L 600 360 L 540 360 L 480 360 L 440 340 Z"},{id:"KY",name:"Kentucky",path:"M 520 280 L 640 280 L 640 320 L 600 320 L 560 320 L 520 300 Z"},{id:"GA",name:"Georgia",path:"M 600 360 L 680 360 L 680 440 L 660 460 L 600 460 L 600 420 Z"},{id:"FL",name:"Florida",path:"M 600 440 L 700 440 L 720 480 L 700 520 L 680 540 L 640 520 L 620 500 L 600 480 Z"},{id:"SC",name:"South Carolina",path:"M 680 360 L 740 360 L 740 420 L 700 440 L 680 420 Z"},{id:"NC",name:"North Carolina",path:"M 640 320 L 740 320 L 760 340 L 740 360 L 680 360 L 640 340 Z"},{id:"WV",name:"West Virginia",path:"M 640 240 L 700 240 L 720 260 L 700 300 L 680 320 L 640 300 L 640 280 Z"},{id:"VA",name:"Virginia",path:"M 680 280 L 760 280 L 780 300 L 760 320 L 740 340 L 680 320 L 680 300 Z"},{id:"MD",name:"Maryland",path:"M 700 240 L 780 240 L 780 280 L 760 280 L 720 260 Z"},{id:"DE",name:"Delaware",path:"M 780 240 L 800 240 L 800 280 L 780 280 Z"},{id:"PA",name:"Pennsylvania",path:"M 640 200 L 780 200 L 780 240 L 700 240 L 650 220 Z"},{id:"NJ",name:"New Jersey",path:"M 780 200 L 820 200 L 820 280 L 800 280 L 780 260 L 780 240 Z"},{id:"NY",name:"New York",path:"M 640 140 L 780 140 L 800 160 L 780 200 L 720 180 L 680 160 L 640 160 Z"},{id:"VT",name:"Vermont",path:"M 780 100 L 820 100 L 820 140 L 780 140 Z"},{id:"NH",name:"New Hampshire",path:"M 820 100 L 860 100 L 860 140 L 820 140 Z"},{id:"ME",name:"Maine",path:"M 860 60 L 900 60 L 900 140 L 860 140 L 860 100 Z"},{id:"MA",name:"Massachusetts",path:"M 780 140 L 860 140 L 860 180 L 780 180 L 780 160 Z"},{id:"RI",name:"Rhode Island",path:"M 860 140 L 880 140 L 880 180 L 860 180 Z"},{id:"CT",name:"Connecticut",path:"M 780 180 L 860 180 L 860 200 L 780 200 Z"},{id:"AK",name:"Alaska",path:"M 60 450 L 160 450 L 180 480 L 160 520 L 120 540 L 80 520 L 40 500 Z"},{id:"HI",name:"Hawaii",path:"M 220 480 L 240 480 L 250 500 L 240 520 L 220 520 L 210 500 Z"}];function ok({selectedState:t,onStateClick:e,correctStates:n=new Set,incorrectStates:r=new Set,currentTargetState:s}){var u;const[o,a]=p.useState(""),l=d=>n.has(d)?"#10B981":r.has(d)?"#EF4444":s===d?"#F59E0B":o===d?"#6366F1":t===d?"#8B5CF6":"#94A3B8",c=d=>s===d?"#D97706":"#475569";return i.jsxs("div",{className:"w-full max-w-4xl mx-auto bg-blue-50 dark:bg-blue-950 rounded-lg p-4",children:[i.jsxs("svg",{viewBox:"0 0 1000 600",className:"w-full h-auto cursor-pointer",style:{maxHeight:"500px"},children:[i.jsx("rect",{width:"1000",height:"600",fill:"#DBEAFE",className:"dark:fill-blue-900"}),mp.map(d=>i.jsx("path",{d:d.path,fill:l(d.id),stroke:c(d.id),strokeWidth:s===d.id?"3":"1.5",className:"transition-all duration-200 hover:brightness-110",onMouseEnter:()=>a(d.id),onMouseLeave:()=>a(""),onClick:()=>e(d.id,d.name),"data-testid":`state-${d.id}`,children:i.jsx("title",{children:d.name})},d.id)),mp.map(d=>{var h;return(h=document.querySelector(`[data-testid="state-${d.id}"]`))==null||h.getBoundingClientRect(),null})]}),i.jsxs("div",{className:"flex flex-wrap gap-4 mt-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),i.jsx("span",{children:"Current Target"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),i.jsxs("span",{children:["Correct (",n.size,")"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),i.jsxs("span",{children:["Incorrect (",r.size,")"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-4 h-4 bg-gray-400 rounded"}),i.jsxs("span",{children:["Remaining (",mp.length-n.size-r.size,")"]})]})]}),s&&i.jsx("div",{className:"mt-4 p-3 bg-yellow-100 dark:bg-yellow-900 rounded-lg text-center",children:i.jsxs("p",{className:"font-medium text-yellow-800 dark:text-yellow-200",children:["Click on: ",i.jsx("span",{className:"font-bold",children:(u=mp.find(d=>d.id===s))==null?void 0:u.name})]})})]})}function Vie({map:t,onGameComplete:e}){const[n,r]=p.useState(!1),[s,o]=p.useState(null),[a,l]=p.useState(new Set),[c,u]=p.useState(new Set),[d,h]=p.useState([]),[m,g]=p.useState(!1),[_,v]=p.useState(0),[x,y]=p.useState(0),[w,j]=p.useState(0),[E,P]=p.useState(0),[U,T]=p.useState(!1),{toast:S}=tn();p.useEffect(()=>{if(!n||m)return;const B=setInterval(()=>{y(Date.now()-_)},1e3);return()=>clearInterval(B)},[n,m,_]);const C=()=>{r(!0),v(Date.now()),l(new Set),u(new Set),h([...t.regions]),j(0),P(0),g(!1),T(!1);const B=[...t.regions].sort(()=>Math.random()-.5);o(B[0]),h(B.slice(1))},k=(B,q)=>{if(!s||m||!n)return;if(s.code===B||s.name.toLowerCase()===q.toLowerCase())if(l(F=>new Set([...Array.from(F),B])),P(E+1),S({title:"Correct! ✅",description:`${s.name} is correct!`,duration:2e3}),d.length>0){const F=d[0];o(F),h(d.slice(1)),T(!1)}else A();else u(F=>new Set([...Array.from(F),B])),P(0),S({title:"Not quite right ❌",description:`That's ${q}. Try again for ${s.name}!`,duration:3e3})},I=()=>{s&&(j(w+1),T(!0),S({title:"Hint Used! 💡",description:`Capital: ${s.capital}`,duration:3e3}))},R=()=>{if(s)if(u(B=>new Set([...Array.from(B),s.code])),P(0),S({title:"Skipped ⏭️",description:`That was ${s.name}`,duration:2e3}),d.length>0){const B=d[0];o(B),h(d.slice(1)),T(!1)}else A()},A=async()=>{const B=Math.floor((Date.now()-_)/1e3),q=a.size;c.size;let O=0;q>=5&&(O=Math.floor(q/5)*25);const F=q*10,D=Math.max(0,Math.floor((3600-Math.min(B,3600))/72)),L=w*5,X=Math.max(0,F+O+D-L),$=t.regions.length*10+50,K=Math.round(q/t.regions.length*100),Y={score:X,maxScore:$,correctAnswers:q,totalQuestions:t.regions.length,timeSpent:B,streakBonus:O,hintsUsed:w,percentage:K};g(!0),e(Y),K>=90?Bb({particleCount:100,spread:70,origin:{y:.6}}):K>=70&&Bb({particleCount:50,spread:50,origin:{y:.6}})},G=B=>{const q=Math.floor(B/60),O=B%60;return`${q}:${O.toString().padStart(2,"0")}`};if(!n)return i.jsxs(re,{className:"w-full max-w-2xl mx-auto","data-testid":"card-geography-start",children:[i.jsxs(ye,{className:"text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx(yu,{className:"h-16 w-16 text-blue-600"})}),i.jsx(he,{className:"text-2xl font-bold","data-testid":"text-map-title",children:t.name}),i.jsx("p",{className:"text-muted-foreground","data-testid":"text-map-description",children:t.description}),i.jsxs("div",{className:"flex justify-center gap-4 text-sm text-muted-foreground",children:[i.jsxs(Fe,{variant:"secondary","data-testid":"badge-total-regions",children:[t.totalRegions," Regions"]}),i.jsx(Fe,{variant:"secondary","data-testid":"badge-time-limit",children:"60 minute time limit"})]})]}),i.jsx(ae,{className:"text-center",children:i.jsxs(ee,{onClick:C,size:"lg",className:"w-full","data-testid":"button-start-game",children:[i.jsx(yu,{className:"mr-2 h-4 w-4"}),"Start Geography Challenge"]})})]});if(m)return i.jsxs(re,{className:"w-full max-w-4xl mx-auto","data-testid":"card-results",children:[i.jsxs(ye,{className:"text-center",children:[i.jsx("div",{className:"flex justify-center mb-4",children:i.jsx(si,{className:"h-16 w-16 text-yellow-600"})}),i.jsx(he,{className:"text-2xl font-bold","data-testid":"text-results-title",children:"Geography Challenge Complete!"})]}),i.jsxs(ae,{className:"space-y-6",children:[i.jsx(ok,{correctStates:a,incorrectStates:c,onStateClick:()=>{}}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-blue-600","data-testid":"text-final-score",children:[a.size,"/",t.totalRegions]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Correct Answers"})]}),i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-green-600","data-testid":"text-percentage",children:[Math.round(a.size/t.totalRegions*100),"%"]}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Accuracy"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Time:"}),i.jsx("span",{"data-testid":"text-final-time",children:G(Math.floor(x/1e3))})]}),i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Hints Used:"}),i.jsx("span",{"data-testid":"text-hints-used",children:w})]})]}),i.jsx(ee,{onClick:C,className:"w-full","data-testid":"button-play-again",children:"Play Again"})]})]});const ue=a.size/t.regions.length*100;return i.jsxs(re,{className:"w-full max-w-4xl mx-auto","data-testid":"card-geography-game",children:[i.jsxs(ye,{children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx(he,{className:"text-lg","data-testid":"text-game-title",children:"Geography Challenge"}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[i.jsxs("div",{className:"flex items-center gap-1","data-testid":"text-timer",children:[i.jsx(HU,{className:"h-4 w-4"}),G(Math.floor(x/1e3))]}),i.jsxs("div",{className:"flex items-center gap-1","data-testid":"text-streak",children:[i.jsx(Ts,{className:"h-4 w-4"}),E]})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{children:"Progress"}),i.jsxs("span",{"data-testid":"text-progress",children:[a.size," of ",t.regions.length]})]}),i.jsx(Tr,{value:ue,className:"h-2","data-testid":"progress-bar"})]})]}),i.jsxs(ae,{className:"space-y-6",children:[s&&i.jsxs("div",{className:"text-center bg-blue-50 dark:bg-blue-950 p-6 rounded-lg",children:[i.jsxs("h3",{className:"text-2xl font-bold mb-2","data-testid":"text-target-state",children:["Click on: ",s.name]}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["Find and click on ",s.name," in the map below"]}),s.capital&&i.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["(",s.capital," is the capital)"]})]}),i.jsx(ok,{correctStates:a,incorrectStates:c,currentTargetState:s==null?void 0:s.code,onStateClick:k}),U&&(s==null?void 0:s.capital)&&i.jsx("div",{className:"bg-yellow-100 dark:bg-yellow-900 rounded-lg p-4",children:i.jsxs("p",{className:"text-sm font-medium text-yellow-800 dark:text-yellow-200 text-center",children:["💡 Hint: Capital is ",s.capital]})}),i.jsxs("div",{className:"flex gap-2 justify-center",children:[i.jsxs(ee,{onClick:I,variant:"outline","data-testid":"button-use-hint",children:[i.jsx(gu,{className:"mr-2 h-4 w-4"}),"Hint"]}),i.jsxs(ee,{onClick:R,variant:"outline","data-testid":"button-skip",children:[i.jsx(WI,{className:"mr-2 h-4 w-4"}),"Skip"]})]})]})]})}const Fie="/assets/eiffel_tower_paris_f_535bd0d0-P4j6WzlJ.jpg",Uie="/assets/great_wall_of_china__3c8e986c-D2nYxnVZ.jpg",Bie="/assets/statue_of_liberty_ne_a954c425-ChfTKLs_.jpg",$ie="/assets/machu_picchu_peru_an_ea35fad3-CcbpoV8-.jpg",zie="/assets/sydney_opera_house_a_bd1d5a4b-BvXzhtee.jpg",Wie="/assets/pyramids_of_giza_egy_b0c3ab9f-C0MdkFD1.jpg",Hie="/assets/big_ben_london_clock_13f4e336-yavlcz8W.jpg",qie="/assets/mount_fuji_japan_vol_26dc90c4-CR4Pfpgm.jpg",Gie="/assets/christ_the_redeemer__94dd65f7-ErbKYdZA.jpg",Kie="/assets/taj_mahal_india_whit_a3f75d87-DDYxo3Wr.jpg",Qie={world:[{name:"Eiffel Tower",country:"France",city:"Paris",continent:"Europe",hint:"Iron lattice tower, symbol of romance"},{name:"Great Wall of China",country:"China",city:"Beijing",continent:"Asia",hint:"Ancient fortification, visible from space"},{name:"Statue of Liberty",country:"USA",city:"New York",continent:"North America",hint:"Gift from France, symbol of freedom"},{name:"Machu Picchu",country:"Peru",city:"Cusco",continent:"South America",hint:"Ancient Incan citadel in the mountains"},{name:"Sydney Opera House",country:"Australia",city:"Sydney",continent:"Australia",hint:"Distinctive shell-like design"},{name:"Pyramids of Giza",country:"Egypt",city:"Cairo",continent:"Africa",hint:"Ancient tombs of pharaohs"},{name:"Big Ben",country:"UK",city:"London",continent:"Europe",hint:"Famous clock tower"},{name:"Mount Fuji",country:"Japan",city:"Tokyo",continent:"Asia",hint:"Sacred mountain and volcano"},{name:"Christ the Redeemer",country:"Brazil",city:"Rio de Janeiro",continent:"South America",hint:"Massive statue overlooking the city"},{name:"Taj Mahal",country:"India",city:"Agra",continent:"Asia",hint:"White marble mausoleum"}],usStates:[{name:"California",capital:"Sacramento",nickname:"Golden State",region:"West Coast"},{name:"Texas",capital:"Austin",nickname:"Lone Star State",region:"South"},{name:"Florida",capital:"Tallahassee",nickname:"Sunshine State",region:"Southeast"},{name:"New York",capital:"Albany",nickname:"Empire State",region:"Northeast"},{name:"Alaska",capital:"Juneau",nickname:"Last Frontier",region:"Pacific"},{name:"Hawaii",capital:"Honolulu",nickname:"Aloha State",region:"Pacific"},{name:"Colorado",capital:"Denver",nickname:"Centennial State",region:"Mountain West"},{name:"Maine",capital:"Augusta",nickname:"Pine Tree State",region:"New England"},{name:"Nevada",capital:"Carson City",nickname:"Silver State",region:"Mountain West"},{name:"Vermont",capital:"Montpelier",nickname:"Green Mountain State",region:"New England"}],continents:[{name:"Africa",countries:["Nigeria","Egypt","South Africa","Kenya","Morocco"],landmarks:["Sahara Desert","Victoria Falls","Kilimanjaro"]},{name:"Asia",countries:["China","India","Japan","Thailand","South Korea"],landmarks:["Himalayas","Great Wall","Mount Fuji"]},{name:"Europe",countries:["France","Germany","Italy","Spain","UK"],landmarks:["Alps","Mediterranean Sea","Eiffel Tower"]},{name:"North America",countries:["USA","Canada","Mexico"],landmarks:["Grand Canyon","Niagara Falls","Rocky Mountains"]},{name:"South America",countries:["Brazil","Argentina","Peru","Chile","Colombia"],landmarks:["Amazon Rainforest","Andes Mountains","Machu Picchu"]},{name:"Australia/Oceania",countries:["Australia","New Zealand","Fiji"],landmarks:["Great Barrier Reef","Uluru","Sydney Opera House"]}]},bv={"Eiffel Tower":Fie,"Great Wall of China":Uie,"Statue of Liberty":Bie,"Machu Picchu":$ie,"Sydney Opera House":zie,"Pyramids of Giza":Wie,"Big Ben":Hie,"Mount Fuji":qie,"Christ the Redeemer":Gie,"Taj Mahal":Kie};function Yie(){const[t,e]=p.useState("world"),[n,r]=p.useState(0),[s,o]=p.useState(0),[a,l]=p.useState(!1),[c,u]=p.useState(null),[d,h]=p.useState(""),[m,g]=p.useState(!1),[_]=p.useState(5),[v,x]=p.useState(!1),[y,w]=p.useState([]),[j,E]=p.useState(!1),[P,U]=p.useState(!1),{toast:T}=tn(),{data:S,isLoading:C}=Et({queryKey:["/api/geography/maps/us-states"],enabled:t==="interactive"||t==="usStates"}),k=Tn({mutationFn:async $=>Zt("/api/geography/submit",{method:"POST",body:JSON.stringify($),headers:{"Content-Type":"application/json"}}),onSuccess:()=>{T({title:"Results Submitted! 🎉",description:"Your geography score has been saved."})},onError:()=>{T({title:"Error",description:"Failed to submit results. Please try again.",variant:"destructive"})}}),I=async $=>{try{if(S){const K={mapId:S.id,answers:$.answers||{},timeSpent:$.timeSpent||0,hintsUsed:$.hintsUsed||0};await k.mutateAsync(K)}}catch(K){console.error("Error submitting interactive map results:",K)}},R=$=>{switch($){case"world":return"World Locations";case"usStates":return"US States";case"continents":return"Continents";case"interactive":return"Interactive US Map"}},A=$=>{switch($){case"world":return Vc;case"usStates":return yu;case"continents":return Rw;case"interactive":return _T}},G=()=>{r(0),o(0),l(!0),g(!1),w([]),ue()},ue=()=>{const $=Qie[t],K=$[Math.floor(Math.random()*$.length)];u(K),h(""),x(!1),E(!1),U(!1)},B=()=>{if(!d.trim())return;let $=!1,K=0;if(t==="world"){const Y=c;$=d.toLowerCase().includes(Y.country.toLowerCase())||d.toLowerCase().includes(Y.city.toLowerCase())||d.toLowerCase().includes(Y.name.toLowerCase())}else if(t==="usStates"){const Y=c;$=d.toLowerCase().includes(Y.name.toLowerCase())||d.toLowerCase().includes(Y.capital.toLowerCase())}else if(t==="continents"){const Y=c;$=d.toLowerCase().includes(Y.name.toLowerCase())}$?(K=t==="world"?100:t==="usStates"?75:50,j&&(K=Math.floor(K*.25)),o(s+K),T({title:"Correct!",description:j?`Correct! +${K} points (penalty applied for using hint)`:`Great job! +${K} points`})):T({title:"Incorrect",description:`The answer was: ${q()}`,variant:"destructive"}),w([...y,K]),x(!0)},q=()=>{if(t==="world"){const $=c;return`${$.name}, ${$.country}`}else if(t==="usStates"){const $=c;return`${$.name} (Capital: ${$.capital})`}else return c.name},O=()=>{n+1>=_?(g(!0),l(!1)):(r(n+1),ue())},F=()=>{l(!1),g(!1),r(0),o(0),h(""),x(!1),w([])},D=()=>{if(t==="world")return c.hint;if(t==="usStates"){const $=c;return`Nickname: ${$.nickname} | Region: ${$.region}`}else return`Countries: ${c.countries.slice(0,3).join(", ")}...`},L=()=>{if(t==="world"){const $=c;return`🌍 Continent: ${$.continent} | 🏙️ City: ${$.city}`}else if(t==="usStates"){const $=c;return`🏛️ Capital: ${$.capital} | 📍 First Letter: ${$.name.charAt(0)}`}else return`🗺️ Famous landmarks: ${c.landmarks.slice(0,2).join(", ")}`},X=()=>{E(!0),U(!0),T({title:"💡 Hint Used!",description:"Warning: Your points will be drastically reduced (75% penalty)",variant:"destructive"})};return i.jsxs("div",{className:"min-h-screen bg-gray-50",children:[i.jsx("div",{className:"bg-gradient-to-r from-teal-500 to-cyan-600 text-white",children:i.jsx("div",{className:"container mx-auto px-4 py-12",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Vc,{className:"h-16 w-16 mx-auto mb-4"}),i.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Geo Guesser"}),i.jsx("p",{className:"text-xl md:text-2xl opacity-90",children:"Test your geography knowledge around the world"})]})})}),i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[!a&&!m&&i.jsxs(i.Fragment,{children:[i.jsxs(re,{className:"mb-8",children:[i.jsxs(ye,{children:[i.jsx(he,{children:"Choose Game Mode"}),i.jsx(Ue,{children:"Select the type of geography challenge you want"})]}),i.jsx(ae,{children:i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:["world","usStates","continents","interactive"].map($=>{const K=A($);return i.jsxs(ee,{variant:t===$?"default":"outline",className:"h-24 flex flex-col gap-2",onClick:()=>e($),children:[i.jsx(K,{className:"h-8 w-8"}),R($)]},$)})})})]}),i.jsx("div",{className:"text-center",children:i.jsxs(ee,{size:"lg",onClick:G,children:["Start ",R(t)," Game"]})})]}),(t==="interactive"||t==="usStates")&&!m&&i.jsx("div",{className:"space-y-6",children:i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsxs(he,{className:"flex items-center gap-2",children:[i.jsx(_T,{className:"h-6 w-6"}),t==="usStates"?"US States Visual Map":"Interactive US States Map"]}),i.jsx(Ue,{children:"Click through US states and identify them on the interactive map. Complete geographic challenge with scoring, streaks, and time bonuses!"})]}),i.jsx(ae,{children:C?i.jsxs("div",{className:"text-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-2"}),i.jsx("p",{children:"Loading interactive map..."})]}):S?i.jsx(Vie,{map:S,onGameComplete:I}):i.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[i.jsx(kT,{className:"h-8 w-8 mx-auto mb-2"}),i.jsx("p",{children:"Interactive map not available"})]})})]})}),a&&!m&&t!=="interactive"&&t!=="usStates"&&i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs(he,{children:["Round ",n+1," of ",_]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-sm text-gray-500",children:["Score: ",s]}),i.jsx("p",{className:"text-sm text-gray-500",children:R(t)})]})]})}),i.jsx(ae,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-lg font-medium mb-2",children:"Location Hint:"}),i.jsx("p",{className:"text-xl mb-4",children:D()}),i.jsx("div",{className:"bg-gray-100 rounded-lg p-4 mb-4",children:i.jsxs("div",{className:"text-center",children:[t==="world"&&c&&bv[c.name]&&i.jsxs("div",{children:[i.jsx("img",{src:bv[c.name],alt:"Famous landmark",className:"w-full max-w-md mx-auto rounded-lg shadow-lg mb-3",style:{maxHeight:"300px",objectFit:"cover"}}),i.jsx("p",{className:"text-sm text-gray-600",children:"📍 Where is this famous landmark located?"})]}),t==="world"&&c&&!bv[c.name]&&i.jsxs("div",{className:"text-gray-500",children:[i.jsx(Vc,{className:"h-16 w-16 mx-auto mb-2"}),i.jsx("p",{className:"text-sm",children:"Famous landmark location"}),i.jsx("div",{className:"mt-2 bg-blue-50 p-2 rounded text-xs",children:"🗺️ Street view not available - use the hint to guess!"})]}),t==="usStates"&&i.jsxs("div",{className:"text-gray-500",children:[i.jsx(yu,{className:"h-16 w-16 mx-auto mb-2"}),i.jsx("p",{className:"text-sm",children:"US State Challenge"}),i.jsx("div",{className:"mt-2 bg-blue-50 p-2 rounded text-xs",children:"🇺🇸 Use the hint to identify the state!"})]}),t==="continents"&&i.jsxs("div",{className:"text-gray-500",children:[i.jsx(Rw,{className:"h-16 w-16 mx-auto mb-2"}),i.jsx("p",{className:"text-sm",children:"Continental Challenge"}),i.jsx("div",{className:"mt-2 bg-blue-50 p-2 rounded text-xs",children:"🌍 Use the countries hint to identify the continent!"})]})]})})]}),!v&&i.jsxs("div",{className:"border-t pt-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsx("h4",{className:"font-medium text-gray-700",children:"Need extra help?"}),!j&&i.jsxs(ee,{variant:"outline",size:"sm",onClick:X,className:"text-orange-600 border-orange-200 hover:bg-orange-50","data-testid":"button-hint",children:[i.jsx(IU,{className:"w-4 h-4 mr-1"}),"Get Hint (-75% points)"]}),j&&i.jsxs("div",{className:"flex items-center text-orange-600 text-sm",children:[i.jsx(kT,{className:"w-4 h-4 mr-1"}),"Hint Used"]})]}),P&&i.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 mb-4",children:[i.jsx("p",{className:"text-sm text-orange-800 font-medium",children:"💡 Extra Hint:"}),i.jsx("p",{className:"text-orange-700 mt-1",children:L()})]})]}),!v&&i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx(ix,{htmlFor:"guess",children:"Your Guess"}),i.jsx(Mt,{id:"guess",value:d,onChange:$=>h($.target.value),placeholder:`Enter ${t==="world"?"country, city or landmark":t==="usStates"?"state name or capital":"continent name"}`,onKeyPress:$=>$.key==="Enter"&&B(),"data-testid":"input-guess"})]}),i.jsx(ee,{onClick:B,disabled:!d.trim(),"data-testid":"button-submit",children:"Submit Guess"})]}),v&&i.jsxs("div",{className:"text-center space-y-4",children:[i.jsxs("div",{className:"text-lg",children:[i.jsx("strong",{children:"Correct Answer:"})," ",q()]}),i.jsx(ee,{onClick:O,children:n+1>=_?"Finish Game":"Next Location"})]})]})})]}),m&&i.jsx(re,{children:i.jsxs(ae,{className:"p-8 text-center",children:[i.jsx(si,{className:"h-16 w-16 mx-auto mb-4 text-yellow-500"}),i.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Game Complete!"}),i.jsxs("div",{className:"space-y-2 mb-6",children:[i.jsxs("p",{className:"text-lg",children:[i.jsx("strong",{children:"Mode:"})," ",R(t)]}),i.jsxs("p",{className:"text-lg",children:[i.jsx("strong",{children:"Total Score:"})," ",s," points"]}),i.jsxs("p",{className:"text-lg",children:[i.jsx("strong",{children:"Average:"})," ",Math.round(s/_)," points per round"]}),i.jsxs("p",{className:"text-lg",children:[i.jsx("strong",{children:"Correct Guesses:"})," ",y.filter($=>$>0).length,"/",_]})]}),i.jsx("div",{className:"mb-6",children:s>=_*80?i.jsxs("div",{className:"text-green-600",children:[i.jsx("h3",{className:"text-xl font-bold",children:"🌍 Geography Expert!"}),i.jsx("p",{children:"Outstanding geographical knowledge!"})]}):s>=_*50?i.jsxs("div",{className:"text-blue-600",children:[i.jsx("h3",{className:"text-xl font-bold",children:"🗺️ Good Explorer!"}),i.jsx("p",{children:"Nice geography skills!"})]}):i.jsxs("div",{className:"text-orange-600",children:[i.jsx("h3",{className:"text-xl font-bold",children:"🧭 Keep Exploring!"}),i.jsx("p",{children:"Practice makes perfect!"})]})}),i.jsx(ee,{onClick:F,children:"Play Again"})]})})]})]})}const qs=t=>{console.log(`🔊 ${{confirm:"♪ Beep! ♪",select:"♪ Click! ♪",encounter:"♪ Da-da-da-DAA! ♪",capture:"♪ Ding-ding-ding! ♪",evolution:"♪ Congratulations! ♪"}[t]||"♪ Sound! ♪"}`)},pp=t=>{switch(t.toLowerCase()){case"electric":return i.jsx(Xi,{className:"h-4 w-4 text-yellow-500"});case"grass":return i.jsx(BI,{className:"h-4 w-4 text-green-500"});case"fire":return i.jsx(VI,{className:"h-4 w-4 text-red-500"});case"water":return i.jsx(OI,{className:"h-4 w-4 text-blue-500"});default:return i.jsx(Ts,{className:"h-4 w-4 text-gray-500"})}},Zie=t=>{switch(t.toLowerCase()){case"common":return"bg-gray-100 text-gray-800";case"uncommon":return"bg-green-100 text-green-800";case"rare":return"bg-blue-100 text-blue-800";case"epic":return"bg-purple-100 text-purple-800";case"legendary":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}};function Xie(){const{user:t,isGuest:e}=Rn(),{toast:n}=tn(),r=$u(),[s,o]=p.useState("collection");p.useEffect(()=>{console.log("🔍 Burblemon Auth State:",{hasUser:!!t,isGuest:e,username:(t==null?void 0:t.username)||"no-user",shouldAllowAccess:!!(t||e)})},[t,e]);const[a,l]=p.useState(!1),[c,u]=p.useState(0),[d,h]=p.useState(null),[m,g]=p.useState(!1),[_,v]=p.useState(null),{data:x=[],isLoading:y}=Et({queryKey:["/api/burblemons/species"],enabled:!!t}),{data:w=[],isLoading:j}=Et({queryKey:["/api/burblemons/player",t==null?void 0:t.id],enabled:!!(t!=null&&t.id)}),{data:E=[]}=Et({queryKey:["/api/burblemons/player",t==null?void 0:t.id,"starters"],enabled:!!(t!=null&&t.id)}),{data:P=[],isLoading:U}=Et({queryKey:["/api/map/zones"],enabled:!!t}),T=Tn({mutationFn:async B=>{const q=x.find(O=>O.id===B);if(!q)throw new Error("Species not found");return Zt("POST","/api/burblemons",{userId:t.id,speciesId:B,nickname:q.name,level:5,experience:0,currentHp:q.baseHp,maxHp:q.baseHp,currentAttack:q.baseAttack,currentDefense:q.baseDefense,currentSpeed:q.baseSpeed,moves:["Tackle","Quick Attack"],isShiny:Math.random()<.01,caughtLocation:"Tutorial Town",statusConditions:[],personality:q.personalityTraits[0]||"Brave",isStarter:!0})},onSuccess:()=>{qs("capture"),r.invalidateQueries({queryKey:["/api/burblemons/player"]}),n({title:"♪ Ding-ding-ding! ♪",description:`${d==null?void 0:d.name} was added to your collection! Your adventure begins now!`}),o("collection")},onError:B=>{n({title:"Error",description:B.message||"Failed to choose starter",variant:"destructive"})}}),S=E.length>0,C=x.filter(B=>B.category==="Starter"),I=["Hello there! Welcome to the world of Burblemons!","My name is Professor Bubble! People call me the Burblemon Prof!","This world is inhabited by creatures called Burblemons!","For some people, Burblemons are pets. Others use them for battles.","Myself... I study Burblemons as a profession.",`${(t==null?void 0:t.username)||(e?"Trainer":"New Trainer")}! Your very own Burblemon legend is about to unfold!`,"A world of dreams and adventures with Burblemons awaits! Let's go!"],R=B=>{qs("select"),h(B)},A=()=>{d&&(qs("confirm"),T.mutate(d.id),h(null))},G=B=>{if(qs("select"),Math.random()<B.wildEncounterRate){const q=x[Math.floor(Math.random()*x.length)];v(q),g(!0),qs("encounter"),n({title:"♪ Da-da-da-DAA! ♪",description:`A wild ${q.name} appeared!`})}else n({title:"...",description:"You searched through the grass but found no wild Burblemons."})},ue=()=>{g(!1),v(null)};return!t&&!e?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(re,{className:"max-w-md mx-auto",children:i.jsxs(ye,{children:[i.jsx(he,{children:"Welcome to Burblemons!"}),i.jsx(Ue,{children:"Please log in to start your creature collection adventure."})]})})}):y||j||U?i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-4"}),i.jsx("p",{className:"text-muted-foreground",children:"Loading your Burblemon adventure..."})]})})}):i.jsxs("div",{className:"container mx-auto px-4 py-8","data-testid":"burblemon-page",children:[i.jsxs("div",{className:"mb-8",children:[i.jsxs("h1",{className:"text-4xl font-bold mb-2","data-testid":"page-title",children:["Burblemons ",i.jsx("span",{className:"text-2xl",children:"⚡🍃🔥💧"})]}),i.jsx("p",{className:"text-xl text-muted-foreground",children:"Collect, train, and evolve magical creatures in this Pokemon-like adventure!"})]}),a&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50","data-testid":"professor-intro",children:i.jsxs(re,{className:"max-w-2xl mx-4",children:[i.jsx(ye,{className:"text-center",children:i.jsx(he,{className:"text-2xl",children:"🧔 Professor Bubble"})}),i.jsxs(ae,{children:[i.jsx("div",{className:"bg-blue-50 dark:bg-blue-950 border-2 border-blue-200 dark:border-blue-800 rounded-lg p-4 mb-4",children:i.jsx("p",{className:"text-lg leading-relaxed font-mono",children:I[c]})}),i.jsxs("div",{className:"flex justify-between",children:[c>0&&i.jsx(ee,{variant:"outline",onClick:()=>u(c-1),children:"Back"}),i.jsx("div",{className:"flex-1"}),c<I.length-1?i.jsx(ee,{onClick:()=>u(c+1),children:"Continue ▶"}):i.jsx(ee,{onClick:()=>l(!1),children:"Begin Adventure!"})]})]})]})}),d&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50","data-testid":"starter-confirmation",children:i.jsxs(re,{className:"max-w-md mx-4",children:[i.jsx(ye,{className:"text-center",children:i.jsx(he,{className:"text-xl",children:"Confirm Your Choice"})}),i.jsxs(ae,{children:[i.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-950 border-2 border-yellow-200 dark:border-yellow-800 rounded-lg p-4 mb-4",children:[i.jsxs("p",{className:"text-lg font-mono leading-relaxed",children:["So! You want the ",d.elementType.toLowerCase()," Burblemon, ",d.name,"?"]}),i.jsx("div",{className:"mt-3 text-sm text-muted-foreground font-mono",children:"This Burblemon is really energetic!"})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(ee,{variant:"outline",onClick:()=>h(null),className:"flex-1",children:"No, wait..."}),i.jsx(ee,{onClick:A,className:"flex-1",disabled:T.isPending,children:T.isPending?"Choosing...":"Yes!"})]})]})]})}),m&&_&&i.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50","data-testid":"wild-encounter",children:i.jsxs(re,{className:"max-w-md mx-4",children:[i.jsx(ye,{className:"text-center",children:i.jsx(he,{className:"text-xl",children:"Wild Encounter!"})}),i.jsxs(ae,{children:[i.jsxs("div",{className:"bg-red-50 dark:bg-red-950 border-2 border-red-200 dark:border-red-800 rounded-lg p-4 mb-4",children:[i.jsx("div",{className:"text-center mb-3",children:i.jsx("div",{className:"mx-auto mb-2 p-4 bg-gradient-to-br from-primary/10 to-primary/20 rounded-full w-16 h-16 flex items-center justify-center",children:pp(_.elementType)})}),i.jsxs("p",{className:"text-lg font-mono leading-relaxed text-center",children:["A wild ",_.name," appeared!"]}),i.jsxs("div",{className:"mt-3 text-sm text-muted-foreground text-center",children:["Level ",Math.floor(Math.random()*10)+1," • ",_.elementType," Type"]}),i.jsx("div",{className:"mt-2 text-xs text-center",children:_.description})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx(ee,{variant:"outline",onClick:ue,children:"Run Away"}),i.jsx(ee,{onClick:ue,children:"Battle! (Coming Soon)"})]})]})]})}),S?i.jsxs(Yu,{value:s,onValueChange:o,className:"space-y-6",children:[i.jsxs(zl,{className:"grid w-full grid-cols-4 bg-blue-100 dark:bg-blue-900",children:[i.jsx(gn,{value:"collection","data-testid":"tab-collection",onClick:()=>qs("select"),className:"font-mono text-sm",children:"📦 BURBLEMONS"}),i.jsx(gn,{value:"map","data-testid":"tab-map",onClick:()=>qs("select"),className:"font-mono text-sm",children:"🗺️ TOWN MAP"}),i.jsx(gn,{value:"inventory","data-testid":"tab-inventory",onClick:()=>qs("select"),className:"font-mono text-sm",children:"🎒 BAG"}),i.jsx(gn,{value:"battles","data-testid":"tab-battles",onClick:()=>qs("select"),className:"font-mono text-sm",children:"⚔️ TRAINER"})]}),i.jsx(Jn,{value:"collection",className:"space-y-6",children:i.jsxs("div",{children:[i.jsxs("h2",{className:"text-2xl font-bold mb-4","data-testid":"collection-title",children:["Your Burblemon Collection (",w.length,")"]}),w.length===0?i.jsx(re,{children:i.jsxs(ae,{className:"text-center py-8",children:[i.jsx("p",{className:"text-muted-foreground",children:"No Burblemons in your collection yet!"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Explore the world map to find and catch wild Burblemons."})]})}):i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:w.map(B=>{const q=x.find(D=>D.id===B.speciesId),O=B.level*100,F=B.experience/O*100;return i.jsxs(re,{className:"hover:shadow-lg transition-shadow","data-testid":`burblemon-${B.id}`,children:[i.jsx(ye,{className:"pb-3",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(he,{className:"text-lg flex items-center gap-2",children:[B.nickname||(q==null?void 0:q.name),B.isShiny&&i.jsx(Ts,{className:"h-4 w-4 text-yellow-500"}),B.isStarter&&i.jsx(Fe,{variant:"secondary",className:"text-xs",children:"Starter"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[pp((q==null?void 0:q.elementType)||""),i.jsxs("span",{className:"text-sm text-muted-foreground",children:["Lv.",B.level]})]})]})}),i.jsxs(ae,{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsxs("span",{children:["HP: ",B.currentHp,"/",B.maxHp]}),i.jsxs("span",{className:B.currentHp<B.maxHp*.3?"text-red-500":"text-green-500",children:[Math.round(B.currentHp/B.maxHp*100),"%"]})]}),i.jsx(Tr,{value:B.currentHp/B.maxHp*100,className:"h-2"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsxs("span",{children:["EXP: ",B.experience,"/",O]}),i.jsxs("span",{children:[Math.round(F),"%"]})]}),i.jsx(Tr,{value:F,className:"h-2"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(pl,{className:"h-3 w-3 text-orange-500"}),"ATK: ",B.currentAttack]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Fc,{className:"h-3 w-3 text-blue-500"}),"DEF: ",B.currentDefense]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Xi,{className:"h-3 w-3 text-yellow-500"}),"SPD: ",B.currentSpeed]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(yu,{className:"h-3 w-3 text-green-500"}),B.caughtLocation||"Unknown"]})]}),B.moves.length>0&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs font-medium mb-1",children:"Moves:"}),i.jsx("div",{className:"flex flex-wrap gap-1",children:B.moves.slice(0,4).map((D,L)=>i.jsx(Fe,{variant:"outline",className:"text-xs px-1 py-0",children:D},L))})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(ee,{size:"sm",variant:"outline",className:"flex-1 text-xs","data-testid":`heal-${B.id}`,children:"Heal"}),i.jsx(ee,{size:"sm",variant:"outline",className:"flex-1 text-xs","data-testid":`train-${B.id}`,children:"Train"})]})]})]},B.id)})})]})}),i.jsx(Jn,{value:"map",className:"space-y-6",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4","data-testid":"map-title",children:"World Map"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(B=>i.jsxs(re,{className:"hover:shadow-lg transition-shadow cursor-pointer","data-testid":`zone-${B.id}`,children:[i.jsxs(ye,{children:[i.jsxs(he,{className:"flex items-center justify-between",children:[B.name,i.jsxs(Fe,{variant:B.requiredBadges===0?"default":"secondary",children:["Lv.",B.difficultyLevel]})]}),i.jsx(Ue,{children:B.description})]}),i.jsxs(ae,{children:[i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Zone Type:"}),i.jsx("span",{className:"capitalize font-medium",children:B.zoneType})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Wild Encounter Rate:"}),i.jsxs("span",{className:"font-medium",children:[Math.round(B.wildEncounterRate*100),"%"]})]}),B.requiredBadges>0&&i.jsxs("div",{className:"flex justify-between text-amber-600",children:[i.jsx("span",{children:"Badges Required:"}),i.jsx("span",{className:"font-medium",children:B.requiredBadges})]})]}),i.jsx(ee,{className:"w-full mt-4","data-testid":`explore-${B.id}`,onClick:()=>G(B),children:"Explore Zone"})]})]},B.id))})]})}),i.jsx(Jn,{value:"inventory",className:"space-y-6",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4","data-testid":"inventory-title",children:"Inventory & Shop"}),i.jsx(re,{children:i.jsxs(ae,{className:"text-center py-8",children:[i.jsx("p",{className:"text-muted-foreground",children:"Inventory system coming soon!"}),i.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Buy items, manage your inventory, and use items on your Burblemons."})]})})]})}),i.jsx(Jn,{value:"battles",className:"space-y-6",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold mb-4","data-testid":"battles-title",children:"Battle Training"}),i.jsxs(re,{className:"hover:shadow-lg transition-shadow",children:[i.jsxs(ye,{children:[i.jsxs(he,{className:"flex items-center gap-2",children:[i.jsx(pl,{className:"h-5 w-5 text-orange-500"}),"Solo Dungeon Adventure"]}),i.jsx(Ue,{children:"Battle monsters in quiz-based dungeons! Answer questions correctly to defeat enemies and gain XP for your Burblemons."})]}),i.jsxs(ae,{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Ts,{className:"h-4 w-4 text-yellow-500"}),i.jsx("span",{children:"Gain XP & Level Up"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Fc,{className:"h-4 w-4 text-blue-500"}),i.jsx("span",{children:"Quiz-Based Combat"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(pu,{className:"h-4 w-4 text-red-500"}),i.jsx("span",{children:"Find Rare Loot"})]})]}),i.jsx(vt,{href:"/solo-dungeon",children:i.jsx(ee,{className:"w-full text-lg py-6","data-testid":"button-enter-dungeon",onClick:()=>qs("select"),children:"⚔️ Enter Solo Dungeon!"})})]})]}),i.jsxs(re,{className:"opacity-60",children:[i.jsxs(ye,{children:[i.jsxs(he,{className:"flex items-center gap-2",children:[i.jsx(yu,{className:"h-5 w-5 text-green-500"}),"Trainer Battles & More (Coming Soon)"]}),i.jsx(Ue,{children:"Challenge other trainers, battle wild Burblemons, and track your complete battle history."})]}),i.jsx(ae,{children:i.jsx(ee,{variant:"outline",disabled:!0,className:"w-full",children:"Coming Soon..."})})]})]})})]}):i.jsxs(re,{className:"max-w-4xl mx-auto","data-testid":"starter-selection",children:[i.jsxs(ye,{className:"text-center",children:[i.jsxs(he,{className:"text-3xl",children:["Professor Bubble's Laboratory",i.jsx(ee,{variant:"link",onClick:()=>l(!0),className:"ml-2 text-blue-600 hover:text-blue-700",children:"📖 Hear Introduction"})]}),i.jsx(Ue,{className:"text-lg",children:"Here are 3 Burblemons! They are inside the Burble Balls. You can have one! Choose!"})]}),i.jsxs(ae,{children:[i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:C.map(B=>i.jsxs(re,{className:"hover:shadow-lg transition-shadow cursor-pointer border-2 hover:border-primary",onClick:()=>R(B),"data-testid":`starter-${B.name.toLowerCase()}`,children:[i.jsxs(ye,{className:"text-center pb-3",children:[i.jsx("div",{className:"mx-auto mb-2 p-4 bg-gradient-to-br from-primary/10 to-primary/20 rounded-full w-16 h-16 flex items-center justify-center",children:pp(B.elementType)}),i.jsx(he,{className:"text-lg",children:B.name}),i.jsxs("div",{className:"flex items-center justify-center gap-2",children:[pp(B.elementType),i.jsx("span",{className:"text-sm font-medium",children:B.elementType})]})]}),i.jsxs(ae,{className:"pt-0",children:[i.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:B.description}),i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(pu,{className:"h-3 w-3 text-red-500"}),"HP: ",B.baseHp]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(pl,{className:"h-3 w-3 text-orange-500"}),"ATK: ",B.baseAttack]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Fc,{className:"h-3 w-3 text-blue-500"}),"DEF: ",B.baseDefense]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Xi,{className:"h-3 w-3 text-yellow-500"}),"SPD: ",B.baseSpeed]})]})]}),i.jsx(Fe,{className:`mt-3 w-full justify-center ${Zie(B.rarity)}`,children:B.rarity})]})]},B.id))}),T.isPending&&i.jsxs("div",{className:"text-center mt-6",children:[i.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary mx-auto mb-2"}),i.jsx("p",{className:"text-sm text-muted-foreground",children:"Choosing your starter..."})]})]})]})]})}const ak=t=>{switch(t.toLowerCase()){case"electric":return i.jsx(Xi,{className:"h-4 w-4 text-yellow-500"});case"grass":return i.jsx(BI,{className:"h-4 w-4 text-green-500"});case"fire":return i.jsx(VI,{className:"h-4 w-4 text-red-500"});case"water":return i.jsx(OI,{className:"h-4 w-4 text-blue-500"});default:return i.jsx(Ts,{className:"h-4 w-4 text-gray-500"})}};function Jie(){const{user:t}=Rn(),{toast:e}=tn(),n=$u(),[r,s]=p.useState(null),[o,a]=p.useState(null),[l,c]=p.useState(null),[u,d]=p.useState(""),[h,m]=p.useState(!1),[g,_]=p.useState("select"),[v,x]=p.useState(!1),[y,w]=p.useState(0),[j,E]=p.useState(!1),[P,U]=p.useState(null),{data:T=[]}=Et({queryKey:["/api/burblemons/player",t==null?void 0:t.id],enabled:!!(t!=null&&t.id)}),{data:S=[]}=Et({queryKey:["/api/burblemons/species"],enabled:!!t}),{data:C=[]}=Et({queryKey:["/api/quiz/topics"],enabled:!!t}),{data:k,isLoading:I}=Et({queryKey:["/api/dungeon/active",t==null?void 0:t.id],enabled:!!(t!=null&&t.id)}),R=Tn({mutationFn:async({burblemonId:$,topicId:K})=>Zt("POST","/api/dungeon/start",{playerId:t.id,activeBurblemonId:$,topicId:K,characterType:"adventurer"}),onSuccess:$=>{n.invalidateQueries({queryKey:["/api/dungeon/active"]}),_("battle"),e({title:"⚔️ Dungeon Started!",description:`${r==null?void 0:r.nickname} enters the dungeon!`})}}),A=Tn({mutationFn:async $=>Zt("GET",`/api/dungeon/${$}/question`),onSuccess:$=>{c($),d("")}}),G=Tn({mutationFn:async({dungeonId:$,questionId:K,answer:Y})=>Zt("POST",`/api/dungeon/${$}/answer`,{questionId:K,answer:Y}),onSuccess:$=>{m(!0),n.invalidateQueries({queryKey:["/api/dungeon/active"]}),$.isCorrect?(e({title:"⚡ Correct!",description:`+${$.energyReward} Energy! ${$.explanation}`}),$.enemyDefeated&&(w($.xpGained||50),x(!0),_("victory"))):(e({title:"❌ Incorrect",description:$.explanation,variant:"destructive"}),$.playerDefeated&&_("defeat"))}}),ue=()=>{x(!1),_("battle"),k!=null&&k.id&&A.mutate(k.id)},B=Tn({mutationFn:async $=>Zt("POST",`/api/dungeon/${$}/explore`),onSuccess:$=>{U($),E(!0),n.invalidateQueries({queryKey:["/api/dungeon/active"]}),e({title:"🎁 Treasure Found!",description:`Found ${$.totalItems} item${$.totalItems>1?"s":""}!`})},onError:$=>{e({title:"❌ Exploration Failed",description:$.message||"Could not explore the dungeon",variant:"destructive"})}}),q=()=>{x(!1),k!=null&&k.id&&B.mutate(k.id)},O=()=>{r&&o&&R.mutate({burblemonId:r.id,topicId:o.id})},F=()=>{k!=null&&k.id&&l&&u.trim()&&G.mutate({dungeonId:k.id,questionId:l.id,answer:u.trim()})},D=r?S.find($=>$.id===r.speciesId):null,L=r?r.level*100:0,X=r?r.xp/L*100:0;return t?i.jsxs("div",{className:"container mx-auto px-4 py-8",children:[i.jsxs("div",{className:"mb-8",children:[i.jsx("h1",{className:"text-4xl font-bold mb-2","data-testid":"solo-dungeon-title",children:"Solo Dungeon ⚔️🏰"}),i.jsx("p",{className:"text-xl text-muted-foreground",children:"Battle monsters, gain XP, and find treasure with your Burblemons!"})]}),i.jsx(sf,{open:v,onOpenChange:x,children:i.jsxs(ju,{className:"max-w-md",children:[i.jsx(Hg,{children:i.jsxs(Su,{className:"flex items-center gap-2",children:[i.jsx(si,{className:"h-6 w-6 text-yellow-500"}),"Victory!"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-lg font-semibold text-green-600",children:"Enemy Defeated!"}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:[r==null?void 0:r.nickname," gained ",y," XP!"]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"font-medium",children:"What would you like to do next?"}),i.jsxs("div",{className:"grid grid-cols-1 gap-2",children:[i.jsxs(ee,{onClick:ue,className:"flex items-center gap-2","data-testid":"button-continue-battle",children:[i.jsx(pl,{className:"h-4 w-4"}),"Continue Fighting"]}),i.jsxs(ee,{onClick:q,variant:"outline",className:"flex items-center gap-2","data-testid":"button-explore-loot",children:[i.jsx(DU,{className:"h-4 w-4"}),"Explore for Loot"]})]})]})]})]})}),i.jsx(sf,{open:j,onOpenChange:E,children:i.jsxs(ju,{className:"max-w-lg",children:[i.jsx(Hg,{children:i.jsxs(Su,{className:"flex items-center gap-2",children:[i.jsx(jT,{className:"h-6 w-6 text-green-500"}),"Exploration Complete!"]})}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("p",{className:"text-lg font-semibold text-green-600",children:P==null?void 0:P.message}),i.jsxs("p",{className:"text-sm text-muted-foreground",children:["You found ",P==null?void 0:P.totalItems," item",(P==null?void 0:P.totalItems)!==1?"s":"","!"]})]}),(P==null?void 0:P.itemsFound)&&P.itemsFound.length>0&&i.jsxs("div",{className:"space-y-3",children:[i.jsx("h3",{className:"font-medium",children:"Items Found:"}),i.jsx("div",{className:"grid gap-2",children:P.itemsFound.map(($,K)=>i.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/20",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"w-8 h-8 rounded-full bg-primary/10 flex items-center justify-center",children:[$.itemType==="healing"&&i.jsx(pu,{className:"h-4 w-4 text-red-500"}),$.itemType==="utility"&&i.jsx(jT,{className:"h-4 w-4 text-blue-500"}),$.itemType==="treasure"&&i.jsx(Ts,{className:"h-4 w-4 text-yellow-500"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:$.name}),i.jsx("div",{className:"text-sm text-muted-foreground",children:$.description})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("div",{className:"font-semibold",children:["x",$.quantityFound]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["$",$.buyPrice," each"]})]})]},`${$.id}-${K}`))})]}),i.jsx("div",{className:"flex justify-center pt-4",children:i.jsx(ee,{onClick:()=>E(!1),className:"w-full","data-testid":"button-close-loot-results",children:"Continue Adventure"})})]})]})}),i.jsxs(Yu,{value:g==="select"?"select":"battle",className:"space-y-6",children:[i.jsxs(zl,{className:"grid w-full grid-cols-2 bg-purple-100 dark:bg-purple-900",children:[i.jsx(gn,{value:"select","data-testid":"tab-select",children:"🎯 Prepare"}),i.jsx(gn,{value:"battle","data-testid":"tab-battle",disabled:g==="select",children:"⚔️ Battle"})]}),i.jsxs(Jn,{value:"select",className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsx(he,{children:"Choose Your Burblemon"}),i.jsx(Ue,{children:"Select a healthy Burblemon for battle"})]}),i.jsx(ae,{className:"space-y-4",children:T.filter($=>$.currentHp>0).map($=>{const K=S.find(Y=>Y.id===$.speciesId);return i.jsx(re,{className:`cursor-pointer transition-colors hover:bg-accent ${(r==null?void 0:r.id)===$.id?"ring-2 ring-primary":""}`,onClick:()=>s($),"data-testid":`burblemon-${$.id}`,children:i.jsxs(ae,{className:"p-4",children:[i.jsx("div",{className:"flex items-center justify-between mb-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[ak((K==null?void 0:K.elementType)||""),i.jsx("span",{className:"font-semibold",children:$.nickname||(K==null?void 0:K.name)})]}),i.jsxs(Fe,{variant:"secondary",children:["Lv.",$.level]})]})}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsxs("span",{children:["HP: ",$.currentHp,"/",$.maxHp]}),i.jsxs("span",{children:[Math.round($.currentHp/$.maxHp*100),"%"]})]}),i.jsx(Tr,{value:$.currentHp/$.maxHp*100,className:"h-2"})]}),i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(pl,{className:"h-3 w-3"}),"ATK: ",$.attack]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Fc,{className:"h-3 w-3"}),"DEF: ",$.defense]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Xi,{className:"h-3 w-3"}),"SPD: ",$.speed]})]})]})]})},$.id)})})]}),i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsx(he,{children:"Choose Battle Topic"}),i.jsx(Ue,{children:"Pick your area of expertise"})]}),i.jsx(ae,{className:"space-y-4",children:C.map($=>i.jsx(re,{className:`cursor-pointer transition-colors hover:bg-accent ${(o==null?void 0:o.id)===$.id?"ring-2 ring-primary":""}`,onClick:()=>a($),"data-testid":`topic-${$.id}`,children:i.jsx(ae,{className:"p-4",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"text-2xl",children:$.iconEmoji}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:$.name}),i.jsx("p",{className:"text-sm text-muted-foreground",children:$.description})]})]})})},$.id))})]})]}),i.jsx(re,{children:i.jsx(ae,{className:"p-6 text-center",children:i.jsx(ee,{onClick:O,disabled:!r||!o||R.isPending,size:"lg",className:"text-lg px-8 py-6","data-testid":"button-start-dungeon",children:R.isPending?"Starting...":"Enter Dungeon! ⚔️"})})})]}),i.jsx(Jn,{value:"battle",className:"space-y-6",children:k&&r&&D&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(he,{className:"flex items-center gap-2",children:[ak(D.elementType),r.nickname||D.name,i.jsxs(Fe,{children:["Lv.",r.level]})]})}),i.jsxs(ae,{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{children:"HP"}),i.jsxs("span",{children:[r.currentHp,"/",r.maxHp]})]}),i.jsx(Tr,{value:r.currentHp/r.maxHp*100,className:"h-3"})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{children:"XP"}),i.jsxs("span",{children:[r.xp,"/",L]})]}),i.jsx(Tr,{value:X,className:"h-2 bg-blue-200"})]})]})]}),i.jsxs(re,{children:[i.jsx(ye,{children:i.jsxs(he,{className:"flex items-center gap-2",children:["👹 ",k.currentEnemyType==="boss"?"Boss":"Grunt"," Enemy"]})}),i.jsxs(ae,{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{children:"HP"}),i.jsxs("span",{children:[k.enemyHp,"/",k.enemyMaxHp]})]}),i.jsx(Tr,{value:k.enemyHp/k.enemyMaxHp*100,className:"h-3 bg-red-200"})]}),i.jsxs("div",{className:"text-sm text-muted-foreground",children:["Enemies defeated: ",k.enemiesDefeated]})]})]})]}),l&&i.jsxs(re,{children:[i.jsxs(ye,{children:[i.jsx(he,{children:"Battle Question"}),i.jsx(Fe,{className:`w-fit ${l.difficulty==="easy"?"bg-green-100 text-green-800":l.difficulty==="medium"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:l.difficulty})]}),i.jsxs(ae,{className:"space-y-4",children:[i.jsx("p",{className:"text-lg",children:l.questionText}),l.questionType==="multiple_choice"&&l.choices?i.jsx("div",{className:"grid grid-cols-1 gap-2",children:JSON.parse(l.choices).map(($,K)=>i.jsx(ee,{variant:u===$?"default":"outline",onClick:()=>d($),className:"justify-start","data-testid":`choice-${K}`,children:$},K))}):i.jsx("input",{type:"text",value:u,onChange:$=>d($.target.value),className:"w-full p-2 border rounded",placeholder:"Enter your answer...","data-testid":"text-answer-input"}),i.jsx(ee,{onClick:F,disabled:!u.trim()||G.isPending,className:"w-full","data-testid":"button-submit-answer",children:G.isPending?"Submitting...":"Submit Answer ⚡"})]})]}),!l&&k.isActive&&i.jsx(re,{children:i.jsx(ae,{className:"p-6 text-center",children:i.jsx(ee,{onClick:()=>A.mutate(k.id),disabled:A.isPending,size:"lg","data-testid":"button-next-question",children:A.isPending?"Loading...":"Next Battle! ⚔️"})})})]})})]})]}):i.jsx("div",{className:"container mx-auto px-4 py-8",children:i.jsx(re,{className:"max-w-md mx-auto",children:i.jsxs(ye,{children:[i.jsx(he,{children:"Solo Dungeon"}),i.jsx(Ue,{children:"Please log in to explore dungeons with your Burblemons."})]})})})}var $b=["Enter"," "],eoe=["ArrowDown","PageUp","Home"],DO=["ArrowUp","PageDown","End"],toe=[...eoe,...DO],noe={ltr:[...$b,"ArrowRight"],rtl:[...$b,"ArrowLeft"]},roe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},nm="Menu",[wf,soe,ioe]=If(nm),[Gl,LO]=gr(nm,[ioe,Gu,dx]),Hx=Gu(),OO=dx(),[ooe,Kl]=Gl(nm),[aoe,rm]=Gl(nm),VO=t=>{const{__scopeMenu:e,open:n=!1,children:r,dir:s,onOpenChange:o,modal:a=!0}=t,l=Hx(e),[c,u]=p.useState(null),d=p.useRef(!1),h=zt(o),m=Ku(s);return p.useEffect(()=>{const g=()=>{d.current=!0,document.addEventListener("pointerdown",_,{capture:!0,once:!0}),document.addEventListener("pointermove",_,{capture:!0,once:!0})},_=()=>d.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",_,{capture:!0}),document.removeEventListener("pointermove",_,{capture:!0})}},[]),i.jsx(TR,{...l,children:i.jsx(ooe,{scope:e,open:n,onOpenChange:h,content:c,onContentChange:u,children:i.jsx(aoe,{scope:e,onClose:p.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:d,dir:m,modal:a,children:r})})})};VO.displayName=nm;var loe="MenuAnchor",fS=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Hx(n);return i.jsx(f_,{...s,...r,ref:e})});fS.displayName=loe;var mS="MenuPortal",[coe,FO]=Gl(mS,{forceMount:void 0}),UO=t=>{const{__scopeMenu:e,forceMount:n,children:r,container:s}=t,o=Kl(mS,e);return i.jsx(coe,{scope:e,forceMount:n,children:i.jsx(yr,{present:n||o.open,children:i.jsx(Rf,{asChild:!0,container:s,children:r})})})};UO.displayName=mS;var os="MenuContent",[uoe,pS]=Gl(os),BO=p.forwardRef((t,e)=>{const n=FO(os,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=Kl(os,t.__scopeMenu),a=rm(os,t.__scopeMenu);return i.jsx(wf.Provider,{scope:t.__scopeMenu,children:i.jsx(yr,{present:r||o.open,children:i.jsx(wf.Slot,{scope:t.__scopeMenu,children:a.modal?i.jsx(doe,{...s,ref:e}):i.jsx(hoe,{...s,ref:e})})})})}),doe=p.forwardRef((t,e)=>{const n=Kl(os,t.__scopeMenu),r=p.useRef(null),s=Je(e,r);return p.useEffect(()=>{const o=r.current;if(o)return x_(o)},[]),i.jsx(gS,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:we(t.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),hoe=p.forwardRef((t,e)=>{const n=Kl(os,t.__scopeMenu);return i.jsx(gS,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),foe=Cl("MenuContent.ScrollLock"),gS=p.forwardRef((t,e)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:o,onCloseAutoFocus:a,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,disableOutsideScroll:_,...v}=t,x=Kl(os,n),y=rm(os,n),w=Hx(n),j=OO(n),E=soe(n),[P,U]=p.useState(null),T=p.useRef(null),S=Je(e,T,x.onContentChange),C=p.useRef(0),k=p.useRef(""),I=p.useRef(0),R=p.useRef(null),A=p.useRef("right"),G=p.useRef(0),ue=_?Zy:p.Fragment,B=_?{as:foe,allowPinchZoom:!0}:void 0,q=F=>{var te,le;const D=k.current+F,L=E().filter(xe=>!xe.disabled),X=document.activeElement,$=(te=L.find(xe=>xe.ref.current===X))==null?void 0:te.textValue,K=L.map(xe=>xe.textValue),Y=Noe(K,D,$),ie=(le=L.find(xe=>xe.textValue===Y))==null?void 0:le.ref.current;(function xe(_e){k.current=_e,window.clearTimeout(C.current),_e!==""&&(C.current=window.setTimeout(()=>xe(""),1e3))})(D),ie&&setTimeout(()=>ie.focus())};p.useEffect(()=>()=>window.clearTimeout(C.current),[]),y_();const O=p.useCallback(F=>{var L,X;return A.current===((L=R.current)==null?void 0:L.side)&&Coe(F,(X=R.current)==null?void 0:X.area)},[]);return i.jsx(uoe,{scope:n,searchRef:k,onItemEnter:p.useCallback(F=>{O(F)&&F.preventDefault()},[O]),onItemLeave:p.useCallback(F=>{var D;O(F)||((D=T.current)==null||D.focus(),U(null))},[O]),onTriggerLeave:p.useCallback(F=>{O(F)&&F.preventDefault()},[O]),pointerGraceTimerRef:I,onPointerGraceIntentChange:p.useCallback(F=>{R.current=F},[]),children:i.jsx(ue,{...B,children:i.jsx(Qy,{asChild:!0,trapped:s,onMountAutoFocus:we(o,F=>{var D;F.preventDefault(),(D=T.current)==null||D.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:i.jsx(zu,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:d,onFocusOutside:h,onInteractOutside:m,onDismiss:g,children:i.jsx(B4,{asChild:!0,...j,dir:y.dir,orientation:"vertical",loop:r,currentTabStopId:P,onCurrentTabStopIdChange:U,onEntryFocus:we(c,F=>{y.isUsingKeyboardRef.current||F.preventDefault()}),preventScrollOnEntryFocus:!0,children:i.jsx(m_,{role:"menu","aria-orientation":"vertical","data-state":r6(x.open),"data-radix-menu-content":"",dir:y.dir,...w,...v,ref:S,style:{outline:"none",...v.style},onKeyDown:we(v.onKeyDown,F=>{const L=F.target.closest("[data-radix-menu-content]")===F.currentTarget,X=F.ctrlKey||F.altKey||F.metaKey,$=F.key.length===1;L&&(F.key==="Tab"&&F.preventDefault(),!X&&$&&q(F.key));const K=T.current;if(F.target!==K||!toe.includes(F.key))return;F.preventDefault();const ie=E().filter(te=>!te.disabled).map(te=>te.ref.current);DO.includes(F.key)&&ie.reverse(),joe(ie)}),onBlur:we(t.onBlur,F=>{F.currentTarget.contains(F.target)||(window.clearTimeout(C.current),k.current="")}),onPointerMove:we(t.onPointerMove,bf(F=>{const D=F.target,L=G.current!==F.clientX;if(F.currentTarget.contains(D)&&L){const X=F.clientX>G.current?"right":"left";A.current=X,G.current=F.clientX}}))})})})})})})});BO.displayName=os;var moe="MenuGroup",yS=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(De.div,{role:"group",...r,ref:e})});yS.displayName=moe;var poe="MenuLabel",$O=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(De.div,{...r,ref:e})});$O.displayName=poe;var by="MenuItem",lk="menu.itemSelect",qx=p.forwardRef((t,e)=>{const{disabled:n=!1,onSelect:r,...s}=t,o=p.useRef(null),a=rm(by,t.__scopeMenu),l=pS(by,t.__scopeMenu),c=Je(e,o),u=p.useRef(!1),d=()=>{const h=o.current;if(!n&&h){const m=new CustomEvent(lk,{bubbles:!0,cancelable:!0});h.addEventListener(lk,g=>r==null?void 0:r(g),{once:!0}),Z1(h,m),m.defaultPrevented?u.current=!1:a.onClose()}};return i.jsx(zO,{...s,ref:c,disabled:n,onClick:we(t.onClick,d),onPointerDown:h=>{var m;(m=t.onPointerDown)==null||m.call(t,h),u.current=!0},onPointerUp:we(t.onPointerUp,h=>{var m;u.current||(m=h.currentTarget)==null||m.click()}),onKeyDown:we(t.onKeyDown,h=>{const m=l.searchRef.current!=="";n||m&&h.key===" "||$b.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});qx.displayName=by;var zO=p.forwardRef((t,e)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...o}=t,a=pS(by,n),l=OO(n),c=p.useRef(null),u=Je(e,c),[d,h]=p.useState(!1),[m,g]=p.useState("");return p.useEffect(()=>{const _=c.current;_&&g((_.textContent??"").trim())},[o.children]),i.jsx(wf.ItemSlot,{scope:n,disabled:r,textValue:s??m,children:i.jsx($4,{asChild:!0,...l,focusable:!r,children:i.jsx(De.div,{role:"menuitem","data-highlighted":d?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...o,ref:u,onPointerMove:we(t.onPointerMove,bf(_=>{r?a.onItemLeave(_):(a.onItemEnter(_),_.defaultPrevented||_.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:we(t.onPointerLeave,bf(_=>a.onItemLeave(_))),onFocus:we(t.onFocus,()=>h(!0)),onBlur:we(t.onBlur,()=>h(!1))})})})}),goe="MenuCheckboxItem",WO=p.forwardRef((t,e)=>{const{checked:n=!1,onCheckedChange:r,...s}=t;return i.jsx(QO,{scope:t.__scopeMenu,checked:n,children:i.jsx(qx,{role:"menuitemcheckbox","aria-checked":_y(n)?"mixed":n,...s,ref:e,"data-state":vS(n),onSelect:we(s.onSelect,()=>r==null?void 0:r(_y(n)?!0:!n),{checkForDefaultPrevented:!1})})})});WO.displayName=goe;var HO="MenuRadioGroup",[yoe,xoe]=Gl(HO,{value:void 0,onValueChange:()=>{}}),qO=p.forwardRef((t,e)=>{const{value:n,onValueChange:r,...s}=t,o=zt(r);return i.jsx(yoe,{scope:t.__scopeMenu,value:n,onValueChange:o,children:i.jsx(yS,{...s,ref:e})})});qO.displayName=HO;var GO="MenuRadioItem",KO=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=xoe(GO,t.__scopeMenu),o=n===s.value;return i.jsx(QO,{scope:t.__scopeMenu,checked:o,children:i.jsx(qx,{role:"menuitemradio","aria-checked":o,...r,ref:e,"data-state":vS(o),onSelect:we(r.onSelect,()=>{var a;return(a=s.onValueChange)==null?void 0:a.call(s,n)},{checkForDefaultPrevented:!1})})})});KO.displayName=GO;var xS="MenuItemIndicator",[QO,voe]=Gl(xS,{checked:!1}),YO=p.forwardRef((t,e)=>{const{__scopeMenu:n,forceMount:r,...s}=t,o=voe(xS,n);return i.jsx(yr,{present:r||_y(o.checked)||o.checked===!0,children:i.jsx(De.span,{...s,ref:e,"data-state":vS(o.checked)})})});YO.displayName=xS;var woe="MenuSeparator",ZO=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t;return i.jsx(De.div,{role:"separator","aria-orientation":"horizontal",...r,ref:e})});ZO.displayName=woe;var boe="MenuArrow",XO=p.forwardRef((t,e)=>{const{__scopeMenu:n,...r}=t,s=Hx(n);return i.jsx(p_,{...s,...r,ref:e})});XO.displayName=boe;var _oe="MenuSub",[rle,JO]=Gl(_oe),Gd="MenuSubTrigger",e6=p.forwardRef((t,e)=>{const n=Kl(Gd,t.__scopeMenu),r=rm(Gd,t.__scopeMenu),s=JO(Gd,t.__scopeMenu),o=pS(Gd,t.__scopeMenu),a=p.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=o,u={__scopeMenu:t.__scopeMenu},d=p.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return p.useEffect(()=>d,[d]),p.useEffect(()=>{const h=l.current;return()=>{window.clearTimeout(h),c(null)}},[l,c]),i.jsx(fS,{asChild:!0,...u,children:i.jsx(zO,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":r6(n.open),...t,ref:Uy(e,s.onTriggerChange),onClick:h=>{var m;(m=t.onClick)==null||m.call(t,h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:we(t.onPointerMove,bf(h=>{o.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!n.open&&!a.current&&(o.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{n.onOpenChange(!0),d()},100))})),onPointerLeave:we(t.onPointerLeave,bf(h=>{var g,_;d();const m=(g=n.content)==null?void 0:g.getBoundingClientRect();if(m){const v=(_=n.content)==null?void 0:_.dataset.side,x=v==="right",y=x?-5:5,w=m[x?"left":"right"],j=m[x?"right":"left"];o.onPointerGraceIntentChange({area:[{x:h.clientX+y,y:h.clientY},{x:w,y:m.top},{x:j,y:m.top},{x:j,y:m.bottom},{x:w,y:m.bottom}],side:v}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>o.onPointerGraceIntentChange(null),300)}else{if(o.onTriggerLeave(h),h.defaultPrevented)return;o.onPointerGraceIntentChange(null)}})),onKeyDown:we(t.onKeyDown,h=>{var g;const m=o.searchRef.current!=="";t.disabled||m&&h.key===" "||noe[r.dir].includes(h.key)&&(n.onOpenChange(!0),(g=n.content)==null||g.focus(),h.preventDefault())})})})});e6.displayName=Gd;var t6="MenuSubContent",n6=p.forwardRef((t,e)=>{const n=FO(os,t.__scopeMenu),{forceMount:r=n.forceMount,...s}=t,o=Kl(os,t.__scopeMenu),a=rm(os,t.__scopeMenu),l=JO(t6,t.__scopeMenu),c=p.useRef(null),u=Je(e,c);return i.jsx(wf.Provider,{scope:t.__scopeMenu,children:i.jsx(yr,{present:r||o.open,children:i.jsx(wf.Slot,{scope:t.__scopeMenu,children:i.jsx(gS,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:d=>{var h;a.isUsingKeyboardRef.current&&((h=c.current)==null||h.focus()),d.preventDefault()},onCloseAutoFocus:d=>d.preventDefault(),onFocusOutside:we(t.onFocusOutside,d=>{d.target!==l.trigger&&o.onOpenChange(!1)}),onEscapeKeyDown:we(t.onEscapeKeyDown,d=>{a.onClose(),d.preventDefault()}),onKeyDown:we(t.onKeyDown,d=>{var g;const h=d.currentTarget.contains(d.target),m=roe[a.dir].includes(d.key);h&&m&&(o.onOpenChange(!1),(g=l.trigger)==null||g.focus(),d.preventDefault())})})})})})});n6.displayName=t6;function r6(t){return t?"open":"closed"}function _y(t){return t==="indeterminate"}function vS(t){return _y(t)?"indeterminate":t?"checked":"unchecked"}function joe(t){const e=document.activeElement;for(const n of t)if(n===e||(n.focus(),document.activeElement!==e))return}function Soe(t,e){return t.map((n,r)=>t[(e+r)%t.length])}function Noe(t,e,n){const s=e.length>1&&Array.from(e).every(u=>u===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let a=Soe(t,Math.max(o,0));s.length===1&&(a=a.filter(u=>u!==n));const c=a.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function Toe(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,a=e.length-1;o<e.length;a=o++){const l=e[o].x,c=e[o].y,u=e[a].x,d=e[a].y;c>r!=d>r&&n<(u-l)*(r-c)/(d-c)+l&&(s=!s)}return s}function Coe(t,e){if(!e)return!1;const n={x:t.clientX,y:t.clientY};return Toe(n,e)}function bf(t){return e=>e.pointerType==="mouse"?t(e):void 0}var Eoe=VO,koe=fS,Aoe=UO,Poe=BO,Ioe=yS,Roe=$O,Moe=qx,Doe=WO,Loe=qO,Ooe=KO,Voe=YO,Foe=ZO,Uoe=XO,Boe=e6,$oe=n6,wS="DropdownMenu",[zoe,sle]=gr(wS,[LO]),xr=LO(),[Woe,s6]=zoe(wS),i6=t=>{const{__scopeDropdownMenu:e,children:n,dir:r,open:s,defaultOpen:o,onOpenChange:a,modal:l=!0}=t,c=xr(e),u=p.useRef(null),[d=!1,h]=Zi({prop:s,defaultProp:o,onChange:a});return i.jsx(Woe,{scope:e,triggerId:ii(),triggerRef:u,contentId:ii(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(m=>!m),[h]),modal:l,children:i.jsx(Eoe,{...c,open:d,onOpenChange:h,dir:r,modal:l,children:n})})};i6.displayName=wS;var o6="DropdownMenuTrigger",a6=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=t,o=s6(o6,n),a=xr(n);return i.jsx(koe,{asChild:!0,...a,children:i.jsx(De.button,{type:"button",id:o.triggerId,"aria-haspopup":"menu","aria-expanded":o.open,"aria-controls":o.open?o.contentId:void 0,"data-state":o.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Uy(e,o.triggerRef),onPointerDown:we(t.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(o.onOpenToggle(),o.open||l.preventDefault())}),onKeyDown:we(t.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&o.onOpenToggle(),l.key==="ArrowDown"&&o.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});a6.displayName=o6;var Hoe="DropdownMenuPortal",l6=t=>{const{__scopeDropdownMenu:e,...n}=t,r=xr(e);return i.jsx(Aoe,{...r,...n})};l6.displayName=Hoe;var c6="DropdownMenuContent",u6=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=s6(c6,n),o=xr(n),a=p.useRef(!1);return i.jsx(Poe,{id:s.contentId,"aria-labelledby":s.triggerId,...o,...r,ref:e,onCloseAutoFocus:we(t.onCloseAutoFocus,l=>{var c;a.current||(c=s.triggerRef.current)==null||c.focus(),a.current=!1,l.preventDefault()}),onInteractOutside:we(t.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,d=c.button===2||u;(!s.modal||d)&&(a.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});u6.displayName=c6;var qoe="DropdownMenuGroup",Goe=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xr(n);return i.jsx(Ioe,{...s,...r,ref:e})});Goe.displayName=qoe;var Koe="DropdownMenuLabel",d6=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xr(n);return i.jsx(Roe,{...s,...r,ref:e})});d6.displayName=Koe;var Qoe="DropdownMenuItem",h6=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xr(n);return i.jsx(Moe,{...s,...r,ref:e})});h6.displayName=Qoe;var Yoe="DropdownMenuCheckboxItem",f6=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xr(n);return i.jsx(Doe,{...s,...r,ref:e})});f6.displayName=Yoe;var Zoe="DropdownMenuRadioGroup",Xoe=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xr(n);return i.jsx(Loe,{...s,...r,ref:e})});Xoe.displayName=Zoe;var Joe="DropdownMenuRadioItem",m6=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xr(n);return i.jsx(Ooe,{...s,...r,ref:e})});m6.displayName=Joe;var eae="DropdownMenuItemIndicator",p6=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xr(n);return i.jsx(Voe,{...s,...r,ref:e})});p6.displayName=eae;var tae="DropdownMenuSeparator",g6=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xr(n);return i.jsx(Foe,{...s,...r,ref:e})});g6.displayName=tae;var nae="DropdownMenuArrow",rae=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xr(n);return i.jsx(Uoe,{...s,...r,ref:e})});rae.displayName=nae;var sae="DropdownMenuSubTrigger",y6=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xr(n);return i.jsx(Boe,{...s,...r,ref:e})});y6.displayName=sae;var iae="DropdownMenuSubContent",x6=p.forwardRef((t,e)=>{const{__scopeDropdownMenu:n,...r}=t,s=xr(n);return i.jsx($oe,{...s,...r,ref:e,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});x6.displayName=iae;var oae=i6,aae=a6,lae=l6,v6=u6,w6=d6,b6=h6,_6=f6,j6=m6,S6=p6,N6=g6,T6=y6,C6=x6;const E6=oae,k6=aae,cae=p.forwardRef(({className:t,inset:e,children:n,...r},s)=>i.jsxs(T6,{ref:s,className:Ce("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...r,children:[n,i.jsx(LI,{className:"ml-auto"})]}));cae.displayName=T6.displayName;const uae=p.forwardRef(({className:t,...e},n)=>i.jsx(C6,{ref:n,className:Ce("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...e}));uae.displayName=C6.displayName;const bS=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>i.jsx(lae,{children:i.jsx(v6,{ref:r,sideOffset:e,className:Ce("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...n})}));bS.displayName=v6.displayName;const xh=p.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(b6,{ref:r,className:Ce("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e&&"pl-8",t),...n}));xh.displayName=b6.displayName;const dae=p.forwardRef(({className:t,children:e,checked:n,...r},s)=>i.jsxs(_6,{ref:s,className:Ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:n,...r,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(S6,{children:i.jsx(MI,{className:"h-4 w-4"})})}),e]}));dae.displayName=_6.displayName;const hae=p.forwardRef(({className:t,children:e,...n},r)=>i.jsxs(j6,{ref:r,className:Ce("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[i.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:i.jsx(S6,{children:i.jsx(RU,{className:"h-2 w-2 fill-current"})})}),e]}));hae.displayName=j6.displayName;const zb=p.forwardRef(({className:t,inset:e,...n},r)=>i.jsx(w6,{ref:r,className:Ce("px-2 py-1.5 text-sm font-semibold",e&&"pl-8",t),...n}));zb.displayName=w6.displayName;const Wb=p.forwardRef(({className:t,...e},n)=>i.jsx(N6,{ref:n,className:Ce("-mx-1 my-1 h-px bg-muted",t),...e}));Wb.displayName=N6.displayName;const fae=[{name:"Burble Word Game",path:"/burble",icon:"🎯",description:"Guess the hidden word"},{name:"Riddles",path:"/",icon:"🧩",description:"Brain teasers and puzzles"},{name:"Emoji Guess",path:"/emoji-guess",icon:"😊",description:"Decode emoji combinations"},{name:"Trivia",path:"/trivia",icon:"🧠",description:"General knowledge questions"},{name:"Animal Trivia",path:"/animal-trivia",icon:"🐾",description:"Test your animal knowledge"},{name:"School Trivia",path:"/school-trivia",icon:"📚",description:"Educational trivia questions"},{name:"Twenty Questions",path:"/ev-special",icon:"❓",description:"Are You My Valentine?"},{name:"Geo Guesser",path:"/geo-guesser",icon:"🌍",description:"Guess locations around the world"},{name:"Battle Arena",path:"/multiplayer",icon:"⚔️",description:"Multiplayer competition"},{name:"Audio Manager",path:"/audio-manager",icon:"🎵",description:"Manage your music collection"}];function mae(){const[t,e]=p.useState(!1);return i.jsxs(E6,{open:t,onOpenChange:e,children:[i.jsx(k6,{asChild:!0,children:i.jsxs(ee,{variant:"outline",size:"sm",className:"flex items-center gap-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white border-none hover:from-purple-600 hover:to-pink-600","data-testid":"button-games-menu",children:[i.jsx(FU,{className:"h-4 w-4"}),i.jsx(FI,{className:"h-4 w-4"}),"All Games"]})}),i.jsx(bS,{align:"start",className:"w-64 max-h-96 overflow-y-auto",children:i.jsxs("div",{className:"p-2",children:[i.jsx("h3",{className:"font-semibold text-sm text-gray-700 mb-2 px-2",children:"Choose Your Game"}),fae.map(n=>i.jsx(vt,{href:n.path,children:i.jsxs(xh,{className:"flex items-start gap-3 p-3 cursor-pointer hover:bg-purple-50 rounded-md","data-testid":`menu-item-${n.path.replace("/","")||"home"}`,children:[i.jsx("span",{className:"text-lg flex-shrink-0",children:n.icon}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("div",{className:"font-medium text-sm text-gray-900",children:n.name}),i.jsx("div",{className:"text-xs text-gray-500 mt-0.5",children:n.description})]})]})},n.path))]})})]})}function pae(){const[t]=Pf(),{user:e,isGuest:n,logoutMutation:r}=Rn(),{togglePopup:s,isPopupOpen:o,currentTrack:a,isPlaying:l}=Wx(),c=()=>{r.mutate()};return i.jsx("header",{className:"sticky top-0 z-50 w-full bg-white border-b border-light-gray shadow-sm",children:i.jsxs("div",{className:"container mx-auto px-4 py-3 flex justify-between items-center",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg w-8 h-8 flex items-center justify-center text-white mr-2",children:i.jsx("i",{className:"ri-game-fill text-lg"})}),i.jsx(vt,{href:"/",children:i.jsx("h1",{className:"text-xl font-bold font-poppins text-dark cursor-pointer",children:"Burble"})})]}),i.jsx("div",{className:"flex items-center gap-2",children:t!=="/auth"&&i.jsxs(i.Fragment,{children:[i.jsx(mae,{}),i.jsx(vt,{href:"/leaderboard",children:i.jsxs(ee,{variant:"ghost",className:"hidden sm:flex items-center gap-1",children:[i.jsx(si,{className:"h-4 w-4"}),"Leaderboard"]})}),i.jsxs(ee,{variant:"ghost",size:"icon",className:`relative ${o?"bg-purple-100 text-purple-600":""}`,onClick:s,"data-testid":"button-audio-toggle",title:o?"Close Audio Player":"Open Audio Player",children:[i.jsx($I,{className:"h-5 w-5"}),a&&i.jsx("div",{className:`absolute -top-1 -right-1 w-2 h-2 rounded-full ${l?"bg-green-500 animate-pulse":"bg-gray-400"}`})]}),e?i.jsxs(E6,{children:[i.jsx(k6,{asChild:!0,children:i.jsx(ee,{variant:"ghost",size:"icon",className:"rounded-full p-1",children:i.jsx(zh,{config:e.avatarConfig?JSON.parse(e.avatarConfig):null,username:e.username,profileImageUrl:e.profileImageUrl,size:32,className:"cursor-pointer"})})}),i.jsxs(bS,{align:"end",children:[i.jsx(zb,{children:"My Account"}),i.jsx(zb,{className:"font-normal text-sm text-muted-foreground",children:e.username}),i.jsx(Wb,{}),i.jsx(vt,{href:"/profile",children:i.jsxs(xh,{className:"cursor-pointer",children:[i.jsx(qU,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"My Profile"})]})}),i.jsx(vt,{href:"/profile?tab=settings",children:i.jsxs(xh,{className:"cursor-pointer",children:[i.jsx(HI,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Settings"})]})}),i.jsx(Wb,{}),i.jsxs(xh,{className:"cursor-pointer text-destructive focus:text-destructive",onClick:c,children:[i.jsx(OU,{className:"mr-2 h-4 w-4"}),i.jsx("span",{children:"Log out"})]})]})]}):n?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm text-muted-foreground hidden sm:inline",children:"Playing as guest"}),i.jsx(vt,{href:"/auth",children:i.jsxs(ee,{variant:"default",size:"sm",className:"flex items-center gap-1",children:[i.jsx(bT,{className:"h-4 w-4 mr-1"}),"Sign Up to Save Progress"]})})]}):i.jsx(vt,{href:"/auth",children:i.jsxs(ee,{variant:"outline",size:"sm",className:"flex items-center gap-1",children:[i.jsx(bT,{className:"h-4 w-4 mr-1"}),"Login"]})})]})})]})})}var A6=["PageUp","PageDown"],P6=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],I6={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},id="Slider",[Hb,gae,yae]=If(id),[R6,ile]=gr(id,[yae]),[xae,Gx]=R6(id),M6=p.forwardRef((t,e)=>{const{name:n,min:r=0,max:s=100,step:o=1,orientation:a="horizontal",disabled:l=!1,minStepsBetweenThumbs:c=0,defaultValue:u=[r],value:d,onValueChange:h=()=>{},onValueCommit:m=()=>{},inverted:g=!1,form:_,...v}=t,x=p.useRef(new Set),y=p.useRef(0),j=a==="horizontal"?vae:wae,[E=[],P]=Zi({prop:d,defaultProp:u,onChange:I=>{var A;(A=[...x.current][y.current])==null||A.focus(),h(I)}}),U=p.useRef(E);function T(I){const R=Nae(E,I);k(I,R)}function S(I){k(I,y.current)}function C(){const I=U.current[y.current];E[y.current]!==I&&m(E)}function k(I,R,{commit:A}={commit:!1}){const G=kae(o),ue=Aae(Math.round((I-r)/o)*o+r,G),B=rf(ue,[r,s]);P((q=[])=>{const O=jae(q,B,R);if(Eae(O,c*o)){y.current=O.indexOf(B);const F=String(O)!==String(q);return F&&A&&m(O),F?O:q}else return q})}return i.jsx(xae,{scope:t.__scopeSlider,name:n,disabled:l,min:r,max:s,valueIndexToChangeRef:y,thumbs:x.current,values:E,orientation:a,form:_,children:i.jsx(Hb.Provider,{scope:t.__scopeSlider,children:i.jsx(Hb.Slot,{scope:t.__scopeSlider,children:i.jsx(j,{"aria-disabled":l,"data-disabled":l?"":void 0,...v,ref:e,onPointerDown:we(v.onPointerDown,()=>{l||(U.current=E)}),min:r,max:s,inverted:g,onSlideStart:l?void 0:T,onSlideMove:l?void 0:S,onSlideEnd:l?void 0:C,onHomeKeyDown:()=>!l&&k(r,0,{commit:!0}),onEndKeyDown:()=>!l&&k(s,E.length-1,{commit:!0}),onStepKeyDown:({event:I,direction:R})=>{if(!l){const ue=A6.includes(I.key)||I.shiftKey&&P6.includes(I.key)?10:1,B=y.current,q=E[B],O=o*ue*R;k(q+O,B,{commit:!0})}}})})})})});M6.displayName=id;var[D6,L6]=R6(id,{startEdge:"left",endEdge:"right",size:"width",direction:1}),vae=p.forwardRef((t,e)=>{const{min:n,max:r,dir:s,inverted:o,onSlideStart:a,onSlideMove:l,onSlideEnd:c,onStepKeyDown:u,...d}=t,[h,m]=p.useState(null),g=Je(e,j=>m(j)),_=p.useRef(void 0),v=Ku(s),x=v==="ltr",y=x&&!o||!x&&o;function w(j){const E=_.current||h.getBoundingClientRect(),P=[0,E.width],T=_S(P,y?[n,r]:[r,n]);return _.current=E,T(j-E.left)}return i.jsx(D6,{scope:t.__scopeSlider,startEdge:y?"left":"right",endEdge:y?"right":"left",direction:y?1:-1,size:"width",children:i.jsx(O6,{dir:v,"data-orientation":"horizontal",...d,ref:g,style:{...d.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:j=>{const E=w(j.clientX);a==null||a(E)},onSlideMove:j=>{const E=w(j.clientX);l==null||l(E)},onSlideEnd:()=>{_.current=void 0,c==null||c()},onStepKeyDown:j=>{const P=I6[y?"from-left":"from-right"].includes(j.key);u==null||u({event:j,direction:P?-1:1})}})})}),wae=p.forwardRef((t,e)=>{const{min:n,max:r,inverted:s,onSlideStart:o,onSlideMove:a,onSlideEnd:l,onStepKeyDown:c,...u}=t,d=p.useRef(null),h=Je(e,d),m=p.useRef(void 0),g=!s;function _(v){const x=m.current||d.current.getBoundingClientRect(),y=[0,x.height],j=_S(y,g?[r,n]:[n,r]);return m.current=x,j(v-x.top)}return i.jsx(D6,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:i.jsx(O6,{"data-orientation":"vertical",...u,ref:h,style:{...u.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:v=>{const x=_(v.clientY);o==null||o(x)},onSlideMove:v=>{const x=_(v.clientY);a==null||a(x)},onSlideEnd:()=>{m.current=void 0,l==null||l()},onStepKeyDown:v=>{const y=I6[g?"from-bottom":"from-top"].includes(v.key);c==null||c({event:v,direction:y?-1:1})}})})}),O6=p.forwardRef((t,e)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:o,onHomeKeyDown:a,onEndKeyDown:l,onStepKeyDown:c,...u}=t,d=Gx(id,n);return i.jsx(De.span,{...u,ref:e,onKeyDown:we(t.onKeyDown,h=>{h.key==="Home"?(a(h),h.preventDefault()):h.key==="End"?(l(h),h.preventDefault()):A6.concat(P6).includes(h.key)&&(c(h),h.preventDefault())}),onPointerDown:we(t.onPointerDown,h=>{const m=h.target;m.setPointerCapture(h.pointerId),h.preventDefault(),d.thumbs.has(m)?m.focus():r(h)}),onPointerMove:we(t.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&s(h)}),onPointerUp:we(t.onPointerUp,h=>{const m=h.target;m.hasPointerCapture(h.pointerId)&&(m.releasePointerCapture(h.pointerId),o(h))})})}),V6="SliderTrack",F6=p.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=Gx(V6,n);return i.jsx(De.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:e})});F6.displayName=V6;var qb="SliderRange",U6=p.forwardRef((t,e)=>{const{__scopeSlider:n,...r}=t,s=Gx(qb,n),o=L6(qb,n),a=p.useRef(null),l=Je(e,a),c=s.values.length,u=s.values.map(m=>$6(m,s.min,s.max)),d=c>1?Math.min(...u):0,h=100-Math.max(...u);return i.jsx(De.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:l,style:{...t.style,[o.startEdge]:d+"%",[o.endEdge]:h+"%"}})});U6.displayName=qb;var Gb="SliderThumb",B6=p.forwardRef((t,e)=>{const n=gae(t.__scopeSlider),[r,s]=p.useState(null),o=Je(e,l=>s(l)),a=p.useMemo(()=>r?n().findIndex(l=>l.ref.current===r):-1,[n,r]);return i.jsx(bae,{...t,ref:o,index:a})}),bae=p.forwardRef((t,e)=>{const{__scopeSlider:n,index:r,name:s,...o}=t,a=Gx(Gb,n),l=L6(Gb,n),[c,u]=p.useState(null),d=Je(e,w=>u(w)),h=c?a.form||!!c.closest("form"):!0,m=u_(c),g=a.values[r],_=g===void 0?0:$6(g,a.min,a.max),v=Sae(r,a.values.length),x=m==null?void 0:m[l.size],y=x?Tae(x,_,l.direction):0;return p.useEffect(()=>{if(c)return a.thumbs.add(c),()=>{a.thumbs.delete(c)}},[c,a.thumbs]),i.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${_}% + ${y}px)`},children:[i.jsx(Hb.ItemSlot,{scope:t.__scopeSlider,children:i.jsx(De.span,{role:"slider","aria-label":t["aria-label"]||v,"aria-valuemin":a.min,"aria-valuenow":g,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...o,ref:d,style:g===void 0?{display:"none"}:t.style,onFocus:we(t.onFocus,()=>{a.valueIndexToChangeRef.current=r})})}),h&&i.jsx(_ae,{name:s??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:g},r)]})});B6.displayName=Gb;var _ae=t=>{const{value:e,...n}=t,r=p.useRef(null),s=A_(e);return p.useEffect(()=>{const o=r.current,a=window.HTMLInputElement.prototype,c=Object.getOwnPropertyDescriptor(a,"value").set;if(s!==e&&c){const u=new Event("input",{bubbles:!0});c.call(o,e),o.dispatchEvent(u)}},[s,e]),i.jsx("input",{style:{display:"none"},...n,ref:r,defaultValue:e})};function jae(t=[],e,n){const r=[...t];return r[n]=e,r.sort((s,o)=>s-o)}function $6(t,e,n){const o=100/(n-e)*(t-e);return rf(o,[0,100])}function Sae(t,e){return e>2?`Value ${t+1} of ${e}`:e===2?["Minimum","Maximum"][t]:void 0}function Nae(t,e){if(t.length===1)return 0;const n=t.map(s=>Math.abs(s-e)),r=Math.min(...n);return n.indexOf(r)}function Tae(t,e,n){const r=t/2,o=_S([0,50],[0,r]);return(r-o(e)*n)*n}function Cae(t){return t.slice(0,-1).map((e,n)=>t[n+1]-e)}function Eae(t,e){if(e>0){const n=Cae(t);return Math.min(...n)>=e}return!0}function _S(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function kae(t){return(String(t).split(".")[1]||"").length}function Aae(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}var z6=M6,Pae=F6,Iae=U6,Rae=B6;const Kb=p.forwardRef(({className:t,...e},n)=>i.jsxs(z6,{ref:n,className:Ce("relative flex w-full touch-none select-none items-center",t),...e,children:[i.jsx(Pae,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:i.jsx(Iae,{className:"absolute h-full bg-primary"})}),i.jsx(Rae,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));Kb.displayName=z6.displayName;function Mae(){const{currentTrack:t,isPlaying:e,volume:n,currentTime:r,duration:s,isPopupOpen:o,isMinimized:a,popupPosition:l,shuffle:c,repeat:u,playlist:d,currentIndex:h,play:m,pause:g,nextTrack:_,previousTrack:v,seek:x,setVolume:y,togglePopup:w,minimizePopup:j,maximizePopup:E,setPopupPosition:P,toggleShuffle:U,toggleRepeat:T}=Wx(),[S,C]=p.useState({isDragging:!1,startX:0,startY:0,offsetX:0,offsetY:0}),[k,I]=p.useState(!1),[R,A]=p.useState(.7),G=p.useRef(null),ue=p.useRef(null),B=Y=>{if(!Y||isNaN(Y))return"0:00";const ie=Math.floor(Y/60),te=Math.floor(Y%60);return`${ie}:${te.toString().padStart(2,"0")}`},q=Y=>{var te,le;if(a||!((te=ue.current)!=null&&te.contains(Y.target)))return;const ie=(le=G.current)==null?void 0:le.getBoundingClientRect();ie&&(C({isDragging:!0,startX:Y.clientX,startY:Y.clientY,offsetX:Y.clientX-ie.left,offsetY:Y.clientY-ie.top}),Y.preventDefault())},O=Y=>{if(!S.isDragging)return;const ie=Y.clientX-S.offsetX,te=Y.clientY-S.offsetY,le=window.innerWidth-(a?200:380),xe=window.innerHeight-(a?60:300);P({x:Math.max(0,Math.min(ie,le)),y:Math.max(0,Math.min(te,xe))})},F=()=>{C(Y=>({...Y,isDragging:!1}))};p.useEffect(()=>{if(S.isDragging)return document.addEventListener("mousemove",O),document.addEventListener("mouseup",F),()=>{document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",F)}},[S.isDragging]);const D=()=>{k?(y(R),I(!1)):(A(n),y(0),I(!0))},L=()=>{e?g():t&&m()},X=Y=>{const ie=Y[0];x(ie)},$=Y=>{const ie=Y[0]/100;y(ie),I(ie===0)},K=()=>{switch(u){case"one":return i.jsx(BU,{className:"h-4 w-4"});case"all":return i.jsx(TT,{className:"h-4 w-4"});default:return i.jsx(TT,{className:"h-4 w-4"})}};return o?a?i.jsx("div",{ref:G,className:"fixed z-50 bg-white/80 backdrop-blur-md border border-white/20 rounded-lg shadow-xl cursor-move",style:{left:l.x,top:l.y,width:"200px",height:"60px"},onMouseDown:q,"data-testid":"audio-player-minimized",children:i.jsxs("div",{className:"flex items-center justify-between h-full px-3",children:[i.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[i.jsx($I,{className:"h-4 w-4 text-purple-600 flex-shrink-0"}),i.jsx("div",{className:"text-xs truncate text-gray-700",children:t?`${t.title} - ${t.artist}`:"No track playing"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ee,{variant:"ghost",size:"sm",onClick:L,className:"h-6 w-6 p-0","data-testid":"button-play-pause-mini",children:e?i.jsx(ST,{className:"h-3 w-3"}):i.jsx(Fh,{className:"h-3 w-3"})}),i.jsx(ee,{variant:"ghost",size:"sm",onClick:E,className:"h-6 w-6 p-0","data-testid":"button-maximize",children:i.jsx(VU,{className:"h-3 w-3"})})]})]})}):i.jsxs("div",{ref:G,className:"fixed z-50 bg-white/90 backdrop-blur-md border border-white/30 rounded-2xl shadow-2xl",style:{left:l.x,top:l.y,width:"380px",minHeight:"280px"},"data-testid":"audio-player-popup",children:[i.jsxs("div",{ref:ue,className:"flex items-center justify-between p-4 cursor-move bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-t-2xl",onMouseDown:q,"data-testid":"audio-player-drag-handle",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(LU,{className:"h-4 w-4 text-gray-400"}),i.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Audio Player"})]}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(ee,{variant:"ghost",size:"sm",onClick:j,className:"h-6 w-6 p-0","data-testid":"button-minimize",children:i.jsx(UU,{className:"h-3 w-3"})}),i.jsx(ee,{variant:"ghost",size:"sm",onClick:w,className:"h-6 w-6 p-0","data-testid":"button-close-popup",children:i.jsx(zy,{className:"h-3 w-3"})})]})]}),i.jsxs("div",{className:"p-4 space-y-4",children:[t?i.jsxs("div",{className:"text-center space-y-1",children:[i.jsx("h3",{className:"font-semibold text-gray-800 text-sm truncate","data-testid":"text-track-title",children:t.title}),i.jsx("p",{className:"text-xs text-gray-600 truncate","data-testid":"text-track-artist",children:t.artist})]}):i.jsx("div",{className:"text-center text-gray-500 text-sm","data-testid":"text-no-track",children:"No track selected"}),t&&i.jsxs("div",{className:"space-y-2",children:[i.jsx(Kb,{value:[r],max:s||100,step:1,onValueChange:X,className:"w-full","data-testid":"slider-progress"}),i.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[i.jsx("span",{"data-testid":"text-current-time",children:B(r)}),i.jsx("span",{"data-testid":"text-total-duration",children:B(s)})]})]}),i.jsxs("div",{className:"flex items-center justify-center gap-3",children:[i.jsx(ee,{variant:"ghost",size:"sm",onClick:U,className:`h-8 w-8 p-0 ${c?"text-purple-600 bg-purple-100":"text-gray-600"}`,"data-testid":"button-shuffle",title:"Shuffle",children:i.jsx(qI,{className:"h-4 w-4"})}),i.jsx(ee,{variant:"ghost",size:"sm",onClick:v,className:"h-8 w-8 p-0",disabled:d.length===0,"data-testid":"button-previous",children:i.jsx(zU,{className:"h-4 w-4"})}),i.jsx(ee,{variant:"default",size:"sm",onClick:L,className:"h-10 w-10 p-0 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600",disabled:!t,"data-testid":"button-play-pause",children:e?i.jsx(ST,{className:"h-5 w-5"}):i.jsx(Fh,{className:"h-5 w-5 ml-0.5"})}),i.jsx(ee,{variant:"ghost",size:"sm",onClick:_,className:"h-8 w-8 p-0",disabled:d.length===0,"data-testid":"button-next",children:i.jsx(WU,{className:"h-4 w-4"})}),i.jsx(ee,{variant:"ghost",size:"sm",onClick:T,className:`h-8 w-8 p-0 ${u!=="none"?"text-purple-600 bg-purple-100":"text-gray-600"}`,"data-testid":"button-repeat",title:`Repeat: ${u}`,children:K()})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ee,{variant:"ghost",size:"sm",onClick:D,className:"h-6 w-6 p-0","data-testid":"button-volume-toggle",children:k||n===0?i.jsx(GU,{className:"h-4 w-4"}):i.jsx(Uh,{className:"h-4 w-4"})}),i.jsx(Kb,{value:[k?0:n*100],max:100,step:1,onValueChange:$,className:"flex-1","data-testid":"slider-volume"})]}),d.length>0&&i.jsxs("div",{className:"text-center text-xs text-gray-500","data-testid":"text-playlist-info",children:["Track ",h+1," of ",d.length]})]})]}):null}function Gn({path:t,component:e}){const{user:n,isGuest:r,isLoading:s}=Rn();return i.jsx(mw,{path:t,children:()=>(console.log(`🛡️ ProtectedRoute ${t} - Auth State:`,{hasUser:!!n,isGuest:r,isLoading:s,username:(n==null?void 0:n.username)||"no-user",shouldAllow:!!(n||r),willRedirect:!n&&!r&&!s}),s?(console.log(`🛡️ ProtectedRoute ${t} - Showing loading...`),i.jsx("div",{className:"flex items-center justify-center min-h-screen",children:i.jsx(Ko,{className:"h-8 w-8 animate-spin text-border"})})):!n&&!r?(console.log(`🛡️ ProtectedRoute ${t} - Redirecting to auth (no user, no guest)`),i.jsx(WP,{to:"/auth"})):(console.log(`🛡️ ProtectedRoute ${t} - Allowing access`),i.jsx(e,{})))})}function Dae(){return i.jsxs(kie,{children:[i.jsx(pae,{}),i.jsx("main",{className:"min-h-[calc(100vh-64px)]",children:i.jsxs(t9,{children:[i.jsx(Gn,{path:"/",component:az}),i.jsx(Gn,{path:"/ev-special",component:j7}),i.jsx(Gn,{path:"/submit-riddle",component:VH}),i.jsx(Gn,{path:"/burble",component:FH}),i.jsx(Gn,{path:"/emoji-guess",component:gq}),i.jsx(Gn,{path:"/burblemons",component:Xie}),i.jsx(Gn,{path:"/solo-dungeon",component:Jie}),i.jsx(Gn,{path:"/trivia",component:jie}),i.jsx(Gn,{path:"/animal-trivia",component:Cie}),i.jsx(Gn,{path:"/audio-manager",component:Die}),i.jsx(Gn,{path:"/school-trivia",component:Lie}),i.jsx(Gn,{path:"/geo-guesser",component:Yie}),i.jsx(Gn,{path:"/multiplayer",component:KY}),i.jsx(Gn,{path:"/profile",component:die}),i.jsx(Gn,{path:"/leaderboard",component:gie}),i.jsx(Gn,{path:"/category/:id",component:_ie}),i.jsx(mw,{path:"/auth",component:use}),i.jsx(mw,{component:nz})]})}),i.jsx(Mae,{})]})}function Lae(){return p.useEffect(()=>{const t=document.createElement("link");return t.href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css",t.rel="stylesheet",document.head.appendChild(t),()=>{document.head.removeChild(t)}},[]),i.jsx(b9,{client:_s,children:i.jsx(sz,{children:i.jsx(ase,{children:i.jsx(JH,{children:i.jsxs(ez,{children:[i.jsx(kB,{}),i.jsx(Dae,{})]})})})})})}document.title="Burble - Brain Teasers & Riddles";RP(document.getElementById("root")).render(i.jsx(Lae,{}))});export default Oae();
